(function(n,t){"use strict";function ct(n){i.length||(at(n),vt(n));tt||(p("shBankingQuidget.QuidgetExecuted"),tt=!0)}function lt(){Array.from(document.querySelectorAll(".sh-tooltip")).forEach(n=>{n.remove()});Array.from(document.querySelectorAll("[data-tip]")).forEach(n=>{let t=document.createElement("div");t.classList.add("sh-tooltip");t.innerHTML=n.getAttribute("data-tip");n.appendChild(t);n.onmouseover=i=>{i.stopPropagation();let r=n.getBoundingClientRect(),u=t.getBoundingClientRect();t.style.top=r.bottom+2+"px";t.style.left=r.left<200?"10px":r.left+(r.width-u.width)/2+"px"};n.onmouseout=()=>{t.style.left="0px",t.style.top="0px"}})}function at(){var h=t.querySelectorAll("."+k),n,c,l,s,r,a;if(h.length){for(n=0,c=0;c<h.length;c++)if(l=`sh-quidget-${c}`,h[c].setAttribute("id",l),e[l]=h[c],h[c].dataset.content)try{s=JSON.parse(h[c].dataset.content.replaceAll("*",'"'));i[n]={};i[n].id=l;u[n]={};for(r in s)i[n][r]=r==="rp"&&s[r]=="8"?"18":s[r],r==="src"&&(u[n].s=s[r],o||(o=s[r])),r==="rp"&&(u[n].rp=s[r]=="8"?"18":s[r]),r==="vsk"&&(u[n].vsk=s[r]),r==="vk"&&(u[n].vk=s[r]),r==="amount"&&(u[n].a=s[r]),r==="term"&&(u[n].rpt=s[r]);s.api&&typeof quidget_srcs!="undefined"&&quidget_srcs[s.api]&&(i[n].src=quidget_srcs[s.api],u[n].s=quidget_srcs[s.api],o=quidget_srcs[s.api]);3>Object.keys(u[n]).length&&(ut("Quidget: Unable to process the below tag:"),h[n].outerHTML?f(h[n].outerHTML):f(h[n]),u[n].s||f("Account SRC not found"),u[n].vk||f("Vendor key not found"),u[n].vsk||f("Vendor service key not found"),delete u[n],ft());n++}catch(v){ut("Quidget: Unable to process the below tag. Please check the data-content attribute for syntax errors. If the issue persists, delete this tag and generate a new tag.");h[c].outerHTML?f(h[c].outerHTML):f(h[c]);h[c].remove();ft()}a=["s","rp","vk","vsk","a","rpt"];u=u.filter((n=>t=>(t=>!n.has(t)&&n.add(t))(a.map(n=>t[n]).join("|")))(new Set))}}function vt(n){if(typeof quidget_options!="undefined"&&(a=quidget_options),u.length>0){const t=async()=>{const n=await fetch(ti(u));return await n.json()};t().then(t=>{t&&t.listingset&&t.listingset.listing&&(r=t.listingset.listing,t.listingset.disclaimer&&(d=t.listingset.disclaimer)),it(n),p("quidget_loaded"),rt(t.payloadId,t.requestId)}).catch(()=>{f("Something is wrong!"),u=[],it(n),rt()})}}function it(){var n,o;s=yt();for(let s=0;s<i.length;s++){var u=i[s].field,t=e[i[s].id],f=!1;for(n=0;n<r.length;n++)if(r[n]&&i[s].term&&r[n].rate_term_key==i[s].term&&r[n].vendorServiceKey==i[s].vsk&&r[n].src==i[s].src||r[n]&&!i[s].term&&r[n].vendorServiceKey==i[s].vsk&&r[n].src==i[s].src){o=r[n].is_active;u.indexOf("ImageUrl")!==-1?pt(s,n,t,u):t.tagName==="A"?wt(s,n,t,u):bt(s,n,t,u);f=!0;o?t.classList.add(ot):t.classList.add(st);break}t.classList.remove(k);t.classList.add(et);lt();f||ii(t)}}function yt(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,n=>(n^crypto.getRandomValues(new Uint8Array(1))[0]&15>>n/4).toString(16))}function pt(n,t,i,u){var f="",e;switch(u){case"LogoImageUrl":r[t].raw_logo?(e=r[t].raw_logo,i.hasAttribute("width")&&(e+="&w="+i.getAttribute("width")),i.setAttribute("src",e)):i.remove();i.removeAttribute("style");break;case"ImpPixelImageUrl":r[t].imp_pixel?(e=r[t].imp_pixel,i.setAttribute("src",e)):i.remove();break;case"ProductUrlWithLogoImageUrl":r[t].product_url&&(f=r[t].product_url);kt(i,f,t,n)}f=v(f,t,n);dt(i,t);i.tagName!=="A"||f||(i.hasChildNodes()?(i.children[0].id=i.id,i.replaceWith(...i.childNodes)):i.remove())}function wt(n,t,i){var u="";r[t].product_url&&(u=r[t].product_url);u=v(u,t,n);gt(n,i,u,"",t);ni(n,i);u||i.replaceWith(i.innerHTML)}function bt(n,t,u,f){for(var o=f.split(","),h=r[t].is_active,e=typeof r[t][o[0]]!="undefined"&&r[t][o[0]]!==""?r[t][o[0]]:"",s=1;s<o.length;s++)typeof e!="undefined"&&e!==""&&(e+=" "),i[n].middleText&&s==1&&o.length>1&&(e+=i[n].middleText),typeof r[t][o[s]]!="undefined"&&r[t][o[s]]!==""&&(e+=" "+r[t][o[s]]);if(o=="disclaimer"&&(e=d),o.length==1&&["min_balance_for_apy","min_deposit","monthly_fee","min_balance_to_open","nsf_fees","other_atm_fees"].includes(o[0])&&(e=e.replace(".00","").replace(/\B(?=(\d{3})+(?!\d))/g,",")),o=="rates_last_updated"&&h==!0){const i=new Date,r=i.getFullYear();let n=i.getMonth()+1,t=i.getDate();t<10&&(t="0"+t);n<10&&(n="0"+n);e=n+"/"+t+"/"+r}e=typeof e!="undefined"&&e!==""?y(n,e,t):i[n].defaultValue?y(n,i[n].defaultValue,t):"";u.innerHTML=e}function kt(n,t,i,u){var f=r[i].raw_logo;t=v(t,i,u);f&&n.hasChildNodes()&&(n.children[0].hasAttribute("width")&&(f+="&w="+n.children[0].getAttribute("width")),n.children[0].setAttribute("src",f),n.children[0].removeAttribute("style"));f?(t.indexOf("&qurId=")!==-1&&(t=t.replace("&qurId=","&qdg=1"),t+="&qurId="+s,t+="&ref="+encodeURIComponent(window.location.href.split("?")[0])),n.setAttribute("href",t)):n.hasChildNodes()&&(n.children[0].id=n.id,n.replaceWith(...n.childNodes))}function dt(n,t){var i="",u;n.tagName==="IMG"?i=n:n.hasChildNodes()&&n.children[0].tagName==="IMG"&&(i=n.children[0]);i&&i.hasAttribute("alt")&&(u=i.getAttribute("alt"),r[t][u]&&i.setAttribute("alt",r[t][u]))}function gt(n,t,i,r,u){var f=y(n,r,u);f&&(t.innerHTML=f);i.indexOf("&qurId=")!==-1&&(i=i.replace("&qurId=","&qdg=1"),i+="&qurId="+s,i+="&ref="+encodeURIComponent(window.location.href.split("?")[0]));t.setAttribute("href",i)}function v(n,t,u){var f=r[t].is_active,e=n;return f===!1&&(n="",a.hasOwnProperty("inactive_cards_link_to_reviews")&&a.inactive_cards_link_to_reviews.toLowerCase()=="true"&&(n=e)),n!==""&&typeof i[u].field!="undefined"&&((n.indexOf("&var1=")==-1&&typeof quidget_tracking_query!="undefined"&&quidget_tracking_query.var1||i[u].var1)&&(n=h(n,"var1",u)),(n.indexOf("&var2=")==-1&&typeof quidget_tracking_query!="undefined"&&quidget_tracking_query.var2||i[u].var2)&&(n=h(n,"var2",u)),(n.indexOf("&var3=")==-1&&typeof quidget_tracking_query!="undefined"&&quidget_tracking_query.var3||i[u].var3)&&(n=h(n,"var3",u)),(n.indexOf("&trn_id=")==-1&&typeof quidget_tracking_query!="undefined"&&quidget_tracking_query.trn_id||i[u].trn_id)&&(n=h(n,"trn_id",u)),(n.indexOf("&clk=")==-1&&typeof quidget_tracking_query!="undefined"&&quidget_tracking_query.clk||i[u].clk)&&(n=h(n,"clk",u))),n}function h(n,t,r){let u="",f=i[r][t];return typeof quidget_tracking_query!="undefined"&&f?u=f?"&"+t+"="+quidget_tracking_query[t]+"_"+f:"&"+t+"="+quidget_tracking_query[t]:f&&(u="&"+t+"="+f),n.indexOf("&qurId=")!==-1?n=n.replace("&qurId=",u+"&qurId="):n+=n.indexOf("?")!==-1?u:"?"+u,n}function y(n,t,u){var f,e;if(i[n].linkText&&r[u][i[n].linkText]?t=r[u][i[n].linkText]:i[n].linkText&&(t=i[n].linkText),i[n].prependText&&(t=i[n].prependText+" "+t),i[n].appendText&&(t+=" "+i[n].appendText),i[n].case)switch(i[n].case){case"u":t=t.toUpperCase();break;case"l":t=t.toLowerCase();break;case"uf":t=t.charAt(0).toUpperCase()+t.toLowerCase().slice(1);break;case"uw":for(f=t.toLowerCase().split(" "),e=0;e<f.length;e++)f[e]=f[e].charAt(0).toUpperCase()+f[e].substring(1);t=f.join(" ")}return i[n].removeText&&(t=t.replaceAll(i[n].removeText,"")),typeof t!="undefined"&&t!==""&&i[n].di&&i[n].di==1&&r[u].disclosure&&(t+='<span class="sh-bnk-disclaimer" data-tip="'+r[u].disclosure.replace(/"/g,"'")+'">*<\/span>'),t}function ni(n,t){i[n].linkRel&&t.setAttribute("rel",i[n].linkRel);i[n].linkTarget&&t.setAttribute("target",i[n].linkTarget)}function ti(){var t,n;if(u){for(t in u)delete u[t].s,delete u[t].a;return n=g+"?src="+o+"&qjc="+encodeURIComponent(JSON.stringify(u)),window.location&&typeof window.location.hostname!="undefined"&&(n+="&qref="+window.location.hostname),window.location.href.indexOf("qmpdebug")>-1&&(n+="&debug=1"),n}return g}function ii(n){n.remove()}function rt(n="",t=""){var u={},f,e,r,h;if(u.qplId=n,u.qrid=t,u.qurid=s,typeof i!="undefined"){f=[];for(e in i)r={},r.s=o,r.rp=i[e].rp,r.vk=i[e].vk,r.vsk=i[e].vsk,r.a=i[e].amount,r.rpt=i[e].term,r.f=i[e].field,f.push(r);h=["s","rp","vk","vsk","a","rpt","f"];f=f.filter((n=>t=>(t=>!n.has(t)&&n.add(t))(h.map(n=>t[n]).join("|")))(new Set));f=Object.assign({},f);u.plchldrs=JSON.stringify(f)}typeof quidget_tracking_query!="undefined"&&(u.qtrk=JSON.stringify(quidget_tracking_query));window.location&&typeof window.location.href!="undefined"&&(u.ref=window.location.href);document.referrer&&(u.refFormLink=document.referrer);ri(ht,u,null)}function ri(n,t,i){var r=new XMLHttpRequest,u;r.open("POST",n,!0);r.setRequestHeader("Content-Type","application/json; charset=UTF-8");u=JSON.stringify(t);typeof i=="function"&&(r.onreadystatechange=function(){if(r.readyState===XMLHttpRequest.DONE){var n=r.status;n===0||n>=200&&n<400?i(r.responseText):p("QuidgetTrackingRequestFailed",{})}});r.send(u)}function p(n,t){var i=new Event(n);t&&(i.data=t);window.dispatchEvent(i)}function ut(){console.hasOwnProperty("group")&&typeof console.group=="function"&&console.group.apply(this,arguments)}function f(n){console.warn(n)}function ft(){console.hasOwnProperty("groupEnd")&&typeof console.groupEnd=="function"&&console.groupEnd()}function ui(){e=[];i=[];u=[];r={};s=""}if(typeof n.shBankingQuidget=="undefined"){var l={},w="https://www.nextinsure.com",b="/ListingDisplay/",k="sh-bnk-quidget-markup",et="sh-bnk-quidget-rendered",ot="sh-bnk-active-client",st="sh-bnk-inactive-client",e=[],i=[],a={},u=[],o="",r={},d="",g=w+b+"quidget",ht=w+b+"qjtrk",s="",nt=!1,tt=!1;l.initialize=function(n){if(typeof n=="undefined"&&e){var t=Object.keys(e);t&&t.length>0&&ui()}typeof n=="undefined"&&(console.log("Banking Quidget -> manual execution initiated"),n="Manual");ct(n)};n.addEventListener("shBankingQuidget.QuidgetExecuted",function(){nt||(setTimeout(function(){console.log("Banking Quidget -> second rendering initiated");l.initialize()},2e3),nt=!0)});n.shBankingQuidget=l;let c=document.createElement("style");c.type="text/css";c.textContent='.sh-tooltip::-webkit-scrollbar {width: 5px;}.sh-tooltip::-webkit-scrollbar-track {background: #f1f1f1;}.sh-tooltip::-webkit-scrollbar-thumb {background: #888;border-radius: 10px;}.sh-bnk-disclaimer:hover .sh-tooltip{opacity:1;visibility:visible}.sh-bnk-quidget-markup {visibility:hidden}.sh-bnk-disclaimer{cursor:pointer}.sh-tooltip {position: fixed;z-index: 9999;font-size: 12px;line-height: 12px;padding: 5px;background: #FFF;color: #666;border: 1px solid #aaa;border-radius: 2px;box-sizing: border-box;transition: opacity 0.3s, visibility 0s;visibility: hidden;opacity: 0;max-width: 300px;max-height: 200px; overflow-y:auto}.sh-bnk-disclaimer:after{position: relative;top:9px;width: 7px;height: 7px;background: #FFF;transform: rotate(45deg);border-top: 1px solid #aaa;border-left: 1px solid #aaa;z-index: 10000;content: "";display: none;right: 5px;}.sh-bnk-disclaimer:hover:after{display: inline-block}';document.head?document.head.appendChild(c):document.body&&document.body.appendChild(c)}})(this,this.document);window.addEventListener("DOMContentLoaded",()=>{(typeof quidget_manual_execute=="undefined"||quidget_manual_execute!==!0)&&(console.log("Banking Quidget -> dom content loaded initiated"),shBankingQuidget.initialize("DOMContentLoaded"))});window.addEventListener("load",()=>{(typeof quidget_manual_execute=="undefined"||quidget_manual_execute!==!0)&&(console.log("Banking Quidget -> window onload initiated"),shBankingQuidget.initialize("WindowOnload"))});
typeof Object.assign!="function"&&Object.defineProperty(Object,"assign",{value:function(n){"use strict";var u,i,t,r;if(n===null)throw new TypeError("Cannot convert undefined or null to object");for(u=Object(n),i=1;i<arguments.length;i++)if(t=arguments[i],t!==null)for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(u[r]=t[r]);return u},writable:!0,configurable:!0});
