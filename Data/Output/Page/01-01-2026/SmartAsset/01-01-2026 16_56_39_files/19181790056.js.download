/*! For license information please see client.min.js.LICENSE.txt */
(function(){var __webpack_modules__={7828:function(t,n,e){var i;!function(r,o){"use strict";var a="function",u="undefined",c="object",s="string",f="model",l="name",d="type",v="vendor",h="version",p="architecture",g="console",m="mobile",_="tablet",y="smarttv",w="wearable",b="embedded",E="Amazon",I="Apple",A="ASUS",T="BlackBerry",S="Browser",k="Chrome",R="Firefox",C="Google",N="Huawei",D="LG",O="Microsoft",x="Motorola",M="Opera",P="Samsung",L="Sharp",U="Sony",V="Xiaomi",F="Zebra",B="Facebook",z=function(t){for(var n={},e=0;e<t.length;e++)n[t[e].toUpperCase()]=t[e];return n},G=function(t,n){return typeof t===s&&-1!==j(n).indexOf(j(t))},j=function(t){return t.toLowerCase()},q=function(t,n){if(typeof t===s)return t=t.replace(/^\s\s*/,""),typeof n===u?t:t.substring(0,350)},H=function(t,n){for(var e,i,r,u,s,f,l=0;l<n.length&&!s;){var d=n[l],v=n[l+1];for(e=i=0;e<d.length&&!s&&d[e];)if(s=d[e++].exec(t))for(r=0;r<v.length;r++)f=s[++i],typeof(u=v[r])===c&&u.length>0?2===u.length?typeof u[1]==a?this[u[0]]=u[1].call(this,f):this[u[0]]=u[1]:3===u.length?typeof u[1]!==a||u[1].exec&&u[1].test?this[u[0]]=f?f.replace(u[1],u[2]):o:this[u[0]]=f?u[1].call(this,f,u[2]):o:4===u.length&&(this[u[0]]=f?u[3].call(this,f.replace(u[1],u[2])):o):this[u]=f||o;l+=2}},Y=function(t,n){for(var e in n)if(typeof n[e]===c&&n[e].length>0){for(var i=0;i<n[e].length;i++)if(G(n[e][i],t))return"?"===e?o:e}else if(G(n[e],t))return"?"===e?o:e;return t},$={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},K={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[h,[l,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[h,[l,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[l,h],[/opios[\/ ]+([\w\.]+)/i],[h,[l,M+" Mini"]],[/\bopr\/([\w\.]+)/i],[h,[l,M]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[l,h],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[h,[l,"UC"+S]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[h,[l,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[h,[l,"WeChat"]],[/konqueror\/([\w\.]+)/i],[h,[l,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[h,[l,"IE"]],[/yabrowser\/([\w\.]+)/i],[h,[l,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[l,/(.+)/,"$1 Secure "+S],h],[/\bfocus\/([\w\.]+)/i],[h,[l,R+" Focus"]],[/\bopt\/([\w\.]+)/i],[h,[l,M+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[h,[l,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[h,[l,"Dolphin"]],[/coast\/([\w\.]+)/i],[h,[l,M+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[h,[l,"MIUI "+S]],[/fxios\/([-\w\.]+)/i],[h,[l,R]],[/\bqihu|(qi?ho?o?|360)browser/i],[[l,"360 "+S]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[l,/(.+)/,"$1 "+S],h],[/(comodo_dragon)\/([\w\.]+)/i],[[l,/_/g," "],h],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[l,h],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[l],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[l,B],h],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[l,h],[/\bgsa\/([\w\.]+) .*safari\//i],[h,[l,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[h,[l,k+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[l,k+" WebView"],h],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[h,[l,"Android "+S]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[l,h],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[h,[l,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[h,l],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[l,[h,Y,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[l,h],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[l,"Netscape"],h],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[h,[l,R+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[l,h],[/(cobalt)\/([\w\.]+)/i],[l,[h,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[p,"amd64"]],[/(ia32(?=;))/i],[[p,j]],[/((?:i[346]|x)86)[;\)]/i],[[p,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[p,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[p,"armhf"]],[/windows (ce|mobile); ppc;/i],[[p,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[p,/ower/,"",j]],[/(sun4\w)[;\)]/i],[[p,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[p,j]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[f,[v,P],[d,_]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[f,[v,P],[d,m]],[/\((ip(?:hone|od)[\w ]*);/i],[f,[v,I],[d,m]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[f,[v,I],[d,_]],[/(macintosh);/i],[f,[v,I]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[f,[v,L],[d,m]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[f,[v,N],[d,_]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[f,[v,N],[d,m]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[f,/_/g," "],[v,V],[d,m]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[f,/_/g," "],[v,V],[d,_]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[f,[v,"OPPO"],[d,m]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[f,[v,"Vivo"],[d,m]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[f,[v,"Realme"],[d,m]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[f,[v,x],[d,m]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[f,[v,x],[d,_]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[f,[v,D],[d,_]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[f,[v,D],[d,m]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[f,[v,"Lenovo"],[d,_]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[f,/_/g," "],[v,"Nokia"],[d,m]],[/(pixel c)\b/i],[f,[v,C],[d,_]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[f,[v,C],[d,m]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[f,[v,U],[d,m]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[f,"Xperia Tablet"],[v,U],[d,_]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[f,[v,"OnePlus"],[d,m]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[f,[v,E],[d,_]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[f,/(.+)/g,"Fire Phone $1"],[v,E],[d,m]],[/(playbook);[-\w\),; ]+(rim)/i],[f,v,[d,_]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[f,[v,T],[d,m]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[f,[v,A],[d,_]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[f,[v,A],[d,m]],[/(nexus 9)/i],[f,[v,"HTC"],[d,_]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[v,[f,/_/g," "],[d,m]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[f,[v,"Acer"],[d,_]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[f,[v,"Meizu"],[d,m]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[v,f,[d,m]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[v,f,[d,_]],[/(surface duo)/i],[f,[v,O],[d,_]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[f,[v,"Fairphone"],[d,m]],[/(u304aa)/i],[f,[v,"AT&T"],[d,m]],[/\bsie-(\w*)/i],[f,[v,"Siemens"],[d,m]],[/\b(rct\w+) b/i],[f,[v,"RCA"],[d,_]],[/\b(venue[\d ]{2,7}) b/i],[f,[v,"Dell"],[d,_]],[/\b(q(?:mv|ta)\w+) b/i],[f,[v,"Verizon"],[d,_]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[f,[v,"Barnes & Noble"],[d,_]],[/\b(tm\d{3}\w+) b/i],[f,[v,"NuVision"],[d,_]],[/\b(k88) b/i],[f,[v,"ZTE"],[d,_]],[/\b(nx\d{3}j) b/i],[f,[v,"ZTE"],[d,m]],[/\b(gen\d{3}) b.+49h/i],[f,[v,"Swiss"],[d,m]],[/\b(zur\d{3}) b/i],[f,[v,"Swiss"],[d,_]],[/\b((zeki)?tb.*\b) b/i],[f,[v,"Zeki"],[d,_]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[v,"Dragon Touch"],f,[d,_]],[/\b(ns-?\w{0,9}) b/i],[f,[v,"Insignia"],[d,_]],[/\b((nxa|next)-?\w{0,9}) b/i],[f,[v,"NextBook"],[d,_]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[v,"Voice"],f,[d,m]],[/\b(lvtel\-)?(v1[12]) b/i],[[v,"LvTel"],f,[d,m]],[/\b(ph-1) /i],[f,[v,"Essential"],[d,m]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[f,[v,"Envizen"],[d,_]],[/\b(trio[-\w\. ]+) b/i],[f,[v,"MachSpeed"],[d,_]],[/\btu_(1491) b/i],[f,[v,"Rotor"],[d,_]],[/(shield[\w ]+) b/i],[f,[v,"Nvidia"],[d,_]],[/(sprint) (\w+)/i],[v,f,[d,m]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[v,O],[d,m]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[f,[v,F],[d,_]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[f,[v,F],[d,m]],[/smart-tv.+(samsung)/i],[v,[d,y]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[v,P],[d,y]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[v,D],[d,y]],[/(apple) ?tv/i],[v,[f,I+" TV"],[d,y]],[/crkey/i],[[f,k+"cast"],[v,C],[d,y]],[/droid.+aft(\w)( bui|\))/i],[f,[v,E],[d,y]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[f,[v,L],[d,y]],[/(bravia[\w ]+)( bui|\))/i],[f,[v,U],[d,y]],[/(mitv-\w{5}) bui/i],[f,[v,V],[d,y]],[/Hbbtv.*(technisat) (.*);/i],[v,f,[d,y]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[v,q],[f,q],[d,y]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[v,f,[d,g]],[/droid.+; (shield) bui/i],[f,[v,"Nvidia"],[d,g]],[/(playstation [345portablevi]+)/i],[f,[v,U],[d,g]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[f,[v,O],[d,g]],[/((pebble))app/i],[v,f,[d,w]],[/droid.+; (glass) \d/i],[f,[v,C],[d,w]],[/droid.+; (wt63?0{2,3})\)/i],[f,[v,F],[d,w]],[/(quest( 2| pro)?)/i],[f,[v,B],[d,w]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[v,[d,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[f,[d,m]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[f,[d,_]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,_]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[d,m]],[/(android[-\w\. ]{0,9});.+buil/i],[f,[v,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[h,[l,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[h,[l,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[l,h],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[h,l]],os:[[/microsoft (windows) (vista|xp)/i],[l,h],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[l,[h,Y,$]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[l,"Windows"],[h,Y,$]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[h,/_/g,"."],[l,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[l,"Mac OS"],[h,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[h,l],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[l,h],[/\(bb(10);/i],[h,[l,T]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[h,[l,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[h,[l,R+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[h,[l,"webOS"]],[/crkey\/([\d\.]+)/i],[h,[l,k+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[l,"Chromium OS"],h],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[l,h],[/(sunos) ?([\w\.\d]*)/i],[[l,"Solaris"],h],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[l,h]]},W=function(t,n){if(typeof t===c&&(n=t,t=o),!(this instanceof W))return new W(t,n).getResult();var e=t||(typeof r!==u&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),i=typeof r!==u&&r.navigator&&r.navigator.userAgentData?r.navigator.userAgentData:o,a=n?function(t,n){var e={};for(var i in t)n[i]&&n[i].length%2==0?e[i]=n[i].concat(t[i]):e[i]=t[i];return e}(K,n):K;return this.getBrowser=function(){var t,n={};return n[l]=o,n[h]=o,H.call(n,e,a.browser),n.major=typeof(t=n.version)===s?t.replace(/[^\d\.]/g,"").split(".")[0]:o,n},this.getCPU=function(){var t={};return t[p]=o,H.call(t,e,a.cpu),t},this.getDevice=function(){var t={};return t[v]=o,t[f]=o,t[d]=o,H.call(t,e,a.device),!t[d]&&i&&i.mobile&&(t[d]=m),t},this.getEngine=function(){var t={};return t[l]=o,t[h]=o,H.call(t,e,a.engine),t},this.getOS=function(){var t={};return t[l]=o,t[h]=o,H.call(t,e,a.os),!t[l]&&i&&"Unknown"!=i.platform&&(t[l]=i.platform.replace(/chrome/i,"Chromium").replace(/mac/i,"Mac ")),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return e},this.setUA=function(t){return e=typeof t===s&&t.length>350?q(t,350):t,this},this.setUA(e),this};W.VERSION="0.7.33",W.BROWSER=z([l,h,"major"]),W.CPU=z([p]),W.DEVICE=z([f,v,d,g,m,y,_,w,b]),W.ENGINE=W.OS=z([l,h]),typeof n!==u?(t.exports&&(n=t.exports=W),n.UAParser=W):e.amdO?(i=function(){return W}.call(n,e,n,t))===o||(t.exports=i):typeof r!==u&&(r.UAParser=W)}("object"==typeof window?window:this)},1504:function(t,n,e){var i=e(6632)(),r=e(2388);t.exports=function(t,n){function e(n){if(!(this instanceof e))return new e(n);try{throw new Error(n)}catch(o){o.name=t,this.stack=o.stack}i&&this.stack&&(this.stack=r(this.stack,t,n)),this.message=n||"",this.name=t}return e.prototype=new(n||Error),e.prototype.constructor=e,e.prototype.inspect=function(){return this.message?"["+t+": "+this.message+"]":"["+t+"]"},e.prototype.name=t,e}},2388:function(t){"use strict";t.exports=function(t,n,e){var i=n;return e&&(i+=": "+e),t=i+t.slice(t.indexOf("\n"))}},6632:function(t){"use strict";t.exports=function(){var t=new Error("yep");return!!t.stack&&"Error: yep\n"===t.stack.substr(0,11)}},7785:function(t,n,e){t.exports=function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function n(t){return"function"==typeof t}undefined;var i=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},r=0,o=undefined,a=undefined,u=function(t,n){w[r]=t,w[r+1]=n,2===(r+=2)&&(a?a(b):I())};function c(t){a=t}function s(t){u=t}var f="undefined"!=typeof window?window:undefined,l=f||{},d=l.MutationObserver||l.WebKitMutationObserver,v="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){return function(){return process.nextTick(b)}}function g(){return void 0!==o?function(){o(b)}:y()}function m(){var t=0,n=new d(b),e=document.createTextNode("");return n.observe(e,{characterData:!0}),function(){e.data=t=++t%2}}function _(){var t=new MessageChannel;return t.port1.onmessage=b,function(){return t.port2.postMessage(0)}}function y(){var t=setTimeout;return function(){return t(b,1)}}var w=new Array(1e3);function b(){for(var t=0;t<r;t+=2)(0,w[t])(w[t+1]),w[t]=undefined,w[t+1]=undefined;r=0}function E(){try{undefined;var t=e(8260);return o=t.runOnLoop||t.runOnContext,g()}catch(n){return y()}}var I=undefined;function A(t,n){var e=arguments,i=this,r=new this.constructor(k);r[S]===undefined&&Q(r);var o,a=i._state;return a?(o=e[a-1],u((function(){return K(a,r,o,i._result)}))):j(i,r,t,n),r}function T(t){var n=this;if(t&&"object"==typeof t&&t.constructor===n)return t;var e=new n(k);return F(e,t),e}I=v?p():d?m():h?_():f===undefined?E():y();var S=Math.random().toString(36).substring(16);function k(){}var R=void 0,C=1,N=2,D=new H;function O(){return new TypeError("You cannot resolve a promise with itself")}function x(){return new TypeError("A promises callback cannot return that same promise.")}function M(t){try{return t.then}catch(n){return D.error=n,D}}function P(t,n,e,i){try{t.call(n,e,i)}catch(r){return r}}function L(t,n,e){u((function(t){var i=!1,r=P(e,n,(function(e){i||(i=!0,n!==e?F(t,e):z(t,e))}),(function(n){i||(i=!0,G(t,n))}),"Settle: "+(t._label||" unknown promise"));!i&&r&&(i=!0,G(t,r))}),t)}function U(t,n){n._state===C?z(t,n._result):n._state===N?G(t,n._result):j(n,undefined,(function(n){return F(t,n)}),(function(n){return G(t,n)}))}function V(t,e,i){e.constructor===t.constructor&&i===A&&e.constructor.resolve===T?U(t,e):i===D?(G(t,D.error),D.error=null):i===undefined?z(t,e):n(i)?L(t,e,i):z(t,e)}function F(n,e){n===e?G(n,O()):t(e)?V(n,e,M(e)):z(n,e)}function B(t){t._onerror&&t._onerror(t._result),q(t)}function z(t,n){t._state===R&&(t._result=n,t._state=C,0!==t._subscribers.length&&u(q,t))}function G(t,n){t._state===R&&(t._state=N,t._result=n,u(B,t))}function j(t,n,e,i){var r=t._subscribers,o=r.length;t._onerror=null,r[o]=n,r[o+C]=e,r[o+N]=i,0===o&&t._state&&u(q,t)}function q(t){var n=t._subscribers,e=t._state;if(0!==n.length){for(var i=undefined,r=undefined,o=t._result,a=0;a<n.length;a+=3)i=n[a],r=n[a+e],i?K(e,i,r,o):r(o);t._subscribers.length=0}}function H(){this.error=null}var Y=new H;function $(t,n){try{return t(n)}catch(e){return Y.error=e,Y}}function K(t,e,i,r){var o=n(i),a=undefined,u=undefined,c=undefined,s=undefined;if(o){if((a=$(i,r))===Y?(s=!0,u=a.error,a.error=null):c=!0,e===a)return void G(e,x())}else a=r,c=!0;e._state!==R||(o&&c?F(e,a):s?G(e,u):t===C?z(e,a):t===N&&G(e,a))}function W(t,n){try{n((function(n){F(t,n)}),(function(n){G(t,n)}))}catch(e){G(t,e)}}var X=0;function J(){return X++}function Q(t){t[S]=X++,t._state=undefined,t._result=undefined,t._subscribers=[]}function Z(t,n){this._instanceConstructor=t,this.promise=new t(k),this.promise[S]||Q(this.promise),i(n)?(this._input=n,this.length=n.length,this._remaining=n.length,this._result=new Array(this.length),0===this.length?z(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&z(this.promise,this._result))):G(this.promise,tt())}function tt(){return new Error("Array Methods must be provided an Array")}function nt(t){return new Z(this,t).promise}function et(t){var n=this;return i(t)?new n((function(e,i){for(var r=t.length,o=0;o<r;o++)n.resolve(t[o]).then(e,i)})):new n((function(t,n){return n(new TypeError("You must pass an array to race."))}))}function it(t){var n=new this(k);return G(n,t),n}function rt(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ot(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function at(t){this[S]=J(),this._result=this._state=undefined,this._subscribers=[],k!==t&&("function"!=typeof t&&rt(),this instanceof at?W(this,t):ot())}function ut(){var t=undefined;if("undefined"!=typeof e.g)t=e.g;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(r){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;if(n){var i=null;try{i=Object.prototype.toString.call(n.resolve())}catch(r){}if("[object Promise]"===i&&!n.cast)return}t.Promise=at}return Z.prototype._enumerate=function(){for(var t=this.length,n=this._input,e=0;this._state===R&&e<t;e++)this._eachEntry(n[e],e)},Z.prototype._eachEntry=function(t,n){var e=this._instanceConstructor,i=e.resolve;if(i===T){var r=M(t);if(r===A&&t._state!==R)this._settledAt(t._state,n,t._result);else if("function"!=typeof r)this._remaining--,this._result[n]=t;else if(e===at){var o=new e(k);V(o,t,r),this._willSettleAt(o,n)}else this._willSettleAt(new e((function(n){return n(t)})),n)}else this._willSettleAt(i(t),n)},Z.prototype._settledAt=function(t,n,e){var i=this.promise;i._state===R&&(this._remaining--,t===N?G(i,e):this._result[n]=e),0===this._remaining&&z(i,this._result)},Z.prototype._willSettleAt=function(t,n){var e=this;j(t,undefined,(function(t){return e._settledAt(C,n,t)}),(function(t){return e._settledAt(N,n,t)}))},at.all=nt,at.race=et,at.resolve=T,at.reject=it,at._setScheduler=c,at._setAsap=s,at._asap=u,at.prototype={constructor:at,then:A,"catch":function(t){return this.then(null,t)}},at.polyfill=ut,at.Promise=at,at}()},1032:function(t){"use strict";t.exports=function(t){var n,e={};if(!(t instanceof Object)||Array.isArray(t))throw new Error("keyMirror(...): Argument must be an object.");for(n in t)t.hasOwnProperty(n)&&(e[n]=n);return e}},3693:function(t){"use strict";t.exports=function(t,n,e,i){Object.defineProperty(t,n,{get:function(){var t=e.call(this);return Object.defineProperty(this,n,{value:t,enumerable:!!i,writable:!0}),t},set:function(t){return Object.defineProperty(this,n,{value:t,enumerable:!!i,writable:!0}),t},enumerable:!!i,configurable:!0})}},5342:function(t){"use strict";var n=Element.prototype,e=n.matches||n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector;t.exports=function(t,n){if(e)return e.call(t,n);for(var i=t.parentNode.querySelectorAll(n),r=0;r<i.length;r++)if(i[r]==t)return!0;return!1}},5490:function(t){!function(){function n(t,n){var e,i,r,o,a,u,c,s;for(e=3&t.length,i=t.length-e,r=n,a=3432918353,u=461845907,s=0;s<i;)c=255&t.charCodeAt(s)|(255&t.charCodeAt(++s))<<8|(255&t.charCodeAt(++s))<<16|(255&t.charCodeAt(++s))<<24,++s,r=27492+(65535&(o=5*(65535&(r=(r^=c=(65535&(c=(c=(65535&c)*a+(((c>>>16)*a&65535)<<16)&4294967295)<<15|c>>>17))*u+(((c>>>16)*u&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(c=0,e){case 3:c^=(255&t.charCodeAt(s+2))<<16;case 2:c^=(255&t.charCodeAt(s+1))<<8;case 1:r^=c=(65535&(c=(c=(65535&(c^=255&t.charCodeAt(s)))*a+(((c>>>16)*a&65535)<<16)&4294967295)<<15|c>>>17))*u+(((c>>>16)*u&65535)<<16)&4294967295}return r^=t.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,(r^=r>>>16)>>>0}var e=n;e.v2=function(t,n){for(var e,i=t.length,r=n^i,o=0;i>=4;)e=1540483477*(65535&(e=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(e>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(e=1540483477*(65535&(e^=e>>>24))+((1540483477*(e>>>16)&65535)<<16)),i-=4,++o;switch(i){case 3:r^=(255&t.charCodeAt(o+2))<<16;case 2:r^=(255&t.charCodeAt(o+1))<<8;case 1:r=1540483477*(65535&(r^=255&t.charCodeAt(o)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0},e.v3=n,t.exports=e}()},5049:function(t,n,e){t=e.nmd(t),function(){var i,r="Expected a function",o="__lodash_hash_undefined__",a=1/0,u=9007199254740991,c="[object Arguments]",s="[object Array]",f="[object Boolean]",l="[object Date]",d="[object Error]",v="[object Function]",h="[object GeneratorFunction]",p="[object Map]",g="[object Number]",m="[object Object]",_="[object RegExp]",y="[object Set]",w="[object String]",b="[object Symbol]",E="[object WeakMap]",I="[object ArrayBuffer]",A="[object Float32Array]",T="[object Float64Array]",S="[object Int8Array]",k="[object Int16Array]",R="[object Int32Array]",C="[object Uint8Array]",N="[object Uint8ClampedArray]",D="[object Uint16Array]",O="[object Uint32Array]",x=/[&<>"'`]/g,M=RegExp(x.source),P=/\w*$/,L=/^\[object .+?Constructor\]$/,U=/^(?:0|[1-9]\d*)$/,V={};V[A]=V[T]=V[S]=V[k]=V[R]=V[C]=V[N]=V[D]=V[O]=!0,V[c]=V[s]=V[I]=V[f]=V[l]=V[d]=V[v]=V[p]=V[g]=V[m]=V[_]=V[y]=V[w]=V[E]=!1;var F={};F[c]=F[s]=F[I]=F[f]=F[l]=F[A]=F[T]=F[S]=F[k]=F[R]=F[p]=F[g]=F[m]=F[_]=F[y]=F[w]=F[b]=F[C]=F[N]=F[D]=F[O]=!0,F[d]=F[v]=F[E]=!1;var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},z={"function":!0,object:!0},G=z[typeof n]&&n&&!n.nodeType?n:i,j=z.object&&t&&!t.nodeType?t:i,q=j&&j.exports===G?G:i,H=rt(G&&j&&"object"==typeof e.g&&e.g),Y=rt(z[typeof self]&&self),$=rt(z[typeof window]&&window),K=rt(z[typeof this]&&this),W=H||$!==(K&&K.window)&&$||Y||K||Function("return this")();function X(t,n){return t.set(n[0],n[1]),t}function J(t,n){return t.add(n),t}function Q(t,n){return nt(In(t),Ae)}function Z(t,n){return!!t.length&&it(t,n,0)>-1}function tt(t,n,e){for(var i=-1,r=t.length;++i<r;)if(e(n,t[i]))return!0;return!1}function nt(t,n){for(var e=-1,i=n.length,r=t.length;++e<i;)t[r+e]=n[e];return t}function et(t,n,e){for(var r=-1,o=t.length;++r<o;){var a=t[r],u=n(a);if(null!=u&&(c===i?u==u:e(u,c)))var c=u,s=a}return s}function it(t,n,e){if(n!=n)return function(t,n,e){var i=t.length,r=n+(e?0:-1);for(;e?r--:++r<i;){var o=t[r];if(o!=o)return r}return-1}(t,e);for(var i=e-1,r=t.length;++i<r;)if(t[i]===n)return i;return-1}function rt(t){return t&&t.Object===Object?t:null}function ot(t){return B[t]}function at(t){var n=!1;if(null!=t&&"function"!=typeof t.toString)try{n=!!(t+"")}catch(e){}return n}function ut(t,n){return t="number"==typeof t||U.test(t)?+t:-1,n=null==n?u:n,t>-1&&t%1==0&&t<n}var ct=Array.prototype,st=Object.prototype,ft=Function.prototype.toString,lt=st.hasOwnProperty,dt=0,vt=ft.call(Object),ht=st.toString,pt=W._,gt=RegExp("^"+ft.call(lt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mt=W.Reflect,_t=W.Symbol,yt=W.Uint8Array,wt=mt?mt.enumerate:i,bt=Object.getPrototypeOf,Et=Object.getOwnPropertySymbols,It=Object.create,At=st.propertyIsEnumerable,Tt=ct.splice,St=W.isFinite,kt=Object.keys,Rt=Math.max,Ct=On(W,"Map"),Nt=On(W,"Set"),Dt=On(W,"WeakMap"),Ot=On(Object,"create"),xt=Ct?ft.call(Ct):"",Mt=Nt?ft.call(Nt):"",Pt=Dt?ft.call(Dt):"",Lt=_t?_t.prototype:i,Ut=Lt?Lt.valueOf:i;function Vt(t){if(ue(t)&&!Zn(t)){if(t instanceof Ft)return t;if(lt.call(t,"__wrapped__"))return function(t){var n=new Ft(t.u,t.l);return n.I=In(t.I),n}(t)}return new Ft(t)}function Ft(t,n){this.u=t,this.I=[],this.l=!!n}function Bt(){}function zt(t,n){return Ot?t[n]!==i:lt.call(t,n)}function Gt(t){var n=-1,e=t?t.length:0;for(this.clear();++n<e;){var i=t[n];this.set(i[0],i[1])}}function jt(t){var n=-1,e=t?t.length:0;for(this.A=new Gt;++n<e;)this.push(t[n])}function qt(t,n){var e=t.A;if(Ln(n)){var i=e.A;return("string"==typeof n?i.string:i.hash)[n]===o}return e.has(n)}function Ht(t){var n=-1,e=t?t.length:0;for(this.clear();++n<e;){var i=t[n];this.set(i[0],i[1])}}function Yt(t,n){var e=Wt(t,n);return!(e<0)&&(e==t.length-1?t.pop():Tt.call(t,e,1),!0)}function $t(t,n){var e=Wt(t,n);return e<0?i:t[e][1]}function Kt(t,n){return Wt(t,n)>-1}function Wt(t,n){for(var e=t.length;e--;)if(Xn(t[e][0],n))return e;return-1}function Xt(t,n,e){var i=Wt(t,n);i<0?t.push([n,e]):t[i][1]=e}function Jt(t,n,e,r){return t===i||Xn(t,st[e])&&!lt.call(r,e)?n:t}function Qt(t,n,e){(e!==i&&!Xn(t[n],e)||"number"==typeof n&&e===i&&!(n in t))&&(t[n]=e)}function Zt(t,n,e){var r=t[n];lt.call(t,n)&&Xn(r,e)&&(e!==i||n in t)||(t[n]=e)}function tn(t){return"function"==typeof t?t:Te}function nn(t,n,e,r,o,a,u){var s;if(r&&(s=a?r(t,o,a,u):r(t)),s!==i)return s;if(!ae(t))return t;var d=Zn(t);if(d){if(s=function(t){var n=t.length,e=t.constructor(n);n&&"string"==typeof t[0]&&lt.call(t,"index")&&(e.index=t.index,e.input=t.input);return e}(t),!n)return In(t)}else{var E=Mn(t),x=E==v||E==h;if(ie(t))return function(t,n){if(n)return t.slice();var e=new t.constructor(t.length);return t.copy(e),e}(t,n);if(E==m||E==c||x&&!a){if(at(t))return a?t:{};if(s=function(t){return"function"!=typeof t.constructor||Un(t)?{}:en(bt(t))}(x?{}:t),!n)return s=function(t,n){return t&&Sn(n,ye(n),t)}(s,t),e?Rn(t,s):s}else{if(!F[E])return a?t:{};s=function(t,n,e){var i=t.constructor;switch(n){case I:return Tn(t);case f:case l:return new i(+t);case A:case T:case S:case k:case R:case C:case N:case D:case O:return function(t,n){var e=n?Tn(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}(t,e);case p:return function(t){return jn(function(t){var n=-1,e=Array(t.size);return t.forEach((function(t,i){e[++n]=[i,t]})),e}(t),X,new t.constructor)}(t);case g:case w:return new i(t);case _:return function(t){var n=new t.constructor(t.source,P.exec(t));return n.lastIndex=t.lastIndex,n}(t);case y:return jn(function(t){var n=-1,e=Array(t.size);return t.forEach((function(t){e[++n]=t})),e}(o=t),J,new o.constructor);case b:return r=t,Ut?Object(Ut.call(r)):{}}var r;var o}(t,E,n)}}u||(u=new Ht);var M=u.get(t);return M||(u.set(t,s),(d?un:ln)(t,(function(i,o){Zt(s,o,nn(i,n,e,r,o,t,u))})),e&&!d?Rn(t,s):s)}function en(t){return ae(t)?It(t):{}}function rn(t,n,e){if("function"!=typeof t)throw new TypeError(r);return setTimeout((function(){t.apply(i,e)}),n)}var on,an,un=(on=ln,function(t,n){if(null==t)return t;if(!te(t))return on(t,n);for(var e=t.length,i=an?e:-1,r=Object(t);(an?i--:++i<e)&&!1!==n(r[i],i,r););return t});function cn(t,n){var e=[];return un(t,(function(t,i,r){n(t,i,r)&&e.push(t)})),e}function sn(t,n,e,i){i||(i=[]);for(var r=-1,o=t.length;++r<o;){var a=t[r];n>0&&ne(a)&&(e||Zn(a)||Qn(a))?n>1?sn(a,n-1,e,i):nt(i,a):e||(i[i.length]=a)}return i}var fn=function(t){return function(n,e,i){for(var r=-1,o=Object(n),a=i(n),u=a.length;u--;){var c=a[t?u:++r];if(!1===e(o[c],c,o))break}return n}}();function ln(t,n){return t&&fn(t,n,ye)}function dn(t,n){return cn(n,(function(n){return re(t[n])}))}function vn(t,n,e,r,o){return t===n||(null==t||null==n||!ae(t)&&!ue(n)?t!=t&&n!=n:function(t,n,e,r,o,a){var u=Zn(t),v=Zn(n),h=s,p=s;u||(h=(h=ht.call(t))==c?m:h);v||(p=(p=ht.call(n))==c?m:p);var y=h==m&&!at(t),b=p==m&&!at(n),E=h==p;a||(a=[]);var I=zn(a,(function(n){return n[0]===t}));if(I&&I[1])return I[1]==n;if(a.push([t,n]),E&&!y){var A=u||fe(t)?function(t,n,e,r,o,a){var u=-1,c=2&o,s=1&o,f=t.length,l=n.length;if(f!=l&&!(c&&l>f))return!1;var d=!0;for(;++u<f;){var v,h=t[u],p=n[u];if(v!==i){if(v)continue;d=!1;break}if(s){if(!An(n,(function(t){return h===t||e(h,t,r,o,a)}))){d=!1;break}}else if(h!==p&&!e(h,p,r,o,a)){d=!1;break}}return d}(t,n,e,r,o,a):function(t,n,e){switch(e){case f:case l:return+t==+n;case d:return t.name==n.name&&t.message==n.message;case g:return t!=+t?n!=+n:t==+n;case _:case w:return t==n+""}return!1}(t,n,h);return a.pop(),A}if(!(2&o)){var T=y&&lt.call(t,"__wrapped__"),S=b&&lt.call(n,"__wrapped__");if(T||S){A=e(T?t.value():t,S?n.value():n,r,o,a);return a.pop(),A}}if(!E)return!1;A=function(t,n,e,r,o,a){var u=2&o,c=ye(t),s=c.length,f=ye(n),l=f.length;if(s!=l&&!u)return!1;var d=s;for(;d--;){var v=c[d];if(!(u?v in n:lt.call(n,v)))return!1}var h=!0,p=u;for(;++d<s;){var g,m=t[v=c[d]],_=n[v];if(!(g===i?m===_||e(m,_,r,o,a):g)){h=!1;break}p||(p="constructor"==v)}if(h&&!p){var y=t.constructor,w=n.constructor;y==w||!("constructor"in t)||!("constructor"in n)||"function"==typeof y&&y instanceof y&&"function"==typeof w&&w instanceof w||(h=!1)}return h}(t,n,e,r,o,a);return a.pop(),A}(t,n,vn,e,r,o))}function hn(t){var n=typeof t;return"function"==n?t:null==t?Te:("object"==n?mn:bn)(t)}function pn(t){t=null==t?t:Object(t);var n=[];for(var e in t)n.push(e);return n}function gn(t,n){var e=-1,i=te(t)?Array(t.length):[];return un(t,(function(t,r,o){i[++e]=n(t,r,o)})),i}function mn(t){var n=ye(t);return function(e){var r=n.length;if(null==e)return!r;for(e=Object(e);r--;){var o=n[r];if(!(o in e)||!vn(t[o],e[o],i,3))return!1}return!0}}function _n(t,n,e,r,o){if(t!==n){var a=Zn(n)||fe(n)?i:we(n);un(a||n,(function(u,c){if(a&&(u=n[c=u]),ae(u))o||(o=new Ht),function(t,n,e,r,o,a,u){var c=t[e],s=n[e],f=u.get(s);if(f)return void Qt(t,e,f);var l=a?a(c,s,e+"",t,n,u):i,d=l===i;d&&(l=s,Zn(s)||fe(s)?Zn(c)?l=c:ne(c)?l=In(c):(d=!1,l=nn(s,!a)):function(t){if(!ue(t)||ht.call(t)!=m||at(t))return!1;var n=bt(t);if(null===n)return!0;var e=n.constructor;return"function"==typeof e&&e instanceof e&&ft.call(e)==vt}(s)||Qn(s)?Qn(c)?l=Sn(v=c,we(v)):!ae(c)||r&&re(c)?(d=!1,l=nn(s,!a)):l=c:d=!1);var v;u.set(s,l),d&&o(l,s,r,a,u);u["delete"](s),Qt(t,e,l)}(t,n,c,e,_n,r,o);else{var s=r?r(t[c],u,c+"",t,n,o):i;s===i&&(s=u),Qt(t,c,s)}}))}}function yn(t,n){return t=Object(t),jn(n,(function(n,e){return e in t&&(n[e]=t[e]),n}),{})}function wn(t,n){var e={};return function(t,n){null==t||fn(t,n,we)}(t,(function(t,i){n(t,i)&&(e[i]=t)})),e}function bn(t){return function(n){return null==n?i:n[t]}}function En(t,n,e){var i=-1,r=t.length;n<0&&(n=-n>r?0:r+n),(e=e>r?r:e)<0&&(e+=r),r=n>e?0:e-n>>>0,n>>>=0;for(var o=Array(r);++i<r;)o[i]=t[i+n];return o}function In(t){return En(t,0,t.length)}function An(t,n){var e;return un(t,(function(t,i,r){return!(e=n(t,i,r))})),!!e}function Tn(t){var n=new t.constructor(t.byteLength);return new yt(n).set(new yt(t)),n}wt&&!At.call({valueOf:1},"valueOf")&&(pn=function(t){return function(t){for(var n,e=[];!(n=t.next()).done;)e.push(n.value);return e}(wt(t))});var Sn=kn;function kn(t,n,e,i){e||(e={});for(var r=-1,o=n.length;++r<o;){var a=n[r];Zt(e,a,i?i(e[a],t[a],a,e,t):t[a])}return e}function Rn(t,n){return Sn(t,xn(t),n)}function Cn(t){return Wn((function(n,e){var r=-1,o=e.length,a=o>1?e[o-1]:i;for(a="function"==typeof a?(o--,a):i,n=Object(n);++r<o;){var u=e[r];u&&t(n,u,r,a)}return n}))}function Nn(t,n,e,i){if("function"!=typeof t)throw new TypeError(r);var o=1&n,a=function(t){return function(){var n=arguments,e=en(t.prototype),i=t.apply(e,n);return ae(i)?i:e}}(t);return function u(){for(var n=-1,r=arguments.length,c=-1,s=i.length,f=Array(s+r),l=this&&this!==W&&this instanceof u?a:t;++c<s;)f[c]=i[c];for(;r--;)f[c++]=arguments[++n];return l.apply(o?e:this,f)}}var Dn=bn("length");function On(t,n){var e=t[n];return function(t){if(null==t)return!1;if(re(t))return gt.test(ft.call(t));return ue(t)&&(at(t)?gt:L).test(t)}(e)?e:i}var xn=Et||function(){return[]};function Mn(t){return ht.call(t)}function Pn(t){var n=t?t.length:i;return oe(n)&&(Zn(t)||se(t)||Qn(t))?function(t,n){for(var e=-1,i=Array(t);++e<t;)i[e]=n(e);return i}(n,String):null}function Ln(t){var n=typeof t;return"number"==n||"boolean"==n||"string"==n&&"__proto__"!=t||null==t}function Un(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||st)}(Ct&&Mn(new Ct)!=p||Nt&&Mn(new Nt)!=y||Dt&&Mn(new Dt)!=E)&&(Mn=function(t){var n=ht.call(t),e=n==m?t.constructor:null,i="function"==typeof e?ft.call(e):"";if(i)switch(i){case xt:return p;case Mt:return y;case Pt:return E}return n});var Vn=Wn((function(t,n){return Zn(t)||(t=null==t?[]:[Object(t)]),n=sn(n,1),Q(t)}));function Fn(t){return t?t[0]:i}function Bn(t){var n=Vt(t);return n.l=!0,n}function zn(t,n){return function(t,n,e,i){var r;return e(t,(function(t,e,o){if(n(t,e,o))return r=i?e:t,!1})),r}(t,hn(n),un)}function Gn(t,n){return un(t,tn(n))}function jn(t,n,e){return function(t,n,e,i,r){return r(t,(function(t,r,o){e=i?(i=!1,t):n(e,t,r,o)})),e}(t,hn(n),e,arguments.length<3,un)}function qn(t,n){var e;if("function"!=typeof n)throw new TypeError(r);return t=de(t),function(){return--t>0&&(e=n.apply(this,arguments)),t<=1&&(n=i),e}}var Hn=Wn((function(t,n,e){return Nn(t,33,n,e)})),Yn=Wn((function(t,n){return rn(t,1,n)})),$n=Wn((function(t,n,e){return rn(t,ve(n)||0,e)}));var Kn=Wn((function(t,n){return Nn(t,32,i,n)}));function Wn(t,n){if("function"!=typeof t)throw new TypeError(r);return n=Rt(n===i?t.length-1:de(n),0),function(){for(var e=arguments,i=-1,r=Rt(e.length-n,0),o=Array(r);++i<r;)o[i]=e[n+i];var a=Array(n+1);for(i=-1;++i<n;)a[i]=e[i];return a[n]=o,t.apply(this,a)}}function Xn(t,n){return t===n||t!=t&&n!=n}function Jn(t,n){return t>n}function Qn(t){return ne(t)&&lt.call(t,"callee")&&(!At.call(t,"callee")||ht.call(t)==c)}var Zn=Array.isArray;function te(t){return null!=t&&oe(Dn(t))&&!re(t)}function ne(t){return ue(t)&&te(t)}var ee,ie=(ee=!1,function(){return ee});function re(t){var n=ae(t)?ht.call(t):"";return n==v||n==h}function oe(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=u}function ae(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function ue(t){return!!t&&"object"==typeof t}function ce(t){return"number"==typeof t||ue(t)&&ht.call(t)==g}function se(t){return"string"==typeof t||!Zn(t)&&ue(t)&&ht.call(t)==w}function fe(t){return ue(t)&&oe(t.length)&&!!V[ht.call(t)]}function le(t,n){return t<n}var de=Number,ve=Number;function he(t){return"string"==typeof t?t:null==t?"":t+""}var pe=Cn((function(t,n){Sn(n,ye(n),t)})),ge=Cn((function(t,n){Sn(n,we(n),t)})),me=Cn((function(t,n,e,i){kn(n,we(n),t,i)}));var _e=Wn((function(t){return t.push(i,Jt),me.apply(i,t)}));function ye(t){var n=Un(t);if(!n&&!te(t))return function(t){return kt(Object(t))}(t);var e=Pn(t),i=!!e,r=e||[],o=r.length;for(var a in t)!lt.call(t,a)||i&&("length"==a||ut(a,o))||n&&"constructor"==a||r.push(a);return r}function we(t){for(var n=-1,e=Un(t),i=pn(t),r=i.length,o=Pn(t),a=!!o,u=o||[],c=u.length;++n<r;){var s=i[n];a&&("length"==s||ut(s,c))||"constructor"==s&&(e||!lt.call(t,s))||u.push(s)}return u}var be=Cn((function(t,n,e){_n(t,n,e)})),Ee=Wn((function(t,n){return null==t?{}:(n=gn(sn(n,1),String),yn(t,function(t,n,e,i){var r,o=-1,a=Z,u=!0,c=t.length,s=[],f=n.length;if(!c)return s;e&&(n=gn(n,(r=e,function(t){return r(t)}))),i?(a=tt,u=!1):n.length>=200&&(a=qt,u=!1,n=new jt(n));t:for(;++o<c;){var l=t[o],d=e?e(l):l;if(u&&d==d){for(var v=f;v--;)if(n[v]===d)continue t;s.push(l)}else a(n,d,i)||s.push(l)}return s}(we(t),n)))}));var Ie=Wn((function(t,n){return null==t?{}:yn(t,sn(n,1))}));function Ae(t){return t?function(t,n){return gn(n,(function(n){return t[n]}))}(t,ye(t)):[]}function Te(t){return t}var Se,ke=hn;function Re(t,n,e){var i=ye(n),r=dn(n,i);null!=e||ae(n)&&(r.length||!i.length)||(e=n,n=t,t=this,r=dn(n,ye(n)));var o=!ae(e)||!("chain"in e)||e.chain,a=re(t);return un(r,(function(e){var i=n[e];t[e]=i,a&&(t.prototype[e]=function(){var n=this.l;if(o||n){var e=t(this.u);return(e.I=In(this.I)).push({func:i,args:arguments,thisArg:t}),e.l=n,e}return i.apply(t,nt([this.value()],arguments))})})),t}Ft.prototype=en(Vt.prototype),Ft.prototype.constructor=Ft,Bt.prototype=Ot?Ot(null):st,Gt.prototype.clear=function(){this.A={hash:new Bt,map:Ct?new Ct:[],string:new Bt}},Gt.prototype["delete"]=function(t){var n=this.A;return Ln(t)?function(t,n){return zt(t,n)&&delete t[n]}("string"==typeof t?n.string:n.hash,t):Ct?n.map["delete"](t):Yt(n.map,t)},Gt.prototype.get=function(t){var n=this.A;return Ln(t)?function(t,n){if(Ot){var e=t[n];return e===o?i:e}return lt.call(t,n)?t[n]:i}("string"==typeof t?n.string:n.hash,t):Ct?n.map.get(t):$t(n.map,t)},Gt.prototype.has=function(t){var n=this.A;return Ln(t)?zt("string"==typeof t?n.string:n.hash,t):Ct?n.map.has(t):Kt(n.map,t)},Gt.prototype.set=function(t,n){var e=this.A;return Ln(t)?function(t,n,e){t[n]=Ot&&e===i?o:e}("string"==typeof t?e.string:e.hash,t,n):Ct?e.map.set(t,n):Xt(e.map,t,n),this},jt.prototype.push=function(t){var n=this.A;if(Ln(t)){var e=n.A;("string"==typeof t?e.string:e.hash)[t]=o}else n.set(t,o)},Ht.prototype.clear=function(){this.A={array:[],map:null}},Ht.prototype["delete"]=function(t){var n=this.A,e=n.array;return e?Yt(e,t):n.map["delete"](t)},Ht.prototype.get=function(t){var n=this.A,e=n.array;return e?$t(e,t):n.map.get(t)},Ht.prototype.has=function(t){var n=this.A,e=n.array;return e?Kt(e,t):n.map.has(t)},Ht.prototype.set=function(t,n){var e=this.A,i=e.array;i&&(i.length<199?Xt(i,t,n):(e.array=null,e.map=new Gt(i)));var r=e.map;return r&&r.set(t,n),this},Vt.assign=pe,Vt.assignIn=ge,Vt.before=qn,Vt.bind=Hn,Vt.chain=Bn,Vt.compact=function(t){return cn(t,Boolean)},Vt.concat=Vn,Vt.create=function(t,n){var e=en(t);return n?pe(e,n):e},Vt.defaults=_e,Vt.defer=Yn,Vt.delay=$n,Vt.filter=function(t,n){return cn(t,hn(n))},Vt.flatten=function(t){return(t?t.length:0)?sn(t,1):[]},Vt.flattenDeep=function(t){return(t?t.length:0)?sn(t,a):[]},Vt.iteratee=ke,Vt.keys=ye,Vt.map=function(t,n){return gn(t,hn(n))},Vt.mapValues=function(t,n){var e={};return n=hn(n),ln(t,(function(t,i,r){e[i]=n(t,i,r)})),e},Vt.matches=function(t){return mn(pe({},t))},Vt.merge=be,Vt.mixin=Re,Vt.negate=function(t){if("function"!=typeof t)throw new TypeError(r);return function(){return!t.apply(this,arguments)}},Vt.omit=Ee,Vt.omitBy=function(t,n){return n=hn(n),wn(t,(function(t,e){return!n(t,e)}))},Vt.once=function(t){return qn(2,t)},Vt.partial=Kn,Vt.pick=Ie,Vt.pickBy=function(t,n){return null==t?{}:wn(t,hn(n))},Vt.slice=function(t,n,e){var r=t?t.length:0;return n=null==n?0:+n,e=e===i?r:+e,r?En(t,n,e):[]},Vt.sortBy=function(t,n){var e=0;return n=hn(n),gn(gn(t,(function(t,i,r){return{value:t,index:e++,criteria:n(t,i,r)}})).sort((function(t,n){return function(t,n){if(t!==n){var e=null===t,r=t===i,o=t==t,a=null===n,u=n===i,c=n==n;if(t>n&&!a||!o||e&&!u&&c||r&&c)return 1;if(t<n&&!e||!c||a&&!r&&o||u&&o)return-1}return 0}(t.criteria,n.criteria)||t.index-n.index})),bn("value"))},Vt.tap=function(t,n){return n(t),t},Vt.thru=function(t,n){return n(t)},Vt.toArray=function(t){return te(t)?t.length?In(t):[]:Ae(t)},Vt.values=Ae,Vt.extend=ge,Re(Vt,Vt),Vt.clone=function(t){return ae(t)?Zn(t)?In(t):Sn(t,ye(t)):t},Vt.cloneDeep=function(t){return nn(t,!0,!0)},Vt.escape=function(t){return(t=he(t))&&M.test(t)?t.replace(x,ot):t},Vt.every=function(t,n,e){return function(t,n){var e=!0;return un(t,(function(t,i,r){return e=!!n(t,i,r)})),e}(t,hn(n=e?i:n))},Vt.find=zn,Vt.findIndex=function(t,n){return t&&t.length?function(t,n,e){for(var i=t.length,r=e?i:-1;e?r--:++r<i;)if(n(t[r],r,t))return r;return-1}(t,hn(n)):-1},Vt.forEach=Gn,Vt.forOwn=function(t,n){return t&&ln(t,tn(n))},Vt.has=function(t,n){return null!=t&&lt.call(t,n)},Vt.head=Fn,Vt.identity=Te,Vt.includes=function(t,n,e,i){t=te(t)?t:Ae(t),e=e&&!i?de(e):0;var r=t.length;return e<0&&(e=Rt(r+e,0)),se(t)?e<=r&&t.indexOf(n,e)>-1:!!r&&it(t,n,e)>-1},Vt.indexOf=function(t,n,e){for(var i=t?t.length:0,r=((e="number"==typeof e?e<0?Rt(i+e,0):e:0)||0)-1,o=n==n;++r<i;){var a=t[r];if(o?a===n:a!=a)return r}return-1},Vt.isArguments=Qn,Vt.isArray=Zn,Vt.isBoolean=function(t){return!0===t||!1===t||ue(t)&&ht.call(t)==f},Vt.isDate=function(t){return ue(t)&&ht.call(t)==l},Vt.isEmpty=function(t){if(te(t)&&(Zn(t)||se(t)||re(t.splice)||Qn(t)))return!t.length;for(var n in t)if(lt.call(t,n))return!1;return!0},Vt.isEqual=function(t,n){return vn(t,n)},Vt.isFinite=function(t){return"number"==typeof t&&St(t)},Vt.isFunction=re,Vt.isNaN=function(t){return ce(t)&&t!=+t},Vt.isNull=function(t){return null===t},Vt.isNumber=ce,Vt.isObject=ae,Vt.isRegExp=function(t){return ae(t)&&ht.call(t)==_},Vt.isString=se,Vt.isUndefined=function(t){return t===i},Vt.last=function(t){var n=t?t.length:0;return n?t[n-1]:i},Vt.max=function(t){return t&&t.length?et(t,Te,Jn):i},Vt.min=function(t){return t&&t.length?et(t,Te,le):i},Vt.noConflict=function(){return W._===this&&(W._=pt),this},Vt.noop=function(){},Vt.reduce=jn,Vt.result=function(t,n,e){var r=null==t?i:t[n];return r===i&&(r=e),re(r)?r.call(t):r},Vt.size=function(t){return null==t?0:(t=te(t)?t:ye(t)).length},Vt.some=function(t,n,e){return An(t,hn(n=e?i:n))},Vt.uniqueId=function(t){var n=++dt;return he(t)+n},Vt.each=Gn,Vt.first=Fn,Re(Vt,(Se={},ln(Vt,(function(t,n){lt.call(Vt.prototype,n)||(Se[n]=t)})),Se),{chain:!1}),Vt.VERSION="4.6.1",un(["pop","join","replace","reverse","split","push","shift","sort","splice","unshift"],(function(t){var n=(/^(?:replace|split)$/.test(t)?String.prototype:ct)[t],e=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|join|replace|shift)$/.test(t);Vt.prototype[t]=function(){var t=arguments;return i&&!this.l?n.apply(this.value(),t):this[e]((function(e){return n.apply(e,t)}))}})),Vt.prototype.toJSON=Vt.prototype.valueOf=Vt.prototype.value=function(){return t=this.u,jn(this.I,(function(t,n){return n.func.apply(n.thisArg,nt([t],n.args))}),t);var t},($||Y||{})._=Vt,G&&j&&(q&&((j.exports=Vt)._=Vt),G._=Vt)}.call(this)},1167:function(t,n,e){t.exports=e(5049)._.noConflict()},1925:function(t,n,e){var i=e(5490).v3,r=Math.pow(2,32),o=function(t,n){return(i(t,n)>>>0)/r};t.exports={Seed:{IGNORING:0,BUCKETING:1,FALLBACK:2,HOLDBACK:3,BEHAVIOR_EVENT:2716770798},hashToHex:function(t,n){var e=i(t,n);return(e>>>16).toString(16)+(65535&e).toString(16)},hashToInt:function(t,n,e){return Math.floor(o(t,n)*e)},hashToReal:o,toByteString:function(t){var n=String.fromCharCode;return t.replace(/[\S\s]/gi,(function(t){t=t.charCodeAt(0);var e=n(255&t);return t>255&&(e=n(t>>>8&255)+e),t>65535&&(e=n(t>>>16)+e),e}))}}},7432:function(t,n){n.generate=function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)}},4514:function(t,n,e){var i=e(1167),r=e(1353).get("stores/audience_data"),o=e(478),a=e(2167),u=e(9839),c=e(6050);function s(t){var n=["type","selector","attributes","value"],e=i.extend({},t);return e.changeSet=i.map(t.changeSet,(function(t){return i.pick(c.dereferenceChangeId(t),n)})),e}n.emitLayerDecided=function(t){var n=t.decisionTicket?t.decisionTicket.audienceIds:[],e=i.map(n,(function(t){return{id:t,name:r.get(t).name}})),u={type:a.TYPES.LIFECYCLE,name:"layerDecided",data:i.extend(t,{audiences:e})},s=c.translateLayerEventToCampaignEvent(u);o.emit(u),o.emit(s)},n.emitViewActivated=function(t){var n={type:a.TYPES.LIFECYCLE,name:"viewActivated",data:t},e=c.translateViewActivatedToPageActivated(n);o.emit(n),o.emit(e)},n.emitViewsActivated=function(t){var n={type:a.TYPES.LIFECYCLE,name:"viewsActivated",data:t};o.emit(n)},n.emitPageDeactivated=function(t){var n={type:a.TYPES.LIFECYCLE,name:"pageDeactivated",data:t};o.emit(n)},n.emitActivateEvent=function(){o.emit({type:a.TYPES.LIFECYCLE,name:"activate"},!0)},n.emitActivatedEvent=function(){o.emit({type:a.TYPES.LIFECYCLE,name:"activated"})},n.emitInitializedEvent=function(){var t={type:a.TYPES.LIFECYCLE,name:"initialized"};window.optimizely&&(window.optimizely.initialized=!0),o.emit(t)},n.emitOriginsSyncedEvent=function(){var t={type:a.TYPES.LIFECYCLE,name:"originsSynced"};o.emit(t)},n.emitActionAppliedEvent=function(t){var n={type:t.type,campaignId:t.layerId,pageId:t.pageId,experimentId:t.experimentId,variationId:t.variationId};u.defineProperty(n,"changes",(function(){return s(t).changeSet}),"actionAppliedEvent");var e={type:a.TYPES.ACTION,name:"applied",data:n};o.emit(e)},n.emitActionsForDecisionAppliedEvent=function(t,n){var e={decision:t};u.defineProperty(e,"actions",(function(){return i.map(n,s)}),"appliedAllForDecisionEvent");var r={type:a.TYPES.ACTION,name:"appliedAllForDecision",data:e};o.emit(r)},n.emitSendEvents=function(){var t={type:a.TYPES.ANALYTICS,name:"sendEvents"};o.emit(t)},n.emitMaybeSendEvents=function(){var t={type:a.TYPES.ANALYTICS,name:"maybeSendEvents"};o.emit(t)},n.emitHoldEvents=function(){var t={type:a.TYPES.ANALYTICS,name:"holdEvents"};o.emit(t)}},7388:function(t,n,e){var i=e(1167),r=e(9383),o=e(9839),a=e(6050),u=e(5190),c=e(4744);function s(t,n,e,r){var o=t.getLayerState(r),a=n.get(r),c=e.get();if(!o||!a)return c?{layer:{name:c.layerName,id:c.layerId,policy:c.layerPolicy,integrationStringVersion:c.integrationStringVersion},experiment:{name:c.experimentName,id:c.experimentId},variation:{name:c.variationName,id:c.variationId},isLayerHoldback:!1}:null;if(u.isSingleExperimentPolicy(a.policy)&&o.decision.isLayerHoldback)return null;var s,f,l=o.decision.experimentId,d=o.decision.variationId;return l&&d&&(s=i.find(a.experiments,{id:l}))&&(f=i.find(s.variations,{id:d}))?{layer:{name:a.name,id:a.id,policy:a.policy,integrationStringVersion:a.integrationStringVersion},experiment:{name:s.name,id:s.id},variation:{name:f.name,id:f.id},isLayerHoldback:o.decision.isLayerHoldback}:null}function f(t,n,e,r,o,a,s){var f=[],l=t.getLayerStates();s.onlySingleExperiments&&(l=i.filter(l,(function(t){var e=n.get(t.layerId);return e&&u.isSingleExperimentPolicy(e.policy)})));var d=e.getActiveViewIds(),v=i.map(l,(function(t){var e,r=!!t.decision.variationId,a=t.decisionActivationId&&t.decisionActivationId===o.getActivationId(),u=c.getExperimentAndVariation(),s=u?u.variationId:null,f=r&&t.decision.variationId===s,l=(null==(e=n.get(null==t?void 0:t.layerId))?void 0:e.viewIds)||[],v=i.every(l,(function(t){return!i.includes(d,t)}));return i.extend(t,{isActive:r&&a&&!v||f,visitorRedirected:f})})),h=a?i.filter(v,a):v;return i.each(h,(function(t){var e=function(t,n,e,r){var o,a,u=t.layerId,c=n.get(u)||{},s=i.map(c.experiments,(function(t){return i.pick(t,["id","name"])}));if(!r&&c.decisionMetadata&&c.decisionMetadata.offerConsistency)return;var f={id:u,campaignName:c.name||null,experiment:null,allExperiments:s,variation:null,reason:t.decision.reason,isActive:!!t.isActive,visitorRedirected:t.visitorRedirected,isInCampaignHoldback:t.decision.isLayerHoldback};t.decision&&t.decision.experimentId&&(o=i.find(c.experiments,{id:t.decision.experimentId})),o&&(f.experiment=i.pick(o,["id","name","campaignName"])),o&&t.decision.variationId&&(a=i.find(o.variations,{id:t.decision.variationId})),a&&(f.variation=i.pick(a,["id","name"]));var l=i.map(t.decisionTicket.audienceIds,(function(t){return i.pick(e.get(t),["id","name"])}));return f.audiences=l,c.decisionMetadata&&c.decisionMetadata.offerConsistency&&(f.pageId=t.pageId),f}(t,n,r,s.includeOfferConsistency);e&&f.push(e)})),f}n.data=["stores/audience_data","stores/client_metadata","stores/event_data","stores/layer_data","stores/view_data","stores/group_data","stores/interest_group","stores/tag_group","stores/global",function(t,n,e,r,u,c,s,f,l){var d={},v={},h={},p={audiences:t.getAudiencesMap(),events:e.getEventsMap(),campaigns:d,pages:u.getPagesMap(),experiments:v,variations:h,projectId:l.getProjectId(),snippetId:l.getSnippetId(),accountId:l.getAccountId(),dcpServiceId:l.getDCPServiceId(),revision:l.getRevision(),clientName:n.getClientName(),clientVersion:n.getClientVersion()},g=a.dereferenceChangeId;return i.each(r.getAll(),(function(t){o.defineProperty(d,t.id,(function(){var n=i.extend({},t);return o.defineProperty(n,"changes",(function(){return i.map(t.changes,g)}),"campaign"),o.defineProperty(n,"experiments",(function(){return i.map(t.experiments,(function(t){return v[t.id]}))}),"campaign"),n}),"campaignMap","byId"),i.each(t.experiments,(function(t){o.defineProperty(v,t.id,(function(){var n=i.extend({},t);return o.defineProperty(n,"changes",(function(){return i.map(t.changes,g)}),"experiment"),o.defineProperty(n,"variations",(function(){return i.map(t.variations,(function(t){return h[t.id]}))}),"experiment"),n}),"experimentMap","byId"),i.each(t.variations,(function(t){o.defineProperty(h,t.id,(function(){var n=i.extend({},t);return o.defineProperty(n,"actions",(function(){return i.map(t.actions,(function(t){return i.extend({},t,{changes:i.map(t.changes,g)})}))}),"variation"),n}),"variationMap","byId")}))}))})),p.groups=c.getGroupsMap(),p}],n.visitor=["stores/visitor",function(t){return i.cloneDeep(t.getVisitorProfile())}],n.visitor_id=["stores/visitor_id",function(t){return{randomId:t.getRandomId()}}],n.state=["stores/audience_data","stores/layer_data","stores/layer","stores/view_data","stores/view","stores/global","stores/observed_redirect",function(t,n,e,o,a,l,d){return{getCampaignStates:function(r){var o={},u=f(e,n,a,t,l,r,{includeOfferConsistency:!1});return i.each(u,(function(t){o[t.id]=t})),o},getExperimentStates:function(r){var o=f(e,n,a,t,l,r,{includeOfferConsistency:!1,onlySingleExperiments:!0}),u=["audiences","variation","reason","visitorRedirected","isActive"];return i.reduce(o,(function(t,n){var e=n.allExperiments[0];return t[e.id]=i.extend({},i.pick(n,u),{id:e.id,experimentName:e.name,isInExperimentHoldback:n.isInCampaignHoldback}),t}),{})},getCampaignStateLists:function(r){var o={},u=f(e,n,a,t,l,r,{includeOfferConsistency:!0});return i.each(u,(function(t){var n=t.id;o[n]||(o[n]=[]),o[n].push(t)})),o},getPageStates:function(t){var n=a.getAll(),e=i.reduce(n,(function(t,n){var e=o.get(n.id);return t[n.id]=i.extend({},i.pick(e,["id","name","apiName","category","staticConditions","tags"]),i.pick(n,["isActive","metadata"])),t[n.id].isActive=!!t[n.id].isActive,t}),{});return t?i.pickBy(e,t):e},isGlobalHoldback:function(){return l.isGlobalHoldback()},getActivationId:function(){return l.getActivationId()},getVariationMap:function(){var t=e.getLayerStates(),r={};return i.each(t,(function(t){var e=n.get(t.layerId);if(t.decision&&t.decision.experimentId&&(r[t.decision.experimentId]={id:t.decision.variationId,name:null,index:null},e)){var o=i.find(e.experiments,{id:t.decision.experimentId});if(o&&t.decision.variationId)var a=i.find(o.variations,{id:t.decision.variationId}),u=i.findIndex(o.variations,{id:t.decision.variationId});a&&(r[t.decision.experimentId]={id:t.decision.variationId,name:a.name,index:u})}})),r},getActiveExperimentIds:function(){var t={};return i.each(this.getCampaignStateLists({isActive:!0}),(function(n){i.each(n,(function(n){t[n.experiment.id]=!0}))})),i.keys(t)},getRedirectInfo:function(){var t=c.getExperimentAndVariation();return t&&(t.referrer=c.getReferrer()),t},getDecisionString:function(t){if(!t)throw new Error("Must pass a config to getDecisionString");t=i.extend({maxLength:255,shouldCleanString:!1},t);var o=s(e,n,d,t.campaignId);return o?r.generateAnalyticsString(o.layer,o.experiment,o.variation,o.isLayerHoldback,t.maxLength,t.shouldCleanString):null},getDecisionObject:function(t){if(!t)throw new Error("Must pass a config to getDecisionObject");t=i.extend({maxLength:255,shouldCleanString:!1},t);var o=s(e,n,d,t.campaignId);if(!o)return null;var a=r.formatNamesAndIdsForAnalytics(o.layer,o.experiment,o.variation,t.shouldCleanString),c=i.mapValues(a.names,(function(n,e){return r.combineAndTruncateIdAndName(n,a.idStrings[e],t.maxLength)})),f={experiment:c.experiment,variation:c.variation};return u.isSingleExperimentPolicy(o.layer.policy)||i.extend(f,{campaign:c.layer,holdback:o.isLayerHoldback}),f}}}],n.utils=e(9887).create(),n.jquery=["env/jquery",function(t){return t}],n.event_emitter=e(4939)},4181:function(t,n,e){var i=e(1004),r=e(6670),o="optimizelyDataApi";n.registerFunction=function(t,n){var e=r.getGlobal(o);e||(e={},r.setGlobal(o,e)),e[t]||(e[t]=n)},n.unregisterFunction=function(t){var n=r.getGlobal(o);n&&n[t]&&(n[t]=function(){i.log('Ignoring attempt to call "'+o+"."+t+'" which has been unregistered.')})},n.getFunction=function(t){return r.getGlobal(o)[t]}},9993:function(t,n,e){var i=e(1167),r=e(1004),o=e(7388),a=e(1353),u=a.get("stores/plugins"),c=e(4184),s=e(2432),f=e(6665),l=[e(6362),e(628),e(2117)],d=["clientMetadata","cookieDomain","disable","load","optOut","rum"];n.push=function(t,n){var e,o,a,u;if(!i.isArray(t)&&i.isObject(t))u=i.isUndefined(t.version)?1:t.version,e=t.type,a=[t];else if(i.isArray(t))u=0,e=t[0],a=t.slice(1);else{if(!i.isString(t))return r.warn("API / Ignoring non-array/object/string argument:",t),!1;u=0,e=t,a=[]}if(l[u]&&(o=l[u][e]),n&&-1===d.indexOf(e))return r.debug("API / Ignoring non high priority function:",e,a),!1;if(!o)return r.warn('API / No function found for "'+e+'" (v'+u+") with arguments:",a),!1;r.log('API / Executing: "'+e,'" with arguments:',a);try{o.apply(null,a),f.dispatch(c.RECORD_API_USAGE,{methodName:u?"v"+u+"."+e:e})}catch(s){r.error(s)}return!0},n.get=function(t){r.log('API / Getting module: "'+t+'"');var n=o[t];if(n?i.isArray(n)&&(n=a.evaluate(n)):n=u.getPlugin(s.PluginTypes.apiModules,t),n)return f.dispatch(c.RECORD_API_USAGE,{methodName:"get."+t}),n;r.warn('Module "'+t+'" not found.')}},9839:function(t,n,e){var i=e(3693),r=e(4184),o=e(6665),a=e(1004);n.defineProperty=function(t,n,e,u,c){i(t,n,(function(){var t=["prop",u,c||n].join(".");return a.debug('Evaluating getter: "'+t+'"'),o.dispatch(r.RECORD_API_USAGE,{methodName:t}),e()}),!0)}},6362:function(t,n,e){var i=e(1167),r=e(628);function o(t){var n,e={};if(t)if(a(t))n=Number(t);else{if("object"!=typeof t)throw new Error("tracker: Revenue argument "+t+"not a number.");if("revenue"in(e=i.extend({},t))){if(!a(e.revenue))throw new Error("tracker: Revenue value "+e.revenue+"not a number.");n=Number(e.revenue),delete e.revenue}}return i.isUndefined(n)||(e.revenue=n),e}function a(t){return i.isNumber(t)||i.isString(t)&&Number(t)==t}n.activateGeoDelayedExperiments=function(t,n){n||(n=t.lists?"odds":"cdn3"),r.dataFromSource({data:t,source:n})},n.activateSiteCatalyst=function(t){t&&t.sVariable&&r.integrationSettings({id:"adobe_analytics",settings:{sVariableReference:t.sVariable}})},n.bucketVisitor=function(t,n){if(t&&n){var e={experimentId:String(t)};n>256?e.variationId=String(n):e.variationIndex=String(n),r.bucketVisitor(e)}},n.bucketUser=n.bucketVisitor,n.disable=function(t){r.disable({scope:t})},n.log=function(t){i.isUndefined(t)&&(t=!0),r.log({level:t?"INFO":"OFF"})},n.optOut=function(t){i.isUndefined(t)&&(t=!0),r.optOut({isOptOut:t})},n.setCookieDomain=function(t){r.cookieDomain({cookieDomain:t})},n.setCookieExpiration=function(t){r.cookieExpiration({cookieExpirationDays:t})},n.setDimensionValue=function(t,n){var e={};e[t]=n,r.user({attributes:e})},n.setUserId=function(t){r.user({userId:t})},n.setGA4UserId=function(t){r.ga4User({ga4UserId:t})},n.storeThirdPartyData=function(t,n){r.dataFromSource({source:t,data:n})},n.trackEvent=function(t,n){r.event({eventName:t,tags:o(n)})}},6050:function(t,n,e){var i=e(1167),r=e(1353),o=e(6171),a=e(9839),u=r.get("stores/change_data");n.translateDecisionToCampaignDecision=function(t){return c(i.cloneDeep(t),{layerId:"campaignId",isLayerHoldback:"isCampaignHoldback"})},n.translateLayerEventToCampaignEvent=function(t){var e={};return a.defineProperty(e,"campaign",(function(){return function(t){var e=i.cloneDeep(t);return e.changes&&(e.changes=i.map(e.changes,n.dereferenceChangeId)),e.experiments&&i.each(e.experiments,(function(t){t.changes&&(t.changes=i.map(t.changes,n.dereferenceChangeId)),t.variations&&i.each(t.variations,(function(t){t.actions&&i.each(t.actions,(function(t){t.changes&&(t.changes=i.map(t.changes,n.dereferenceChangeId))}))}))})),e}(t.data.layer)}),"campaignEvent"),e.decisionTicket=t.data.decisionTicket,e.decision=this.translateDecisionToCampaignDecision(t.data.decision),e.audiences=t.data.audiences,{type:"lifecycle",name:"campaignDecided",data:e}},n.translateViewActivatedToPageActivated=function(t){return{type:"lifecycle",name:"pageActivated",data:{page:t.data.view}}},n.dereferenceChangeId=function(t){var n=u.getChange(t);return n?o.safeReference(n):t};var c=function(t,n){var e=i.omit(t,i.keys(n));return i.each(n,(function(n,i){e[n]=t[i]})),e}},9887:function(t,n,e){var i=e(3961).Promise,r=e(9604).o,o=e(3073).poll,a=e(1366).x,u=e(3286).a;n.create=function(){return{observeSelector:r,poll:o,Promise:i,waitForElement:a,waitUntil:u}}},9459:function(t){t.exports={DEFAULT_INTERVAL:20}},9604:function(t,n,e){var i=e(1167),r=(e(4184),e(1353)),o=r.get("stores/directive"),a=e(4171),u=(e(3866),e(2432),e(6665),e(7432).generate),c=e(3073),s=e(6670),f=(r.get("stores/rum"),{once:!1,onTimeout:null,timeout:null}),l={},d=function(t){d=function(){if(!o.shouldObserveChangesIndefinitely())return function(t){var n=c.poll(i.partial(h,t));l[t].cancelObservation=function(){n(),delete l[t]}};var t,n=function(){this.disconnect(),i.each(i.keys(l),h),this.observe(r,e)},e={attributes:!0,childList:!0,subtree:!0,characterData:!0},r=a.getDocumentElement();return t=new MutationObserver(n),function(n){var o=l[n];t.observe(r,e),o.cancelObservation=function(){delete l[n],i.isEmpty(l)&&t.disconnect()}}}(),d(t)};function v(t){var n=l[t];n&&n.cancelObservation&&n.cancelObservation()}function h(t){if(l[t]){if(function(t){var n=t.options.timeout;if(null!==n)if("function"==typeof n)try{return n()}catch(e){}else if(Date.now()-t.startTime>n)return!0;return!1}(l[t]))return 0===l[t].matchedCount&&i.isFunction(l[t].options.onTimeout)&&l[t].options.onTimeout(),void v(t);var n=a.querySelectorAll(l[t].selector);n.length&&(i.each(n,(function(n){n.T&&n.T[t]||l[t].callbackQueue.push(n)})),function(t){for(;l[t]&&l[t].callbackQueue.length;){var n=l[t].callbackQueue.shift();if(p(n,t),l[t].matchedCount=l[t].matchedCount+1,l[t].callback(n),l[t]&&l[t].options.once)return void v(t)}}(t))}}function p(t,n){t.T||(t.T={}),t.T[n]=!0}n.o=function(t,n,e){if(!function(t){try{a.querySelector(t)}catch(n){return!1}return!0}(t))throw new Error("observeSelector expects a valid css selector as its first argument");if(!i.isFunction(n))throw new Error("observeSelector expects a function as its second argument");if(e&&(!i.isObject(e)||i.isFunction(e)))throw new Error("observeSelector expects an object as its third argument");var r=u();return e=i.assign({},f,e||{}),l[r]={callback:n,callbackQueue:[],matchedCount:0,options:e,selector:t,startTime:Date.now()},d(r),s.setTimeout(i.bind(h,null,r),0),i.partial(v,r)}},3073:function(t,n,e){var i=e(1167),r=(e(4184),e(1353)),o=(e(2432),e(6665),e(7432).generate),a=e(6670),u=e(9459).DEFAULT_INTERVAL,c=(r.get("stores/rum"),{});function s(t){c[t]&&i.each(c[t].callbacks,(function(t){t.call(null)}))}function f(t,n){c[n]&&c[n].callbacks[t]&&(delete c[n].callbacks[t],i.some(c[n].callbacks)||(clearInterval(c[n].id),delete c[n]))}n.poll=function(t,n){i.isNumber(n)||(n=u),c[n]||(c[n]={callbacks:{},id:a.setInterval(i.partial(s,n),n)});var e=o();return c[n].callbacks[e]=t,i.partial(f,e,n)},n.cancelAll=function(){i.each(c,(function(t,n){clearInterval(t.id),delete c[n]}))}},1366:function(t,n,e){var i=e(3961).Promise,r=e(9604).o;n.x=function(t){return new i((function(n,e){r(t,n,{once:!0})}))}},3286:function(t,n,e){var i=e(3961).Promise,r=e(3073).poll;n.a=function(t){return new i((function(n,e){if(t())n();else var i=r((function(){t()&&(i(),n())}))}))}},628:function(t,n,e){var i=e(1167),r=e(4184),o=e(9993),a=e(7388),u=e(7112),c=e(2432),s=e(3971),f=e(4514),l=e(8104),d=e(4594).v,v=e(5242),h=e(3702),p=(e(7617),e(2403)),g=e(478),m=e(6665),_=e(7136),y=e(5594),w=e(1004),b=e(7761),E=(e(1734),e(5916)),I=e(4029),A=e(1353),T=A.get("stores/dimension_data"),S=A.get("stores/view"),k=A.get("stores/view_data"),R=A.get("stores/visitor_id"),C=A.get("stores/layer_data"),N=A.get("stores/directive"),D=!1,O=n.ApiListenerError=d("ApiListenerError");n.event=function(t){var n;switch(t.eventType){case"click":n=function(t){var n;return t.eventData&&(n=p.create(t.eventData.id,t.eventData.apiName,"click",t.eventData)),function(){var t=s.trackClickEvent(n);t?w.log("API / Tracking click event:",t):w.log("API / Not tracking click event:",t)}}(t);break;case"decision":n=function(t){var n=t.eventData,e=y.createLayerState(n.layerId,n.experimentId,n.variationId,n.isLayerHoldback,n.isLayerConcluded),i=y.createSingle(n.layerId,n.experimentId,n.variationId);return function(){y.recordLayerDecision(e.layerId,e.decisionTicket,e.decision),w.log("API / Tracking decision event:",e),s.trackDecisionEvent(e.decision,e.decisionTicket,i)}}(t);break;case"pageview":n=function(t){var n=E.create(t.eventData.id,t.eventData.apiName),e=E.createState(n.id);return function(){var t=s.trackViewActivation(n,e);t?w.log("API / Tracking pageview event:",t):w.log("API / Not tracking pageview event:",t)}}(t);break;default:n=function(t){var n;return t.eventId&&(n=p.create(t.eventId,t.eventName,"custom")),E.updateAllViewTags(),function(){s.trackCustomEvent(t.eventName,t.tags,n,t.properties)?w.log("API / Tracking custom event:",t.eventName,t.tags):w.log("API / Not tracking custom event:",t.eventName)}}(t)}R.getBucketingId()?n():m.dispatch(r.ADD_CLEANUP_FN,{lifecycle:c.Lifecycle.postActivate,cleanupFn:n})},n.clientMetadata=function(t){D},n.priorRedirectString=function(t){},n.microsnippetError=function(t){},n.rum=function(t){m.dispatch(r.SET_RUM_DATA,t.eventData)},n.initialViewStates=function(t){var n=i.map(t.states,(function(t,n){return{id:n,isActive:t}}));E.registerViews(n)},n.page=function(t){var n=k.getByApiName(t.pageName);if(!n)throw new Error('Unknown page "'+t.pageName+'"');var e=!t.hasOwnProperty("isActive")||t.isActive,i=function(){e?E.activateViaAPI(n,t.tags):(E.deactivate(n),w.log("API / Deactivated Page",E.description(n)))};R.getBucketingId()?i():m.dispatch(r.ADD_CLEANUP_FN,{lifecycle:c.Lifecycle.postViewsActivated,cleanupFn:i})},n.tags=function(t){E.setGlobalTags(t.tags)},n.user=function(t){w.log("API / Setting visitor custom attributes:",t.attributes),i.each(t.attributes,(function(t,n){var e,i,r=n,o=T.getById(n)||T.getByApiName(n);o&&(r=o.id,e=o.apiName,i=o.segmentId||o.id);var a={id:i,value:t};e&&(a.name=e),x(r,a,!0)}))},n.ga4User=function(t){t.ga4UserId?(w.log("API / Setting ga4 user id in the global store:",t.ga4UserId),m.dispatch(r.SET_GA4_USER_ID,t)):w.error('API / Argument "ga4UserId" is missing')};var x=function(t,n,e){var i=[{key:e?["custom",t]:[t],value:n,metadata:{lastModified:v.now()}}],o=function(){m.dispatch(r.SET_VISITOR_ATTRIBUTES,{attributes:i})};R.getBucketingId()?o():m.dispatch(r.ADD_CLEANUP_FN,{lifecycle:c.Lifecycle.postVisitorProfileLoad,cleanupFn:o})};n.optOut=function(t){var n=!t.hasOwnProperty("isOptOut")||t.isOptOut;h.setOptOut(n)},n.cookieExpiration=function(t){var n=t.cookieExpirationDays;n<90&&(w.error('Argument "cookieExpirationDays"=',n,"less than minimum days:",90,", setting to minimum."),n=90),w.log("API / Setting cookie age to",n,"days."),m.dispatch(r.SET_COOKIE_AGE,86400*n)},n.extendCookieLifetime=function(t){t=i.extend({isEnabled:!0},t),w.log("API / Setting cookie automatic lifetime extension to",t.isEnabled),m.dispatch(r.SET_COOKIE_AUTO_REFRESH,t.isEnabled)},n.cookieDomain=function(t){w.log("API / Setting cookie domain to",t.cookieDomain),m.dispatch(r.SET_COOKIE_DOMAIN,t.cookieDomain)},n.disable=function(t){if(t.scope){if("tracking"!==t.scope)throw new Error('Unknown "scope" for disable: '+t.scope);w.log("API / Disabling tracking"),m.dispatch(r.LOAD_DIRECTIVE,{trackingDisabled:!0})}else w.log("API / Disabling everything"),m.dispatch(r.LOAD_DIRECTIVE,{disabled:!0})},n.log=function(t){var n=t.level,e=t.match;i.isUndefined(n)&&(n="INFO"),i.isUndefined(e)&&(e=""),w.setLogMatcher(e),w.setLogLevel(n)},n.registerModule=function(t){var n="custom/"+t.moduleName;if(a[n]||o.get(n))throw new Error('Module name "'+n+'" is reserved. Will not be registered as plugin.');b.registerApiModule(n,t.module)},n.dataFromSource=function(t){var n=t.source;l.makeAsyncRequest(n),l.resolveRequest(n,t.data)},n.addListener=function(t){if(!i.isFunction(t.handler))throw new Error("A handler function must be supplied");(t=i.omit(t,"type")).publicOnly=!0,t.emitErrors=!0;var n=t.handler;t.handler=function(t){try{return n(t)}catch(e){throw new O(e)}},g.on(t)},n.removeListener=function(t){if(!t.token)throw new Error("Must supply a token to removeListener");g.off(t.token)},n.load=function(t){t.data=i.extend({},t.data),u.normalizeClientData(t.data),m.dispatch(r.DATA_LOADED,{data:t.data})},n.integrationSettings=function(t){if(!t.id)throw new Error("id is required");if(!t.settings)throw new Error("settings is required");m.dispatch(r.SET_INTEGRATION_SETTINGS,i.extend({},t.settings,{id:t.id}))},n.bucketVisitor=function(t){if(!t.variationId&&i.isUndefined(t.variationIndex)||t.variationId&&t.variationIndex)throw new Error("One of a variationId or a variationIndex is required.");if(!t.experimentId)throw new Error("An experimentId is required.");var n,e,r=t.campaignId;if(r){if(!(n=C.get(r)))throw new Error("Could not find layer "+r)}else if(!(r=(n=C.getLayerByExperimentId(t.experimentId)).id))throw new Error("Could not find layer for experiment "+t.experimentId);if(!(e=i.find(n.experiments,{id:t.experimentId})))throw new Error("Could not find experiment "+t.experimentId+" in layer "+r);var o=t.variationId;if(i.isUndefined(t.variationIndex)){if(!i.find(e.variations,{id:o}))throw new Error("Cound not find variation "+o+" in experiment "+t.experimentId)}else if(!(o=e.variations[t.variationIndex].id))throw new Error("Could not find variation at index "+t.variationIndex+" in experiment "+t.experimentId);I.updateVariationIdMap(r,t.experimentId,o),R.getBucketingId()&&I.persistVariationIdMap(),I.updateContextualMabMap(r,t.experimentId,{variationId:o}),R.getBucketingId()&&I.persistContextualMabMap()},n.waitForOriginSync=function(t){if(!i.isArray(t.canonicalOrigins))throw new Error("canonicalOrigins must be an array. Got: "+_.stringify(t.canonicalOrigins));i.each(t.canonicalOrigins,(function(t){if(!i.isString(t))throw new Error("Each item in canonicalOrigins must be a string. Found type "+(void 0===t?"undefined":(n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n));var n})),m.dispatch(r.XDOMAIN_SET_CANONICAL_ORIGINS,{canonicalOrigins:t.canonicalOrigins})},n.disableCrossOrigin=function(){w.log("API / cross origin tracking is DISABLED"),m.dispatch(r.XDOMAIN_SET_DISABLED,{disabled:!0})},n.activate=function(){N.shouldActivate()?(i.forEach(S.getActiveViewStates(),(function(t){E.deactivate(k.get(t.id))})),m.dispatch(r.RESET_VIEW_STATES),f.emitActivateEvent()):w.debug("Not activating.")},n.sendEvents=function(){f.emitSendEvents()},n.holdEvents=function(){f.emitHoldEvents()}},2117:function(){},7452:function(t,n,e){var i=e(1167),r=e(4594).v,o=n.ActivationCodeError=r("ActivationCodeError"),a=n.ProjectJSError=r("ProjectJSError"),u=e(7899),c=e(4184),s=e(3971),f=e(4514),l=e(9067),d=e(1497),v=e(7112),h=e(5242),p=e(8859),g=e(1353),m=e(3702),_=e(4171),y=e(2432),w=e(478),b=e(2167),E=e(5700),I=e(6665),A=e(872),T=e(5594),S=e(9929).DT,k=e(1004),R=e(5976),C=e(850),N=e(7761),D=e(8953),O=e(3961).Promise,x=e(5211),M=e(1734),P=e(2374),L=e(2667),U=e(5916),V=e(4029),F=e(6670),B=(g=e(1353)).get("stores/session"),z=g.get("stores/audience_data"),G=g.get("stores/action_data"),j=g.get("stores/cleanup"),q=g.get("stores/directive"),H=g.get("stores/global"),Y=g.get("stores/group_data"),$=g.get("stores/layer_data"),K=g.get("stores/layer"),W=g.get("stores/pending_events"),X=g.get("stores/plugins"),J=g.get("stores/rum"),Q=g.get("stores/visitor"),Z=g.get("stores/view_data"),tt=g.get("stores/view"),nt=g.get("stores/visitor_id"),et=g.get("stores/visitor_bucketing"),it=g.get("stores/xdomain"),rt=e(9993),ot=e(7617),at=e(2213),ut=!1,ct=n;function st(){var t=null;i.isNumber(t)&&0===$.getCount()?(k.log("Activating after delay of",t,"ms because no Experiments are running"),I.dispatch(c.SET_RUM_DATA,{data:{activateDfd:!0}}),F.setTimeout(f.emitActivateEvent,t)):f.emitActivateEvent()}function ft(t){ot.handleError(t.data.error,t.data.metadata)}function lt(t,n){I.dispatch(c.SET_RUM_DATA,{data:{extras:{xdAttempt:t,xdError:n?n.toString():void 0}}})}function dt(t,n,e){t=t||[];var r=H.getGlobalHoldbackThreshold(),o=nt.getBucketingId();if(!o)throw new Error("bucketingId not set");var a,u=Q.getVisitorProfile();n&&(a=et.getVariationIdMap()[n.id]);var c={bucketingId:o,visitorProfile:u,audiences:t,globalHoldback:r,preferredVariationMap:a,layer:n};return n&&e&&p.isPageIdRelevant(n)?i.map(e,(function(t){return p.createTicket(i.extend({},c,{pageId:t}))})):[p.createTicket(c)]}function vt(t,e,r,o){try{var a=function(t){return{bucketingId:nt.getBucketingId(),preferredLayerId:et.getPreferredLayerMap()[t.id]}}(o),u=p.decideGroup(o,a);if(u.reason)return k.debug("Not activating Group",A.description(o),"; reason:",u.reason),J.getSampleRum()&&I.dispatch(c.RECORD_LAYER_FEATURE_USAGE,{feature:"mutex",entityId:o.id}),O.resolve();var s=$.get(u.layerId);if(!s)return k.debug("Visitor was bucketed into a Campaign ("+u.layerId+") which is not in this snippet"),O.resolve();var f=i.filter(s.pageIds,i.partial(i.includes,r));return i.isEmpty(f)?(k.debug("Not activating Group",A.description(o),"; reason: visitor was bucketed into a Campaign/Experiment not related to the currently-activating Page(s)"),O.resolve()):(J.getSampleRum()&&I.dispatch(c.RECORD_LAYER_FEATURE_USAGE,{feature:"mutex",entityId:o.id}),n.decideAndExecuteLayerASAP(t,e,f,s))}catch(l){return k.error("Error getting decision for Group",A.description(o),"; ",l),O.reject(l)}}function ht(t,n){var e={};return i.each(t,(function(t){i.isArray(t)?i.extend(e,ht(t,n)):i.isObject(t)&&n[t.type]&&(e[t.type]=!0)})),e}function pt(t){var n=[];return i.each(t,(function(t){n.push(t.name,t)})),n}function gt(t){var n=j.getCleanupFns(t);if(n.length>0){for(;n.length>0;)n.shift()();I.dispatch(c.CLEAR_CLEANUP_FN,{lifecycle:t})}}n.initialize=function(t){return this.initGlobalStore(t.clientData),this.initializePlugins(t.plugins)},n.initGlobalStore=function(t){v.normalizeClientData(t),w.on({filter:{type:"error"},handler:ft}),I.dispatch(c.DATA_LOADED,{data:t}),k.log("Initialized with DATA:",t)},n.initializePlugins=function(t){if(i.isArray(window.optimizely)&&(window.optimizely=i.filter(window.optimizely,(function(t){var n=!0;return!rt.push(t,n)}))),m.setOptOut(q.shouldOptOut()),!q.isDisabled()&&!q.shouldOptOut()){at.queueBeacons(),_.isReady()?I.dispatch(c.SET_DOMCONTENTLOADED):_.addReadyHandler((function(){I.dispatch(c.SET_DOMCONTENTLOADED)})),C.time("projectJS");var e=H.getProjectJS();if(i.isFunction(e))try{E.apply(e)}catch(v){k.error("Error while executing projectJS: ",v),d.emitError(new a(v))}C.timeEnd("projectJS"),i.each(t||[],(function(t){try{t(N)}catch(v){d.emitInternalError(v)}})),i.each(H.getPlugins()||[],(function(t){try{E.apply(t,[N])}catch(v){d.emitError(v)}})),M.load();var r=w.on({filter:{type:"lifecycle",name:"activated"},handler:function(){Q.observe(V.persistVisitorProfile),K.observe(V.persistLayerStates),B.observe(V.persistSessionState),W.observe(R.persistPendingEvents),et.observe(V.persistVisitorBucketingStore),w.off(r)}});w.on({filter:{type:"lifecycle",name:"viewsActivated"},handler:n.onViewsActivated}),w.on({filter:{type:"lifecycle",name:"pageDeactivated"},handler:n.onPageDeactivated}),n.initializeApi();var o=R.getPendingEvents();if(o&&(I.dispatch(c.LOAD_PENDING_EVENTS,{events:o}),R.retryPendingEvents(o)),w.on({filter:{type:"lifecycle",name:"activate"},handler:n.activate}),f.emitInitializedEvent(),!q.shouldActivate())return O.resolve();var u=[];if(it.isDisabled())st();else{var s=n.initializeXDomainStorage();if(u.push(s),Boolean(it.getCanonicalOrigins())){var l=P.makeTimeoutPromise(1e3);O.race([s,l])["catch"]((function(t){k.error("Failed to initialize xDomain storage: ",t)})).then(st)["catch"](ot.handleError)}else st()}return O.all(u)}k.log("Controller / Is disabled")},n.activate=function(){try{var t=[];k.log("Activated client"),gt(y.Lifecycle.preActivate);var n=!1;ut;var e=h.now();I.dispatch(c.ACTIVATE,{activationId:String(e),activationTimestamp:e});var r=Z.getAll();U.registerViews(r,n),V.setId(V.getOrGenerateId()),t.push(s.trackPostRedirectDecisionEvent()),I.dispatch(c.MERGE_VARIATION_ID_MAP,{variationIdMap:V.getVariationIdMap()}),I.dispatch(c.MERGE_CONTEXTUAL_MAB_MAP,{contextualMabMap:V.getContextualMabMap()}),I.dispatch(c.SET_ODP_SEGMENTS,V.getOdpSegments()),I.dispatch(c.MERGE_PREFERRED_LAYER_MAP,{preferredLayerMap:V.getPreferredLayerMap()}),gt(y.Lifecycle.postVisitorProfileLoad),t.push((g=X.getAllPlugins(y.PluginTypes.visitorProfileProviders),m=Q.getVisitorProfile(),V.populateEagerVisitorData(g,m)).then((function(){k.log("Populated visitor profile")})));var o=dt(),a=p.decideGlobal(o);k.log("Made global decision",o,"->",a),I.dispatch(c.RECORD_GLOBAL_DECISION,a);var u=s.trackClientActivation();u?k.log("Tracked activation event",u):k.log("Not tracking activation event");var l=ct.setUpViewActivation(r),v=[];return i.each(l,(function(t){v=v.concat(U.activateMultiple([t]))})),gt(y.Lifecycle.postViewsActivated),gt(y.Lifecycle.postActivate),f.emitActivatedEvent(),O.all(t).then((function(){w.emit({type:b.TYPES.LIFECYCLE,name:"activateDeferredDone"}),k.log("All immediate effects of activation resolved")}),d.emitError)}catch(_){return d.emitError(_),O.reject(_)}var g,m},ct.setUpViewActivation=function(t){var n=[];return i.each(t,(function(t){i.isBoolean(tt.getViewState(t.id).isActive)&&U.isActivationTypeImmediate(t.activationType)?k.debug("Skipping page: already evaluated, presumably at the edge",U.description(t)):U.shouldTriggerImmediately(t.activationType)?n.push(t):t.activationType===y.ViewActivationTypes.callback?(k.debug("Setting up conditional activation for Page",U.description(t)),ct.activateViewOnCallback(t)):t.activationType===y.ViewActivationTypes.polling?(k.debug("Setting up polling activation for Page",U.description(t)),D.pollFor(i.partial(E.apply,t.activationCode),null,i.partial(L.isTimedOut,h.now())).then((function(){U.activateMultiple([t])}))["catch"]((function(n){k.warn("Failed to activate view ",t,n)}))):t.activationType!==y.ViewActivationTypes.manual&&d.emitError(new Error("Unknown view activationType: "+t.activationType))})),n},ct.activateViewOnCallback=function(t){var n={pageId:t.id};Object.defineProperty(n,"isActive",{get:function(){return tt.isViewActive(t.id)}});try{E.apply(t.activationCode,[function(n){var e=i.extend({},n,{pageName:t.apiName,type:"page"});rt.push(e)},n])}catch(r){var e=new o("("+r.toString()+") in activationCode for "+U.description(t));d.emitError(e,{originalError:r,userError:!0})}},n.onViewsActivated=function(t){var e,r=t.data.views,o=i.map(r,"id");try{if(!nt.getBucketingId())throw new Error("View activated with no visitorId set");var a=function(t){var e=$.getAllByPageIds(t),r=q.getForceVariationIds(),o=q.getForceAudienceIds(),a=!i.isEmpty(r);a&&k.log("Force variations are in use. Disabling mutual exclusivity.");var u=a?{individual:e}:i.reduce(e,(function(t,n){return n.groupId?t.groups[n.groupId]||(t.groups[n.groupId]=Y.get(n.groupId)):t.individual.push(n),t}),{groups:{},individual:[]});k.log("Deciding Campaigns/Experiments for Page(s)",t);var c=i.map(u.groups,A.description).join(", ");k.log("Groups:",c);var s=i.map(u.individual,T.description).join(", ");k.log("Campaigns/Experiments not in Groups (by Campaign id):",s);var f=i.map(u.groups,i.partial(vt,r,o,t))||[],l=i.map(u.individual,(function(e){var a=i.filter(e.pageIds,i.partial(i.includes,t));return n.decideAndExecuteLayerASAP(r,o,a,e)})),d=f.concat(l);return O.all(d).then((function(n){var e=i.filter(n,(function(t){return!!t}));return k.log("All Campaigns/Experiments for Page(s) (by Campaign id)",t,"resolved:",i.map(e,T.description).join(", ")),e}))}(o)["catch"](d.emitError);return e=O.all(i.map(r,(function(t){var n=function(){U.parseViewTags(t);var n=s.trackViewActivation(t);n?k.log("Tracked activation for Page",U.description(t),n):k.log("Not Tracking activation for Page",U.description(t))};return _.isReady()?O.resolve(n()):D.pollFor(_.isReady,1e3).then(n)}))),O.all([a,e])}catch(u){d.emitError(u)}},n.onPageDeactivated=function(t){var n=t.data.page,e=G.getAllActionIdsByPageId(n.id);i.each(e,(function(t){var e=G.getActionState(t);e&&(i.each(e,(function(t,e){if(t.cancel)try{t.cancel(),k.debug("Controller / Canceled change",e,"observation due to deactivation of page:",n)}catch(i){k.error("Controller / Error canceling change",e,"observation upon deactivation of page.",i)}if(n.undoOnDeactivation&&t.undo)try{t.undo(),k.debug("Controller / Undid change",e,"due to deactivation of page:",n)}catch(r){k.error("Controller / Error undoing change upon deactivation of page.",r)}})),I.dispatch(c.REMOVE_ACTION_STATE,{actionId:t}),k.debug("Controller / Undid changes and/or canceled change observation due to deactivation of page:",n,t))}))},n.initializeApi=function(){var t={push:rt.push};t.get=rt.get;var n=window.optimizely;i.isArray(n)&&i.each(n,(function(n){t.push(n)})),t.data={note:"Obsolete, use optimizely.get('data') instead"},t.state={},window.optimizely=t},n.persistItemsWithId=function(t){return i.each(t,(function(t,n){V.checkKeyForVisitorId(n)&&S.setItem(n,t)})),t},n.initializeXDomainStorage=function(){var t=e(4188),r=!!V.getCurrentId(),o=!!r&&V.hasSomeData();r?o?k.log("xd / Existing visitor; has data on this origin"):k.log("xd / Existing visitor; new to this origin"):k.log("xd / New visitor");var a=H.getAccountId(),u="https://a19181790056.cdn.optimizely.com".replace("__SUBDOMAIN__","a"+a+"."),s="/client_storage/a"+a+".html";t.subscribe((function(t,n){V.checkKeyForVisitorId(t)&&S.setItem(t,n)}));var l=t.fetchAll().then((function(n){if(!nt.getVisitorIdLocator()){var e=it.getCanonicalOrigins();if(e){var i=t.getXDomainUserId(n,e);i&&(k.log("Syncing cross-origin visitor randomId:",i),V.maybePersistVisitorId({randomId:i}))}}return V.deleteOldForeignData(),n})).then(n.persistItemsWithId).then((function(t){if(V.loadForeignData(),r&&!o){var n=!i.isEmpty(t);k.debug("xd / Loaded foreign data? ",n),lt(n)}k.log("Loaded visitor data from foreign origins"),f.emitOriginsSyncedEvent()}),(function(t){throw r&&!o&&(k.debug("xd / Failed to load foreign data:",t),lt(!1,t)),t}));return O.all([t.load(u,s)["catch"]((function(t){throw k.debug("xd / Failed to load iframe:",t),r&&!o&&lt(!1,t),t})),l["catch"]((function(t){k.debug("xd / Ignored error syncing foreign data (expected if waitForOriginSync used):",t.message),k.debug("xd / Enqueuing sync to happen after visitorId set."),I.dispatch(c.ADD_CLEANUP_FN,{lifecycle:y.Lifecycle.postVisitorProfileLoad,cleanupFn:f.emitOriginsSyncedEvent})}))])},n.decideAndExecuteLayerASAP=function(t,e,r,o){return new O((function(a,d){try{!function(t,n,e,r,o){if(n.length||e.length)return void o(dt([],void 0,r));var a=T.relatedAudienceIds(t),u=i.reduce(a,(function(t,n){var e=z.get(n);return!e||t.push(e),t}),[]),s=X.getAllPlugins(y.PluginTypes.audienceMatchers);if(J.getSampleRum()){var f={};if(i.each(u,(function(t){i.extend(f,ht(t.conditions,s))})),!i.isEmpty(f)){var d=i.keys(f);I.dispatch(c.RECORD_AUDIENCE_USAGE,{audienceTypes:d,layerId:t.id})}}var v=function(t){k.debug("Audience list for extracting types",t);try{var n=new Set(i(t).map("conditions").flattenDeep().filter((function(t){return"string"!=typeof t})).map("type").value());return n.has("time_and_day")&&n.add("currentTimestamp"),k.debug("Extracted unique types from audiences",n),n}catch(e){return k.error("An error occurred while extracting types from audiences:",e),new Set}}(u),h=X.getAllPlugins(y.PluginTypes.visitorProfileProviders),p=Q.getVisitorProfile();V.populateLazyVisitorData(h,p,v),function(t,n,e,r){var o=i.reduce(t,(function(t,e){return i.extend(t,l.requiredAudienceFieldsForConditions(e.conditions,n))}),{}),a=i.reduce(o,(function(t,n){if(i.isUndefined(V.getAttribute(n))){var e=V.getPendingAttributeValue(n);i.isUndefined(e)||t.push(e)}return t}),[]);if(0===a.length)return r();var u=[].concat(t),c=x.firstToResolve(i.map(a,(function(t){return O.resolve(t).then((function(){var t=Q.getVisitorProfile();if(u=i.filter(u,(function(e){return i.isUndefined(l.isInAudience(t,e,n))})),!i.isEmpty(u))throw new Error("At least one audience is still pending")}))})));O.race([c,new O((function(t,n){F.setTimeout(n,e)}))]).then((function(){k.log("Activating Campaign after pending Audiences resolved",t),r()}),(function(){k.log("Activating Campaign after timeout on Audiences",t),r()}))}(u,s,T.getActivationTimeout(t),(function(){var n=dt(u,t,r);i.map(n,(function(n){!function(t,n,e){var r=i.map(t.audienceIds,i.bind(z.get,z)),o=i.filter(n,(function(n){return!i.includes(t.audienceIds,n.id)}));k.log("When deciding Campaign",T.description(e),"visitor is in audiences:",pt(r),"and not in audiences:",pt(o))}(n,u,t)})),o(n)}))}(o,t,e,r,(function(l){i.each(l,(function(a){var l=a.pageId?[a.pageId]:r;k.debug("Deciding layer: ",o,"with decisionTicket: ",a,"and actionViewIds: ",l),function(t,e,r,o,a){var l=T.description(t);k.log("Activating Campaign",l,"on Page(s)",o),r.length&&(k.log("Applying force audienceIds:",r,"to Campaign",l),(a=i.cloneDeep(a)).audienceIds=r);var d=n.decideLayer(t,a,e),v=!(!e.length&&!r.length),h=n.getActionsForDecision(t,d,v),g=function(t,n){return i.filter(t,(function(t){return i.isUndefined(t.pageId)||i.includes(n,t.pageId)}))}(h.actions,o);if(h.maybeExecute&&function(t,n,e,r){var o=T.description(n);k.log("Preparing actions",t,"for Campaign",o,"on Page(s)",r),i.forEach(t,u.prepareAction)}(g,t,0,o),i.forEach(o,(function(){s.trackDecisionEvent(d,a)})),f.emitLayerDecided({layer:t,decisionTicket:a,decision:d}),d.error)throw d.error;if(J.getSampleRum()){I.dispatch(c.RECORD_LAYER_POLICY_USAGE,{policy:t.policy,layerId:t.id});var m=function(t){var n={};return i.each(t,(function(t){i.each(t.changeSet,(function(t){n[t.type]||(n[t.type]=!0)}))})),n}(h.actions);I.dispatch(c.RECORD_CHANGE_TYPE_USAGE,{changeTypes:i.keys(m),layerId:t.id}),i.isEmpty(t.integrationSettings)||I.dispatch(c.RECORD_INTEGRATION_USAGE,{integrations:T.getIntegrationTypes(t),layerId:t.id})}if(!p.isInCohort(d))return void k.log("Not activating Campaign: "+T.description(t)+"; not in the cohort because:",d.reason);h.maybeExecute&&function(t,n,e,r){var o=T.description(n);k.log("Executing actions",t,"for Campaign",o,"on Page(s)",r),O.all(i.map(t,(function(t){return u.executePreparedAction(t).then(i.partial(f.emitActionAppliedEvent,t))}))).then((function(){k.log("All page actions for",e,"applied:",t),f.emitActionsForDecisionAppliedEvent(e,t)}))["catch"]((function(t){k.warn("Error evaluating page actions for decision",e,"because:",t)}))}(g,t,d,o)}(o,t,e,l,a)})),a(o)}))}catch(v){k.error("Error getting decision for Campaign: "+T.description(o),v),d(v)}}))},n.decideLayer=function(t,n,e){var i;var r=T.description(t);i=e.length?p.getDummyLayerDecision(t,e):p.decideLayer(t,n),k.log("Recording decision for Campaign",r,n,"->",i),T.recordLayerDecision(t.id,n,i),i.variationId&&i.experimentId&&V.updateVariationIdMap(t.id,i.experimentId,i.variationId),t.groupId&&V.updatePreferredLayerMap(t.groupId,t.id);return i},n.getActionsForDecision=function(t,n,e){var i=T.description(t),r="NOT applying changes for Campaign",o={actions:[],maybeExecute:!1};if(o.actions=[].concat(G.getLayerActions(n.layerId)||[],G.getExperimentActions(n.experimentId)||[],G.getExperimentVariationActions(n.experimentId,n.variationId)||[]),!e&&H.isGlobalHoldback())return k.log(r,i,"(visitor is in global holdback)"),o;if(n.isLayerHoldback)return k.log(r,i,"(visitor is in layer holdback)"),o;if(!n.experimentId||!n.variationId)return k.log(r,i,"(visitor is not eligible for any Experiments)"),o;return o.maybeExecute=!0,k.log("Got Actions for Campaign:",i,o.actions),o}},5442:function(t,n,e){var i=e(3961).Promise,r=e(5242),o=e(1353).get("stores/plugins"),a=e(2432),u=e(1004);n.create=function(t,n,e){var c={identifier:t.id,action:n,startTime:e||r.now()};try{var s=o.getPlugin(a.PluginTypes.changeAppliers,t.type);if(!s)throw new Error("Unrecognized change type "+t.type);return new s(t,c)}catch(l){u.error("Change applier was never properly constructed:",l);var f={apply:function(){return i.reject(l)}};return f}}},1142:function(t){t.exports={SELECTOR_POLLING_MAX_TIME:2e3,CHANGE_DATA_KEY:"optimizelyChangeData",CHANGE_ID_ATTRIBUTE_PREFIX:"data-optly-"}},2026:function(t,n,e){var i=e(1167),r=e(1142).CHANGE_DATA_KEY;function o(t,n){return[t,n].join("_")}n.getData=function(t,n,e){var i=o(n,e);return t[r]&&t[r][i]?t[r][i]:null},n.hasData=function(t){return Boolean(t&&t[r]&&!i.isEmpty(t[r]))},n.removeData=function(t,n,e){t[r]&&delete t[r][o(n,e)]},n.setData=function(t,n,e,i){if("object"!=typeof i)throw new Error("setData expects an object");t[r]||(t[r]={}),t[r][o(n,e)]=i}},1573:function(t,n,e){var i=e(1032);t.exports={changeType:{CUSTOM_CODE:"custom_code",ATTRIBUTE:"attribute",APPEND:"append",REARRANGE:"rearrange",REDIRECT:"redirect",WIDGET:"widget"},DOMInsertionType:{AFTER:"after",APPEND:"append",BEFORE:"before",PREPEND:"prepend"},insertAdjacentHTMLType:{AFTER_BEGIN:"afterbegin",AFTER_END:"afterend",BEFORE_BEGIN:"beforebegin",BEFORE_END:"beforeend"},selectorChangeType:{CLASS:"class",HTML:"html",HREF:"href",SRC:"src",SRCSET:"srcset",STYLE:"style",TEXT:"text",HIDE:"hide",REMOVE:"remove"},changeApplierState:i({APPLIED:null,APPLYING:null,UNAPPLIED:null,UNDOING:null}),changeState:i({BLOCKED:null,UNAPPLIED:null,APPLIED:null,APPLYING:null,UNDOING:null,TIMED_OUT:null,IGNORED:null,ERROR:null})}},7899:function(t,n,e){var i=e(1167),r=e(4184),o=e(1497),a=e(8104),u=e(4594).v,c=e(5242),s=e(1353),f=e(6665),l=e(1004),d=e(3961).Promise,v=e(371),h=s.get("stores/global"),p=s.get("stores/action_data"),g=s.get("stores/change_data"),m=s.get("stores/session"),_=e(5442);e(2667).initialize();var y=u("ActionError");function w(t,n,e){if(p.getActionState(n.id)){var o=p.getChangeApplier(t.id,n.id);if(i.isUndefined(o)){var a={changeId:t.id,actionId:n.id,changeApplier:_.create(t,n,e)};f.dispatch(r.SET_CHANGE_APPLIER,a)}else l.warn("Action / Attempted to prepare a change which is already being applied: ",t)}else l.warn("Action / Attempted to prepare change for inactive action: ",n)}function b(t,n,e,r){if(!i.includes(r,n)){if(!t[String(n)]){var u=g.getChange(n);if(!u){var s="Change with id "+n+" is absent";return r.length&&(s+=" but listed as a dependency for "+r[r.length-1]),void l.warn(s)}t[String(n)]=new d((function(s){var f=i.map(u.dependencies||[],(function(i){return b(t,i,e,r.concat([n]))}));if(u.src){var h="change_"+u.src,m=a.makeAsyncRequest(h,(function(){return v.addScriptAsync("https://cdn.optimizely.com/public/19181790056/data"+u.src,(function(){a.resolveRequest(h)}))})).then((function(){var t=g.getChange(u.id);t||o.emitError(new y("Failed to load async change from src: "+u.src)),w(t,e,c.now())}));f.push(m)}d.all(f).then((function(){var t=c.now(),i=p.getChangeApplier(n,e.id);return i?(l.debug("Action / Applying change:",u),i.apply().then((function(n){n?l.log(n):l.debug("Action / Applied change for the first time in "+(c.now()-t)+"ms:",u),s()}))):(l.debug("Action / Not applying change ",n," - No changeApplier found."),void s())}))["catch"]((function(t){l.error("Action / Failed to apply change:",u,t),s()}))}))}return t[String(n)]}l.error("Change with id "+n+" has circular dependencies: "+r.concat(n))}n.prepareAction=function(t){l.debug("Action / Preparing:",t),f.dispatch(r.ACTION_EXECUTED,{actionId:t.id,sessionId:m.getSessionId(),layerId:t.layerId,pageId:t.pageId,timestamp:c.now(),activationId:h.getActivationId()});var n=c.now();i.forEach(t.changeSet,(function(e){var o=i.isObject(e)?e.id:e,a=g.getChange(o);a||(f.dispatch(r.ADD_CHANGE,e),a=g.getChange(e.id)),a.src||w(a,t,n)}))},n.executePreparedAction=function(t){l.debug("Action / Executing:",t);var n={},e=i.map(t.changeSet,(function(e){var r=i.isObject(e)?e.id:e;return b(n,r,t,[])}));return d.all(e).then((function(){l.debug("changes for action id="+t.id+" applied")}))}},2667:function(t,n,e){var i=e(1142),r=e(1353).get("stores/directive");function o(){("interactive"===document.readyState||"complete"===document.readyState)&&(n.domReadyTime=Date.now())}n.domReadyTime=null,n.initialize=function(){o(),document.addEventListener("readystatechange",o,!0)},n.isTimedOut=function(t){var e=Date.now();if(!n.domReadyTime||!t)return!1;var o=Math.max(t,n.domReadyTime);return r.isEditor()&&(o=n.domReadyTime),!(e-o<i.SELECTOR_POLLING_MAX_TIME)}},3971:function(t,n,e){var i=e(1167),r=e(4184),o=e(1497),a=e(4047),u=e(5242),c=e(1535),s=e(1353),f=e(4171),l=e(2432),d=e(3209),v=e(478),h=e(2167),p=e(3864),g=e(6665),m=e(5594),_=e(1004),y=(e(850),e(3961).Promise),w=e(4744),b=e(1734),E=e(2374),I=e(4250),A=e(7432),T=s.get("stores/client_metadata"),S=s.get("stores/global"),k=s.get("stores/session"),R=s.get("stores/view"),C=s.get("stores/plugins"),N=s.get("stores/layer"),D=s.get("stores/layer_data"),O=s.get("stores/observed_redirect"),x=s.get("stores/pending_redirect"),M=s.get("stores/visitor"),P=s.get("stores/directive"),L=s.get("stores/event_data"),U=s.get("stores/visitor_id");function V(t,n,e){return void 0===e&&(e=!1),i.extend({},t,{isLayerHoldback:n,isLayerConcluded:e,isGlobalHoldback:!1,clientName:i.isNull(t.clientName)?c.NAME:t.clientName,integrationStringVersion:i.isNull(t.integrationStringVersion)?1:t.integrationStringVersion,anonymizeIP:i.isNull(S.getAnonymizeIP())?void 0:S.getAnonymizeIP(),activationId:S.getActivationId(),decisionTicketAudienceIds:[],sessionId:k.getSessionId(),activeViewStates:[],userFeatures:z(M.getVisitorProfile()),layerStates:N.getLayerStatesForAnalytics()})}function F(t){var n=w.getReferrer()||f.getReferrer();return{eventId:A.generate(),timestamp:u.now(),revision:S.getRevision(),clientName:T.getClientName(),clientVersion:T.getClientVersion(),projectId:S.getProjectId(),accountId:S.getAccountId(),activationId:S.getActivationId(),sessionId:k.getSessionId(),isGlobalHoldback:S.isGlobalHoldback(),namespace:S.getNamespace(),referrer:n,visitorId:U.getRandomId(),activeViewStates:t.activeViewStates,layerStates:t.layerStates,userFeatures:z(t.visitorProfile)}}function B(t){var n,e;return t.pageId?(n=t.pageId,(e=R.getViewState(n))&&e.isActive?e.metadata:{}):{}}function z(t){var n=C.getAllPlugins(l.PluginTypes.visitorProfileProviders),e=i.filter(n,{shouldTrack:!0}),r={id:null,type:null,name:"",value:null,shouldIndex:!0};return i.reduce(e,(function(n,e){try{var o=e.provides,a=t[o],u=[];if(!i.isUndefined(a)){i.isObject(a)?u=i.map(a,(function(t,n){var e=i.isObject(t)?t:{value:t};return i.extend({},{type:o,name:n},e)})):u.push({type:o,value:a});var c=i(u).map((function(t){return i.pick(i.extend({},r,t),i.keys(r))})).filter((function(t){return!!t.value})).value();n=n.concat(c)}}catch(s){_.warn("Error evaluating userFeature against visitorProfile:",s)}return n}),[])}function G(t,n,e){var r=function(t,n){var e=[];return i.each(C.getAllPlugins(l.PluginTypes.analyticsTrackers),(function(i,r){if(i[t]&&(!n||!i[n]))try{e.push({name:r,hookFn:s.evaluate(i[t])})}catch(o){_.error(o)}})),e}(t,e);_.debug("Found "+r.length+" analytics integrations defining a "+t+" hook"),_.debug("Calling each with data: ",n),i.each(r,(function(t){try{_.debug("Calling plugin: "+t.name),t.hookFn(n),_.debug("Called plugin: "+t.name)}catch(e){_.error(e)}}))}function j(t,n,e){var r=function(t,n){0;var e=[];return i.each(C.getAllPlugins(l.PluginTypes.analyticsTrackers),(function(r,o){i.includes(n,r[t])&&e.push({name:o,hookFn:r.trackLayerDecision})})),e}(t,n);_.debug("Found "+r.length+" analytics integrations  defining a trackLayerDecision "+t+" timing of "+n.join("|")),_.debug("Calling each with data: ",e),i.each(r,(function(t){try{_.debug("Calling plugin: "+t.name),t.hookFn(e),_.debug("Called plugin: "+t.name)}catch(n){_.error(n)}}))}n.trackClientActivation=function(){if(P.shouldSendTrackingData()){var t,n=(t=F({activeViewStates:[],visitorProfile:M.getVisitorProfile(),layerStates:N.getLayerStatesForAnalytics()}),i.extend(t,{eventTags:{}}));return G("onClientActivation",n),n}},n.trackCustomEvent=function(t,n,e,r){n=n||{},r=r||{},e||(e=L.getByApiName(t));var u=function(t,n,e,r){var o=F({activeViewStates:R.getActiveViewStates(),visitorProfile:M.getVisitorProfile(),layerStates:N.getLayerStatesForAnalytics()}),a=r&&r.pageId?B(r):R.getActiveViewTags(),u=i.extend({},a,n),c=r&&r.category?r.category:d.OTHER;return i.extend(o,{eventEntityId:r&&r.id,eventApiName:t,eventCategory:c,eventTags:u,eventProperties:e})}(t,n,r,e),c={name:t,type:p.CUSTOM,category:u.eventCategory,tags:i.omit(u.eventTags,"revenue")};if(i.isUndefined(n.revenue)||(c.revenue=n.revenue),o.emitAnalyticsEvent({name:e?e.name||e.apiName:t,apiName:e?e.apiName:void 0,type:p.CUSTOM,properties:u.eventProperties,tags:i.omit(u.eventTags,"revenue"),category:u.eventCategory,metrics:c.revenue?{revenue:c.revenue}:{}},!P.shouldSendTrackingData()),P.shouldSendTrackingData())return a.addEvent(c),G("onCustomEvent",u),u},n.trackDecisionEvent=function(t,n,e){e||(e=D.get(t.layerId));var o=A.generate();g.dispatch(r.RECORD_LAYER_DECISION_EVENT_ID,{layerId:t.layerId,pageId:n.pageId,decisionId:o});var a=function(t,n,e,r){var o=null,a=null,c=null;if(n.experimentId){var s=i.find(r.experiments,{id:n.experimentId});if(s&&(o=s.name||null,c=s.integrationSettings,n.variationId)){var l=i.find(s.variations,{id:n.variationId});l&&(a=l.name||null)}}var d=w.getReferrer()||f.getReferrer(),v={sessionId:k.getSessionId(),decisionTicketAudienceIds:e.audienceIds,visitorId:U.getRandomId(),decisionId:t,activationId:S.getActivationId(),namespace:S.getNamespace(),timestamp:u.now(),pageId:e.pageId||null,variationId:n.variationId,variationName:a,experimentId:n.experimentId,experimentName:o,layerId:n.layerId,layerName:r.name,layerPolicy:r.policy,accountId:S.getAccountId(),projectId:S.getProjectId(),revision:String(S.getRevision()),clientName:T.getClientName(),clientVersion:T.getClientVersion(),referrer:d,integrationStringVersion:r.integrationStringVersion||1,integrationSettings:i.extend({},r.integrationSettings,c)};return v}(o,t,n,e),c=x.isExpectingRedirect(),s=x.getLayerId(),l=m.description(e);if(c&&s===e.id&&(b.persist(a,"COOKIE"),_.log("Relaying decision for redirect Campaign",l)),P.shouldSendTrackingData()){var d=V(a,t.isLayerHoldback,t.isLayerConcluded);if(c&&s===e.id){var v=I.TrackLayerDecisionTimingFlags.preRedirectPolicy;d.timing=v,j(v,[I.PreRedirectPolicies.PERSIST_BEFORE_AND_TRACK_DURING_REDIRECT],d),_.log("Called trackLayerDecision for redirect Campaign",l,d)}else{v=I.TrackLayerDecisionTimingFlags.nonRedirectPolicy;d.timing=v,j(v,[I.NonRedirectPolicies.TRACK_IMMEDIATELY],d),_.log("Called trackLayerDecision for non-redirect Campaign",l,d)}}else _.log("Analytics / Not tracking decision for Campaign",m.description(e))},n.trackPostRedirectDecisionEvent=function(){if(!P.shouldSendTrackingData()||O.hasTracked())return y.resolve();var t=O.get();if(!t)return y.resolve();var n=V(t,!1),e=I.TrackLayerDecisionTimingFlags.postRedirectPolicy;n.timing=e,j(e,[I.PostRedirectPolicies.TRACK_IMMEDIATELY],n);var i=new y((function(t){var n=v.on({filter:{type:h.TYPES.LIFECYCLE,name:"originsSynced"},handler:function(){t(),v.off(n)}})})),o=E.makeTimeoutPromise(1e3);return y.race([i,o]).then((function(){_.log("Calling trackers after successful sync")}),(function(t){_.warn("Calling trackers after failed sync:",t)})).then((function(){(n=V(t,!1)).timing=I.TrackLayerDecisionTimingFlags.postRedirectPolicy,j(I.TrackLayerDecisionTimingFlags.postRedirectPolicy,[I.PostRedirectPolicies.TRACK_AFTER_SYNC],n),g.dispatch(r.REGISTER_TRACKED_REDIRECT_DATA)}))["catch"]((function(t){_.error("Error when calling trackers after sync:",t)}))},n.trackClickEvent=function(t){var n=function(t){var n=F({activeViewStates:R.getActiveViewStates(),visitorProfile:M.getVisitorProfile(),layerStates:N.getLayerStatesForAnalytics()}),e=t.config&&t.config.selector?t.config.selector:t.eventFilter.selector,r=t.apiName,o=t.category||d.OTHER,a=t.id,u=B(t);return i.extend(n,{eventApiName:r,eventCategory:o,eventEntityId:a,eventTags:u,pageId:t.pageId,selector:e})}(t),e={name:t.apiName,type:t.eventType,category:n.eventCategory,tags:n.eventTags};if(o.emitAnalyticsEvent({name:t.name||t.apiName,apiName:t?t.apiName:void 0,type:t.eventType,category:n.eventCategory,tags:n.eventTags,metrics:{}},!P.shouldSendTrackingData()),P.shouldSendTrackingData())return a.addEvent(e),G("onClickEvent",n),n},n.trackViewActivation=function(t,n){if(n||(n=R.getViewState(t.id)),n.isActive){var e=function(t,n){var e=F({activeViewStates:R.getActiveViewStates(),visitorProfile:M.getVisitorProfile(),layerStates:N.getLayerStatesForAnalytics()});return i.extend(e,{pageId:t.id,pageApiName:t.apiName,viewCategory:t.category,eventTags:n.metadata})}(t,n);if(o.emitAnalyticsEvent({name:t.name||e.pageApiName,apiName:e.pageApiName,type:p.PAGEVIEW,category:e.viewCategory,tags:e.eventTags,metrics:{}},!P.shouldSendTrackingData()),P.shouldSendTrackingData())return a.addEvent({name:e.pageApiName,type:p.PAGEVIEW,category:e.viewCategory,tags:e.eventTags}),g.dispatch(r.TRACK_VIEW_ACTIVATED_EVENT,{pageId:t.id,eventData:e}),G("onPageActivated",e),e}else _.debug("Inactive view passed to `trackViewActivation`")}},1734:function(t,n,e){var i=e(1167),r=e(4184),o=e(9430),a=e(1497),u=e(1353),c=e(2432),s=e(6665),f=e(1004),l=e(4250),d=u.get("stores/plugins"),v=".",h=[{name:"sessionId",relayName:"s"},{name:"decisionTicketAudienceIds",relayName:"as",valueToValueString:function(t){return i.map(t,encodeURIComponent).join(",")},encodeValueString:i.identity,decodeValueString:i.identity,valueFromValueString:function(t){return i.map(t.split(","),o.safeDecodeURIComponent)}},{name:"decisionId",relayName:"d"},{name:"activationId",relayName:"aId"},{name:"pageId",relayName:"vId",isNullable:!0},{name:"variationId",relayName:"v",isNullable:!0},{name:"referrer",relayName:"r"},{name:"timestamp",relayName:"t",valueFromValueString:Number},{name:"visitorId",relayName:"i"},{name:"projectId",relayName:"p"},{name:"revision",relayName:"n"},{name:"clientName",relayName:"cN",isNullable:!0},{name:"clientVersion",relayName:"cV"},{name:"namespace",relayName:"ns"},{name:"accountId",relayName:"a"},{name:"layerId",relayName:"l"},{name:"layerName",relayName:"lN",isNullable:!0},{name:"layerPolicy",relayName:"lP"},{name:"experimentId",relayName:"x",isNullable:!0},{name:"experimentName",relayName:"xN",isNullable:!0},{name:"variationName",relayName:"vN",isNullable:!0},{name:"integrationStringVersion",relayName:"isv",valueFromValueString:Number,isNullable:!0},{name:"integrationSettings",relayName:"iS",isMulti:!0,valueToValueString:function(t,n){var e=null;if(t){var r=d.getPlugin(c.PluginTypes.analyticsTrackers,n);if(r&&i.isFunction(r.serializeSettings))try{e=r.serializeSettings(t)}catch(o){f.warn("Analytics / Failed to persist integrationSettings for plugin:",n,o)}}return e},valueFromValueString:function(t,n){var e=null,r=d.getPlugin(c.PluginTypes.analyticsTrackers,n);if(r&&i.isFunction(r.deserializeSettings))try{e=r.deserializeSettings(t)}catch(o){f.warn("Analytics / Failed to persist integrationSettings for plugin:",n,o)}return e},isNullable:!0}],p={},g={};i.forEach(h,(function(t){p[t.name]=t,g[t.relayName]=t})),n.persist=function(t,n){n===l.RedirectRelayMedia.COOKIE?function(t){try{var n=function(t){var n=[],e=i.reduce(t,(function(t,e,r){var o=p[r];return o?(o.isMulti?i.forEach(e,(function(n,e){n=o.valueToValueString?o.valueToValueString(n,e):String(n),i.isNull(n)||(n=(o.encodeValueString||encodeURIComponent)(n),t.push(encodeURIComponent(o.relayName+v+e)+"="+n))})):i.isNull(e)||(e=(o.valueToValueString||String)(e),e=(o.encodeValueString||encodeURIComponent)(e),t.push(o.relayName+"="+e)),t):(n.push(r),t)}),[]);if(n.length)throw new Error("Relay / Don't know how to relay some fields: "+n);return e.sort(),e.join("&")}(t)}catch(e){return f.error("Relay / Error computing redirect relay cookie: ",e),void a.emitError(e)}f.debug("Relay / Setting redirect relay cookie:",n);try{o.set(c.COOKIES.REDIRECT,n,{maxAge:5,encodeValue:!1})}catch(r){f.error("Relay / Failed to set redirect relay cookie",r),a.emitError(r)}}(t):f.error("Relay / Unsupported redirect relay medium: "+n)},n.load=function(t){if(t||(t=function(){var t=o.get(c.COOKIES.REDIRECT,!1);if(t)return f.log("Relay / Found redirect cookie:",t),t}()),t){var n=function(t){var n={},e=t.split("&");return i.forEach(e,(function(t){var e=t.split("=");if(2===e.length){var r=o.safeDecodeURIComponent(e[0]),u=g[r];if(u||(u=i.find(h,(function(t){return t.isMulti&&0===r.indexOf(t.relayName+v)})))){var c=e[1];try{if(u.isMulti){n[u.name]=n[u.name]||{};var s=r.substring(u.relayName.length+1);c=(u.decodeValueString||o.safeDecodeURIComponent)(c),c=(u.valueFromValueString||i.identity)(c,s),n[u.name][s]=c}else c=(u.decodeValueString||o.safeDecodeURIComponent)(c),c=(u.valueFromValueString||i.identity)(c),n[u.name]=c}catch(l){return f.warn("Relay / Skipping segment due to decode or parse error:",t,l),void a.emitError(l)}}else f.warn("Relay / Skipping segment with unknown field identifier:",t,r)}else f.warn("Relay / Skipping invalid segment:",t)})),n}(t);if(n){var e=[];if(i.forEach(h,(function(t){(i.isNull(n[t.name])||i.isUndefined(n[t.name]))&&(t.isNullable?n[t.name]=null:(delete n[t.name],e.push(t.name)))})),!e.length)return s.dispatch(r.LOAD_REDIRECT_DATA,n),s.dispatch(r.ADD_CLEANUP_FN,{lifecycle:c.Lifecycle.postVisitorProfileLoad,cleanupFn:function(){var t,e;e=(t=n).pageId||void 0,s.dispatch(r.RECORD_LAYER_DECISION,{layerId:t.layerId,decision:{layerId:t.layerId,experimentId:t.experimentId,variationId:t.variationId,isLayerHoldback:!1},decisionTicket:{audienceIds:t.decisionTicketAudienceIds,bucketingId:t.visitorId,globalHoldback:0,preferredVariationMap:void 0,pageId:e,activationId:t.activationId},sessionId:t.sessionId,activationId:t.activationId,timestamp:t.timestamp,revision:t.revision,namespace:t.namespace,pageId:e}),s.dispatch(r.RECORD_LAYER_DECISION_EVENT_ID,{layerId:t.layerId,pageId:e,decisionId:t.decisionId}),s.dispatch(r.ACTION_EXECUTED,{sessionId:t.sessionId,layerId:t.layerId,pageId:t.pageId,timestamp:t.timestamp,activationId:t.activationId})}}),n;f.error("Relay / Observed redirect data with missing fields:",e)}}}},1497:function(t,n,e){var i=e(478);n.emitError=function(t,n,e){i.emit({type:"error",name:t.name||"Error",data:{error:t,metadata:n}},e||!1,!0)},n.emitInternalError=function(t,e){n.emitError(t,e,!0)},n.emitAnalyticsEvent=function(t,n){var e={type:"analytics",name:"trackEvent",data:t};i.emit(e,n)}},9067:function(t,n,e){var i=e(1167),r=e(5165),o=e(331),a=e(1004),u=e(4029);function c(t,n){var e="function"==typeof t?t(n):t;return"string"==typeof e&&(e=[e]),i.isArray(e)?e:(a.warn("Couldn't determine fieldsNeeded for matcher; assuming []"),[])}function s(t){return t.name?t.name+" ("+t.id+")":t.id}n.isInAudience=function(t,n,e){var u,f=function(t,n){return function(e){var r=e.type,u=n[r];if(!u)throw new Error("Audience / No matcher found for type="+r);if(u.fieldsNeeded)for(var s=c(u.fieldsNeeded,e),f=0;f<s.length;f++){var l=s[f],d=o.getFieldValue(t,l);if(i.isUndefined(d))return void a.debug("Audience / Required field",l,"for type",r,"has no value")}a.debug("Matching condition:",e,"to values:",t);var v=u.match(t,e);if(!i.isUndefined(v))return!!v}}(t,e);a.groupCollapsed("Checking audience",n.name,n.id,n),a.debug("Visitor Profile:",t);try{var l=r.evaluate(n.conditions,f)}catch(d){u=d,l=!1}return a.groupEnd(),u&&a.error("Audience / Error evaluating audience",s(n),":",u),a.log("Is "+(l?"in":"NOT in")+" audience:",s(n)),l},n.requiredAudienceFieldsForConditions=function f(t,n){var e={};return i.each(t,(function(t){if(i.isArray(t))i.extend(e,f(t,n));else if(i.isObject(t)){var r=n[t.type];if(r){var o=c(r.fieldsNeeded,t);i.each(o,(function(t){e[u.serializeFieldKey(t)]=t}))}}})),e}},2961:function(t,n){n.FIELDS={NAME:"n",TIME:"t",TYPE:"y",CATEGORY:"c",REVENUE:"r",SESSION_ID:"s",OPTIONS:"o",SESSION_INDEX:"si"},n.FIELDS_V0_2={name:n.FIELDS.NAME,time:n.FIELDS.TIME,type:n.FIELDS.TYPE,category:n.FIELDS.CATEGORY,tags:n.FIELDS.OPTIONS,session_index:n.FIELDS.SESSION_INDEX}},9959:function(t,n,e){var i=e(1167),r=e(2961),o=e(331).getFieldValue,a=e(1925);function u(t,n,e,o,a){this[r.FIELDS.NAME]=t,this[r.FIELDS.TYPE]=n,i.isString(e)&&e.trim().length>0&&(this[r.FIELDS.CATEGORY]=e),o&&i.keys(o).length>0&&(this[r.FIELDS.OPTIONS]=o),i.isUndefined(a)||(this[r.FIELDS.REVENUE]=a)}function c(t,n,e,o){this.eventBase=t,this[r.FIELDS.TIME]=n,i.isUndefined(e)||(this[r.FIELDS.SESSION_ID]=e),i.isUndefined(o)||(this[r.FIELDS.SESSION_INDEX]=o)}n._=u,u.prototype.digest=function(){var t=function(t,n){return encodeURIComponent(t)+"="+encodeURIComponent(n)},n=[];if(n.push(t(r.FIELDS.NAME,this[r.FIELDS.NAME])),n.push(t(r.FIELDS.TYPE,this[r.FIELDS.TYPE])),this[r.FIELDS.CATEGORY]&&n.push(t(r.FIELDS.CATEGORY,this[r.FIELDS.CATEGORY])),this[r.FIELDS.REVENUE]&&n.push(t(r.FIELDS.REVENUE,this[r.FIELDS.REVENUE])),!this[r.FIELDS.OPTIONS])return n.join("&");var e=this[r.FIELDS.OPTIONS]||{},o=i.filter(i.keys(e),(function(t){return e.hasOwnProperty(t)}));o=o.sort();for(var a=0;a<o.length;a++)n.push(t(o[a],e[o[a]]));return n.join("&")},u.prototype.hash=function(){return this.hash_||(this.hash_=a.hashToHex(a.toByteString(this.digest()),a.Seed.BEHAVIOR_EVENT)),this.hash_},u.prototype.setHash=function(t){this.hash_=t},u.prototype.reHash=function(){this.hash_=null,this.hash()},u.prototype.equals=function(t){if(this.hash()!==t.hash()||this[r.FIELDS.NAME]!==t[r.FIELDS.NAME]||this[r.FIELDS.TYPE]!==t[r.FIELDS.TYPE]||this[r.FIELDS.CATEGORY]!==t[r.FIELDS.CATEGORY]||this[r.FIELDS.REVENUE]!==t[r.FIELDS.REVENUE])return!1;var n=this[r.FIELDS.OPTIONS]||{},e=t[r.FIELDS.OPTIONS]||{},o=i.filter(i.keys(n),(function(t){return n.hasOwnProperty(t)})),a=i.filter(i.keys(e),(function(t){return e.hasOwnProperty(t)}));if(o.length!==a.length)return!1;for(var u=0;u<o.length;u++){var c=o[u];if(!e.hasOwnProperty(c)||n[c]!==e[c])return!1}return!0},u.prototype.getValueOrDefault=function(t,n){var e=o(this,t);return i.isUndefined(e)?n:e},u.prototype.setFieldValue=function(t,n){t!==r.FIELDS.NAME&&t!==r.FIELDS.TYPE&&t!==r.FIELDS.CATEGORY&&t!==r.FIELDS.REVENUE&&t!==r.FIELDS.OPTIONS||(this[t]=n,this.reHash())},n.J=c,c.prototype.getValueOrDefault=function(t,n){if(0===t.length)return this;var e={};e[r.FIELDS.TIME]=this[r.FIELDS.TIME],e[r.FIELDS.SESSION_ID]=this[r.FIELDS.SESSION_ID],e[r.FIELDS.SESSION_INDEX]=this[r.FIELDS.SESSION_INDEX];var a=o(e,t);return i.isUndefined(a)?this.eventBase.getValueOrDefault(t,n):a},c.prototype.setFieldValue=function(t,n){t===r.FIELDS.TIME||t===r.FIELDS.SESSION_ID||t===r.FIELDS.SESSION_INDEX?this[t]=n:this.eventBase.setFieldValue(t,n)};var s={n:"name",y:"type",c:"category",r:"revenue",s:"session_id",o:"tags",si:"session_index"};c.prototype.readableEvent=function(){var t,n,e=function(t){return i.isString(t)?'"'+t+'"':t},o=this,a=[];i.each([r.FIELDS.NAME,r.FIELDS.TYPE,r.FIELDS.CATEGORY,r.FIELDS.REVENUE,r.FIELDS.SESSION_ID],(function(r){t=s[r],n=o.getValueOrDefault([r]),i.isUndefined(n)||a.push(t+": "+e(n))}));var u=[];if(t=s[r.FIELDS.OPTIONS],n=o.getValueOrDefault([r.FIELDS.OPTIONS]),i.isUndefined(n)||(i.each(n,(function(t,n){u.push(n+": "+String(e(t)))})),a.push(t+": {\n\t\t"+u.join(",\n\t\t")+"\n\t}")),n=o.getValueOrDefault([r.FIELDS.TIME]),i.isNumber(n)&&(n=e(new Date(n).toString())),!i.isUndefined(n)){a.push("timestamp: "+n)}return"{\n\t"+a.join(",\n\t")+"\n}"},c.prototype.toObject=function(t){var n,e,o={},a=this;i.each([r.FIELDS.NAME,r.FIELDS.TYPE,r.FIELDS.CATEGORY,r.FIELDS.REVENUE,r.FIELDS.OPTIONS,r.FIELDS.SESSION_INDEX],(function(t){n=s[t],e=a.getValueOrDefault([t],t===r.FIELDS.OPTIONS?{}:void 0),i.isUndefined(e)||(o[n]=e)}));var u=s[r.FIELDS.OPTIONS],c=s[r.FIELDS.REVENUE];if(t&&t.revenueAsTag&&o[c]&&(o[u]=o[u]||{},o[u][c]=o[c],delete o[c]),e=a.getValueOrDefault([r.FIELDS.TIME]),i.isNumber(e))if(t&&t.timeAsTimestamp){o.timestamp=new Date(e)}else{o.time=e}return o}},4047:function(t,n,e){var i=e(6410);n.initializeStore=i.initialize,n.addEvent=i.addEvent,n.getEvents=i.getEvents,n.getEventCount=i.getEventCount},3109:function(t,n,e){var i=e(9959).J,r=e(5242),o=e(2961),a=e(9959)._;n.CURRENT_SESSION_INDEX=0;var u=18e5;function c(t,e){var i;i=n.isInSameSession(t,e)?t.getValueOrDefault([o.FIELDS.SESSION_ID]):e.getValueOrDefault([o.FIELDS.TIME]),e.setFieldValue(o.FIELDS.SESSION_ID,i)}function s(t,e,i){var r,a=t.getValueOrDefault([o.FIELDS.SESSION_INDEX]);r=n.isInSameSession(e,t)?a:i?a+1:a-1,e.setFieldValue(o.FIELDS.SESSION_INDEX,r)}n.isInSameSession=function(t,n){var e=t.getValueOrDefault([o.FIELDS.TIME],0),i=n.getValueOrDefault([o.FIELDS.TIME],0);return this.isTimestampInSameSession(e,i)},n.isTimestampInSameSession=function(t,n){return Math.abs(t-n)<u},n.updateSessionId=function(t,n){if(t){var e=t.getValueOrDefault([o.FIELDS.TIME]),r=t.getValueOrDefault([o.FIELDS.SESSION_ID]),u=n.getValueOrDefault([o.FIELDS.TIME]);e="number"!=typeof e?u-36e5:e,r="number"!=typeof r?e:r,c(t=new i(new a("",""),e,r),n)}else n.setFieldValue(o.FIELDS.SESSION_ID,n.getValueOrDefault([o.FIELDS.TIME]))},n.updateSessionIndex=function(t,n){if(t){var e=t.getValueOrDefault([o.FIELDS.TIME]),r=t.getValueOrDefault([o.FIELDS.SESSION_INDEX]),u=n.getValueOrDefault([o.FIELDS.TIME]),c=t.getValueOrDefault([o.FIELDS.SESSION_ID]);e="number"!=typeof e?u-36e5:e,r="number"!=typeof r?0:r,c="number"!=typeof c?e:c,s(t=new i(new a("",""),e,c,r),n,!1)}else n.setFieldValue(o.FIELDS.SESSION_INDEX,0)},n.sessionize=function(t){var e=t.length;if(0!==e){t[0].setFieldValue(o.FIELDS.SESSION_ID,t[0].getValueOrDefault([o.FIELDS.TIME]));for(var i=1;i<e;i++)c(t[i-1],t[i]);var a=n.CURRENT_SESSION_INDEX,f=t[e-1].getValueOrDefault([o.FIELDS.TIME]);r.now()-f>u&&(a+=1),t[e-1].setFieldValue(o.FIELDS.SESSION_INDEX,a);for(i=e-1;i>0;i--)s(t[i],t[i-1],!0)}},n.reindexIfNecessary=function(t,n,e){var i=function(t){for(var n=0;n<t.length;n++){var e=t[n].getValueOrDefault([o.FIELDS.SESSION_INDEX]);t[n].setFieldValue(o.FIELDS.SESSION_INDEX,e+1)}};-1===t.getValueOrDefault([o.FIELDS.SESSION_INDEX])&&(i(n),i(e))},n.sessionSortPredicate=function(t,n){return t[o.FIELDS.TIME]-n[o.FIELDS.TIME]},n.applyMigrations=function(t){return!1}},6410:function(t,n,e){var i=e(1167),r=e(4184),o=e(9430),a=e(5242),u=e(3209),c=e(6665),s=e(1004),f=e(3109),l=e(4029),d=n,v=e(9959).J,h=e(2961),p=e(2432),g=e(9959)._,m=(f=e(3109),e(1353)),_=m.get("stores/visitor_events"),y=m.get("stores/visitor_events_manager"),w={EVENTBASE:"eb",HASH:"h",TIMEBASE:"tb",TIMESTAMPS:"ts",DELTA:"d",INDEX:"i"};function b(t){c.dispatch(r.SET_VISITOR_EVENTS,t)}function E(t){c.dispatch(r.UPDATE_BEHAVIOR_STORE,{key:"baseMap",value:t})}function I(t){c.dispatch(r.UPDATE_BEHAVIOR_STORE,{key:"eventQueue",value:t})}function A(t){c.dispatch(r.UPDATE_BEHAVIOR_STORE,{key:"lastEvent",value:t})}function T(){return _.getEvents()}function S(){return y.getBaseMap()}function k(){return y.getEventQueue()}function R(){return y.getLastEvent()}function C(){var t=T().concat(k()),n=!1;return t.length>1e3&&(t=t.slice(-1e3),n=!0),b(t),I([]),n}n.initialize=function(t,n){if(!y.getInitialized()){d.S(t,n);var e=T();e.length>0&&A(e[e.length-1]);var i=k();i.length>0&&A(i[i.length-1]),c.dispatch(r.UPDATE_BEHAVIOR_STORE,{key:"initialized",value:!0})}},n.addEvent=function(t){s.debug("Behavior store: adding event",t);var n=d.k(t);A(n),I(k().concat(n)),f.reindexIfNecessary(R(),T(),k()),d.R(k()),n.t&&function(t){try{var n=Number(o.get(p.COOKIES.OPTIMIZELY_SESSION,!1));if(isNaN(n)||0!==n){var e=n?f.isTimestampInSameSession(t,n)?t:0:t;o.set(p.COOKIES.OPTIMIZELY_SESSION,e.toString(),{path:"/",encodeValue:!1},!0)}}catch(i){s.error("Error setting session cookie",i)}}(n.t)},n.getEvents=function(){return k().length>0&&(C()&&f.sessionize(T()),d.N(T()),d.R(k())),T()},n.getEventCount=function(){return k().length+T().length},d.S=function(t,n){d.D(t,n)&&(d.N(T()),d.R(k())),f.sessionize(T())},d.D=function(t,n){if(0===t.length&&0===n.length)return b([]),I([]),!1;var e=!1,i=t[0]||n[0];return w.EVENTBASE in i?(b(d.O(t)),I(d.O(n))):(e=!0,b(d.M(t)),I(d.M(n))),k().length>0&&(C(),e=!0),b(d._updateBaseMapAndMaybeDedupe(T())),d._migrateEventBasesAndUpdateStore()&&(e=!0),e},d.M=function(t){for(var n=[],e=0;e<t.length;e++){var i=t[e],r=d.P(i);n[e]=new v(r,i[h.FIELDS.TIME])}return n},d._migrateEventBasesAndUpdateStore=function(){var t=!1,n=d.L();return f.applyMigrations(n)&&(t=!0,E({}),b(d._updateBaseMapAndMaybeDedupe(T())),I(d._updateBaseMapAndMaybeDedupe(k()))),t},d.U=function(){return a.now()},d.k=function(t){var n,e=t.name,i=t.type||"default",r=t.category||u.OTHER,o=t.tags||{};t.revenue&&(n=t.revenue);var a=new g(e,i,r,o,n);a=d.V(a);var c=d.U(),s=new v(a,c,-1);return f.updateSessionId(R(),s),f.updateSessionIndex(R(),s),s},d._updateBaseMapAndMaybeDedupe=function(t){for(var n=0;n<t.length;n++)t[n].eventBase=d.V(t[n].eventBase);return t},d.N=function(t){var n=d.F(t);l.persistBehaviorEvents(n)},d.R=function(t){var n=d.F(t);l.persistBehaviorEventQueue(n)},d.B=function(){var t;y.getCleared()||(b([]),I([]),d.N(T()),d.R(k()),E({}),A(null),t=!0,c.dispatch(r.UPDATE_BEHAVIOR_STORE,{key:"cleared",value:t}))},d.V=function(t){var n=t.hash(),e=S(),r=e[n];if(i.isUndefined(r))return e[n]=[t],E(e),t;for(var o=0;o<r.length;o++)if(t.equals(r[o]))return r[o];return r.push(t),E(e),t},d.L=function(){var t=[],n=S();for(var e in n)!n.hasOwnProperty(e)||(t=t.concat(n[e]));return t},d.F=function(t){for(var n=function(t){var n={};n[h.FIELDS.NAME]=t.getValueOrDefault([h.FIELDS.NAME]),n[h.FIELDS.TYPE]=t.getValueOrDefault([h.FIELDS.TYPE]);var e=t.getValueOrDefault([h.FIELDS.CATEGORY]);i.isUndefined(e)||(n[h.FIELDS.CATEGORY]=e);var r=t.getValueOrDefault([h.FIELDS.REVENUE]);i.isUndefined(r)||(n[h.FIELDS.REVENUE]=r);var o=t.getValueOrDefault([h.FIELDS.OPTIONS]);return i.isUndefined(o)||(n[h.FIELDS.OPTIONS]=o),n},e=w,r=[],o="_idx_",a=0;a<t.length;a++){var u,c,s=t[a],f=s.eventBase;if(f.hasOwnProperty(o)){u=r[f[o]];var l=s[h.FIELDS.TIME]-(u[e.TIMEBASE]||0);(c={})[e.DELTA]=l,c[e.INDEX]=a,u[e.TIMESTAMPS].push(c)}else(u={})[e.EVENTBASE]=n(s),u[e.HASH]=f.hash(),u[e.TIMEBASE]=s[h.FIELDS.TIME],(c={})[e.DELTA]=0,c[e.INDEX]=a,u[e.TIMESTAMPS]=[c],r.push(u),f[o]=r.length-1}for(a=0;a<t.length;a++)delete t[a].eventBase[o];return r},d.P=function(t,n){var e=new g(t[h.FIELDS.NAME],t[h.FIELDS.TYPE],t[h.FIELDS.CATEGORY],t[h.FIELDS.OPTIONS],t[h.FIELDS.REVENUE]);return i.isUndefined(n)||e.setHash(n),e},d.O=function(t){for(var n=w,e=[],i=0;i<t.length;i++)for(var r=t[i],o=d.P(r[n.EVENTBASE],r[n.HASH]),a=r[n.TIMEBASE],u=r[n.TIMESTAMPS],c=0;c<u.length;c++){var s=u[c],f=new v(o,a+s[n.DELTA]);e[s[n.INDEX]]=f}return e},n.deserialize=function(t){return d.O(t)},n.mergeAllEvents=function(t){var n=[].concat.apply([],t);return n.sort(f.sessionSortPredicate),f.sessionize(n),n}},4184:function(t,n,e){var i=e(1032);t.exports=i({LOG:null,SET_LOGLEVEL:null,INITIALIZE_STATE:null,SET_DOMCONTENTLOADED:null,ACTIVATE:null,UPDATE_BEHAVIOR_STORE:null,DATA_LOADED:null,SET_CLIENT_NAME:null,SET_CLIENT_VERSION:null,LOAD_PERSISTED_LAYER_STATES:null,RECORD_GLOBAL_DECISION:null,RECORD_LAYER_DECISION:null,ENSURE_ORIGINAL_PUSHSTATE:null,ENSURE_ORIGINAL_REPLACESTATE:null,SET_VISITOR_ATTRIBUTES:null,SET_VISITOR_ATTRIBUTE_PENDING:null,LOAD_EXISTING_VISITOR_PROFILE:null,SET_VISITOR_EVENTS:null,SET_FOREIGN_VISITOR_EVENTS:null,SET_FOREIGN_VISITOR_EVENT_QUEUE:null,SET_VISITOR_ID:null,SET_VISITOR_ID_VIA_API:null,SET_GA4_USER_ID:null,REFRESH_SESSION:null,LOAD_SESSION_STATE:null,UPDATE_VARIATION_ID_MAP:null,MERGE_VARIATION_ID_MAP:null,UPDATE_PREFERRED_LAYER_MAP:null,MERGE_PREFERRED_LAYER_MAP:null,UPDATE_CONTEXTUAL_MAB_MAP:null,MERGE_CONTEXTUAL_MAB_MAP:null,SET_ODP_SEGMENTS:null,RECORD_LAYER_DECISION_EVENT_ID:null,TRACK_VIEW_ACTIVATED_EVENT:null,REGISTER_ASYNC_DEFERRED:null,RESOLVE_DEFERRED:null,REJECT_DEFERRED:null,REGISTER_PLUGIN:null,ADD_CLEANUP_FN:null,CLEAR_CLEANUP_FN:null,ACTION_EXECUTED:null,REGISTER_ACTION:null,SET_VIEW_ACTIVE_STATE:null,UPDATE_PARSED_VIEW_METADATA:null,UPDATE_USER_SUPPLIED_METADATA:null,REGISTER_VIEWS:null,SET_GLOBAL_TAGS:null,SET_VIEW_BATCHING:null,RESET_VIEW_STATES:null,ATTACH_EVENT_STREAM_PUBLISHERS:null,DETACH_EVENT_STREAM_PUBLISHERS:null,LOAD_DIRECTIVE:null,SET_COOKIE_AGE:null,SET_COOKIE_DOMAIN:null,SET_COOKIE_AUTO_REFRESH:null,XDOMAIN_SET_DEFAULT_FRAME:null,XDOMAIN_ADD_FRAME:null,XDOMAIN_SET_MESSAGE:null,XDOMAIN_ADD_SUBSCRIBER:null,XDOMAIN_SET_CANONICAL_ORIGINS:null,XDOMAIN_SET_DISABLED:null,ADD_EMITTER_HANDLER:null,REMOVE_EMITTER_HANDLER:null,SET_INTEGRATION_SETTINGS:null,ADD_CHANGE:null,SET_CHANGE_APPLIER:null,REMOVE_ACTION_STATE:null,ANNOUNCE_PENDING_REDIRECT:null,LOAD_REDIRECT_DATA:null,REGISTER_TRACKED_REDIRECT_DATA:null,SET_PENDING_EVENT:null,REMOVE_PENDING_EVENT:null,LOAD_PENDING_EVENTS:null,SANDBOXED_FUNCTIONS_ADDED:null,SET_RUM_DATA:null,RECORD_API_USAGE:null,INITIALIZE_CHANGE_METRICS:null,RECORD_ACTIVATION_TYPE_USAGE:null,RECORD_AUDIENCE_USAGE:null,RECORD_CHANGE_MACROTASK_RATE:null,RECORD_CHANGE_OVERHEATED:null,RECORD_CHANGE_TYPE_USAGE:null,RECORD_DOM_OBSERVATION_OCCURENCE:null,RECORD_INTEGRATION_USAGE:null,RECORD_LAYER_FEATURE_USAGE:null,RECORD_LAYER_POLICY_USAGE:null,RECORD_RECOMMENDATIONS_USAGE:null,RECORD_VIEW_FEATURE_USAGE:null,RECORD_VIEWS_INITIALLY_ACTIVATED_COUNT:null,RECORD_VISITOR_ID_LOCATOR_USAGE:null,RECORD_VISITOR_ID_ERROR:null,RECORD_STICKY_BUCKETING_FEATURE:null,SET_PERFORMANCE_MARKS_DATA:null,FINALIZE_BATCH_SNAPSHOT:null,REGISTER_PREVIOUS_BATCH:null,REGISTER_TRACKER_VISITOR:null,REGISTER_TRACKER_EVENT:null,REGISTER_TRACKER_DECISION:null,RESET_TRACKER_EVENTS:null,RESET_TRACKER_PREVIOUS_BATCHES:null,RESET_TRACKER_STORE:null,SET_TRACKER_POLLING:null,SET_TRACKER_BATCHING:null,SET_TRACKER_USE_BEACON:null,SET_TRACKER_SEND_EVENTS:null,SET_TRACKER_PERSISTABLE_STATE:null,SET_TRACKER_DIRTY:null,UPDATE_TRACKER_VISITOR_ATTRIBUTES:null,SET_UA_DATA:null})},2432:function(t,n,e){var i=e(1167),r=e(1032);n.COOKIES={OPT_OUT:"optimizelyOptOut",PREVIEW:"optimizelyPreview",REDIRECT:"optimizelyRedirectData",SESSION_STATE:"optimizelySessionState",OPTIMIZELY_SESSION:"optimizelySession",TOKEN:"optimizelyToken",VISITOR_ID:"optimizelyEndUserId",VISITOR_UUID:"optimizelyPPID"},n.LayerActivationTypes={CONDITIONAL:"conditional",IMMEDIATE:"immediate",MANUAL:"manual",READY:"ready",TIMEOUT:"timeout"},n.LogLevel={OFF:0,ERROR:1,WARN:2,INFO:3,DEBUG:4},n.Lifecycle=r({preActivate:null,postVisitorProfileLoad:null,postViewsActivated:null,postActivate:null}),n.ViewActivationTypes={immediate:"immediate",manual:"manual",callback:"callback",polling:"polling",URLChanged:"url_changed",DOMChanged:"dom_changed"},n.StorageKeys={PENDING_EVENTS:"pending_events",RELAYED_EVENTS:"relayed_events"},n.PluginTypes=r({visitorProfileProviders:null,viewProviders:null,audienceMatchers:null,viewMatchers:null,analyticsTrackers:null,viewTagLocators:null,userFeatureDefs:null,apiModules:null,changeAppliers:null,deciders:null,eventImplementations:null,viewTriggers:null}),n.ResourceTimingAttributes=r({connectStart:null,connectEnd:null,decodedBodySize:null,domainLookupStart:null,domainLookupEnd:null,duration:null,encodedBodySize:null,fetchStart:null,requestStart:null,responseStart:null,responseEnd:null,secureConnectionStart:null,startTime:null,transferSize:null,serverTiming:null}),n.RUMPerformanceTimingAttributes=r({blockTime:null}),n.AttributionTypes=r({FIRST_TOUCH:null,LAST_TOUCH:null}),n.SandboxedFunctions=r({XMLHttpRequest:null}),n.PerformanceData=r({performance_marks:null,resource_timing:null,performance_timing:null}),n.PerformanceCounters=r({mutation_observer_invocation:null,polling_invocation:null,match_selector_invocation:null}),n.VisitorStorageKeys={EVENTS:"events",EVENT_QUEUE:"event_queue",LAYER_MAP:"layer_map",LAYER_STATES:"layer_states",SESSION_STATE:"session_state",VISITOR_PROFILE:"visitor_profile",VARIATION_MAP:"variation_map",TRACKER_OPTIMIZELY:"tracker_optimizely",CONTEXTUAL_MAB:"contextual_mab",ODP_SEGMENTS:"odp_segments"},n.AllStorageKeys=i.assign({},n.StorageKeys,n.VisitorStorageKeys),n.ListTargetingKeyTypes={COOKIE:"c",QUERY:"q",JS_VARIABLE:"j"},n.VisitorIdLocatorType={COOKIE:"cookie",JS_VARIABLE:"js",LOCALSTORAGE:"localStorage",QUERY:"query"},n.AllocationPolicyEnum={CMAB:"contextual-multi-arm-bandit",MIN_REGRET:"min-regret",MIN_TIME:"min-time",MANUAL:"manual"}},3209:function(t){t.exports={OTHER:"other"}},2167:function(t,n){n.TYPES={ACTION:"action",ANALYTICS:"analytics",EDITOR:"editor",LIFECYCLE:"lifecycle"}},3864:function(t){t.exports={CLICK:"click",CUSTOM:"custom",ENGAGEMENT:"engagement",PAGEVIEW:"pageview"}},4250:function(t,n,e){var i=e(1032);n.TrackLayerDecisionTimingFlags=i({preRedirectPolicy:null,postRedirectPolicy:null,nonRedirectPolicy:null}),n.PreRedirectPolicies=i({PERSIST_BEFORE_AND_TRACK_DURING_REDIRECT:null,PERSIST_BEFORE_REDIRECT:null}),n.PostRedirectPolicies=i({TRACK_IMMEDIATELY:null,TRACK_AFTER_SYNC:null}),n.NonRedirectPolicies=i({TRACK_IMMEDIATELY:null}),n.RedirectRelayMedia=i({COOKIE:null})},2065:function(t,n,e){var i=e(1925),r=n.TOTAL_POINTS=1e4;n.bucketingNumber=function(t,n,e){return i.hashToInt(t+n,e,r)},n.isHoldback=function(t,e){return n.bucketingNumber(t,e.id,i.Seed.IGNORING)<(e.holdback||0)},n.chooseWeightedCandidate=function(t,e,r){for(var o=n.bucketingNumber(t,e,i.Seed.BUCKETING),a=0;a<r.length;a++)if(r[a].endOfRange>o)return r[a].entityId;throw new Error("Unable to choose candidate")}},3323:function(t,n,e){var i=e(1167),r=e(4184),o=e(2065),a=e(5165),u=e(8825).b,c=e(6665),s=e(1004),f=e(1479);n.isValidExperiment=function(t,n){var e,r=i.partial(i.includes,t);return s.groupCollapsed("Decision / Evaluating audiences for experiment:",n,t),e=!n.audienceIds||a.evaluate(n.audienceIds,r),s.groupEnd(),s.debug("Decision / Experiment",n,"is valid?",e),e},n.selectVariation=function(t,n,e,a,l){if(s.debug("Decision / Selecting variation for experiment:",t.id),!t.variations||0===t.variations.length)throw new u('No variations in selected experiment "'+t.id+'"');if(!t.weightDistributions&&t.variations.length>1)throw new u('On selected experiment "'+t.id+'", weightDistributions must be defined if # variations > 1');var d;if(t.bucketingStrategy&&"impression"===t.bucketingStrategy)if(1===t.variations.length)d=t.variations[0].id;else{var v=a;d=o.chooseWeightedCandidate(e+v,t.id,t.weightDistributions)}else if(d=1===t.variations.length?t.variations[0].id:o.chooseWeightedCandidate(e,t.id,t.weightDistributions),null==t?void 0:t.deployed)s.debug("Decision / Experiment is deployed. Skipping bucketing.");else if(l&&l[t.id]){s.debug("Decision / Using preferredVariationMap to select variation for experiment:",t.id);var h=l[t.id];if(!i.find(t.variations,{id:h}))return c.dispatch(r.RECORD_STICKY_BUCKETING_FEATURE,{feature:"stoppedVariation",id:t.id}),s.debug("Decision / Preferred variation:",h,"not found on experiment:",t.id,". Visitor not bucketed."),null;h!==d&&(c.dispatch(r.RECORD_STICKY_BUCKETING_FEATURE,{feature:"preferredVariation",id:t.id}),d=h)}var p=f.processCmabExperiment(t,d);p&&(d=p);var g=i.find(t.variations,{id:d});if(g)return s.debug("Decision / Selected variation:",g),g;throw new u('Unable to find selected variation: "'+d+'".')},n.getExperimentById=function(t,n){var e=i.find(t.experiments,{id:n});if(e)return e;throw new u("Unable to find selected experiment.")},n.hasVariationActionsOnView=function(t,n){return s.debug("Decision / Checking variation:",t,"for actions on pageId:",n),!!i.find(t.actions,(function(t){return t.pageId===n&&!i.isEmpty(t.changes)}))}},8825:function(t,n){function e(t){this.message=t}e.prototype=new Error,n.b=e},8859:function(t,n,e){var i=e(1167),r=e(4184),o=e(1497),a=e(9067),u=e(2065),c=e(3323),s=e(8825).b,f=e(1353),l=e(2432),d=e(6665),v=e(872),h=e(5594),p=e(1004),g=(e(850),e(5190)),m=f.get("stores/plugins"),_=f.get("stores/global"),y=f.get("stores/layer_data");function w(t){var n=m.getPlugin(l.PluginTypes.deciders,t);if(i.isEmpty(n))throw new Error("No deciders found for policy: "+t);return n}n.isPageIdRelevant=function(t){if(!t)return!1;var n=w(t.policy);return i.isFunction(n.includePageIdInDecisionTicket)?n.includePageIdInDecisionTicket(t):!0===n.includePageIdInDecisionTicket},n.createTicket=function(t){var n,e,r,o=i.pick(t,["bucketingId","globalHoldback","preferredVariationMap","pageId"]);return i.extend(o,{audienceIds:(n=t.visitorProfile,e=t.audiences,r=m.getAllPlugins(l.PluginTypes.audienceMatchers),i.reduce(e,(function(t,e){return a.isInAudience(n,e,r)&&t.push(e.id),t}),[])),activationId:_.getActivationId()}),o},n.decideGlobal=function(t){return{isGlobalHoldback:u.isHoldback(t.bucketingId,{id:null,holdback:t.globalHoldback})}},n.decideGroup=function(t,n){p.debug("Decision / Deciding layer for group: ",v.description(t));var e,o,a=n.preferredLayerId,c=!!a;try{(e=u.chooseWeightedCandidate(n.bucketingId,t.id,t.weightDistributions))&&"None"!==e||(o='Group traffic allocation. Visitor maps to a "hole" in the bucket space left by an experiment or campaign that\'s since been removed from the group')}catch(l){o="Group traffic allocation. Visitor maps to a point in the bucket space which has never been covered by any experiment or campaign."}if(c&&(p.debug("Decision / Using preferredLayerMap to select layer for group:",v.description(t)),a!==e&&(d.dispatch(r.RECORD_STICKY_BUCKETING_FEATURE,{feature:"preferredLayer",id:t.id}),e=a)),o)return{layerId:null,reason:o};if(!i.find(t.weightDistributions,{entityId:e})){var f="Visitor was"+(c?" sticky-":" non-sticky ")+"bucketed into a campaign ("+e+") which is not in the group";if(!c)throw new s(f);return{layerId:null,reason:f}}return{layerId:e}},n.decideLayer=function(t,n){var e,r;p.debug("Deciding: ",t,n);var a,f,l=w(t.policy),d={layerId:t.id,experimentId:null,variationId:null,isLayerHoldback:u.isHoldback(n.bucketingId,t),isLayerConcluded:!!t.concluded};if(i.isEmpty(t.experiments))throw new s("No experiments in layer.");try{if(l.decideLayer){p.debug("Decision / Using decider's custom decideLayer.");var v=l.decideLayer(t,n);e=v.experiment,r=v.variation}else p.debug("Decision / Using default decideLayer behavior."),e=l.selectExperiment(t,n.audienceIds,n.bucketingId),r=c.selectVariation(e,n.audienceIds,n.bucketingId,n.activationId,n.preferredVariationMap)}catch(h){a=h,(null!=(f=s)&&"undefined"!=typeof Symbol&&f[Symbol.hasInstance]?f[Symbol.hasInstance](a):a instanceof f)?d.reason=h.message:d.error=h}return d.experimentId=e?e.id:null,d.variationId=r?r.id:null,d.error&&(d.error.name="DecisionEngineError",o.emitError(d.error)),d},n.getDummyLayerDecision=function(t,n){var e,i=function(t,n){for(var e=0;e<t.experiments.length;e++)for(var i=0;i<t.experiments[e].variations.length;i++)if(n.indexOf(t.experiments[e].variations[i].id)>-1)return{experimentId:t.experiments[e].id,variationId:t.experiments[e].variations[i].id};return null}(t,n);return i?(p.log("Decision / Applying force variation:",i.variationId,"to Campaign",h.description(t)),e={layerId:t.id,variationId:i.variationId,experimentId:i.experimentId,isLayerHoldback:!1,isLayerConcluded:!1,reason:"force"}):(p.log("No variation matches ids:",n,"in Campaign",h.description(t)),e={layerId:t.id,variationId:null,experimentId:null,isLayerHoldback:!1,isLayerConcluded:!1,reason:"force"}),e},n.isInCohort=function(t){if(!t.experimentId||!t.variationId)return!1;var n=y.get(t.layerId);return!(g.isSingleExperimentPolicy(n.policy)&&t.isLayerHoldback)}},1353:function(t,n,e){var i=e(1167),r=e(3800),o=e(6665),a=e(2446),u=r.create(),c={action_data:e(8444),async_request:e(1773),audience_data:e(5252),change_data:e(9906),cleanup:e(411),client_metadata:e(510),cookie_options:e(8652),event_data:e(7610),event_emitter:e(3442),dimension_data:e(758),directive:e(4806),global:e(2684),history:e(2931),integration_settings:e(8117),layer:e(2238),layer_data:e(7633),log:e(7025),observed_redirect:e(6322),pending_events:e(8634),performance:e(8317),plugins:e(2539),provider_status:e(6211),pending_redirect:e(5123),rum:e(8567),sandbox:e(764),session:e(5271),tracker_optimizely:e(8377),ua_data:e(5656),view:e(3642),view_data:e(9757),visitor:e(4329),visitor_attribute_entity:e(4786),visitor_events:e(5269),visitor_events_manager:e(6577),visitor_id:e(8817),visitor_bucketing:e(5e3),xdomain:e(1699)};c.group_data=e(9103),o.registerStores(c),i.forOwn(c,(function(t,n){u.register("stores/"+n,o.getStore(n))})),u.register("core/plugins/matchers/key_value",a),t.exports=u},3702:function(t,n,e){var i=e(1167),r=e(4184),o=e(1497),a=e(9430),u=e(4594).v,c=e(2432),s=e(6665),f=e(1004),l=n.JSONParseError=u("JSONParseError"),d=e(5766),v=e(7136),h=e(6670),p="optimizely_show_preview",g="optimizely_disable",m="optimizely_editor",_="optimizely_p13n",y="optimizely_x_audiences",w="optimizely_x",b="optimizely_show_preview",E="optimizely_opt_out",I="optimizely_token",A="optimizely_force_tracking",T="optimizely_embed_editor";n.populateDirectiveData=function(){var t,n,e,u,S,k,R,C;!function(){var t="OFF",n=d.getQueryParamValue("optimizely_log");if(n){var e=n.split(":");""!==e[0]&&(t=String(e[0]).toUpperCase()),void 0!==e[1]&&f.setLogMatch(e[1])}f.setLogLevel(t)}(),function(){var t=h.getUserAgent()||"";if(!i.isString(t))return void f.warn("Directive / userAgent not a string");t=t.toLowerCase();var n=["googlebot","yahoo! slurp","bingbot","bingpreview","msnbot","keynote","ktxn","khte","gomezagent","alertsite","yottaamonitor","pingdom.com_bot","aihitbot","baiduspider","adsbot-google","mediapartners-google","applebot","catchpoint","phantomjs","moatbot","facebookexternalhit"],e=function(n){if(i.includes(t,n))return f.warn("Directive / Matches bot:",n),!0};i.some(n,e)&&(f.log("Directive / Disabling tracking"),s.dispatch(r.LOAD_DIRECTIVE,{trackingDisabled:!0}))}(),t=Boolean(i.result(window.optimizely,"initialized")),s.dispatch(r.LOAD_DIRECTIVE,{alreadyInitialized:t}),s.dispatch(r.LOAD_DIRECTIVE,{mutationObserverAPISupported:h.isMutationObserverAPISupported()}),function(){var t=a.get(c.COOKIES.OPT_OUT),n=d.getQueryParamValue(E),e="You have successfully opted out of Optimizely for this domain.",i="You are NOT opted out of Optimizely for this domain.";if("true"===n||"false"===n){var o="true"===n;s.dispatch(r.LOAD_DIRECTIVE,{shouldOptOut:o}),h.alert(o?e:i)}else t&&s.dispatch(r.LOAD_DIRECTIVE,{shouldOptOut:"true"===t})}(),function(){var t=!1,n=[p,g];n.push(m);for(var e=0;e<n.length;e++)if("true"===d.getQueryParamValue(n[e])){f.warn("Directive / Not activating because "+n[e]+" is set."),t=!0;break}s.dispatch(r.LOAD_DIRECTIVE,{disabled:t})}(),s.dispatch(r.LOAD_DIRECTIVE,{isEditor:!1}),s.dispatch(r.LOAD_DIRECTIVE,{isPreview:!1}),(n=d.getQueryParamValue(b))&&f.log("Directive / Is legacy preview mode"),s.dispatch(r.LOAD_DIRECTIVE,{isLegacyPreview:!!n}),s.dispatch(r.LOAD_DIRECTIVE,{isSlave:!1}),e=h.getGlobal("optlyDesktop"),(u=!(!e||i.isUndefined(e.p13nInner)))&&f.log("Directive / Is running in desktop app editor"),s.dispatch(r.LOAD_DIRECTIVE,{isRunningInDesktopApp:u}),(S="true"===d.getQueryParamValue(_))&&f.log("Directive / Is running in editor"),s.dispatch(r.LOAD_DIRECTIVE,{isRunningInV2Editor:S}),function(){var t=!1,n=h.getGlobal("sessionStorage"),e=d.getQueryParamValue(T);t="true"===e,e&&n&&("true"===e?n.setItem(T,"true"):n.removeItem(T)),n&&"true"===n.getItem(T)&&(t=!0,f.log("Directive / Should mount embedded editor"));s.dispatch(r.LOAD_DIRECTIVE,{requestedEmbeddedEditor:t})}(),k=a.get(c.COOKIES.TOKEN)||null,R=d.getQueryParamValue(I)||k,s.dispatch(r.LOAD_DIRECTIVE,{projectToken:R}),function(){var t=a.get(c.COOKIES.PREVIEW),n=[],e=d.getQueryParamValue(y);if(e)n=a.safeDecodeURIComponent(e).split(",");else if(t)try{n=v.parse(t).forceAudienceIds}catch(h){var i=new l("Failed to parse previewCookie in registerForceAudienceIds: "+t),u={originalMessage:h.message,userError:!0};o.emitError(i,u)}n.length&&(f.log("Directive / Force Audience IDs:",n),s.dispatch(r.LOAD_DIRECTIVE,{forceAudienceIds:n}))}(),function(){var t=a.get(c.COOKIES.PREVIEW),n=[],e=d.getQueryParamValue(w);if(e)n=a.safeDecodeURIComponent(e).split(",");else if(t)try{n=v.parse(t).forceVariationIds}catch(h){var i=new l("Failed to parse previewCookie in registerForceVariationIds: "+t),u={originalMessage:h.message,userError:!0};o.emitError(i,u)}n.length&&(f.log("Directive / Force Variation IDs:",n),s.dispatch(r.LOAD_DIRECTIVE,{forceVariationIds:n}))}(),(C=d.getQueryParamValue(A))&&s.dispatch(r.LOAD_DIRECTIVE,{forceTracking:C})};n.setOptOut=function(t){t?(f.warn("Directive / Opting out"),a.set(c.COOKIES.OPT_OUT,"true",{maxAge:31536e4},!0)):a.remove(c.COOKIES.OPT_OUT),s.dispatch(r.LOAD_DIRECTIVE,{shouldOptOut:t})}},5242:function(t,n){n.now=function(){return+new Date}},1535:function(t,n){n.VERSION="0.238.0",n.NAME="js"},4171:function(t,n,e){var i=e(1353).get("stores/global");n.getDocumentElement=function(){return document.documentElement},n.getCookieString=function(){return document.cookie||""},n.setCookie=function(t){document.cookie=t},n.querySelector=function(t){return document.querySelector(t)},n.querySelectorAll=function(t){return document.querySelectorAll(t)},n.parseUri=function(t){var e=n.createElement("a");return e.href=t,e},n.childrenOf=function(t){return Array.prototype.slice.call(t.querySelectorAll("*"))},n.createElement=function(t){return document.createElement(t)},n.isReady=function(){return i.domContentLoadedHasFired()||"interactive"===document.readyState||"complete"===document.readyState},n.isLoaded=function(){return"complete"===document.readyState},n.addReadyHandler=function(t){return document.addEventListener("DOMContentLoaded",t),function(){n.removeReadyHandler(t)}},n.removeReadyHandler=function(t){return function(){document.removeEventListener("DOMContentLoaded",t)}},n.getReferrer=function(){return document.referrer},n.getReadyState=function(){return document.readyState},n.write=function(t){if("loading"!==n.getReadyState())throw new Error("Aborting attempt to write to already-loaded document");document.write(t)},n.appendToHead=function(t){return n.appendTo(document.head,t)},n.appendTo=function(t,n){t.appendChild(n)},n.addEventListener=function(t,n,e){return document.addEventListener(t,n,e),function(){document.removeEventListener(t,n,e)}},n.getCurrentScript=function(){if(document.currentScript)return document.currentScript},n.parentElement=function(t){for(var n=t.parentNode;n.nodeType!==Node.ELEMENT_NODE;)n=n.parentNode;return n}},9929:function(t,n,e){var i,r,o="optimizely_data",a=e(4594).v,u=e(468),c=e(6670),s=a("StorageError");try{r=c.getGlobal("localStorage")}catch(f){throw new s("Unable to read localStorage: "+f.toString())}if(!r)throw new s("localStorage is undefined");i=u.create(r,o),n.DT=i},3866:function(t,n){n.create=function(t){return new MutationObserver(t)},n.observe=function(t,n,e){t.observe(n,e)}},3793:function(t,n,e){var i=e(3961).Promise,r=e(6670);n.estimateStorage=function(){var t=r.getGlobal("navigator");try{return t.storage.estimate()}catch(n){return i.resolve({usage:null,quota:null})}}},850:function(t,n,e){var i=e(4184),r=e(4594).v,o=e(5242),a=e(6665),u=e(6670),c=e(1353).get("stores/rum"),s="optimizely:",f=n.Error=r("PerformanceError");function l(){return u.getGlobal("performance")}n.time=function(t){if(c.getSampleRum()){var n=l();if(n&&n.mark){var e=s+t;n.clearMarks(e+"Begin"),n.mark(e+"Begin")}}},n.timeEnd=function(t){if(c.getSampleRum()){var n=l();if(n&&n.mark){var e=s+t,r=n.getEntriesByName(e+"Begin");if(0===r.length)throw new f("Called timeEnd without matching time: "+t);n.clearMarks(e+"End"),n.mark(e+"End");var o=t+"Time",u=n.getEntriesByName(e+"End")[0].startTime-r[0].startTime;a.dispatch(i.SET_PERFORMANCE_MARKS_DATA,{name:o,data:{startTime:Math.round(1e3*r[0].startTime)/1e3,duration:Math.round(1e3*u)/1e3}})}}},n.setMark=function(t,n,e){if(c.getSampleRum()){var r=l();if(r&&r.mark){var o=s+t;r.mark(o),a.dispatch(i.SET_PERFORMANCE_MARKS_DATA,{name:t,data:{startTime:Math.round(1e3*n)/1e3,duration:Math.round(1e3*e)/1e3}})}}},n.now=function(){var t=l();return t?t.now():o.now()}},6670:function(t,n,e){var i=e(1167),r=e(1004);n.getUserAgent=function(){return window.navigator.userAgent},n.getLocationSearch=function(){return window.location.search},n.getNavigatorLanguage=function(){return window.navigator.language||window.navigator.userLanguage},n.getHref=function(){return window.location.href},n.getLocation=function(){return window.location},n.setLocation=function(t){window.location.replace(t)},n.setGlobal=function(t,n){window[t]=n},n.getGlobal=function(t){return window[t]},n.getGlobalByPath=function(t){for(var n=t.split("."),e=window;n.length;)try{e=e[n.shift()]}catch(i){throw r.error("Attempted to access nonexistent property. Path ",t),new Error("Attempted to access nonexistent property. Path "+t)}return e},n.addEventListener=function(){return window.addEventListener.apply(window,arguments)},n.removeEventListener=function(){return window.removeEventListener.apply(window,arguments)},n.isMutationObserverAPISupported=function(){return!i.isUndefined(window.MutationObserver)},n.alert=function(t){alert(t)},n.setTimeout=function(t,n){return setTimeout((function(){try{t()}catch(n){r.warn("Deferred function threw error:",n)}}),n)},n.setInterval=function(t,n){return setInterval((function(){try{t()}catch(n){r.warn("Polling function threw error:",n)}}),n)}},2403:function(t,n,e){var i=e(1167);n.create=function(t,n,e,r){return i.extend({category:"other"},r,{id:t,apiName:n,eventType:e})}},478:function(t,n,e){var i=e(1167),r=e(7432),o=e(4184),a=e(1497),u=e(1353),c=e(6665),s=e(1004),f=u.get("stores/event_emitter");n.on=function(t){return t.token||(t.token=r.generate()),c.dispatch(o.ADD_EMITTER_HANDLER,t),t.token},n.off=function(t){c.dispatch(o.REMOVE_EMITTER_HANDLER,{token:t})},n.emit=function(t,n,e){var r=f.getHandlers(t,n);i.each(r,(function(i){try{i.handler.call({$di:u},t)}catch(r){!e&&i.emitErrors?(s.error("Error in handler for event:",t,r),a.emitError(r,null,n)):s.warn("Suppressed error in handler for event:",t,r)}}))}},4939:function(t,n,e){var i=e(478);n.on=function(t){return t.publicOnly=!0,i.on(t)},n.off=i.off,n.emit=function(t){i.emit(t)}},5700:function(__unused_webpack_module,exports,__webpack_require__){var createError=__webpack_require__(1504),di=__webpack_require__(1353),Logger=__webpack_require__(1004),CSP_MODE=!1,EXEC_WITH_JQUERY=!0,ExecError=exports.Error=createError("ExecError");exports.apply=function(t,n){n=n||[],EXEC_WITH_JQUERY&&(n=n.concat(di.get("env/jquery")));try{return t.apply(void 0,n)}catch(e){throw Logger.warn("Error applying function",t,"with args:",n,e),new ExecError(e)}},exports.eval=function(str){if(CSP_MODE)throw new ExecError("eval is not supported in CSP mode");try{return EXEC_WITH_JQUERY&&(str="var $ = optimizely.get('jquery');"+str),eval(str)}catch(e){throw Logger.warn("Error executing JS:",str,e),new ExecError(e)}}},6665:function(t,n,e){var i=e(7239);t.exports=i.create()},872:function(t,n,e){var i=e(1167);n.description=function(t){var n=!!t.name?'"'+t.name+'" ':"",e=function(t){return i.map(t.weightDistributions,"entityId")}(t).join(", ");return n+"(id "+t.id+", campaigns: "+e+")"}},5594:function(t,n,e){var i=e(1167),r=e(4184),o=e(5242),a=e(1353),u=e(6665),c=a.get("stores/global"),s=a.get("stores/session");n.recordLayerDecision=function(t,n,e){return u.dispatch(r.RECORD_LAYER_DECISION,{layerId:t,decision:e,decisionTicket:n,sessionId:s.getSessionId(),activationId:c.getActivationId(),timestamp:o.now(),revision:c.getRevision(),namespace:c.getNamespace(),pageId:n.pageId}),e},n.relatedAudienceIds=function(t){var n={},e=["and","or","not"];return i.each(t.experiments,(function(t){i.each(i.flattenDeep(t.audienceIds),(function(t){i.includes(e,t)||(n[t]=!0)}))})),i.keys(n)},n.getActivationTimeout=function(t){var n=t.activation;return n&&null!==n.timeout&&void 0!==n.timeout?n.timeout:2e3},n.description=function(t){return(t.name?'"'+t.name+'" ':"")+"("+t.id+")"},n.createSingle=function(t,n,e){return{id:t,policy:"single_experiment",holdback:0,experiments:[{id:n||"",variations:[{id:e||"",actions:[]}],audienceIds:[]}],integrationStringVersion:1}},n.createLayerState=function(t,n,e,i,r){return void 0===i&&(i=!1),void 0===r&&(r=!1),{layerId:t,decision:{layerId:t,experimentId:n,variationId:e,isLayerHoldback:i||!1,isLayerConcluded:r||!1},decisionTicket:{audienceIds:[]}}},n.getIntegrationTypes=function(t){return i.keys(i.reduce(i.keys(t.integrationSettings),(function(t,n){return i.isNaN(Number(n))||(n="custom"),t[n]=1,t}),{}))}},8984:function(t,n,e){var i=e(1167);n.G=function(t,n){if(!n)return 0;for(var e=n.toString().split("."),r=t.toString().split("."),o=0;o<e.length;o++){if(i.isUndefined(r[o]))return-1;if(isNaN(Number(r[o]))){if(r[o]!==e[o])return-1}else{if(Number(r[o])<Number(e[o]))return-1;if(Number(r[o])>Number(e[o]))return 1}}return 0}},5165:function(t,n,e){var i=e(1167),r=e(7136),o=e(1004),a="or",u="not";var c={};function s(t,n){var e;if(i.isArray(t)){var u,s;t[0]in c?(u=t[0],s=t.slice(1)):(u=a,s=t),o.groupCollapsed('Condition / Applying operator "'+u+'" with args',r.stringify(s));try{e=c[u](s,n),o.debug("Condition / Result:",e)}finally{o.groupEnd()}return e}return e=n(t),o.debug("Condition / Evaluated:",r.stringify(t),":",e),e}c["and"]=function(t,n){for(var e,r,o=0;o<t.length;o++){if(!1===(e=s(t[o],n)))return!1;i.isUndefined(e)&&(r=!0)}if(!r)return!0},c[a]=function(t,n){for(var e,r=!1,o=0;o<t.length;o++){if(!0===(e=s(t[o],n)))return!0;i.isUndefined(e)&&(r=!0)}if(!r)return!1},c[u]=function(t,n){if(1!==t.length)return!1;var e=s(t[0],n);return i.isUndefined(e)?void 0:!e},t.exports={evaluate:s}},8429:function(t,n,e){var i=e(1167),r=e(7828);function o(t){if((t=(t||"").toLowerCase())in c)return t;var n=i.keys(c);return i.find(n,(function(n){var e=c[n];return i.includes(e,t)}))||"unknown"}function a(t,n,e){return n||("unknown"===t?"unknown":e?"mobile":"desktop_laptop")}n.parseUA=function(t){var n=new r(t),e=n.getBrowser(),i=n.getOS(),c=n.getDevice(),f=(i.name||"unknown").toLowerCase(),l=(e.name||"unknown").toLowerCase(),d=u(c.type,l,f);return{browser:{id:o(e.name),version:e.version},platform:{name:f,version:i.version},device:{model:s[c.model]||"unknown",type:a(l,c.type,d),isMobile:d}}};var u=function(t,n,e){if(i.includes(["mobile","tablet"],t)||i.includes(["opera mini"],n))return!0;return!!i.includes(["android","blackberry","ios","windows phone"],e)},c={gc:["chrome","chromium","silk","yandex","maxthon","chrome webview"],edge:["edge"],ie:["internet explorer","iemobile"],ff:["firefox","iceweasel"],opera:["opera","opera mini","opera tablet"],safari:["safari","mobile safari","webkit"],ucbrowser:["uc browser"]},s={iPhone:"iphone",iPad:"ipad"}},3800:function(t,n,e){var i=e(1167);function r(){this.j={}}r.prototype.register=function(t,n){if(1!==arguments.length){if(this.j[t])throw new Error("Module already registered for: "+t);this.j[t]=n}else{var e=this;i.each(t,(function(t,n){e.register(n,t)}))}},r.prototype.get=function(t){return this.j[t]},r.prototype.getModuleKeys=function(){var t=this.j;return i.keys(t)},r.prototype.evaluate=function(t){var n=t.length,e=t.slice(0,n-1),r=t[n-1];if("function"!=typeof r)throw new Error("Evaluate must take a function as last element in array");var o=i.map(e,i.bind(this.get,this));return r.apply(null,o)},r.prototype.reset=function(){this.j={}},t.exports={create:function(){return new r}}},8208:function(t,n,e){var i=e(1167);function r(t,n,e){this.q=t,this.H=n,this.Y=0,this.$=!1,this.K={},i.extend(this,e),this.W={},this.initialize&&this.initialize()}r.prototype.X=function(t,n){var e=this.K[t];e&&"function"==typeof e&&e.call(this,n,t)},r.prototype.Z=function(){return i.cloneDeep(this.W)},r.prototype.on=function(t,n){this.K[t]=i.bind(n,this)},r.prototype.observe=function(t){return this.H.tt(this.q,t)},r.prototype.emitChange=function(){this.$=!0,this.Y++},r.prototype.hasChanges=function(){return this.$},r.prototype.resetChange=function(){this.$=!1},r.prototype.getStateId=function(){return this.Y},r.prototype.nt=function(){this.reset&&"function"==typeof this.reset&&this.reset(),this.initialize()},t.exports=r},7239:function(t,n,e){var i=e(1167),r=e(8208);function o(t){t=t||{},this.et={},this.it={},this.rt=0,this.ot=[],this.ut=[]}function a(t,n){return function(){var e=t.indexOf(n);-1!==e&&t.splice(e,1)}}o.prototype.registerStores=function(t){i.forOwn(t,i.bind((function(t,n){this.et[n]=new r(n,this,t)}),this))},o.prototype.getStore=function(t){return this.et[t]},o.prototype.dispatch=function(t,n){this.dispatchId++,i.each(this.ot,i.bind((function(e){e.call(this,t,n)}),this)),i.forOwn(this.et,(function(e){e.X(t,n)})),i.each(this.ut,i.bind((function(e){e.call(this,t,n)}),this)),i.forOwn(this.et,i.bind((function(t,n){t.hasChanges()&&this.it[n]&&(t.resetChange(),i.each(this.it[n],(function(n){n(t)})))}),this))},o.prototype.reset=function(){this.it={},i.forOwn(this.et,(function(t,n){t.nt()}))},o.prototype.getState=function(){var t={};return i.forOwn(this.et,(function(n,e){t[e]=n.Z()})),t},o.prototype.onPreAction=function(t){var n=this.ot;return n.push(t),a(n,t)},o.prototype.onPostAction=function(t){var n=this.ut;return n.push(t),a(n,t)},o.prototype.tt=function(t,n){return this.it[t]||(this.it[t]=[]),this.it[t].push(n),a(this.it[t],n)},t.exports={create:function(t){return new o(t)}}},7136:function(t,n,e){var i=e(1167);n.stringify=function(){return function(t){var n,e,r=[Array.prototype],o=[];i.each(r,(function(t){i.isUndefined(t.toJSON)||(o.push(t.toJSON),delete t.toJSON)}));try{n=t()}catch(a){e=a}finally{i.each(o,(function(t,n){r[n].toJSON=t}))}if(e)throw e;return n}(i.bind((function(){return JSON.stringify.apply(null,this)}),arguments))},n.parse=JSON.parse},8269:function(t,n,e){var i=e(1167);n.hasMatch=function(t,n,e){var r=!i.isUndefined(e)&&null!==e,o=!i.isUndefined(t)&&null!==t;switch(n||(o?"exact":"exists")){case"exists":return r;case"exact":return r&&String(e)===t;case"substring":return r&&String(e).indexOf(t)>-1;case"regex":try{return!(!o||!r)&&new RegExp(t).test(String(e))}catch(f){}return!1;case"range":var a=t.split(":"),u=parseFloat(a[0]),c=parseFloat(a[1]),s=parseFloat(e);return s>=u&&s<=c;default:return!1}}},3961:function(t,n,e){t.exports=e(7785)},468:function(t,n,e){var i=e(1167),r=e(1004);function o(t,n){this.ct=t,this.st=n}o.prototype.ft=function(t){return[this.st,t].join("$$")},o.prototype.dt=function(t){return t.replace(this.st+"$$","")},o.prototype.setItem=function(t,n){try{this.ct.setItem(this.ft(t),n)}catch(e){r.warn("Failed to save",t,"to localStorage:",e)}},o.prototype.removeItem=function(t){this.ct.removeItem(this.ft(t))},o.prototype.getItem=function(t){var n=null;try{n=this.ct.getItem(this.ft(t))}catch(e){}return n},o.prototype.keys=function(){var t=i.keys(this.ct);return i.map(i.filter(t,i.bind((function(t){return i.includes(t,this.st)}),this)),i.bind(this.dt,this))},o.prototype.allKeys=function(){return i.keys(this.ct)},o.prototype.allValues=function(){return i.values(this.ct)},t.exports={create:function(t,n){return new o(t,n)},mockStorage:{keys:function(){},getItem:function(t){},removeItem:function(t){},setItem:function(t,n){}}}},7447:function(t,n,e){var i=e(4171),r=e(478),o=e(3866);n.createDOMChangedObserver=function(){var t=i.getDocumentElement(),n={type:"viewTrigger",name:"DOMChanged"},e=o.create((function(){r.emit(n,!0)}));o.observe(e,t,{attributes:!0,childList:!0,subtree:!0,characterData:!0})}},5976:function(t,n,e){var i=e(1167),r=e(1497),o=e(2432),a=e(7136),u=e(9929).DT,c=e(1004),s=e(9908),f=e(1353).get("stores/pending_events"),l=o.StorageKeys.PENDING_EVENTS;n.persistPendingEvents=function(){try{var t=f.getEventsString();u.setItem(l,t),e(4188).setItem(l,t)}catch(n){c.warn("PendingEvents / Unable to set localStorage key, error was: ",n),r.emitInternalError(n)}},n.getPendingEvents=function(){try{return a.parse(u.getItem(l))}catch(t){return null}},n.retryPendingEvents=function(t){i.forOwn(t,(function(t,n){s.retryableRequest(t.data,n,t.retryCount)})),i.isEmpty(t)||c.log("Retried pending events: ",t)}},7761:function(t,n,e){var i=e(1167),r=e(4184),o=e(1353),a=e(2432),u=e(478),c=e(6665);n.registerApiModule=function(t,n){i.isArray(n)&&(n=o.evaluate(n)),c.dispatch(r.REGISTER_PLUGIN,{type:a.PluginTypes.apiModules,name:t,plugin:n})},n.registerDependency=function(t,n){o.get(t)||o.register(t,n)},n.registerVisitorProfileProvider=function(t){c.dispatch(r.REGISTER_PLUGIN,{type:a.PluginTypes.visitorProfileProviders,name:t.provides,plugin:t})},n.registerViewProvider=function(t){c.dispatch(r.REGISTER_PLUGIN,{type:a.PluginTypes.viewProviders,name:t.provides,plugin:t})},n.registerAudienceMatcher=function(t,n){c.dispatch(r.REGISTER_PLUGIN,{type:a.PluginTypes.audienceMatchers,name:t,plugin:n})},n.registerViewMatcher=function(t,n){c.dispatch(r.REGISTER_PLUGIN,{type:a.PluginTypes.viewMatchers,name:t,plugin:n})},n.registerAnalyticsTracker=function(t,n){c.dispatch(r.REGISTER_PLUGIN,{type:a.PluginTypes.analyticsTrackers,name:t,plugin:n})},n.registerViewTagLocator=function(t,n){c.dispatch(r.REGISTER_PLUGIN,{type:a.PluginTypes.viewTagLocators,name:t,plugin:n})},n.registerAudiencePlugin=function(t){t.dependencies&&i.each(t.dependencies,(function(t,e){n.registerDependency(e,t)}));var e,r,a="vendor."+t.vendor;e=i.isString(t.provider)?o.get(t.provider)(t.vendor):i.isFunction(t.provider)?t.provider(t.vendor):i.cloneDeep(t.provider),n.registerVisitorProfileProvider(i.extend(e,{provides:a})),r=i.isString(t.matcher)?o.get(t.matcher):t.matcher;var u={fieldsNeeded:[a],match:function(t,n){return r(t[a],n)}};n.registerAudienceMatcher(a,u)},n.registerWidget=function(t){return i.isArray(t)&&(t=o.evaluate(t)),{showToken:u.on({filter:{type:"showWidget",name:t.widgetId},handler:t.showFn}),hideToken:u.on({filter:{type:"hideWidget",name:t.widgetId},handler:t.hideFn})}},n.registerChangeApplier=function(t,n){c.dispatch(r.REGISTER_PLUGIN,{type:a.PluginTypes.changeAppliers,name:t,plugin:n})},n.registerDecider=function(t,n){c.dispatch(r.REGISTER_PLUGIN,{type:a.PluginTypes.deciders,name:t,plugin:n})},n.registerEventImplementation=function(t,n){c.dispatch(r.REGISTER_PLUGIN,{type:a.PluginTypes.eventImplementations,name:t,plugin:n})},n.registerViewTrigger=function(t,n){c.dispatch(r.REGISTER_PLUGIN,{type:a.PluginTypes.viewTriggers,name:t,plugin:n})}},9383:function(t,n,e){var i=e(1167),r=e(1353),o=":",a="holdback",u="treatment",c="",s=e(1004),f=e(5190);function l(t){return t.replace(/[^a-zA-Z0-9\.\~\!\*\(\)\']+/g,"_")}n.formatNamesAndIdsForAnalytics=function(t,n,e,o){var a={layer:t.name||c,experiment:n.name||c,variation:e.name||c};o&&(a=i.mapValues(a,l));var u,s=!t.integrationStringVersion||1===t.integrationStringVersion;if(a.experiment===c&&s)if(u=n.audienceIds,!i.isEmpty(u)&&i.includes(["and","or","not"],u[0]))a.experiment="Exp";else{var f=r.get("stores/audience_data");a.experiment=function(t,n){return i.isEmpty(n)?"everyone_else":i.reduce(n,(function(n,e){var i=t.get(e);return i?n+l(i.name?i.name:i.id)+",":n}),"").slice(0,-1)}(f,n.audienceIds)}return{names:a,idStrings:{layer:"("+l(t.id)+")",experiment:"("+l(n.id)+")",variation:"("+l(e.id)+")"}}},n.combineAndTruncateIdAndName=function(t,n,e){var i=e-n.length;if(i<0&&(s.warn("maxLength must be at least long enough to fit the entity ID, which is length"+n.length+". Defaulting to only use entity ID as name."),t=c),t===c)return n;if(t.length>i){var r=Math.min(t.length,i);return(t=t.substring(0,r))+n}return t+" "+n},n.generateAnalyticsString=function(t,e,r,c,s,l){return t.integrationStringVersion&&2===t.integrationStringVersion?function(t,e,r,u,c,s){if(f.isSingleExperimentPolicy(t.policy)&&u)return;var l=!f.isSingleExperimentPolicy(t.policy)&&u,d=n.formatNamesAndIdsForAnalytics(t,e,r,s),v=[d.names.experiment,d.names.variation],h=[d.idStrings.experiment,d.idStrings.variation];f.isSingleExperimentPolicy(t.policy)||(v.unshift(d.names.layer),h.unshift(d.idStrings.layer));var p=i.reduce(h,(function(t,n){return t+n.length}),0),g=v.length-1+(l?1:0),m=p+1*g;if(l&&(m+=8),m>c)throw new Error("The analytics string size is too low to send the entity IDs.");for(var _=c-m,y=v.length,w=[],b=v.length-1;b>=0;b--){var E=v[b],I=Math.min(E.length,Math.floor(_/y));_-=I,y--,w.unshift(E.substring(0,I))}var A=i.map(w,(function(t,n){return t+h[n]}));return l&&A.push(a),A.join(o)}(t,e,r,c,s,l):function(t,e,r,c,s,l){var d=c?a:u,v=3,h=n.formatNamesAndIdsForAnalytics(t,e,r,l),p=h.names,g=h.idStrings,m=i.reduce(g,(function(t,n){return t+n.length}),0);if(m+v+d.length>s)throw new Error("The analytics string size is too low to send the campaign, experiment, and variation IDs.");var _=s-m-v-d.length,y={};y.variation=Math.min(p.variation.length,Math.floor(_/3)),_-=y.variation,y.experiment=Math.min(p.experiment.length,Math.floor(_/2)),_-=y.experiment,y.layer=_;var w={};i.each(p,(function(t,n){w[n]=t.substring(0,y[n])}));var b=[];return f.isSingleExperimentPolicy(t.policy)||b.push(w.layer+g.layer),(b=b.concat([w.experiment+g.experiment,w.variation+g.variation,d])).join(o)}(t,e,r,c,s,l)}},8390:function(t,n,e){var i=e(1167);t.exports=function(t,n){t=function(t){var n=t.split("?");if(n[1]){var e=n[1].split("#"),r=e[0],a=e.slice(1).join("#"),u=r.split("&"),c=[];return i.each(u,(function(t){0!==t.indexOf(o)&&c.push(t)})),n[1]="",c.length>0&&(n[1]="?"+c.join("&")),a&&(n[1]+="#"+a),n.join("")}return t}(t);var e=n.value;switch(n.match){case"exact":return(t=c(t))===c(e);case"regex":try{return Boolean(t.match(e))}catch(r){}return!1;case"simple":return(t=u(t))===(e=u(e));case"substring":return t=c(t,!0),e=c(e,!0),-1!==t.indexOf(e);default:return!1}};var r=["www."],o="optimizely_",a=["https?://.*?.?optimizelyedit.(com|test)/","https?://.*.?optimizelypreview.(com|test)/","https?://(edit|preview)(-hrd|-devel)?.optimizely.(com|test)/","https?://.*?.?optimizelyedit(-hrd)?.appspot.com/","https?://"];function u(t){return c(function(t){var n=t.indexOf("?");return-1!==n&&(t=t.substring(0,n)),-1!==(n=t.indexOf("#"))&&(t=t.substring(0,n)),t}(t))}function c(t,n){t=(t=t.replace("/?","?")).toLowerCase().replace(/[/&?]+$/,"");var e=a.slice(0);n||(e=e.concat(r));for(var i=e.length,o=0;o<i;o++){var u=e[o],c=new RegExp("^"+u);t=t.replace(c,"")}return t}},2446:function(t,n,e){var i=e(1167),r=e(331).getFieldValue,o=e(8269);t.exports=function(t,n){var e=r(t,n.name.split("."));return i.isArray(e)?i.some(e,i.partial(o.hasMatch,n.value,n.match)):o.hasMatch(n.value,n.match,e)}},8444:function(t,n,e){var i=e(1167),r=e(4184),o=e(6171),a=e(1004);t.exports={initialize:function(){this.W={actions:{},actionState:{}},this.on(r.DATA_LOADED,this.vt),this.on(r.ACTION_EXECUTED,this.ht),this.on(r.SET_CHANGE_APPLIER,this._t),this.on(r.REMOVE_ACTION_STATE,this.yt)},vt:function(t){var n=this;i.isEmpty(t.data.layers)||(i.each(t.data.layers,(function(t){var e;if(t.changes){var r="layerId:"+t.id;e={id:r,layerId:t.id,changeSet:t.changes,type:"layer"},o.deepFreeze(e),n.W.actions[r]=e}i.each(t.experiments,(function(r){if(r.changes){var a="experimentId:"+r.id;e={id:a,layerId:t.id,experimentId:r.id,changeSet:r.changes,type:"experiment"},o.deepFreeze(e),n.W.actions[a]=e}i.each(r.variations,(function(a){i.each(a.actions,(function(i){var u=i.pageId||i.viewId,c=r.id+":"+a.id+":"+u;e={id:c,layerId:t.id,experimentId:r.id,variationId:a.id,pageId:u,changeSet:i.changes,type:"variation"},o.deepFreeze(e),n.W.actions[c]=e}))}))}))})),this.emitChange())},ht:function(t){var n=t.actionId;i.isUndefined(n)||this.W.actionState[n]||(this.W.actionState[n]={})},_t:function(t){var n=t.actionId,e=t.changeId;this.W.actionState[n]?this.W.actionState[n][e]=t.changeApplier:a.warn("Action Data / Attempted to set changeApplier for inactive action: ",n)},yt:function(t){delete this.W.actionState[t.actionId]},get:function(t){return o.safeReference(this.W.actions[t])},getActionState:function(t){return o.safeReference(this.W.actionState[t])},getByChangeId:function(t){return i.find(this.W.actions,{changeSet:[{id:t}]})},getAllActionIdsByPageId:function(t){return i.map(i.filter(this.W.actions,{pageId:t}),"id")},getChangeApplier:function(t,n){var e=this.W.actionState[n];if(e)return e[t]},getExperimentVariationActions:function(t,n){return o.safeReference(i.filter(this.W.actions,{experimentId:t,variationId:n}))},getLayerActions:function(t){return o.safeReference(i.filter(this.W.actions,{id:"layerId:"+t}))},getExperimentActions:function(t){return o.safeReference(i.filter(this.W.actions,{id:"experimentId:"+t}))},getAll:function(){return o.safeReference(i.values(this.W.actions))}}},1773:function(t,n,e){var i=e(4184);t.exports={initialize:function(){this.W={},this.on(i.REGISTER_ASYNC_DEFERRED,this.wt),this.on(i.RESOLVE_DEFERRED,this.bt),this.on(i.REJECT_DEFERRED,this.Et)},getRequest:function(t){return this.W[t]},getPromise:function(t){var n=this.getRequest(t);if(n)return n.promise},wt:function(t){this.W[t.source]={promise:t.promise,resolver:t.resolver,rejecter:t.rejecter}},bt:function(t){var n=this.getRequest(t.source);if(!n)throw new Error("No request registered for source: "+t.source);n.resolver(t.resolveWith)},Et:function(t){var n=this.getRequest(t.source);if(!n)throw new Error("No request registered for source: "+t.source);if(!n.rejecter)throw new Error("No rejecter registered for source: "+t.source);n.rejecter(t.rejectWith)}}},5252:function(t,n,e){var i=e(1167),r=e(4184),o=e(6171);function a(t,n){return n||(n={}),t?(i.each(t,(function(t){if(!i.isString(t)){if(i.isObject(t)){var e=t.type,r=t.name||"_";n[e]||(n[e]={}),n[e][r]=!0}i.isArray(t)&&a(t,n)}})),n):n}t.exports={initialize:function(){this.W={audiences:{},featuresNeeded:{}},this.on(r.DATA_LOADED,this.vt)},vt:function(t){i.isEmpty(t.data.audiences)||(i.each(t.data.audiences,i.bind((function(t){o.deepFreeze(t),i.merge(this.W.featuresNeeded,a(t.conditions)),this.W.audiences[t.id]=t}),this)),this.emitChange())},getAll:function(){return o.safeReference(i.values(this.W.audiences))},getFeaturesNeeded:function(t){return o.safeReference(this.W.featuresNeeded[t]||{})},getAudiencesMap:function(){return o.safeReference(this.W.audiences)},get:function(t){return o.safeReference(this.W.audiences[t])},getAudienceName:function(t){return i.find(i.values(this.W.audiences),{id:t}).name||"Aud "+t}}},9906:function(t,n,e){var i=e(1167),r=e(4184),o=e(6171);t.exports={initialize:function(){this.W={},this.on(r.ADD_CHANGE,this.It),this.on(r.DATA_LOADED,this.vt)},getChange:function(t){return this.W[t]},vt:function(t){i.isEmpty(t.data.changes)||i.each(t.data.changes,i.bind(this.It,this))},It:function(t){o.deepFreeze(t),this.W[t.id]=t,this.emitChange()}}},411:function(t,n,e){var i=e(1167),r=e(4184),o=e(2432);t.exports={initialize:function(){this.W={},i.each(o.Lifecycle,i.bind((function(t){this.W[t]=[]}),this)),this.on(r.ADD_CLEANUP_FN,this.At),this.on(r.CLEAR_CLEANUP_FN,this.Tt)},getCleanupFns:function(t){return i.cloneDeep(this.W[t])},At:function(t){this.W[t.lifecycle].push(t.cleanupFn),this.emitChange()},Tt:function(t){var n=this.W[t.lifecycle];if(t.cleanupFn){var e=n.indexOf(t.cleanupFn);e>-1&&(n.splice(e,1),this.emitChange())}else this.W[t.lifecycle]=[],this.emitChange()}}},510:function(t,n,e){var i=e(4184),r=e(1535);t.exports={initialize:function(){this.W={name:r.NAME,version:r.VERSION},this.on(i.SET_CLIENT_NAME,this.St),this.on(i.SET_CLIENT_VERSION,this.kt)},getClientName:function(){return this.W.name},getClientVersion:function(){return this.W.version},St:function(t){t&&(this.W.name=t),this.emitChange()},kt:function(t){t&&(this.W.version=t),this.emitChange()}}},8652:function(t,n,e){var i=e(4184);t.exports={initialize:function(){this.W={currentDomain:null,defaultAgeSeconds:15552e3,autoRefresh:true},this.on(i.SET_COOKIE_DOMAIN,this.Rt),this.on(i.SET_COOKIE_AGE,this.Ct),this.on(i.SET_COOKIE_AUTO_REFRESH,this.Nt)},getCurrentDomain:function(){return this.W.currentDomain},getDefaultAgeInSeconds:function(){return this.W.defaultAgeSeconds},getAutoRefresh:function(){return this.W.autoRefresh},Rt:function(t){this.W.currentDomain=t,this.emitChange()},Ct:function(t){this.W.defaultAgeSeconds=t,this.emitChange()},Nt:function(t){this.W.autoRefresh=t,this.emitChange()}}},758:function(t,n,e){var i=e(1167),r=e(4184),o=e(6171);t.exports={initialize:function(){this.W={},this.on(r.DATA_LOADED,this.vt)},vt:function(t){i.isEmpty(t.data.dimensions)||(i.each(t.data.dimensions,i.bind((function(t){o.deepFreeze(t),this.W[t.id]=t}),this)),this.emitChange())},getAll:function(){return o.safeReference(i.values(this.W))},getById:function(t){return o.safeReference(this.W[t])},getByApiName:function(t){return o.safeReference(i.find(i.values(this.W),{apiName:t}))}}},4806:function(t,n,e){var i=e(1167),r=e(4184);t.exports={initialize:function(){this.W={disabled:!1,forceAudienceIds:[],forceVariationIds:[],alreadyInitialized:!1,mutationObserverAPISupported:!1,isEditor:!1,isPreview:!1,isLegacyPreview:!1,isSlave:!1,previewLayerIds:[],projectToken:null,shouldOptOut:!1,trackingDisabled:!1,isRunningInV2Editor:!1,isRunningInDesktopApp:!1,forceTracking:!1,requestedEmbeddedEditor:!1},this.on(r.LOAD_DIRECTIVE,this.Dt)},getAll:function(){return i.cloneDeep(this.W)},conflictInObservingChanges:function(){return!this.W.mutationObserverAPISupported},isDisabled:function(){return this.W.disabled},isEditor:function(){return this.W.isEditor},clientHasAlreadyInitialized:function(){return this.W.alreadyInitialized},getForceAudienceIds:function(){return this.W.forceAudienceIds},getForceVariationIds:function(){return this.W.forceVariationIds},getPreviewLayerIds:function(){return this.W.previewLayerIds},getProjectToken:function(){return this.W.projectToken},getForceTracking:function(){return this.W.forceTracking},shouldActivate:function(){return!this.W.isEditor&&!this.isDisabled()},shouldBootstrapDataForPreview:function(){return this.W.isPreview},shouldBootstrapDataForEditor:function(){return this.W.isEditor},shouldInitialize:function(){return!(this.shouldLoadPreview()||this.isDisabled()||this.getProjectToken())},shouldLoadPreview:function(){return!(this.W.isPreview||this.W.isLegacyPreview||!this.getProjectToken()||this.W.isEditor)},shouldLoadEmbeddedEditor:function(){return this.W.requestedEmbeddedEditor&&!this.W.isEditor},shouldBailForDesktopApp:function(){return!this.W.isEditor&&this.W.isRunningInDesktopApp},shouldLoadInnie:function(){return!this.W.isSlave&&!this.W.isEditor&&this.W.isRunningInV2Editor},shouldObserveChangesIndefinitely:function(){return this.W.mutationObserverAPISupported},shouldObserveChangesUntilTimeout:function(){return!this.shouldObserveChangesIndefinitely()},shouldOptOut:function(){return this.W.shouldOptOut},shouldSendTrackingData:function(){return!this.W.trackingDisabled&&(!!this.W.forceTracking||!this.W.isPreview&&i.isEmpty(this.getForceVariationIds())&&i.isEmpty(this.getForceAudienceIds()))},isSlave:function(){return this.W.isSlave},isRunningInDesktopApp:function(){return this.W.isRunningInDesktopApp},isRunningInV2Editor:function(){return this.W.isRunningInV2Editor},Dt:function(t){i.extend(this.W,t),this.emitChange()}}},7610:function(t,n,e){var i=e(1167),r=e(4184),o=e(6171);t.exports={initialize:function(){this.W={},this.on(r.DATA_LOADED,this.vt)},getAll:function(){return o.safeReference(i.values(this.W))},getEventsMap:function(){return o.safeReference(this.W)},get:function(t){return o.safeReference(this.W[t])},getByApiName:function(t){return o.safeReference(i.find(i.values(this.W),{apiName:t}))},getByPageId:function(t){return o.safeReference(i.filter(this.W,{pageId:t}))},vt:function(t){i.isEmpty(t.data.events)||(i.each(t.data.events,i.bind((function(t){t.pageId||(t.pageId=t.viewId),o.deepFreeze(t),this.W[t.id]=t}),this)),this.emitChange())}}},3442:function(t,n,e){var i=e(1167),r=e(4184);function o(t){var n=[];return t&&i.isObject(t)?(t.type&&n.push(t.type),n.push("|"),t.type&&t.name&&n.push(t.name),n.join("")):"|"}t.exports={initialize:function(){this.W={handlers:{}},this.on(r.ADD_EMITTER_HANDLER,this.Ot),this.on(r.REMOVE_EMITTER_HANDLER,this.xt)},getHandlers:function(t,n){var e=[null,{type:t.type},{type:t.type,name:t.name}],r=[];return i.each(e,i.bind((function(t){var n=o(t),e=this.W.handlers[n];e&&(r=r.concat(e))}),this)),n&&(r=i.filter(r,(function(t){return!t.publicOnly}))),r},Ot:function(t){var n=o(t.filter);this.W.handlers[n]||(this.W.handlers[n]=[]),this.W.handlers[n].push({handler:t.handler,token:t.token,publicOnly:!!t.publicOnly,emitErrors:!!t.emitErrors}),this.emitChange()},xt:function(t){var n=!1,e=t.token;i.forOwn(this.W.handlers,i.bind((function(t,r){var o=i.filter(t,(function(t){return t.token!==e}));o.length!==t.length&&(n=!0,this.W.handlers[r]=o)}),this)),n&&this.emitChange()}}},2684:function(t,n,e){var i=e(1167),r=e(4184),o=e(6171);t.exports={initialize:function(){this.W={holdback:0,isGlobalHoldback:null,listTargetingKeys:[],revision:null,projectId:null,accountId:null,namespace:null,activationId:null,activationTimestamp:null,dcpServiceId:null,dcpKeyfieldLocators:[],recommenderServices:[],anonymizeIP:null,projectJS:null,snippetId:null,plugins:[],domContentLoaded:!1,experimental:{},ga4UserId:null},this.on(r.DATA_LOADED,this.Mt),this.on(r.ACTIVATE,this.Pt),this.on(r.RECORD_GLOBAL_DECISION,this.Lt),this.on(r.SET_DOMCONTENTLOADED,this.Ut),this.on(r.SET_GA4_USER_ID,this.Vt)},getRevision:function(){return this.W.revision},getGlobalHoldbackThreshold:function(){return this.W.holdback},getProjectId:function(){return this.W.projectId},getSnippetId:function(){return this.W.snippetId},getAccountId:function(){return this.W.accountId},getNamespace:function(){return this.W.namespace},getActivationId:function(){return this.W.activationId},getActivationTimestamp:function(){return this.W.activationTimestamp},getAnonymizeIP:function(){return this.W.anonymizeIP},isGlobalHoldback:function(){return!!this.W.isGlobalHoldback},getListTargetingKeys:function(){return this.W.listTargetingKeys.slice()},getDCPServiceId:function(){return this.W.dcpServiceId},getDCPKeyfieldLocators:function(){return this.W.dcpKeyfieldLocators},getRecommenderServices:function(){return this.W.recommenderServices},getProjectJS:function(){return this.W.projectJS},getPlugins:function(){return this.W.plugins},getExperimental:function(){return o.safeReference(this.W.experimental)},getGA4UserId:function(){return this.W.ga4UserId},domContentLoadedHasFired:function(){return this.W.domContentLoaded},Pt:function(t){this.W.activationId=t.activationId,this.W.activationTimestamp=t.activationTimestamp,this.W.isGlobalHoldback=null},Lt:function(t){var n=t.isGlobalHoldback;if(null!==this.W.isGlobalHoldback&&this.W.isGlobalHoldback!==n)throw new Error("Attempted to change already set global holdback!");this.W.isGlobalHoldback=n,this.emitChange()},Vt:function(t){var n=t.ga4UserId;if(!n)throw new Error('Argument "payload.ga4UserId" is missing');this.W.ga4UserId=n,this.emitChange()},Mt:function(t){var n=i.pick(t.data,["holdback","accountId","projectId","snippetId","namespace","revision","listTargetingKeys","dcpServiceId","dcpKeyfieldLocators","recommenderServices","anonymizeIP","plugins","projectJS","experimental","ga4UserId"]);if(0!==i.keys(n).length){i.extend(this.W,{listTargetingKeys:[],dcpServiceId:null,dcpKeyfieldLocators:[]},n),this.emitChange()}},Ut:function(){this.W.domContentLoaded=!0,this.emitChange()}}},9103:function(t,n,e){var i=e(1167),r=e(4184),o=e(6171);t.exports={initialize:function(){this.W={},this.on(r.DATA_LOADED,this.vt)},vt:function(t){i.isEmpty(t.data.groups)||(i.each(t.data.groups,i.bind((function(t){o.deepFreeze(t),this.W[t.id]=t}),this)),this.emitChange())},getAll:function(){return o.safeReference(i.values(this.W))},getGroupsMap:function(){return o.safeReference(this.W)},get:function(t){return o.safeReference(this.W[t])}}},2931:function(t,n,e){var i=e(1167),r=e(4184),o=e(6670);t.exports={initialize:function(){this.W={originalPushState:null,originalReplaceState:null},this.on(r.ENSURE_ORIGINAL_PUSHSTATE,this.Ft),this.on(r.ENSURE_ORIGINAL_REPLACESTATE,this.Bt)},getOriginalPushState:function(){return this.W.originalPushState},getOriginalReplaceState:function(){return this.W.originalReplaceState},Ft:function(){this.W.originalPushState||(this.W.originalPushState=i.bind(o.getGlobal("history").pushState,o.getGlobal("history")))},Bt:function(){this.W.originalReplaceState||(this.W.originalReplaceState=i.bind(o.getGlobal("history").replaceState,o.getGlobal("history")))}}},8117:function(t,n,e){var i=e(1167),r=e(4184);t.exports={initialize:function(){this.W={},this.on(r.DATA_LOADED,this.vt),this.on(r.SET_INTEGRATION_SETTINGS,this.zt)},vt:function(t){i.isEmpty(t.data.integrationSettings)||(i.each(t.data.integrationSettings,i.bind((function(t){this.W[t.id]=t}),this)),this.emitChange())},zt:function(t){var n=this.W[t.id];n?i.extend(n,t):this.W[t.id]=t},getAll:function(){return i.cloneDeep(i.values(this.W))},get:function(t){return i.cloneDeep(this.W[t])},getReference:function(t){return this.W[t]}}},2238:function(t,n,e){var i=e(1167),r=e(4184),o=e(1004),a="*";t.exports={initialize:function(){this.W={},this.on(r.LOAD_PERSISTED_LAYER_STATES,this.Gt),this.on(r.RECORD_LAYER_DECISION,this.jt),this.on(r.RECORD_LAYER_DECISION_EVENT_ID,this.qt)},getLayerState:function(t,n){if(this.W[t]){var e=this.W[t];if(i.keys(e).length>1&&!n)throw new Error("View Id must be specified when more than one layerState for layer.");return n?i.cloneDeep(i.find(e,{pageId:n})):i.cloneDeep(e[a])}},getLayerStates:function(t){var n=[];for(var e in this.W)i.forEach(this.W[e],(function(e){(i.isUndefined(t)||e.namespace===t)&&n.push(i.cloneDeep(e))}));return n},getLayerStatesForAnalytics:function(){var t=[];for(var n in this.W)i.forEach(this.W[n],(function(n){t.push(i.pick(n,["layerId","decision","decisionEventId"]))}));return t},Gt:function(t){t.merge||(this.W={}),i.each(t.layerStates,i.bind((function(t){var n=t.layerId;t.pageId||(t.pageId=t.viewId);var e=t.pageId||a,r=this.W[n];if(i.isUndefined(r))this.W[n]={},this.W[n][e]=t;else{var o=r[e];(!o||t.decisionTimestamp>(o.decisionTimestamp||0))&&(this.W[n][e]=t)}}),this)),this.emitChange()},jt:function(t){var n={layerId:t.layerId,revision:t.revision,namespace:t.namespace,pageId:t.pageId,decisionTicket:t.decisionTicket,decision:t.decision,decisionActivationId:t.activationId,decisionTimestamp:t.timestamp,decisionEventId:null},e=this.W[t.layerId]||{};t.pageId?(delete e[a],e[t.pageId]=n):(e={})[a]=n,this.W[t.layerId]=e,this.emitChange()},qt:function(t){var n=t.layerId,e=t.pageId||a;this.W[n]?this.W[n][e]?(this.W[n][e].decisionEventId=t.decisionId,this.emitChange()):o.warn("Not recording decision event: Layer state not found for view",e):o.warn("Not recording decision event: Campaign not registered",n)}}},7633:function(t,n,e){var i=e(1167),r=e(4184),o=e(6171),a=e(5190);t.exports={initialize:function(){this.W={layers:{},experiments:{},variations:{}},this.on(r.DATA_LOADED,this.vt)},vt:function(t){if(!i.isEmpty(t.data.layers)){var n=this;i.each(t.data.layers,(function(t){i.each(t.experiments,(function(e){t.pageIds||(t.pageIds=t.viewIds),e.campaignName||a.isSingleExperimentPolicy(t.policy)?a.isSingleExperimentPolicy(t.policy)&&t.groupId&&(e.groupId=t.groupId):e.campaignName=t.name,i.each(e.variations,(function(t){i.each(t.actions,(function(t){t.pageId||(t.pageId=t.viewId)})),n.W.variations[t.id]=t})),n.W.experiments[e.id]=e})),o.deepFreeze(t),n.W.layers[t.id]=t})),this.emitChange()}},getAll:function(){return o.safeReference(i.values(this.W.layers))},getCampaignsMap:function(){return o.safeReference(this.W.layers)},getExperimentsMap:function(){return o.safeReference(this.W.experiments)},getVariationsMap:function(){return o.safeReference(this.W.variations)},getCount:function(){return i.keys(this.W.layers).length},getAllByPageIds:function(t){return o.safeReference(i.filter(this.W.layers,(function(n){return i.some(t,i.partial(i.includes,n.pageIds))})))},get:function(t){return o.safeReference(this.W.layers[t])},getLayerByExperimentId:function(t){var n=i.find(this.W.layers,(function(n){return i.find(n.experiments,{id:t})}));return o.safeReference(n)},getExperimentByVariationId:function(t){var n;return i.some(this.W.layers,(function(e){return i.some(e.experiments,(function(e){return i.find(e.variations,{id:t})&&(n=e),n})),n})),o.safeReference(n)}}},7025:function(t,n,e){var i=e(4184);t.exports={initialize:function(){this.W={logs:[]},this.on(i.LOG,this.Ht)},getLogs:function(){return this.W.logs},Ht:function(t){this.W.logs.push(t),this.emitChange()},Z:function(){return this.W.logs.slice()}}},6322:function(t,n,e){var i=e(4184),r=e(6171);t.exports={initialize:function(){this.W={data:null,hasTracked:null},this.on(i.LOAD_REDIRECT_DATA,this.Yt),this.on(i.REGISTER_TRACKED_REDIRECT_DATA,this.$t)},get:function(){return r.safeReference(this.W.data)},hasTracked:function(){return this.W.hasTracked},Yt:function(t){r.deepFreeze(t),this.W.data=t,this.W.hasTracked=!1,this.emitChange()},$t:function(){this.W.hasTracked=!0}}},8634:function(t,n,e){var i=e(1167),r=e(4184),o=e(7136);t.exports={initialize:function(){this.W={},this.on(r.SET_PENDING_EVENT,this.Kt),this.on(r.REMOVE_PENDING_EVENT,this.Wt),this.on(r.LOAD_PENDING_EVENTS,this.Xt)},getEvents:function(){return this.W},getEventsString:function(){return o.stringify(this.W)},Kt:function(t){i.keys(this.W).length>=1e3&&this.Jt();var n=t.id,e=t.retryCount;this.W[n]&&this.W[n].retryCount===e||(this.W[n]={id:n,timeStamp:t.timeStamp,data:t.data,retryCount:e},this.emitChange())},Wt:function(t){delete this.W[t.id],this.emitChange()},Xt:function(t){this.W=t.events,this.Jt(),this.emitChange()},Jt:function(){for(var t=i.sortBy(this.W,"timeStamp"),n=0;n<=t.length-1e3;n++)delete this.W[t[n].id];this.emitChange()}}},5123:function(t,n,e){var i=e(1167),r=e(4184);t.exports={initialize:function(){this.W={layerId:null},this.on(r.ANNOUNCE_PENDING_REDIRECT,this.Yt)},isExpectingRedirect:function(){return i.isString(this.W.layerId)},getLayerId:function(){return this.W.layerId},Yt:function(t){this.isExpectingRedirect()||(this.W.layerId=t.layerId,this.emitChange())}}},8317:function(t,n,e){var i=e(1167),r=e(4184),o=e(2432);t.exports={initialize:function(){this.W={},this.W[o.PerformanceData.performance_marks]={},this.on(r.SET_PERFORMANCE_MARKS_DATA,this.Qt)},Qt:function(t){i.isUndefined(this.W[o.PerformanceData.performance_marks][t.name])&&(this.W[o.PerformanceData.performance_marks][t.name]=[]),this.W[o.PerformanceData.performance_marks][t.name].push(t.data),this.emitChange()},getMarks:function(){return i.mapValues(this.W[o.PerformanceData.performance_marks],(function(t){return i.map(t,(function(t){return[t.startTime,t.duration]}))}))},getDurationsFor:function(t){return i.reduce(t,i.bind((function(t,n){var e=this.W[o.PerformanceData.performance_marks][n];return e&&(t[n]=Math.round(i.reduce(e,(function(t,n){return t+n.duration}),0))),t}),this),{})}}},2539:function(t,n,e){var i=e(1167),r=e(4184),o=e(2432),a=e(1004);t.exports={initialize:function(){this.W=i.mapValues(o.PluginTypes,(function(){return{}})),this.on(r.REGISTER_PLUGIN,this.Zt)},Zt:function(t){var n=t.type,e=t.name,i=t.plugin;if(!n||!e)throw new Error("Missing information needed to register plugins: "+n+":"+e);if(!this.W[n])throw new Error("Invalid plugin type specified: "+n);this.W[n][e]=i,a.debug("Plugin Store: Registering Plugin :",t)},getAllPlugins:function(t){if(!t)return this.W;if(this.W[t])return this.W[t];throw new Error("Invalid plugin type: "+t)},getPlugin:function(t,n){if(!n||!t)throw new Error("Missing plugin parameters");return this.getAllPlugins(t)[n]||null}}},6211:function(t,n,e){var i=e(1167),r=e(4184),o=e(331);t.exports={initialize:function(){this.W={},this.on(r.SET_VISITOR_ATTRIBUTE_PENDING,this.tn)},getPendingAttributeValue:function(t){return t=i.isArray(t)?t.concat("pending"):[t,"pending"],o.getFieldValue(this.W,t)},tn:function(t){o.setFieldValue(this.W,t.key,{pending:t.pending}),this.emitChange()}}},8567:function(t,n,e){var i=e(1167),r=e(4184);t.exports={initialize:function(){this.W={inRumSample:!1,id:null,src:null,RumHost:null,data:{extras:{}},apis:{},DOMObservation:{},featuresNeeded:{}},this.on(r.SET_RUM_DATA,this.nn),this.on(r.RECORD_API_USAGE,this.en),this.on(r.INITIALIZE_CHANGE_METRICS,this.rn),this.on(r.RECORD_ACTIVATION_TYPE_USAGE,this.an),this.on(r.RECORD_AUDIENCE_USAGE,this.un),this.on(r.RECORD_CHANGE_MACROTASK_RATE,this.cn),this.on(r.RECORD_CHANGE_OVERHEATED,this.sn),this.on(r.RECORD_CHANGE_TYPE_USAGE,this.fn),this.on(r.RECORD_DOM_OBSERVATION_OCCURENCE,this.ln),this.on(r.RECORD_INTEGRATION_USAGE,this.dn),this.on(r.RECORD_LAYER_FEATURE_USAGE,this.vn),this.on(r.RECORD_LAYER_POLICY_USAGE,this.hn),this.on(r.RECORD_VIEW_FEATURE_USAGE,this.pn),this.on(r.RECORD_VIEWS_INITIALLY_ACTIVATED_COUNT,this.gn),this.on(r.RECORD_VISITOR_ID_LOCATOR_USAGE,this.mn),this.on(r.RECORD_VISITOR_ID_ERROR,this._n),this.on(r.RECORD_STICKY_BUCKETING_FEATURE,this.yn)},nn:function(t){i.merge(this.W,t),this.emitChange()},en:function(t){this.W.apis[t.methodName]||(this.W.apis[t.methodName]=0),this.W.apis[t.methodName]++,this.emitChange()},rn:function(){i.isUndefined(this.W.data.extras.changeMacrotaskRate)&&(this.W.data.extras.changeMacrotaskRate=0),i.isUndefined(this.W.data.extras.numOverheatedChanges)&&(this.W.data.extras.numOverheatedChanges=0)},cn:function(t){i.isUndefined(this.W.data.extras.changeMacrotaskRate)&&(this.W.data.extras.changeMacrotaskRate=0),t.changeMacrotaskRate>this.W.data.extras.changeMacrotaskRate&&(this.W.data.extras.changeMacrotaskRate=t.changeMacrotaskRate),this.emitChange()},sn:function(){i.isUndefined(this.W.data.extras.numOverheatedChanges)&&(this.W.data.extras.numOverheatedChanges=0),this.W.data.extras.numOverheatedChanges++,this.emitChange()},ln:function(t){this.W.DOMObservation[t.counterName]||(this.W.DOMObservation[t.counterName]=0),this.W.DOMObservation[t.counterName]++,this.emitChange()},wn:function(t,n,e){i.isUndefined(this.W.featuresNeeded[t])&&(this.W.featuresNeeded[t]={});var r=this.W.featuresNeeded[t];i.each(n,(function(t){r[t]||(r[t]={}),r[t][e]||(r[t][e]=!0)}))},dn:function(t){this.wn("integrations",t.integrations,t.layerId)},fn:function(t){this.wn("changeTypes",t.changeTypes,t.layerId)},an:function(t){this.wn("activationTypes",[t.activationType],t.entityId),this.emitChange()},pn:function(t){this.wn("viewFeatures",t.featuresUsed,t.entityId),this.emitChange()},vn:function(t){this.wn("layerFeatures",[t.feature],t.entityId),this.emitChange()},hn:function(t){this.wn("policy",[t.policy],t.layerId),this.emitChange()},un:function(t){this.wn("audiences",t.audienceTypes,t.layerId),this.emitChange()},gn:function(t){this.W.data.extras.viewsInitiallyActivatedCount=t.viewsInitiallyActivatedCount,this.emitChange()},mn:function(t){this.wn("visitorIdLocatorType",[t.visitorIdLocatorType],t.entityId),this.emitChange()},_n:function(t){this.W.data.extras.errorCustomVisitorId=t.isError,this.emitChange()},yn:function(t){this.wn("stickyBucketing",[t.feature],t.id)},getSampleRum:function(){return this.W.inRumSample},getRumId:function(){return this.W.id},getRumHost:function(){return this.W.RumHost},getApiData:function(){return this.W.apis},getDOMObservationData:function(){return this.W.DOMObservation},getRumData:function(){return i.cloneDeep(this.W.data)},getScriptSrc:function(){return this.W.src},getFeaturesNeededData:function(){var t=this.W.featuresNeeded,n={};return i.forOwn(t,(function(t,e){var r=i.keys(t);i.isEmpty(r)||(n[e]={}),i.forEach(r,(function(r){n[e][r]=i.keys(t[r]).length}))})),n}}},764:function(t,n,e){var i=e(4184);t.exports={initialize:function(){this.W={initialized:!1,natives:{}},this.on(i.SANDBOXED_FUNCTIONS_ADDED,this.bn)},bn:function(t){if(!t.sandboxedFunctions)throw new Error("No sandboxedFunctions found in payload");this.W.natives=t.sandboxedFunctions,this.W.initialized=!0,this.emitChange()},getAll:function(){return this.W.natives},get:function(t){if(!t)throw new Error("Missing name parameter");return this.W.natives[t]||null},isInitialized:function(){return this.W.initialized}}},5271:function(t,n,e){var i=e(1167),r=e(4184),o=e(5242),a=e(7432);t.exports={initialize:function(){this.W={lastSessionTimestamp:0,sessionId:null},this.on(r.REFRESH_SESSION,this.En),this.on(r.LOAD_SESSION_STATE,this.In)},getState:function(){return i.cloneDeep(this.W)},getSessionId:function(){return this.W.sessionId},In:function(t){this.W.sessionId=t.sessionId,this.W.lastSessionTimestamp=t.lastSessionTimestamp,this.emitChange()},En:function(){var t=o.now(),n=this.W.lastSessionTimestamp;(!this.W.sessionId||t-n>18e5)&&(this.W.sessionId=a.generate()),this.W.lastSessionTimestamp=t,this.emitChange()}}},8377:function(t,n,e){var i=e(1167),r=e(4184);t.exports={initialize:function(){this.An(),this.on(r.FINALIZE_BATCH_SNAPSHOT,this.Tn),this.on(r.REGISTER_PREVIOUS_BATCH,this.Sn),this.on(r.REGISTER_TRACKER_VISITOR,this.kn),this.on(r.REGISTER_TRACKER_EVENT,this.Rn),this.on(r.REGISTER_TRACKER_DECISION,this.Cn),this.on(r.RESET_TRACKER_EVENTS,this.Nn),this.on(r.RESET_TRACKER_STORE,this.An),this.on(r.RESET_TRACKER_PREVIOUS_BATCHES,this.Dn),this.on(r.SET_TRACKER_POLLING,this.On),this.on(r.SET_TRACKER_BATCHING,this.xn),this.on(r.SET_TRACKER_USE_BEACON,this.Mn),this.on(r.SET_TRACKER_SEND_EVENTS,this.Pn),this.on(r.SET_TRACKER_PERSISTABLE_STATE,this.Ln),this.on(r.SET_TRACKER_DIRTY,this.Un),this.on(r.UPDATE_TRACKER_VISITOR_ATTRIBUTES,this.Vn)},getPersistableState:function(){return this.W.isDirty?this.hasEventsToSend()||this.hasPreviousBatchesToSend()?{data:this.W.data,decisions:this.W.decisions,decisionEvents:this.W.decisionEvents,previousBatches:this.W.previousBatches}:{}:null},Ln:function(t){i.isEmpty(this.W.data)||i.isEmpty(t.data)||(this.Tn(),this.W.previousBatches.push(this.getEventBatch())),this.W.data=t.data||{},this.W.decisions=t.decisions||[],this.W.decisionEvents=t.decisionEvents||[],i.isEmpty(this.W.previousBatches)||i.isEmpty(t.previousBatches)?this.W.previousBatches=t.previousBatches||[]:this.W.previousBatches=this.W.previousBatches.concat(t.previousBatches),this.emitChange()},Un:function(t){this.W.isDirty=t,this.emitChange()},Rn:function(t){var n=this.Fn();(i.isEmpty(n.snapshots)||!i.isEmpty(this.W.decisionEvents))&&this.Bn(),this.zn().events.push(t.event),this.W.decisions=t.decisions,this.Un(!0)},Cn:function(t){this.W.decisionEvents.push(t.decisionEvent),this.W.decisions=t.decisions,this.Un(!0)},kn:function(t){i.isEmpty(this.W.data)?this.W.data=t.data:this.Tn(),this.W.data.visitors.push(t.visitor),this.W.decisions=t.decisions,this.W.decisionEvents=[],this.Un(!0)},Sn:function(t){this.W.previousBatches.push(t),this.Un(!0)},An:function(){this.W={polling:!1,shouldBatch:!0,data:{},decisions:[],decisionEvents:[],canSend:!1,isDirty:!1,previousBatches:[]},this.emitChange()},Nn:function(){var t=this.Fn();this.W.data.visitors=[t],t.snapshots=[],this.Un(!0)},Dn:function(){this.W.previousBatches=[],this.Un(!0)},On:function(t){this.W.polling=t,this.emitChange()},xn:function(t){this.W.shouldBatch=t,this.emitChange()},Mn:function(t){this.W.shouldUseBeacon=t,this.emitChange()},Pn:function(t){this.W.canSend=t,this.emitChange()},getEventBatch:function(){return i.cloneDeep(this.W.data)},getPreviousBatches:function(){return i.cloneDeep(this.W.previousBatches)},Gn:function(){return this.W.decisionEvents.slice()},jn:function(){this.W.decisionEvents=[]},qn:function(){return this.W.decisions.slice()},isPolling:function(){return this.W.polling},shouldBatch:function(){return this.W.shouldBatch},shouldUseBeacon:function(){return this.W.shouldUseBeacon},zn:function(){return i.last(this.Fn().snapshots)},Fn:function(){return i.last(this.W.data.visitors)},Bn:function(){var t=this.Gn();this.Fn().snapshots.push({decisions:this.qn(),events:t}),this.jn(),this.Un(!0)},Tn:function(){this.W.decisionEvents.length>0&&this.Bn()},hasEventsToSend:function(){if(!i.isEmpty(this.W.decisionEvents))return!0;if(!i.isEmpty(this.W.data)&&i.some(this.W.data.visitors||[],(function(t){return t.snapshots.length>0})))return!0;return!1},hasPreviousBatchesToSend:function(){return!i.isEmpty(this.W.previousBatches)},canSend:function(){return this.W.canSend},Vn:function(t){var n=this.Fn();n&&(n.attributes=t.attributes)}}},5656:function(t,n,e){var i=e(1167),r=e(4184);t.exports={initialize:function(){this.W={},this.on(r.SET_UA_DATA,this.vt)},vt:function(t){i.isEmpty(this.W)&&(this.W=t.data)},get:function(){return i.cloneDeep(this.W)}}},3642:function(t,n,e){var i=e(1167),r=e(4184),o=e(1004),a={globalTags:{},viewStates:{},shouldBatch:!1};t.exports={initialize:function(){this.W=i.cloneDeep(a),this.on(r.REGISTER_VIEWS,this.Hn),this.on(r.SET_VIEW_ACTIVE_STATE,this.Yn),this.on(r.UPDATE_PARSED_VIEW_METADATA,this.$n),this.on(r.UPDATE_USER_SUPPLIED_METADATA,this.Kn),this.on(r.TRACK_VIEW_ACTIVATED_EVENT,this.Wn),this.on(r.SET_GLOBAL_TAGS,this.Xn),this.on(r.RESET_VIEW_STATES,this.Jn),this.on(r.SET_VIEW_BATCHING,this.xn)},getAll:function(){var t={};for(var n in this.W.viewStates)t[n]=this.getViewState(n);return t},getActiveViewIds:function(){return i.reduce(this.W.viewStates,i.bind((function(t,n,e){return this.isViewActive(e)&&t.push(e),t}),this),[])},shouldBatch:function(){return this.W.shouldBatch},getViewState:function(t){var n=i.cloneDeep(this.W.viewStates[t]),e=this.W.globalTags;return n.metadata=i.extend({},n.parsedMetadata,e,n.userSuppliedMetadata),n},getActiveViewTags:function(){var t=this.getActiveViewStates(),n=i.map(t,(function(t){return t.metadata})),e=[{}].concat(n);return i.extend.apply(i,e)},getActivationEventId:function(t){return this.W.viewStates[t]?this.W.viewStates[t].activationEventId:null},getActiveViewStates:function(){return i.reduce(this.W.viewStates,i.bind((function(t,n,e){return this.isViewActive(e)&&t.push(this.getViewState(e)),t}),this),[])},isViewActive:function(t){var n=this.W.viewStates[t];return n||o.warn("No Page registered with id",t),!!n.isActive},getGlobalTags:function(){return i.cloneDeep(this.W.globalTags)},Jn:function(){this.W.viewStates={},this.emitChange()},Hn:function(t){var n=t.forceClean||!1;i.each(t.views,i.bind((function(t){var e=t.id;this.W.viewStates[e]={id:e,isActive:i.isBoolean(t.isActive)&&!n?t.isActive:null,activatedTimestamp:null,activationEventId:null,parsedMetadata:{},userSuppliedMetadata:{}}}),this)),this.emitChange()},Yn:function(t){var n=t.view.id;if(!this.W.viewStates[n])throw new Error("No view exists with id "+n);this.W.viewStates[n].isActive=t.isActive,t.isActive?this.W.viewStates[n].activatedTimestamp=t.timestamp:(this.W.viewStates[n].parsedMetadata={},this.W.viewStates[n].userSuppliedMetadata={}),this.emitChange()},$n:function(t){var n=t.pageId;if(!this.W.viewStates[n])throw new Error("No view exists with id "+n);i.assign(this.W.viewStates[n].parsedMetadata,t.metadata),this.emitChange()},Kn:function(t){var n=t.pageId;if(!this.W.viewStates[n])throw new Error("No view exists with id "+n);i.assign(this.W.viewStates[n].userSuppliedMetadata,t.metadata),this.emitChange()},Wn:function(t){var n=t.pageId;this.W.viewStates[n]&&(this.W.viewStates[n].activationEventId=t.eventData.eventId,this.emitChange())},Xn:function(t){i.extend(this.W.globalTags,t),this.emitChange()},xn:function(t){this.W.shouldBatch=t,this.emitChange()}}},9757:function(t,n,e){var i=e(1167),r=e(4184),o=e(6171);t.exports={initialize:function(){this.W={views:{},apiNamesToViews:{}},this.on(r.DATA_LOADED,this.vt)},getAll:function(){return o.safeReference(i.values(this.W.views))},getPagesMap:function(){return o.safeReference(this.W.views)},get:function(t){return o.safeReference(this.W.views[t])},getByApiName:function(t){return o.safeReference(this.W.apiNamesToViews[t])},apiNameToId:function(t){var n=this.W.apiNamesToViews[t];if(n)return n.id},idToApiName:function(t){var n=this.W.views[t];if(n)return n.apiName},getNumberOfPages:function(){return i.keys(this.W.views).length},getAllViewsForActivationType:function(t){return i.filter(this.W.views,{activationType:t})},vt:function(t){i.isEmpty(t.data.views)||(i.each(t.data.views,i.bind((function(t){o.deepFreeze(t),this.W.views[t.id]=t,this.W.apiNamesToViews[t.apiName]=t}),this)),this.emitChange())}}},4329:function(t,n,e){var i=e(1167),r=e(4184),o=e(331);t.exports={initialize:function(){this.W={profile:{},metadata:{},visitorId:null},this.on(r.SET_VISITOR_ID_VIA_API,this.Qn),this.on(r.SET_VISITOR_ATTRIBUTES,this.Zn),this.on(r.LOAD_EXISTING_VISITOR_PROFILE,this.te)},getVisitorProfile:function(){return this.W.profile},getVisitorProfileMetadata:function(){return this.W.metadata},getAttribute:function(t){var n=this.W.profile;return i.cloneDeep(o.getFieldValue(n,t))},getAttributeMetadata:function(t){return i.cloneDeep(this.W.metadata[t])},getVisitorIdFromAPI:function(){return this.W.visitorId},te:function(t){this.W.profile=t.profile,this.W.metadata=t.metadata,this.emitChange()},Zn:function(t){i.each(t.attributes,i.bind((function(t){var n=t.key;o.setFieldValue(this.W.profile,n,t.value),t.metadata&&i.forOwn(t.metadata,i.bind((function(t,e){o.setFieldValue(this.W.metadata,n.concat(e),t)}),this))}),this)),this.emitChange()},Qn:function(t){this.W.visitorId=t,this.emitChange()}}},4786:function(t,n,e){var i=e(1167),r=e(4184);t.exports={initialize:function(){this.W={},this.on(r.DATA_LOADED,this.ne)},getCustomBehavioralAttributes:function(){return i.filter(this.W,(function(t){return!!t.rule_json}))},getVisitorAttribute:function(t){var n=i.values(this.W);if(t.datasourceId&&(n=i.filter(n,{dcp_datasource_id:String(t.datasourceId)})),t.attributeName&&t.attributeId)throw new Error("Must not specify both attribute name and attribute ID");if(t.attributeId){var e=this.W[t.attributeId];if(!e)throw new Error("Unrecognized attribute ID: "+t.attributeId);return e}if(t.attributeName){var r=i.filter(n,{name:t.attributeName});if(!r.length)throw new Error("Unrecognized attribute name: "+t.attributeName);if(r.length>1)throw new Error("Too many attributes with name: "+t.attributeName);return r[0]}throw new Error("Must specify attribute name or attribute ID")},ne:function(t){i.isEmpty(t.data.visitorAttributes)||(i.each(t.data.visitorAttributes,i.bind((function(t){this.W[t.id]=t}),this)),this.emitChange())}}},5e3:function(t,n,e){Object.defineProperty(n,"ee",{value:!0});var i=e(1167),r=e(4184),o=e(7136);t.exports={initialize:function(){this.W={variationIdMap:{},preferredLayerMap:{},contextualMabMap:{},odpSegments:{}},this.on(r.UPDATE_VARIATION_ID_MAP,this.re),this.on(r.MERGE_VARIATION_ID_MAP,this.oe),this.on(r.UPDATE_PREFERRED_LAYER_MAP,this.ae),this.on(r.MERGE_PREFERRED_LAYER_MAP,this.ue),this.on(r.UPDATE_CONTEXTUAL_MAB_MAP,this.ce),this.on(r.MERGE_CONTEXTUAL_MAB_MAP,this.se),this.on(r.SET_ODP_SEGMENTS,this.fe)},fe:function(t){this.W.odpSegments=t,this.emitChange()},getOdpSegments:function(){return this.W.odpSegments},getContextualMabMap:function(){return i.cloneDeep(this.W.contextualMabMap)},getContextualMabMapString:function(){return o.stringify(this.W.contextualMabMap)},ce:function(t){var n=this.W.contextualMabMap[t.layerId]||{};i.isEqual(n[t.experimentId],t.variationData)||(n[t.experimentId]=t.variationData,this.W.contextualMabMap[t.layerId]=n,this.emitChange())},se:function(t){var n=this.W.contextualMabMap;i.forEach(t.contextualMabMap,(function(t,e){n[e]||(n[e]={}),i.forEach(t,(function(t,i){n[e][i]||(n[e][i]=t)}))})),this.W.contextualMabMap=n,this.emitChange()},getVariationIdMap:function(){return i.cloneDeep(this.W.variationIdMap)},getVariationIdMapString:function(){return o.stringify(this.W.variationIdMap)},re:function(t){var n=this.W.variationIdMap[t.layerId]||{};n[t.experimentId]!==t.variationId&&(n[t.experimentId]=t.variationId,this.W.variationIdMap[t.layerId]=n,this.emitChange())},oe:function(t){var n=this.getVariationIdMap(),e=t.variationIdMap;i.each(n||{},(function(t,n){e[n]?i.assign(e[n],t):e[n]=t})),this.W.variationIdMap=e,this.emitChange()},getPreferredLayerMap:function(){return i.cloneDeep(this.W.preferredLayerMap)},getPreferredLayerMapString:function(){return o.stringify(this.W.preferredLayerMap)},getPreferredLayerId:function(t){return this.W.preferredLayerMap[t]},ae:function(t){this.W.preferredLayerMap[t.groupId]!==t.layerId&&(this.W.preferredLayerMap[t.groupId]=t.layerId,this.emitChange())},ue:function(t){var n=this.getPreferredLayerMap(),e=t.preferredLayerMap;i.assign(e,n),this.W.preferredLayerMap=e,this.emitChange()}}},5269:function(t,n,e){e(1167);var i=e(4184);e(9959).J;t.exports={initialize:function(){this.W={events:[],foreignEvents:{},foreignEventQueues:{}},this.on(i.SET_VISITOR_EVENTS,this.vt),this.on(i.SET_FOREIGN_VISITOR_EVENTS,this.le),this.on(i.SET_FOREIGN_VISITOR_EVENT_QUEUE,this.de)},getEvents:function(){return this.W.events},getForeignEvents:function(){return this.W.foreignEvents},getForeignEventQueues:function(){return this.W.foreignEventQueues},vt:function(t){this.W.events=t,this.emitChange()},le:function(t){this.W.foreignEvents[t.key]=t.value},de:function(t){this.W.foreignEventQueues[t.key]=t.value}}},6577:function(t,n,e){var i=e(4184);t.exports={initialize:function(){this.W={baseMap:{},eventQueue:[],lastEvent:null,initialized:!1,cleared:!1},this.on(i.UPDATE_BEHAVIOR_STORE,this.ve)},getBaseMap:function(){return this.W.baseMap},getEventQueue:function(){return this.W.eventQueue},getLastEvent:function(){return this.W.lastEvent},getCleared:function(){return this.W.cleared},getInitialized:function(){return this.W.initialized},ve:function(t){this.W[t.key]=t.value}}},8817:function(t,n,e){var i=e(1167),r=e(4184);t.exports={initialize:function(){this.W={randomId:null,visitorIdLocator:null},this.on(r.SET_VISITOR_ID,this.vt),this.on(r.DATA_LOADED,this.he)},getBucketingId:function(){return this.getRandomId()},getRandomId:function(){return this.W.randomId},getVisitorIdLocator:function(){return this.W.visitorIdLocator},vt:function(t){i.extend(this.W,t),this.emitChange()},he:function(t){i.isEmpty(t.data.visitorIdLocator)||(this.W.visitorIdLocator=t.data.visitorIdLocator,this.emitChange())}}},1699:function(t,n,e){var i=e(1167),r=e(1004),o=e(4184);t.exports={initialize:function(){this.W={frames:[],defaultFrame:null,messages:[],subscribers:[],canonicalOrigins:null,disabled:!1},this.on(o.XDOMAIN_SET_DEFAULT_FRAME,this.pe),this.on(o.XDOMAIN_ADD_FRAME,this.ge),this.on(o.XDOMAIN_SET_MESSAGE,this.me),this.on(o.XDOMAIN_ADD_SUBSCRIBER,this._e),this.on(o.XDOMAIN_SET_CANONICAL_ORIGINS,this.ye),this.on(o.XDOMAIN_SET_DISABLED,this.we)},getMessages:function(){return i.cloneDeep(this.W.messages)},getOffset:function(){return 0===this.W.messages.length?0:this.W.messages[0].data.id},getNextMessageId:function(){return this.W.messages.length+this.getOffset()},getMessageById:function(t){return this.W.messages[t-this.getOffset()]},getSubscribers:function(){return this.W.subscribers},getFrames:function(){return this.W.frames},getNextFrameId:function(){return this.W.frames.length},getDefaultFrame:function(){return this.W.defaultFrame},getCanonicalOrigins:function(){return i.cloneDeep(this.W.canonicalOrigins)},isDisabled:function(){return this.W.disabled},pe:function(t){this.W.defaultFrame=t},ge:function(t){this.W.frames.push(t)},me:function(t){for(this.W.messages[t.messageId-this.getOffset()]=t.message;this.W.messages.length>1e3;){var n=this.W.messages.shift();r.debug("XDomainStorage: Cleared old message: "+n.data.id)}},_e:function(t){this.W.subscribers.push(t.subscriber)},ye:function(t){this.W.canonicalOrigins=t.canonicalOrigins},we:function(t){this.W.disabled=t.disabled}}},6478:function(t,n){n.locatorType={CSS_SELECTOR:"css_selector",JAVASCRIPT:"javascript",URL_REGEX:"url_regex"},n.valueType={STRING:"string",NUMBER:"number",CURRENCY:"currency"},n.nodeNames={INPUT:"INPUT",SELECT:"SELECT"}},6542:function(t,n,e){var i=e(4594).v;n.Error=i("TagError")},5828:function(t,n,e){var i=e(2432).PluginTypes,r=e(1353).get("stores/plugins");n.getTagValue=function(t){var e=r.getPlugin(i.viewTagLocators,t.locatorType);if(!e)throw new n.Error("No locator registered for tag locatorType: "+t.locatorType);return e(t)},n.enums=e(6478),n.Error=e(6542).Error},8104:function(t,n,e){var i=e(4184),r=e(6665),o=e(3961).Promise,a=e(1353).get("stores/async_request");n.makeAsyncRequest=function(t,n){var e,u,c=a.getPromise(t);if(c)return c;var s=new o((function(t,n){e=t,u=n}));return r.dispatch(i.REGISTER_ASYNC_DEFERRED,{source:t,promise:s,resolver:e,rejecter:u}),n&&n(),s},n.resolveRequest=function(t,n){r.dispatch(i.RESOLVE_DEFERRED,{source:t,resolveWith:n})},n.rejectRequest=function(t,n){r.dispatch(i.REJECT_DEFERRED,{source:t,rejectWith:n})}},5766:function(t,n,e){var i=e(8170),r=e(6670);n.getLanguage=function(){return r.getNavigatorLanguage()},n.getQueryParams=i.getQueryParams,n.getQueryParamValue=i.getQueryParamValue,n.getUrl=function(){return r.getHref()}},9430:function(t,n,e){var i=e(1167),r=e(4594).v,o=e(5242),a=e(4171),u=e(6670),c=e(4184),s=e(1353),f=e(6665),l=s.get("stores/cookie_options"),d=n.SetError=r("CookieSetError"),v=n.MismatchError=r("CookieMismatchError"),h=["co","com","net","org","edu","gov","mil","int","ac","com","net","org"];n.getAll=function(t){var e,r,o,u,c;i.isUndefined(t)&&(t=!0),e=a.getCookieString().split(/\s*;\s*/);var s={};for(o=0;o<e.length;o++)if((u=(r=e[o]).indexOf("="))>0&&void 0===s[c=n.safeDecodeURIComponent(r.substring(0,u))]){var f=r.substring(u+1);t&&(f=n.safeDecodeURIComponent(f)),s[c]=f}return s},n.safeDecodeURIComponent=function(t){try{return decodeURIComponent(t)}catch(n){return t}},n.get=function(t,e){return n.getAll(e)[t]},n.set=function(t,e,r,s){r=i.extend({encodeValue:!0},r),!1!==s&&(s=!0);var m=[];if(i.isUndefined(r.domain)){var _=l.getCurrentDomain();_||(_=function(t,e){!1!==e&&(e=!0);for(var r,o,a=t.hostname.split("."),u=[],s=null,l=a.length-1;l>=0;l--)if(u.unshift(a[l]),r=u.join("."),!(a.length>1&&(1===u.length||2===u.length&&i.includes(h,u[0]))||i.includes(p,r))){o={domain:e?"."+r:r};try{n.set(g,Math.random().toString(),o),n.remove(g,o),s=o.domain;break}catch(d){}}return f.dispatch(c.SET_COOKIE_DOMAIN,s),s}(u.getLocation(),!0)),r.domain=_}if(r.domain&&m.push("domain="+r.domain),i.isUndefined(r.path)&&(r.path="/"),r.path&&m.push("path="+r.path),i.isUndefined(r.expires)){var y=i.isUndefined(r.maxAge)?l.getDefaultAgeInSeconds():r.maxAge;r.expires=new Date(o.now()+1e3*y)}if(i.isUndefined(r.expires)||m.push("expires="+r.expires.toUTCString()),m.push("SameSite=None"),m.push("secure"),a.setCookie(t+"="+(r.encodeValue?encodeURIComponent(e):e)+";"+m.join(";")),s){var w=r.encodeValue,b=n.get(t,w);if(b!==e){if(!b)throw new d('Failed to set cookie "'+t+'"');throw new v('Expected "'+e+'" for "'+t+'", got "'+b+'"')}}},n.remove=function(t,e){for(var r=u.getLocation().hostname.split("."),o=1===r.length?0:1;r.length>o&&(2!==r.length||!i.includes(h,r[0]));)n.set(t,null,i.extend({},e,{domain:"."+r.join("."),expires:new Date(0)}),!1),r.shift()};var p=["optimizely.test"],g="optimizelyDomainTestCookie"},4594:function(t,n,e){var i=e(1504),r=i("InternalError");n.C=r,n.v=function(t){return i(t,r)}},9811:function(t,n,e){var i=e(1167),r=e(3961).Promise;t.exports=function(){var t,n,e=new r((function(e,i){t=e,n=i}));return e.resolve=function(){return t.apply(null,i.toArray(arguments)),e},e.reject=function(){return n.apply(null,i.toArray(arguments)),e},e}},6171:function(t,n,e){var i=e(1167);n.deepFreeze=function(t){},n.safeReference=function(t){return i.cloneDeep(t)}},331:function(t,n,e){var i=e(1167);n.getFieldValue=function(t,n){i.isArray(n)||(n=[n]);for(var e=t,r=0;r<n.length;r++){var o=n[r];if(!i.isObject(e)||!e.hasOwnProperty(o))return;e=e[o]}return e},n.setFieldValue=function(t,n,e){if(!i.isArray(n)||i.isEmpty(n))throw new Error("Attempted to set an invalid key path: "+n);for(var r=t,o=0;o<n.length-1;o++){var a=n[o];i.isObject(r[a])||(r[a]={}),r=r[a]}r[n[n.length-1]]=e}},1004:function(t,n,e){var i=e(1167),r=e(4184),o=e(5242),a=e(2432),u=e(6665),c=e(7136);function s(){this.logLevel=null,this.logMatch=null,this.logs=[],this.timebase=o.now()}s.prototype.be=function(){return!i.isNull(this.logLevel)},s.prototype.setLogLevel=function(t){var n=this.Ee(t);null===n?console.error("Unknown log level: "+t):this.logLevel!==n&&(this.log("Setting log level to "+n),this.logLevel=n,this.flush())},s.prototype.setLogMatcher=function(t){i.isString(t)?this.logMatcher=t:this.logMatcher="",this.logGroup=0},s.prototype.shouldLog=function(t){return this.be()&&this.logLevel>=t},s.prototype.matchesLogMessage=function(t,n){var e=this.logMatcher;if(!this.logMatcher)return!0;if(this.logGroup)return"GROUPSTART"===t?this.logGroup++:"GROUPEND"===t&&this.logGroup--,!0;var r=i.some(n,(function(t){if(!i.isString(t))try{t=c.stringify(t)}catch(n){}return i.isString(t)&&i.includes(t,e)}));return r&&"GROUPSTART"===t&&this.logGroup++,r},s.prototype.storeLog=function(t,n){var e={logLevel:t,logMessage:n};u.dispatch(r.LOG,e)},s.prototype.flush=function(){var t=e(1353).get("stores/log");this.logGroup=0;var n=t.getLogs();i.each(n,i.bind((function(t){this.Ie(t.logLevel,t.logMessage,!0)}),this))},s.prototype.Ie=function(t,n,e){var r,o=t;if(console)switch(t){case"GROUPSTART":r=console.groupCollapsed,o=a.LogLevel.DEBUG;break;case"GROUPEND":r=console.groupEnd,o=a.LogLevel.DEBUG;break;case a.LogLevel.ERROR:r=console.error;break;case a.LogLevel.WARN:r=console.warn;break;case a.LogLevel.DEBUG:r=console.debug;break;default:r=console.log}try{e||this.be()&&!this.shouldLog(o)||(i.isArray(n)&&i.isString(n[0])&&(n=this.Ae(n)),this.storeLog(t,n)),r&&this.shouldLog(o)&&this.matchesLogMessage(t,n)&&r.apply(console,n)}catch(u){console&&(console.error?console.error(u):console.log(u))}},s.prototype.debug=function(){this.Ie(a.LogLevel.DEBUG,[].slice.call(arguments))},s.prototype.log=function(){this.Ie(a.LogLevel.INFO,[].slice.call(arguments))},s.prototype.logAlways=function(){var t=this.Ae([].slice.call(arguments));console&&console.log&&console.log.apply&&console.log.apply(console,t),this.storeLog(a.LogLevel.INFO,t)},s.prototype.warn=function(){this.Ie(a.LogLevel.WARN,[].slice.call(arguments))},s.prototype.error=function(t){var n=[].slice.call(arguments);1===n.length&&t.stack?(this.Ie(a.LogLevel.ERROR,[this.Te(),t]),this.Ie(a.LogLevel.INFO,[t.stack])):this.Ie(a.LogLevel.ERROR,n)},s.prototype.groupCollapsed=function(){this.Ie("GROUPSTART",[].slice.call(arguments))},s.prototype.groupEnd=function(){this.Ie("GROUPEND",[].slice.call(arguments))},s.prototype.Ae=function(t){var n=this.Te().toString();return n.length<6&&(n=("     "+n).slice(-6)),[n+"| Optly / "+t[0]].concat(t.slice(1))},s.prototype.Te=function(){return this.timebase?o.now()-this.timebase:0},s.prototype.Ee=function(t){return t&&("TRUE"===(t=t.toUpperCase())&&(t="INFO"),"FALSE"===t&&(t="OFF"),"ALL"===t&&(t="DEBUG"),!i.isUndefined(a.LogLevel[t]))?a.LogLevel[t]:null},t.exports=new s},4603:function(t,n,e){var i;i=e(5342),t.exports=i},5190:function(t,n){n.isSingleExperimentPolicy=function(t){return"single_experiment"===t||"multivariate"===t}},8953:function(t,n,e){var i=e(1167),r=e(3961).Promise,o=e(6670);n.pollFor=function(t,n,e){var a,u;return i.isFunction(e)?u=e:(a=e||100,u=function(){return--a<-1}),n=n||50,new r((function(e,i){!function r(){var a;if(!u()){try{var c=t();if(c)return e(c)}catch(s){a=s}return o.setTimeout(r,n)}i(a||new Error("Poll timed out"))}()}))}},5211:function(t,n,e){var i=e(1167),r=e(3961).Promise;n.firstToResolve=function(t){return new r((function(n){i.each(t,(function(t){r.resolve(t).then(n,(function(){}))}))}))}},8170:function(t,n,e){var i=e(1167),r=e(6670);n.getQueryParams=function(){var t=r.getLocationSearch()||"";if(0===t.indexOf("?")&&(t=t.substring(1)),0===t.length)return[];for(var n=t.split("&"),e=[],i=0;i<n.length;i++){var o="",a="",u=n[i].split("=");u.length>0&&(o=u[0]),u.length>1&&(a=u[1]),e.push([o,a])}return e},n.getQueryParamValue=function(t){for(var e=n.getQueryParams(),i=0;i<e.length;i++)if(e[i][0]===t)return e[i][1]},n.queryStringFromMap=function(t){return i.map(t,(function(t,n){return n+"="+t})).join("&")}},768:function(t,n,e){var i=e(1167),r=e(1004),o=e(6670);function a(t){this.windowLength=t,this.count=0,this.listeners={},this.isIncrementingTick=!1}a.prototype.countCurrentTick=function(){this.isIncrementingTick||(this.isIncrementingTick=!0,this.increment(),o.setTimeout(i.bind((function(){this.isIncrementingTick=!1}),this),0))},a.prototype.increment=function(){this.count+=1,i.forEach(this.listeners[String(this.count)],(function(t){t()})),o.setTimeout(i.bind(this.decrement,this),this.windowLength)},a.prototype.decrement=function(){this.count-=1,this.count<0&&(r.warn("Decremented down to negative count: ",this.count),this.count=0)},a.prototype.addListener=function(t,n){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(n)},t.exports=a},4744:function(t,n,e){var i=e(1167),r=e(1353).get("stores/observed_redirect");n.getReferrer=function(){var t=r.get();return t?t.referrer:null},n.getExperimentAndVariation=function(){var t=r.get();return t&&i.isString(t.variationId)?i.pick(t,["experimentId","variationId"]):null}},8566:function(t,n,e){var i=e(1167),r=e(4184),o=e(5242),a=e(1353),u=e(4171),c=e(2432),s=e(6665),f=e(1004),l=a.get("stores/sandbox"),d=e(6670);n.shouldSandbox=function(){return!1},n.get=function(t){if(!t)throw new Error("Name is required");if(n.shouldSandbox()){l.isInitialized()||v();var e=l.get(t);if(e)return e}return d.getGlobal(t)};var v=function(){try{var t="optimizely_"+o.now(),n=u.createElement("iframe");n.name=t,n.style.display="none",u.appendToHead(n);var e=n.contentWindow,a=n.contentDocument;a.write("<scr"),a.write("ipt></scr"),a.write("ipt>"),a.close();var l=i.mapValues(c.SandboxedFunctions,(function(t){return e[t]}));s.dispatch(r.SANDBOXED_FUNCTIONS_ADDED,{sandboxedFunctions:l})}catch(d){f.warn("Unable to create a sandbox: ",d)}}},371:function(t,n,e){var i=e(4171),r=e(1004),o=e(9908);n.addScriptAsync=function(t,n,e){var o,a=i.querySelector("head"),u=e?i.querySelector(e):null,c=i.createElement("script");(c.type="text/javascript",c.async=!0,c.src=t,n&&(c.onload=n),u)?(r.debug("Target element found for selector: "+e+", adding script before it."),null==(o=u.parentNode)||o.insertBefore(c,u)):(r.debug("Target element not found for selector: "+e+", adding script to HEAD instead."),a.insertBefore(c,a.firstChild));r.debug("Asynchronously requesting "+t)},n.addScriptSync=function(t,e){try{var a="optimizely_synchronous_script_"+Math.floor(1e5*Math.random());if(-1!==t.indexOf('"'))return void r.error("Blocked attempt to load unsafe script: "+t);i.write("<scr"),i.write('ipt id="'+a+'" src="'+t+'"></scr'),i.write("ipt>");var u=i.querySelector("#"+a);if(!u)throw new Error("DocumentEnv.write failed to append script");u.onload=e,u.onerror=function(i){r.warn("Failed to load script ("+t+") synchronously:",i),n.addScriptAsync(t,e)}}catch(c){r.debug("DocumentEnv.write failed for "+t+": "+c.message);return o.request({url:t,async:!1,contentType:"text/plain",success:function(t){new Function(t.responseText)(),e&&e()}})["catch"]((function(i){r.error("Failed to load "+t+" via synchronous XHR: "+i.message),n.addScriptAsync(t,e)}))}}},2374:function(t,n,e){var i=e(3961).Promise,r=e(6670);n.makeTimeoutPromise=function(t){return new i((function(n,e){r.setTimeout((function(){e(new Error("Timed out after "+t+" ms"))}),t)}))}},9338:function(t,n,e){var i=e(1167),r=e(8429),o=e(6670),a=e(4184),u=e(1353),c=e(6665),s=u.get("stores/ua_data");n.get=function(){var t=s.get();return i.isEmpty(t)&&(t=r.parseUA(o.getUserAgent()),c.dispatch(a.SET_UA_DATA,{data:t})),t}},5623:function(t,n){n.guessDomain=function(t,n){if(!t)return"";try{return n?t.match(/:\/\/(.[^/]+)/)[1]:t.match(/:\/\/(?:www[0-9]?\.)?(.[^/:]+)/)[1]}catch(e){return""}}},4188:function(t,n,e){var i=e(1167),r=e(3961).Promise,o=e(4184),a=e(1353),u=e(6665),c=e(1497),s=e(4594).v,f=e(5242),l=e(4171),d=e(7136),v=e(8953),h=e(4029),p=e(6670),g=e(2432).VisitorStorageKeys,m=e(1004),_=a.get("stores/xdomain"),y=n.Error=s("XDomainStorageError");function w(t){var n;if(i.find(_.getFrames(),{origin:t.origin})){try{n=d.parse(t.data)}catch(a){return void m.debug("XDomain","Ignoring malformed message event:",t)}if("ERROR"===n.type)u.dispatch(o.XDOMAIN_SET_DISABLED,{disabled:!0}),c.emitInternalError(new y("Xdomain Error: "+n.response));else if("SYNC"===n.type)i.each(_.getSubscribers(),(function(t){t(n.response.key,n.response.value)}));else{var e=_.getMessageById(n.id);if(!e){if(m.warn("XDomain","No stored message found for ID",n.id),i.isNumber(n.id)){var r=_.getNextMessageId();n.id>=r?c.emitInternalError(new y("Message ID is greater than expected maximum ID ("+n.id+">"+r+")")):n.id<0?c.emitInternalError(new y("Message ID is < 0: "+n.id)):c.emitInternalError(new y("No stored message found for message ID: "+n.id))}else c.emitInternalError(new y("Message ID is not a number: "+n.id));return}if(!e.resolver)return void m.warn("XDomain","Message already resolved, ignoring:",n.id);e.resolver(n.response),u.dispatch(o.XDOMAIN_SET_MESSAGE,{messageId:n.id,message:{data:{id:n.id,type:e.data.type,key:e.data.key},startTime:e.startTime,endTime:f.now()}})}}else m.debug("XDomain","No frame found for origin: "+t.origin)}function b(t){return!(["GET","PUT"].includes(t.type)&&!t.key.includes(g.SESSION_STATE))}function E(t,n){return n||(n=_.getDefaultFrame()),new r((function(e){var r={data:i.extend({},t,{id:_.getNextMessageId(),use_cookie:b(t)}),resolver:e};n?_.isDisabled()||I(r,n):u.dispatch(o.XDOMAIN_SET_MESSAGE,{messageId:r.data.id,message:r})}))}function I(t,n){var e=t.data;u.dispatch(o.XDOMAIN_SET_MESSAGE,{messageId:t.data.id,message:i.extend({},t,{startTime:f.now()})}),n.target.postMessage(d.stringify(e),n.origin)}n.setItem=function(t,n,e){return E({type:"PUT",key:t,value:n},e)},n.getItem=function(t,n){return E({type:"GET",key:t},n)},n.fetchAll=function(t){return E({type:"GETALL"},t)},n.deleteData=function(t,n){return E({type:"DELETE",visitorId:t},n)},n.subscribe=function(t){u.dispatch(o.XDOMAIN_ADD_SUBSCRIBER,{subscriber:t})},n.loadIframe=function(t,n){return new r((function(e){var i=l.createElement("iframe");i.src=t+n,i.hidden=!0,i.setAttribute("tabindex","-1"),i.setAttribute("title","Optimizely Internal Frame"),i.style.display="none",i.height=0,i.width=0,i.onload=function(){var r={id:_.getNextFrameId(),target:i.contentWindow,origin:t,path:n};u.dispatch(o.XDOMAIN_ADD_FRAME,r),e(r)},l.appendTo(l.querySelector("body"),i)}))},n.getXDomainUserId=function(t,n){var e,r={},o=i.keys(t);return i.each(n,(function(t){r[t]=[],i.each(o,(function(n){var o=h.getUserIdFromKey(n,t);!e&&o&&(e=o),o&&!i.includes(r[t],o)&&r[t].push(o)}))})),m.debug("XDomain: Found userIds:",r),e},n.load=function(t,e){p.addEventListener("message",w);return v.pollFor((function(){return!!l.querySelector("body")})).then((function(){return n.loadIframe(t,e)})).then((function(t){u.dispatch(o.XDOMAIN_SET_DEFAULT_FRAME,t),_.isDisabled()||i.each(_.getMessages(),(function(n){n.startTime||I(n,t)}))}))}},9908:function(t,n,e){var i=e(1167),r=e(4184),o=e(5242),a=e(6665),u=e(7136),c=e(1004),s=e(3961).Promise,f=e(8566);n.isCORSSupported=function(){return"withCredentials"in new(f.get("XMLHttpRequest"))},n.request=function(t){return t=i.extend({method:"GET",async:!0,contentType:"text/plain;charset=UTF-8"},t),new s((function(e,r){if(!n.isCORSSupported())return r("CORS is not supported");var o=new(f.get("XMLHttpRequest"));o.onload=function(){t.success&&t.success(o),e(o)},o.onerror=function(){t.error&&t.error(o),r(o)},i.isObject(t.data)&&(t.data=u.stringify(t.data)),o.open(t.method,t.url,t.async),t.withCredentials&&(o.withCredentials=t.withCredentials),o.setRequestHeader("Content-Type",t.contentType),i.isObject(t.headers)&&i.forEach(t.headers,(function(t,n){o.setRequestHeader(n,t)})),o.send(t.data)}))},n.retryableRequest=function(t,e,u,f){if(!e)return s.reject(new Error("No id specified for request."));if(!n.isCORSSupported())return s.reject(new Error("CORS is not supported."));i.isUndefined(f)&&(f=3),i.isUndefined(u)&&(u=0);var l={id:e,timeStamp:o.now(),data:t,retryCount:u};return a.dispatch(r.SET_PENDING_EVENT,l),c.debug("Sending event ",e),n.request(t).then((function(t){return a.dispatch(r.REMOVE_PENDING_EVENT,{id:e}),t}),(function(t){throw l.retryCount>=f?(a.dispatch(r.REMOVE_PENDING_EVENT,{id:e}),c.warn("Event ",l," could not be sent after ",f," attempts.")):(l.retryCount++,a.dispatch(r.SET_PENDING_EVENT,l),c.debug("Event ",l," failed to send, with error ",t," It will be retried ",f-u," times.")),t}))},n.sendBeacon=function(t,e){if(!t.url||!t.data)return s.reject(new Error("Must provide required options"));if(navigator&&navigator.sendBeacon)try{var r=i.isObject(t.data)?u.stringify(t.data):t.data;if(navigator.sendBeacon(t.url,r))return s.resolve();throw new Error("Unable to sendBeacon")}catch(o){c.warn("sendBeacon failed: ",o)}return t=i.extend({method:"POST"},t),n.request(t,e)}},5916:function(t,n,e){var i=e(1167),r=e(4184),o=e(4514),a=e(5165),u=e(5242),c=e(1353),s=e(2432),f=e(3864),l=e(6665),d=e(1004),v=e(5828),h=c.get("stores/event_data"),p=c.get("stores/plugins"),g=c.get("stores/rum"),m=c.get("stores/view"),_=c.get("stores/view_data");n.parseViewTags=function(t){var e=n.evaluateViewTags(t);n.setParsedViewTags(t.id,e)},n.updateAllViewTags=function(){var t=m.getActiveViewStates();i.each(t,(function(t){var e=_.get(t.id);n.parseViewTags(e)}))},n.evaluateViewTags=function(t){return t.tags?i.reduce(t.tags,(function(t,n){try{t[n.apiName]=v.getTagValue(n)}catch(r){e=r,(null!=(i=v.Error)&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](e):e instanceof i)?d.warn("Page / Ignoring unparseable tag",n,r):d.error(r)}var e,i;return t}),{}):{}},n.createViewTicket=function(){var t={};return i.each(p.getAllPlugins(s.PluginTypes.viewProviders),(function(n){t[n.provides]=c.evaluate(n.getter)})),t},n.registerViews=function(t,n){l.dispatch(r.REGISTER_VIEWS,{views:t,forceClean:n})},n.activateViaAPI=function(t,e){e&&n.setUserSuppliedViewTags(t.id,e),n.activateMultiple([t],e)},n.getViewsAndActivate=function(t){var e=_.getAllViewsForActivationType(t);n.activateMultiple(e)},n.activateMultiple=function(t,e){var a=[];return i.each(t,(function(t){var u=m.getViewState(t.id),c=n.createViewTicket();if(u.isActive)if(t.deactivationEnabled)try{n.hasValidStaticConditions(t,c)||n.deactivate(t)}catch(p){d.error("Page / Error evaluating whether to deactivate page ",n.description(t),p)}else d.log("Not activating Page, already active ",n.description(t));else{try{if(!n.hasValidStaticConditions(t,c))return i.isBoolean(u.isActive)||n.setViewActiveState(t,!1),void d.log("Page / Failed to match page conditions for "+n.description(t),t.staticConditions)}catch(p){return i.isBoolean(u.isActive)||n.setViewActiveState(t,!1),void d.error("Page / Error evaluating whether to activate page ",n.description(t),p)}if(a.push(t),n.setViewActiveState(t,!0),d.log("Activated Page",n.description(t)),o.emitViewActivated({view:t,metadata:e}),g.getSampleRum()){var f=t.activationType||s.ViewActivationTypes.immediate;l.dispatch(r.RECORD_ACTIVATION_TYPE_USAGE,{activationType:f,entityId:t.id})}var v=h.getByPageId(t.id);n.toggleEventImplementations(v,!0)}})),i.isEmpty(a)||o.emitViewsActivated({views:a}),a},n.deactivate=function(t){if(m.getViewState(t.id).isActive){n.setViewActiveState(t,!1),d.log("Deactivated Page",n.description(t)),o.emitPageDeactivated({page:t});var e=h.getByPageId(t.id);n.toggleEventImplementations(e,!1)}else d.log("Not deactivating Page, already inactive ",n.description(t))},n.setViewActiveState=function(t,n){l.dispatch(r.SET_VIEW_ACTIVE_STATE,{view:t,timestamp:u.now(),isActive:n})},n.setGlobalTags=function(t){l.dispatch(r.SET_GLOBAL_TAGS,t)},n.setParsedViewTags=function(t,n){l.dispatch(r.UPDATE_PARSED_VIEW_METADATA,{pageId:t,metadata:n})},n.setUserSuppliedViewTags=function(t,n){l.dispatch(r.UPDATE_USER_SUPPLIED_METADATA,{pageId:t,metadata:n})},n.hasValidStaticConditions=function(t,n){var e={};if(i.isEmpty(t.staticConditions))return!0;var o=p.getAllPlugins(s.PluginTypes.viewMatchers);d.groupCollapsed("Page / Evaluating staticConditions:",t.staticConditions),d.debug("Matching to current value:",n);var u=a.evaluate(t.staticConditions,(function(t){var i=t.type,r=o[i];if(!r)throw new Error("Page / No matcher found for type="+i);return r&&(e[t.type]||(e[t.type]=!0)),r.match(n,t)}));return d.groupEnd(),g.getSampleRum()&&u&&l.dispatch(r.RECORD_VIEW_FEATURE_USAGE,{featuresUsed:i.keys(e),entityId:t.id}),u},n.description=function(t){return'"'+t.name+'" ('+t.id+")"},n.toggleEventImplementations=function(t,n){i.forEach(t,(function(t){if(t.eventType!==f.CUSTOM){var e=p.getPlugin(s.PluginTypes.eventImplementations,t.eventType);e?n?e.attach(t):e.detach(t):d.warn("No implementation found for event type:",t.eventType,"needed for event:",t)}}))},n.isActivationTypeImmediate=function(t){return t===s.ViewActivationTypes.immediate||!t},n.shouldTriggerImmediately=function(t){return t===s.ViewActivationTypes.DOMChanged||t===s.ViewActivationTypes.URLChanged||t===s.ViewActivationTypes.immediate||!t},n.create=function(t,n){return{id:t,apiName:n,category:"other"}},n.createState=function(t){return{id:t,isActive:!0,metadata:{},parsedMetadata:{},userSuppliedMetadata:{}}}},4029:function(t,n,e){Object.defineProperty(n,"ee",{value:!0});var i,r=e(1167),o=e(6665),a=e(4184),u=e(4047),c=e(6410),s=e(9430),f=e(5242),l=e(1353),d=e(2432),v=e(7136),h=e(331),p=e(9929).DT,g=e(1004),m=e(3961).Promise,_=e(8170),y=e(2432).VisitorStorageKeys,w=e(6670);i=e(4188);var b=l.get("stores/cookie_options"),E=l.get("stores/global"),I=l.get("stores/layer"),A=l.get("stores/plugins"),T=l.get("stores/rum"),S=l.get("stores/session"),k=l.get("stores/visitor_id"),R=l.get("stores/visitor_bucketing"),C=l.get("stores/visitor"),N=l.get("stores/provider_status");function D(t,n){var e=function(t,e){var i;n.attributionType&&(i=f.now()),o.dispatch(a.SET_VISITOR_ATTRIBUTES,{attributes:[{key:t,value:e,metadata:{lastModified:i}}]})};if(n.getter){var i=n.provides;if(r.isArray(i)||(i=[i]),!(n.isSticky&&!r.isUndefined(h.getFieldValue(t,i)))){var u;try{var c=l.evaluate(n.getter);r.isFunction(c)&&(c=c((function(){return h.getFieldValue(t,i)}),(function(t){e(i,t)}))),r.isUndefined(c)||(n.isAsync?(u=c.then((function(t){e(i,t)}),(function(t){g.warn('Failed to evaluate provider for "'+n.provides+'"; error was:',t)})),o.dispatch(a.SET_VISITOR_ATTRIBUTE_PENDING,{key:i,pending:u})):e(i,c))}catch(s){g.warn('Failed to evaluate getter for provider for "'+n.provides+'"; error was: '+s.message)}return u}}}function O(t){var n=P(t),e=p.getItem(n);return r.isString(e)&&(e=V(e)),e}function x(t){var n;if(t.layerId)n=t;else{var e=t;n={layerId:e.i,pageId:e.p,decisionTimestamp:e.t,decisionTicket:{audienceIds:e.a||[]},decision:{layerId:e.i,experimentId:e.x||null,variationId:e.v||null,isLayerHoldback:e.h||!1}}}return n}function M(t,n,e){try{var r=P(t);e||(n=v.stringify(n));try{p.setItem(r,n)}catch(o){throw g.warn("Visitor / Unable to set localStorage key, error was:",o),new Error("Unable to set localStorage")}i.setItem(r,n)}catch(o){g.warn("Unable to persist visitor data:",o.message)}}function P(t){var e=k.getBucketingId();if(!e)throw new Error("Visitor bucketingId not set");var i=n.getNamespace();if(!i)throw new Error("Namespace is not set");return[e,i,t].join("$$")}function L(t,e){if(!k.getBucketingId())throw new Error("Cannot update local store because bucketingId not set");if(U(t)){var i=n.getStorageKeyFromKey(t);if(r.includes(y,i)){var u=P(i);if(!(t.indexOf(u)<=0)&&(e=V(e)))if(i===y.EVENT_QUEUE)o.dispatch(a.SET_FOREIGN_VISITOR_EVENT_QUEUE,{key:t,value:c.deserialize(e)});else if(i===y.EVENTS)o.dispatch(a.SET_FOREIGN_VISITOR_EVENTS,{key:t,value:c.deserialize(e)});else if(i===y.LAYER_STATES)o.dispatch(a.LOAD_PERSISTED_LAYER_STATES,{layerStates:r.map(e,x),merge:!0});else if(i===y.VARIATION_MAP)o.dispatch(a.MERGE_VARIATION_ID_MAP,{variationIdMap:e});else if(i===y.CONTEXTUAL_MAB)o.dispatch(a.MERGE_CONTEXTUAL_MAB_MAP,{contextualMabMap:e});else if(i===y.VISITOR_PROFILE){var s=e;r.each(["custom"],(function(t){var n=A.getPlugin(d.PluginTypes.visitorProfileProviders,t);if(n){if(s.profile&&s.metadata){var e=function(t,n,e){var i=C.getAttribute(n),o=C.getAttributeMetadata(n),a=t.profile[n],u=t.metadata[n];if(r.isEmpty(i))return{data:a,metadata:u};var c={};return r.forOwn(a,(function(t,n){var i,a;o&&o[n]&&(i=o[n].lastModified),u&&u[n]&&(a=u[n].lastModified),(e===d.AttributionTypes.FIRST_TOUCH&&i>=a||e===d.AttributionTypes.LAST_TOUCH&&a>=i||r.isUndefined(i)&&a)&&(c.data=c.data||{},c.data[n]=t,a&&(c.metadata=c.metadata||{},c.metadata[n]=c.metadata[n]||{},c.metadata[n].lastModified=a))})),c}(s,t,n.attributionType);if(!r.isEmpty(e)){var i=[];r.forOwn(e.data,(function(n,r){var o=e.metadata[r],a={key:[t,r],value:n,metadata:o};i.push(a)})),o.dispatch(a.SET_VISITOR_ATTRIBUTES,{attributes:i})}}}else g.debug("Attribute type",t,"not used by any audiences")}))}}}}function U(t){return t.split("$$")[0].indexOf("://")>0}function V(t){try{return v.parse(t)}catch(n){return g.debug("Failed to parse: ",t,n),null}}n.getOrGenerateId=function(){return{randomId:n.getCurrentId()||"oeu"+f.now()+"r"+Math.random()}},n.getCurrentId=function(){var t=k.getVisitorIdLocator();return C.getVisitorIdFromAPI()||(t?function(t){var n,e=t.name;switch(t.type){case d.VisitorIdLocatorType.COOKIE:n=s.get(e);break;case d.VisitorIdLocatorType.JS_VARIABLE:n=w.getGlobalByPath(e);break;case d.VisitorIdLocatorType.LOCALSTORAGE:try{n=w.getGlobal("localStorage").getItem(e)}catch(u){throw new Error("Unable to read localStorage: "+u.toString())}break;case d.VisitorIdLocatorType.QUERY:n=_.getQueryParamValue(e)}try{if(!n)throw g.error("Visitor / Customer provided visitor id cannot be found. Type:",t.type," Name:",e),new Error("Failure to obtain visitor id from "+t.type);if(!r.isString(n)&&!r.isNumber(n))throw g.error("Visitor / Customer provided visitor id is not a string or number. Type:",t.type," Name:",e," Id Type:",(i=n)&&"undefined"!=typeof Symbol&&i.constructor===Symbol?"symbol":typeof i),new Error("Customer provided visitor id is not a string or number")}catch(c){throw T.getSampleRum()&&o.dispatch(a.RECORD_VISITOR_ID_ERROR,{isError:!0}),c}var i;T.getSampleRum()&&(o.dispatch(a.RECORD_VISITOR_ID_ERROR,{isError:!1}),o.dispatch(a.RECORD_VISITOR_ID_LOCATOR_USAGE,{visitorIdLocatorType:t.type,entityId:n}));return String(n)}(t):s.get(d.COOKIES.VISITOR_ID))},n.hasSomeData=function(){return p.keys().length>0},n.setId=function(t){var e,c,f=k.getBucketingId();o.dispatch(a.SET_VISITOR_ID,t),k.getBucketingId()!==f&&(!function(){!function(t,n){0;u.initializeStore(t,n)}(O(y.EVENTS)||[],O(y.EVENT_QUEUE)||[]);var t=(e=y.LAYER_STATES,i=k.getBucketingId(),c=[],s=new RegExp(i+"\\$\\$([^$]+?)\\$\\$"+e),r.each(p.keys(),(function(t){var n=t.match(s);if(n){var e={namespace:n[1],userId:i,item:V(p.getItem(t))};c.push(e)}})),c);var e,i,c,s;r.forEach(t,(function(t){t.item=r.map(t.item,x)})),l=t,v=[],r.each(l,(function(t){r.each(t.item,(function(n){n.namespace=t.namespace,v.push(n)}))})),g=v,o.dispatch(a.LOAD_PERSISTED_LAYER_STATES,{layerStates:r.filter(g,(function(t){return!!t.decision}))}),h=O(y.SESSION_STATE)||{},h=r.extend({lastSessionTimestamp:0,sessionId:null},h),o.dispatch(a.LOAD_SESSION_STATE,h),function(t){var n,e,i=A.getAllPlugins(d.PluginTypes.visitorProfileProviders),u=r.filter(i,(function(t){return r.isFunction(t.restorer)}));t.profile&&t.metadata?(n=t.profile,e=t.metadata):(n=t,e={});n=r.reduce(n,(function(t,n,e){var i=n,o=r.find(u,{provides:e});return o&&(i=o.restorer(n)),t[e]=i,t}),{}),o.dispatch(a.LOAD_EXISTING_VISITOR_PROFILE,{profile:n,metadata:e})}(O(y.VISITOR_PROFILE)||{});var f=O(y.TRACKER_OPTIMIZELY);f&&(m=f,o.dispatch(a.SET_TRACKER_PERSISTABLE_STATE,m));var l,v;var h;var g;var m;n.loadForeignData(),n.removeLegacySessionStateCookies()}(),n.deleteOldLocalData(),i.deleteData(t));try{k.getVisitorIdLocator()||n.maybePersistVisitorId(t)}catch(l){if(g.error("Visitor / Unable to persist visitorId, disabling tracking"),o.dispatch(a.LOAD_DIRECTIVE,{trackingDisabled:!0}),e=l,null!=(c=s.MismatchError)&&"undefined"!=typeof Symbol&&c[Symbol.hasInstance]?c[Symbol.hasInstance](e):e instanceof c)throw g.error("Visitor / Cookie not set to correct value:",l),new Error("Cookie mismatch error while persisting visitorId");throw l}n.refreshSession()},n.getVariationIdMap=function(){return O(y.VARIATION_MAP)||{}},n.updateVariationIdMap=function(t,n,e){o.dispatch(a.UPDATE_VARIATION_ID_MAP,{layerId:t,experimentId:n,variationId:e})},n.persistVariationIdMap=function(){var t=R.getVariationIdMapString();M(y.VARIATION_MAP,t,!0)},n.getContextualMabMap=function(){return O(y.CONTEXTUAL_MAB)||{}},n.updateContextualMabMap=function(t,n,e){o.dispatch(a.UPDATE_CONTEXTUAL_MAB_MAP,{layerId:t,experimentId:n,variationData:e})},n.persistContextualMabMap=function(){var t=R.getContextualMabMapString();M(y.CONTEXTUAL_MAB,t,!0)},n.getOdpSegments=function(){return O(y.ODP_SEGMENTS)||{}},n.persistOdpSegments=function(t){M(y.ODP_SEGMENTS,t,!1)},n.getPreferredLayerMap=function(){return O(y.LAYER_MAP)||{}},n.updatePreferredLayerMap=function(t,n){o.dispatch(a.UPDATE_PREFERRED_LAYER_MAP,{groupId:t,layerId:n})},n.persistTrackerOptimizelyData=function(t){M(y.TRACKER_OPTIMIZELY,t)},n.refreshSession=function(){o.dispatch(a.REFRESH_SESSION)},n.populateEagerVisitorData=function(t,e){var i=r.filter(t,(function(t){return!t.isLazy}));return n.populateVisitorData(i,e)},n.populateLazyVisitorData=function(t,e,i){g.debug("Populating lazy visitor. List of all providers",t);var o=r.filter(t,(function(t){return t.isLazy&&i.has(t.provides)}));return g.debug("Filtered list of providers that are lazy and present in audiences",o),n.populateVisitorData(o,e)},n.populateVisitorData=function(t,n){n=n||{};var e=r.partial(D,n),i=r(t).filter({isAsync:!0}).map(e).filter().value();return r.forEach(r.filter(t,(function(t){return!t.isAsync})),e),i.length>0?m.all(i):m.resolve()},n.persistBehaviorEvents=function(t){M(y.EVENTS,t)},n.persistBehaviorEventQueue=function(t){M(y.EVENT_QUEUE,t)},n.getPersistedBehaviorEventCount=function(){var t=O(y.EVENTS)||[],n=O(y.EVENT_QUEUE)||[];return c.deserialize(t).length+c.deserialize(n).length},n.persistLayerStates=function(){var t=I.getLayerStates(n.getNamespace());t=r.map(t,(function(t){return r.omit(t,"namespace")})),M(y.LAYER_STATES,t)},n.persistSessionState=function(){M(y.SESSION_STATE,S.getState())},n.persistVisitorProfile=function(){var t=function(){var t=C.getVisitorProfile(),n=C.getVisitorProfileMetadata(),e=A.getAllPlugins(d.PluginTypes.visitorProfileProviders);if(e){var i=r.reduce(e,(function(t,n){return n.provides&&(t[n.provides]=n),t}),{});t=r.omitBy(t,(function(t,n){var e=i[n];return e&&e.isTransient}))}return{profile:t,metadata:n}}();M(y.VISITOR_PROFILE,t)},n.persistVisitorBucketingStore=function(){var t;n.persistVariationIdMap(),t=R.getPreferredLayerMapString(),M(y.LAYER_MAP,t,!0),n.persistContextualMabMap()},n.getUserIdFromKey=function(t,e){var i;return r.includes(t,e)&&r.includes(t,"_")&&r.includes(t,"$$")&&r.includes(t.slice(t.indexOf("$$")),n.getNamespace())&&(i=t.slice(t.indexOf("_")+1,t.indexOf("$$"))),i},n.maybePersistVisitorId=function(t){t.randomId&&(b.getAutoRefresh()||n.getCurrentId()!==t.randomId?(s.set(d.COOKIES.VISITOR_ID,t.randomId),g.log("Persisting visitorId:",t.randomId)):g.log("Not persisting visitorId: value is not changed and also auto-refresh is disabled"))},n.getAttribute=function(t){return C.getAttribute(t)},n.getPendingAttributeValue=function(t){return N.getPendingAttributeValue(t)},n.isForeignKey=U,n.checkKeyForVisitorId=function(t){var e=k.getBucketingId()||n.getCurrentId(),i=n.getIdFromKey(t);return!i||i===e},n.getIdFromKey=function(t){var e=t.split("$$")[0],i=n.getStorageKeyFromKey(t);if(r.includes(d.StorageKeys,i))return null;var o=e.indexOf("_");return-1===o?e:e.substring(o+1)},n.getStorageKeyFromKey=function(t){var n,e=t.split("$$").pop();if(e.indexOf("://")>-1){var i=e.indexOf("_");n=e.substring(i+1)}else n=e;return r.includes(r.values(d.AllStorageKeys),n)?n:null},n.deleteOldLocalData=function(){var t=p.keys();r.each(t,(function(t){n.isForeignKey(t)||n.checkKeyForVisitorId(t)||p.removeItem(t)}))},n.deleteOldForeignData=function(){var t=p.keys();r.each(t,(function(t){n.isForeignKey(t)&&p.removeItem(t)}))},n.loadForeignData=function(){r.each(p.keys(),(function(t){var n=p.getItem(t);n&&L(t,n)}))},n.getNamespace=function(){return E.getNamespace()},n.serializeFieldKey=function(t){return r.isArray(t)?t.join("$$"):t},n.removeLegacySessionStateCookies=function(){var t=s.getAll();r.forEach(r.keys(t),(function(t){0===t.indexOf(d.COOKIES.SESSION_STATE+"$$")&&s.remove(t)}))}},7112:function(t,n,e){var i=e(1167),r=e(2432);n.normalizeClientData=function(t){!t.listTargetingKeys&&t.listTargetingCookies&&(t.listTargetingKeys=i.map(t.listTargetingCookies,(function(t){return{type:r.ListTargetingKeyTypes.COOKIE,key:t}})),delete t.listTargetingCookies)}},394:function(t,n,e){e(1353).register("env/jquery",e(730))},730:function(t,n,e){var i,r=e(6670);try{i=$}catch(a){}var o=r.getGlobal("$");t.exports=i&&i!==o?i:o},7617:function(t,n,e){e(1167),e(4594).C,e(5242);var i=e(1353),r=(e(4171),e(1004));e(6670),e(9908),i.get("stores/client_metadata"),i.get("stores/global");n.handleError=function(t,n){n?r.error("Uncaught error:",t,n):r.error("Uncaught error:",t)}},2135:function(t,n,e){var i=e(1167),r=e(4184),o=e(1497),a=e(1142),u=e(4594).v,c=e(2026),s=e(9811),f=e(1353).get("stores/directive"),l=e(4171),d=e(1573),v=e(6665),h=e(1004),p=e(768),g=e(2667),m=e(9887).create(),_=1e3,y=10,w=u("ChangeOverheatError");function b(t,n){if(this.change=t,this.identifier=n.identifier,this.startTime=n.startTime,f.shouldObserveChangesIndefinitely()){v.dispatch(r.INITIALIZE_CHANGE_METRICS),this.rateMeter=new p(_);var e=i.isNull(y)?Number.POSITIVE_INFINITY:y;this.rateMeter.addListener(e,i.bind((function(){h.warn("AppendChange",this,"has overheated and will no longer apply or reapply"),this.cancel(),v.dispatch(r.RECORD_CHANGE_OVERHEATED),o.emitError(new w("Change "+this.identifier+" has overheated"),{layerId:n.action&&n.action.layerId,experimentId:n.action&&n.action.experimentId,variationId:n.action&&n.action.variationId,changeId:t.id,changeType:t.type,movingWindowMilliseconds:_,maxMacroTasksInMovingWindow:e})}),this));for(var a=Math.min(e,50),u=0;u<=a;u++)this.rateMeter.addListener(u,i.partial((function(t){v.dispatch(r.RECORD_CHANGE_MACROTASK_RATE,{changeMacrotaskRate:t})}),u))}}b.prototype.numberOfRootNodes=function(t){var n=document.createElement("div");return n.innerHTML=t,n.childNodes.length},b.prototype.getSiblingElements=function(t,n,e){for(var i=t,r=[],o=0;o<n;o++)e?(r.push(i.nextSibling),i=i.nextSibling):(r.push(i.previousSibling),i=i.previousSibling);return r},b.prototype.apply=function(){this.applyDeferred=s();try{if(!this.numberOfRootNodes(this.change.value))throw new Error("No DOM elements to be created for this change: "+this.change.value);var t=i.partial(this.applyDeferred.reject,new Error("Unable to find selector.")),n={};f.shouldObserveChangesUntilTimeout()?n={timeout:i.partial(g.isTimedOut,this.startTime),onTimeout:t}:f.isEditor()&&m.waitUntil(i.partial(g.isTimedOut,this.startTime)).then(t,t),this.unobserveSelector=m.observeSelector(this.change.selector,i.bind(this.maybeApplyToElement,this),n);var e=l.querySelectorAll(this.change.selector);i.each(e,i.bind(this.maybeApplyToElement,this))}catch(r){this.applyDeferred.reject(r)}return this.applyDeferred},b.prototype.maybeApplyToElement=function(t){var n=a.CHANGE_ID_ATTRIBUTE_PREFIX+this.change.id;if(t.hasAttribute(n))return h.debug("Not applying AppendChange to element",t,"because it was inserted by this change"),void this.applyDeferred.resolve();this.rateMeter&&this.rateMeter.countCurrentTick(),i.bind(this.applyOrReapplyToElement,this,t,n)(),this.applyDeferred.resolve()},b.prototype.applyOrReapplyToElement=function(t,n){var e;switch(this.change.operator){case d.DOMInsertionType.AFTER:e=d.insertAdjacentHTMLType.AFTER_END;break;case d.DOMInsertionType.APPEND:e=d.insertAdjacentHTMLType.BEFORE_END;break;case d.DOMInsertionType.BEFORE:e=d.insertAdjacentHTMLType.BEFORE_BEGIN;break;case d.DOMInsertionType.PREPEND:e=d.insertAdjacentHTMLType.AFTER_BEGIN;break;default:e=d.insertAdjacentHTMLType.BEFORE_END}t.insertAdjacentHTML(e,this.change.value),t.setAttribute(n,""),c.setData(t,this.change.id,this.identifier,[]);var r,o,a=this.numberOfRootNodes(this.change.value)-1;e===d.insertAdjacentHTMLType.BEFORE_END?(r=t.lastChild,o=this.getSiblingElements(r,a,!1)):e===d.insertAdjacentHTMLType.AFTER_BEGIN?(r=t.firstChild,o=this.getSiblingElements(r,a,!0)):e===d.insertAdjacentHTMLType.BEFORE_BEGIN?(r=t.previousSibling,o=this.getSiblingElements(r,a,!1)):e===d.insertAdjacentHTMLType.AFTER_END&&(r=t.nextSibling,o=this.getSiblingElements(r,a,!0)),o.unshift(r),i.each(o,i.bind((function(t){var e=t.nodeType===Node.ELEMENT_NODE?t:l.parentElement(t);e.setAttribute(n,"");var r=c.getData(e,this.change.id,this.identifier)||[];r.push(t),c.setData(e,this.change.id,this.identifier,r),i.each(l.childrenOf(e),(function(t){t.setAttribute(n,"")}))}),this))},b.prototype.cancel=function(){this.unobserveSelector&&this.unobserveSelector()},t.exports=function(t){t.registerChangeApplier(d.changeType.APPEND,b)}},7692:function(t,n,e){var i=e(1167),r=e(1573);n.transformVisibilityAttributesToCSS=function(t){if(!t.attributes)return t;if(t.attributes[r.selectorChangeType.HIDE]||t.attributes[r.selectorChangeType.REMOVE]){var n=i.extend({css:{}},i.cloneDeep(t));return t.attributes[r.selectorChangeType.HIDE]&&(n.css.visibility="hidden",delete n.attributes[r.selectorChangeType.HIDE]),t.attributes[r.selectorChangeType.REMOVE]&&(n.css.display="none",delete n.attributes[r.selectorChangeType.REMOVE]),n}return t},n.createStylesFromChange=function(t,n){if(i.isEmpty(n.css))return n.attributes.style;var e="",r=n.attributes.style||"";return i.each(n.css,(function(t,n){new RegExp(n+"\\s?:").test(r)||(e+=n+":"+t+";")})),i.isUndefined(n.attributes.style)?(t||"")+e:e+r}},5901:function(t,n,e){var i=e(1167),r=e(4184),o=e(1497),a=e(1142),u=e(4594).v,c=e(2026),s=e(9811),f=e(1353).get("stores/directive"),l=e(4171),d=e(1573),v=e(6665),h=e(1004),p=e(3866),g=(e(3961).Promise,e(768)),m=e(2667),_=e(6670),y=e(7692),w=e(9887).create(),b={attributes:!0,childList:!0,subtree:!0,characterData:!0},E=1e3,I=10,A=u("ChangeOverheatError");function T(t,n){if(this.change=i.cloneDeep(t),this.change=y.transformVisibilityAttributesToCSS(this.change),this.identifier=n.identifier,this.startTime=n.startTime,this.disconnectObserverQueue=[],f.shouldObserveChangesIndefinitely()){v.dispatch(r.INITIALIZE_CHANGE_METRICS),this.rateMeter=new g(E);var e=i.isNull(I)?Number.POSITIVE_INFINITY:I;this.rateMeter.addListener(e,i.bind((function(){h.warn("AttributeChange",this,"has overheated and will no longer apply or reapply"),this.cancel(),v.dispatch(r.RECORD_CHANGE_OVERHEATED),o.emitError(new A("Change "+this.identifier+" has overheated"),{layerId:n.action&&n.action.layerId,experimentId:n.action&&n.action.experimentId,variationId:n.action&&n.action.variationId,changeId:t.id,changeType:t.type,movingWindowMilliseconds:E,maxMacroTasksInMovingWindow:e})}),this));for(var a=Math.min(e,50),u=0;u<=a;u++)this.rateMeter.addListener(u,i.partial((function(t){v.dispatch(r.RECORD_CHANGE_MACROTASK_RATE,{changeMacrotaskRate:t})}),u))}this.cancelled=!1}T.prototype.apply=function(){this.applyDeferred=s();try{if(i.isEmpty(this.change.attributes)&&i.isEmpty(this.change.css))return h.debug("Not applying empty AttributeChange"),this.applyDeferred.resolve(),this.applyDeferred;var t=i.partial(this.applyDeferred.reject,new Error("Unable to find selector.")),n={};f.shouldObserveChangesUntilTimeout()?n={timeout:i.partial(m.isTimedOut,this.startTime),onTimeout:t}:f.isEditor()&&w.waitUntil(i.partial(m.isTimedOut,this.startTime)).then(t,t),this.unobserveSelector=w.observeSelector(this.change.selector,i.bind(this.maybeApplyToElement,this),n);var e=l.querySelectorAll(this.change.selector);i.each(e,i.bind(this.maybeApplyToElement,this))}catch(r){this.applyDeferred.reject(r)}return this.applyDeferred},T.prototype.maybeApplyToElement=function(t){var n=a.CHANGE_ID_ATTRIBUTE_PREFIX+this.change.id;if(t.hasAttribute(n))return h.debug("AttributeChange not being applied. Element already changed, or is a child of an element that was changed by this AttributeChange. "+t),void this.applyDeferred.resolve();this.rateMeter&&this.rateMeter.countCurrentTick();var e=i.bind(this.applyOrReapplyToElement,this,t,n);e(!1);var r=i.bind((function(){var n=i.bind((function(){this.cancelled||p.observe(o,t,b)}),this);return _.setTimeout(n)}),this),o=p.create(i.bind((function(){this.rateMeter&&this.rateMeter.countCurrentTick(),o.disconnect(),e(!0),r()}),this));r(),this.disconnectObserverQueue.push(i.bind(o.disconnect,o)),this.applyDeferred.resolve()},T.prototype.applyOrReapplyToElement=function(t,n,e){void 0===e&&(e=!1);var r={};i.forOwn(this.change.attributes,(function(e,o){switch(o){case d.selectorChangeType.CLASS:i.isUndefined(t.className)||(r[d.selectorChangeType.CLASS]=t.getAttribute("class")||"",t.setAttribute("class",e));break;case d.selectorChangeType.HREF:i.isUndefined(t.getAttribute("href"))||(r[d.selectorChangeType.HREF]=t.getAttribute("href")||"",t.setAttribute("href",e));break;case d.selectorChangeType.HTML:i.isUndefined(t.innerHTML)||(r[d.selectorChangeType.HTML]=t.innerHTML,t.innerHTML=e,i.each(l.childrenOf(t),(function(t){t.setAttribute(n,"")})));break;case d.selectorChangeType.SRC:i.isUndefined(t.src)||(r[d.selectorChangeType.SRCSET]=t.src,t.srcset=e);break;case d.selectorChangeType.SRCSET:i.isUndefined(t.srcset)||(r[d.selectorChangeType.SRCSET]=t.srcset,t.srcset=e);break;case d.selectorChangeType.STYLE:break;case d.selectorChangeType.TEXT:i.isUndefined(t.textContent)||(r[d.selectorChangeType.TEXT]=t.textContent,t.textContent=e);break;default:throw new Error("Unrecognized attribute: "+o)}}));var o=y.createStylesFromChange(t.style.cssText,this.change);i.isString(o)&&(r[d.selectorChangeType.STYLE]=t.style.cssText,t.style.cssText=o),t.setAttribute(n,""),e&&c.hasData(t)||c.setData(t,this.change.id,this.identifier,r)},T.prototype.cancel=function(){this.cancelled=!0,this.unobserveSelector&&this.unobserveSelector(),i.each(this.disconnectObserverQueue,(function(t){try{t()}catch(n){}}))},t.exports=function(t){t.registerChangeApplier(d.changeType.ATTRIBUTE,T)}},6300:function(t,n,e){var i=e(1167),r=e(9811),o=e(1573),a=e(5700);function u(t,n){if(!i.isFunction(t.value))throw new Error("Custom code must be a function");this.change=t}u.prototype.apply=function(){var t=r();try{a.apply(this.change.value),t.resolve()}catch(n){t.reject(n)}return t},t.exports=function(t){t.registerChangeApplier(o.changeType.CUSTOM_CODE,u)}},2405:function(t,n,e){var i=e(1167),r=e(4184),o=e(1497),a=e(1142),u=e(4594).v,c=e(2026),s=e(9811),f=e(1353).get("stores/directive"),l=e(4171),d=e(1573),v=e(6665),h=e(1004),p=e(3866),g=e(3961).Promise,m=e(768),_=e(2667),y=e(6670),w=e(9887).create(),b={attributes:!1,childList:!0,subtree:!1,characterData:!1},E=1e3,I=10,A=u("ChangeOverheatError");function T(t,n){if(this.change=t,this.identifier=n.identifier,this.startTime=n.startTime,this.disconnectObserverQueue=[],f.shouldObserveChangesIndefinitely()){v.dispatch(r.INITIALIZE_CHANGE_METRICS),this.rateMeter=new m(E);var e=i.isNull(I)?Number.POSITIVE_INFINITY:I;this.rateMeter.addListener(e,i.bind((function(){h.warn("RearrangeChange",this,"has overheated and will no longer apply or reapply"),this.cancel(),v.dispatch(r.RECORD_CHANGE_OVERHEATED),o.emitError(new A("Change "+this.identifier+" has overheated"),{layerId:n.action&&n.action.layerId,experimentId:n.action&&n.action.experimentId,variationId:n.action&&n.action.variationId,changeId:t.id,changeType:t.type,movingWindowMilliseconds:E,maxMacroTasksInMovingWindow:e})}),this));for(var a=Math.min(e,50),u=0;u<=a;u++)this.rateMeter.addListener(u,i.partial((function(t){v.dispatch(r.RECORD_CHANGE_MACROTASK_RATE,{changeMacrotaskRate:t})}),u))}this.cancelled=!1}T.prototype.apply=function(){this.applyDeferred=s();try{var t=l.querySelector(this.change.selector),n=l.querySelector(this.change.insertSelector);if(t&&n)h.debug("RearrangeChange",this,"both selectors found, applying change"),this.maybeApplyToElement();else{var e=s(),r=s(),o=i.partial(this.applyDeferred.reject,new Error("Unable to find source element")),a=i.partial(this.applyDeferred.reject,new Error("Unable to find destination element")),u={once:!0},c={once:!0};f.shouldObserveChangesUntilTimeout()?(u=i.assign(u,{timeout:i.partial(_.isTimedOut,this.startTime),onTimeout:o}),c=i.assign(c,{timeout:i.partial(_.isTimedOut,this.startTime),onTimeout:a})):f.isEditor()&&(w.waitUntil(i.partial(_.isTimedOut,this.startTime)).then(o,o),w.waitUntil(i.partial(_.isTimedOut,this.startTime)).then(a,a));var d=w.observeSelector(this.change.selector,e.resolve,u),v=w.observeSelector(this.change.insertSelector,r.resolve,c);this.unobserveSelector=function(){d(),v()},g.all([e,r]).then(i.bind(this.maybeApplyToElement,this),this.applyDeferred.reject)}}catch(p){this.applyDeferred.reject(p)}return this.applyDeferred},T.prototype.maybeApplyToElement=function(){var t;switch(this.rateMeter&&this.rateMeter.countCurrentTick(),this.change.operator){case d.DOMInsertionType.BEFORE:case d.DOMInsertionType.AFTER:t=l.querySelector(this.change.insertSelector).parentNode;break;case d.DOMInsertionType.PREPEND:case d.DOMInsertionType.APPEND:t=l.querySelector(this.change.insertSelector)}h.debug("RearrangeChange",this,"element to observe for reapplication:",t);var n=i.bind(this.applyOrReapplyToElement,this);n(!1);var e=i.bind((function(){var n=i.bind((function(){this.cancelled||p.observe(r,t,b)}),this);return y.setTimeout(n)}),this),r=p.create(i.bind((function(){this.rateMeter&&this.rateMeter.countCurrentTick(),r.disconnect(),n(!0),e()}),this));e(),this.disconnectObserverQueue.push(i.bind(r.disconnect,r)),this.applyDeferred.resolve()},T.prototype.applyOrReapplyToElement=function(t){void 0===t&&(t=!1);var n=l.querySelectorAll(this.change.selector);i.each(n,i.bind((function(n){if(!c.getData(n,this.change.id,this.identifier)){var e={undoElement:n.previousSibling,undoType:d.DOMInsertionType.AFTER};n.parentNode.firstChild===n&&(e.undoElement=n.parentNode,e.undoType=d.DOMInsertionType.PREPEND);var i=l.querySelector(this.change.insertSelector),r=i.parentNode,o=n.parentNode.removeChild(n);switch(e.element=o,this.change.operator){case d.DOMInsertionType.BEFORE:r.insertBefore(o,i);break;case d.DOMInsertionType.AFTER:r.insertBefore(o,i.nextSibling);break;case d.DOMInsertionType.PREPEND:var u=i.firstChild;i.insertBefore(o,u);break;case d.DOMInsertionType.APPEND:i.appendChild(o)}o.setAttribute(a.CHANGE_ID_ATTRIBUTE_PREFIX+this.change.id,""),t&&c.hasData(o)||c.setData(o,this.change.id,this.identifier,e)}}),this))},T.prototype.cancel=function(){this.cancelled=!0,this.unobserveSelector&&this.unobserveSelector(),i.each(this.disconnectObserverQueue,(function(t){try{t()}catch(n){}}))},t.exports=function(t){t.registerChangeApplier(d.changeType.REARRANGE,T)}},2429:function(t,n,e){var i=e(3323),r=e(8825).b,o={selectExperiment:function(t,n,e){if(t.experiments.length<1)throw new r("Unable to find experiment to bucket user into");var o=t.experiments[0];if(!i.isValidExperiment(n,o))throw new r('Audience conditions failed for experiment: "'+o.id+'".');return o}};t.exports=function(t){t.registerDecider("single_experiment",o),t.registerDecider("multivariate",o)}},6936:function(t,n,e){var i=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},r=e(1167),o=e(1497),a=e(4594).v,u=e(4171),c=e(4603),s=n.Error=a("ClickDelegateError");function f(t){this.handler=t,this.events=[],this.unlistenFn=null,this.clickHandler=r.bind((function(t){r.forEach(this.events,r.bind((function(n){try{var e=n.config&&n.config.selector?n.config.selector:n.eventFilter.selector;(function(t,n,e){var a=t.target,u=0;for(;a;){var f;try{f=c(a,n)}catch(d){var l={typeofElementValue:void 0===a?"undefined":i(a),nodeName:r.result(a,["nodeName"],null),nodeType:r.result(a,["nodeType"],null),targetName:r.result(t,["target","nodeName"],null),targetType:r.result(t,["target","nodeType"],null),numParentsTraversed:u,selector:n,errorMessage:d.message,eventId:e.id};return o.emitError(new s("Unable to evaluate match for element"),l),!1}if(f)return!0;a=a.parentElement,u++}return!1})(t,e,n)&&this.handler(n)}catch(a){o.emitError(new s("Unable to handle click for selector"+e+":"+a.message))}}),this))}),this)}f.prototype.listen=function(){this.unlistenFn=u.addEventListener("click",this.clickHandler,!0)},f.prototype.unlisten=function(){this.unlistenFn&&(this.unlistenFn(),this.unlistenFn=null)},f.prototype.hasEvents=function(){return this.events.length>0},f.prototype.addEvent=function(t){this.events.push(t)},f.prototype.removeEvent=function(t){this.events=r.filter(this.events,(function(n){return n.apiName!==t.apiName}))},t.exports=f},6488:function(t,n,e){var i=e(3971),r=e(6936),o=e(1004),a=e(5916);function u(t){return"apiName: "+t.apiName+", selector: "+t.eventFilter.selector}t.exports=function(t){var n=new r((function(t){a.updateAllViewTags(),i.trackClickEvent(t)?o.log("Tracking click event:",t):o.log("Not tracking click event:",t)}));t.registerEventImplementation("click",{attach:function(t){n.hasEvents()||n.listen(),n.addEvent(t),o.debug("Started listening for click event ("+u(t)+"):",t)},detach:function(t){n.removeEvent(t),n.hasEvents()||n.unlisten(),o.debug("Stopped listening for click event ("+u(t)+"):",t)}})}},9756:function(t,n,e){var i=e(1167),r=e(8012),o=e(6423),a=e(6266);function u(t,n){var e=o.buildFromSpecV0_1(n);if(1!==e.length)throw new Error("Invalid query descriptor; verify that no aggregators are specified");return a.execute(e[0],t)}function c(t,n){return i.map(t,(function(t){return i.isFunction(t.toObject)?t.toObject(n):t}))}function s(t,n){if(!t)return["Descriptor not defined"];var e=[];return t.count&&e.push('Unexpected "count" clause specified'),t.pick&&t.pick.modifier&&-1===n.indexOf(t.pick.modifier)&&e.push('Invalid "pick" modifier "'+t.pick.modifier+'"'),i.each(t.filters,(function(t){i.isUndefined(t.modifier)||e.push('Unexpected "filter" modifier "'+t.modifier+'"')})),e.length>0?e:void 0}function f(t,n){var e={revenueAsTag:!1,timeAsTimestamp:!0};if(i.isUndefined(n))return c(r.getEvents(t),e);if(i.isNumber(n)){if(n<=0)throw new Error("Count must be a positive integer, got "+n);return c(r.getEvents(t).slice(-n),e)}var a=s(n,i.values(o.RECENCY_FILTERS));if(a)throw new Error(a.join("\n"));return c(u(r.getEvents(t),n),e)}function l(t,n){if(!(n=i.cloneDeep(n)||{}).pick)throw new Error('No "pick" clause provided in query descriptor');if(!n.pick.name)throw new Error('No field name provided in "pick" clause');n.pick.modifier=n.pick.modifier||o.FREQUENCY_FILTERS.MOST_FREQUENT;var e=s(n,i.values(o.FREQUENCY_FILTERS));if(e)throw new Error(e.join("\n"));return u(r.getEvents(t),n)}function d(t,n){var e=o.buildFromSpecV0_2(n),u=r.getEvents(t),s=c(a.execute(e,u),{revenueAsTag:!0,timeAsTimestamp:!1});return(n.pick||n.reduce&&"count"===n.reduce.aggregator)&&(s=i.flatten(s)),n.reduce&&(s=s[0]),s}t.exports=["stores/visitor_events",function(t){return{getEvents:i.partial(f,t),getByFrequency:i.partial(l,t),query:i.partial(d,t)}}]},2588:function(t,n,e){t.exports=function(t){t.registerApiModule("behavior",e(9756))}},4446:function(t,n,e){t.exports=function(t){t.registerVisitorProfileProvider(e(3697)),t.registerAudienceMatcher("behavior",e(8496))}},8496:function(t,n,e){var i=e(1167),r=e(7136),o=e(6423),a=e(6266);t.exports={fieldsNeeded:["events"],match:function(t,n){var e,u=r.parse(n.value);return e=i.isUndefined(u.version)?[u]:o.buildFromSpecV0_1(u),i.every(e,(function(n){return a.isSatisfied(n,t.events)}))}}},3697:function(t,n,e){var i=e(8012);t.exports={provides:"events",isTransient:!0,getter:[function(){return i.getEvents()}]}},1666:function(t,n,e){t.exports=function(t){t.registerVisitorProfileProvider(e(1137))}},1137:function(t,n,e){var i=e(1167),r=e(7751),o=e(8012),a=e(7136),u=e(6423);t.exports={provides:"customBehavior",shouldTrack:!0,isLazy:!1,getter:["stores/global","stores/visitor_attribute_entity",function(t,n){var e=t.getProjectId(),c=i.filter(i.map(n.getCustomBehavioralAttributes(e),(function(t){try{return{id:t.id,granularity:r.GRANULARITY.ALL,rule:u.buildFromSpecV0_2(a.parse(t.rule_json))}}catch(n){return}}))),s=o.getEvents();return r.evaluate(c,s)}]}},8553:function(t,n,e){t.exports=function(t){t.registerVisitorProfileProvider(e(6741)),t.registerAudienceMatcher("first_session",e(1268))}},1268:function(t){t.exports={fieldsNeeded:["first_session"],match:function(t){return!!t.first_session}}},6741:function(t,n,e){var i=e(2961),r=e(8012),o=e(331).getFieldValue,a=e(3109).CURRENT_SESSION_INDEX;t.exports={provides:"first_session",shouldTrack:!0,getter:[function(){var t=r.getEvents();if(t&&t.length>0){var n=t[0];return o(n,[i.FIELDS.SESSION_INDEX])===a}return!0}]}},7751:function(t,n,e){var i=e(1004),r={FIELDS:e(2961).FIELDS},o=e(6423),a=e(6266);n.GRANULARITY={ALL:"all",CURRENT_SESSION:"current_session",LAST_30_DAYS:"last_30_days",LAST_60_DAYS:"last_60_days"},n.evaluate=function(t,e){var u={};if(0===e.length){for(var c=0;c<t.length;c++)u[t[c].id]=t[c].defaultValue;return u}var s=function(t){if(0===t.length)return[];for(var n=t.length-1,e=r.FIELDS.SESSION_ID,i=t[n][e];n>0&&i===t[n-1][e];)n--;return t.slice(n)}(e),f=function(t,n){if(0===t.length||n<=0)return[];var e=+new Date-n*o.MILLIS_IN_A_DAY;e-=e%o.MILLIS_IN_A_DAY;for(var i=t.length;i>0&&e<=t[i-1][r.FIELDS.TIME];)i--;return t.slice(i)}(e,60);for(c=0;c<t.length;c++){var l=t[c],d=e;l.granularity===n.GRANULARITY.CURRENT_SESSION?d=s:l.granularity===n.GRANULARITY.LAST_60_DAYS&&(d=f);try{var v=d;l.rule&&(v=a.execute(l.rule,d)),u[l.id]=l.defaultValue,1===v.length?u[l.id]=v[0][0]||l.defaultValue:i.debug("Behavior / Rule for",l.id,"returned",v.length,"results, expected 1")}catch(h){i.error("Behavior / Rule for",l.id,"failed with",h.message||"")}}return u}},8012:function(t,n,e){var i=e(1167),r=e(6410),o=e(1353).get("stores/visitor_events");n.getEvents=function(){var t=r.getEvents(),n=[].concat.apply([],i.values(o.getForeignEvents())),e=[].concat.apply([],i.values(o.getForeignEventQueues())),a=r.mergeAllEvents([t,n,e]);return a.slice(a.length-1e3)}},6423:function(t,n,e){var i=n,r=e(1167),o={FIELDS:e(2961).FIELDS,FIELDS_V0_2:e(2961).FIELDS_V0_2},a=e(7136),u=e(1004),c=e(6266);i.MILLIS_IN_A_DAY=864e5,i.aggregateField=function(t,n){return r.isString(n)&&(n=[n]),n=n||c.DEFAULT_FIELD,[c.generateAlias(t,n)]},i.groupField=function(t){return r.isString(t)&&(t=[t]),[(t=t||c.DEFAULT_FIELD).join(".")]};var s={"<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","==":"eq"};function f(t){return t=(t||"").toString().trim(),s[t]||t}function l(t,n,e){var a={where:n};if(t.count&&(a.limit=t.count),t.modifier===i.FREQUENCY_FILTERS.MOST_FREQUENT){var u=i.getFieldKeyPathForSource(t.name,e),c=i.aggregate("count"),s=i.aggregateField("count"),f=i.groupField(u);return r.extend(a,{select:[{field:f}],groupBy:i.groupBy([u]),aggregate:[c],orderBy:[{field:s,direction:"DESC"}]})}return r.extend(a,{orderBy:[{field:[o.FIELDS.TIME],direction:"DESC"}]})}i.fieldComparison=function(t,n,e){return t=f(t),r.isString(n)&&(n=[n]),"exists"===t?{op:t,args:[{field:n}]}:{op:t,args:[{field:n},{value:e}]}},i.relativeTimeComparison=function(t,n){return{op:f(t),args:[{op:"-",args:[{eval:"now"},{field:[o.FIELDS.TIME]}]},{value:n*i.MILLIS_IN_A_DAY}]}},i.rangeTimeComparison=function(t){return r.isArray(t)?{op:"between",args:[{field:[o.FIELDS.TIME]},{value:[t[0]||+new Date(0),t[1]||+new Date]}]}:(u.error("Rule builder","rangeTimeComparison passed invalid range",t),null)},i.groupBy=function(t){for(var n=[],e=0;e<t.length;e++)n[e]={field:t[e]};return n},i.aggregate=function(t,n){return r.isString(n)&&(n=[n]),{op:t,args:[{field:n=n||c.DEFAULT_FIELD}]}},i.SOURCE_TYPES={BEHAVIOR:"events",CUSTOM_BEHAVIOR:"custom_behavior",DCP:"dcp"},i.FREQUENCY_FILTERS={MOST_FREQUENT:"most_frequent",LEAST_FREQUENT:"least_frequent"},i.RECENCY_FILTERS={MOST_RECENT:"most_recent",LEAST_RECENT:"least_recent"},i.getFieldKeyPathForSource=function(t,n){n=n||i.SOURCE_TYPES.BEHAVIOR;var e=[];return r.isString(t)?(e=[t],n!==i.SOURCE_TYPES.BEHAVIOR||r.includes(r.values(o.FIELDS),t)||(e=[o.FIELDS.OPTIONS,t])):e=t,e},i.buildFromSpecV0_1=function(t){if(!(t.action||t.filters&&0!==t.filters.length))throw new Error('Audience spec must have an "action" field or at least one "filter" '+a.stringify(t));var n=i.fieldComparison("gt",o.FIELDS.TIME,0),e=[],c=[];if(t.action&&(c.push(i.fieldComparison("eq",o.FIELDS.NAME,t.action.value)),t.action.type&&c.push(i.fieldComparison("eq",o.FIELDS.TYPE,t.action.type))),t.time)if("last_days"===t.time.type)c.push(i.relativeTimeComparison("lte",t.time.days));else if("range"===t.time.type){var s=i.rangeTimeComparison([t.time.start,t.time.stop]);s&&c.push(s)}else u.error("Rule builder",'Audience spec has bad "time" type',t.time.type);if(n={op:"and",args:c},t.count&&e.push({where:i.fieldComparison(t.count.comparator,"0",t.count.value),from:{select:[{field:i.aggregateField("count")}],where:n,aggregate:[i.aggregate("count")]}}),t.filters&&r.each(t.filters,(function(r){var a,u,s=i.getFieldKeyPathForSource(r.name,t.source);if(r.modifier===i.FREQUENCY_FILTERS.MOST_FREQUENT?(a=i.aggregate("count"),u=i.aggregateField("count")):r.modifier===i.RECENCY_FILTERS.MOST_RECENT&&(a=i.aggregate("max",o.FIELDS.TIME),u=i.aggregateField("max",o.FIELDS.TIME)),a){var f=s,l=i.groupField(f);e.push({where:i.fieldComparison(r.comparator,"0",r.value),from:{select:[{field:l}],where:n,groupBy:i.groupBy([f]),aggregate:[a],orderBy:[{field:u,direction:"DESC"}],limit:1}})}else c.push(i.fieldComparison(r.comparator,s,r.value))})),t.pick){if(e.length>0)throw new Error('A "pick" clause must not be specified with "count" or "most_recent", "most_frequent" modifiers'+a.stringify(t));return[l(t.pick,n,t.source)]}return e.length>0?e:[{where:n}]},i.buildFromSpecV0_2=function(t){!function(t){var n=[];if(r.isUndefined(t))throw new Error("rule is undefined");if(!r.isObject(t))throw new Error("rule is not an Object");"0.2"!==t.version&&n.push('version: not "0.2"'),t.filter&&(r.isArray(t.filter)?r.each(t.filter,(function(t,e){var r=i.validateFieldKeyPathV0_2(t.field,i.FieldPurpose.FILTER);r&&n.push("filter["+e+"]: "+r);var o=i.validateComparatorAndValue(t.comparator,t.value);o&&n.push("filter["+e+"]: "+o)})):n.push("filter: not an array"));var e=[],o=[];t.sort&&(t.reduce&&t.reduce.aggregator&&"nth"!==t.reduce.aggregator&&n.push("sort: superfluous because we can apply aggregator "+a.stringify(t.reduce.aggregator)+" to unsorted items"),r.isArray(t.sort)?r.each(t.sort,(function(t,u){var c=i.validateFieldKeyPathV0_2(t.field,i.FieldPurpose.SORT);c&&n.push("sort["+u+"]: "+c),t.field&&"frequency"===t.field[0]?e.push(t):o.push(t);var s=function(t){var n="direction "+(a.stringify(t)||String(t));if(!r.includes(["ascending","descending"],t))return n+' is not "ascending" or "descending"'}(t.direction);s&&n.push("sort["+u+"]: "+s)})):n.push("sort: not an array"),e.length&&o.length&&n.push('sort: sorting by non-["frequency"] field is pointless because we are going to sort the picked values by ["frequency"]'),e.length&&!t.pick&&n.push('sort: sorting by ["frequency"] is impossible because no values have been picked'));if(t.pick){t.reduce&&"count"===t.reduce.aggregator&&n.push('pick: superfluous because we can apply aggregator "count" to raw events');var u=i.validateFieldKeyPathV0_2(t.pick.field);u&&n.push("pick: "+u)}if(t.reduce){var c=t.reduce.aggregator,s="aggregator "+(a.stringify(c)||String(c)),f=t.reduce.n,l="index "+(a.stringify(f)||String(f));r.includes(["sum","avg","max","min","count","nth"],c)||n.push("reduce: "+s+" is unknown"),r.includes(["sum","avg","max","min"],c)&&(t.pick||n.push("reduce: "+s+" is impossible to use because no values have been picked")),"nth"===c?((!r.isNumber(f)||isNaN(f)||parseInt(f,10)!==f||f<0)&&n.push("reduce: "+l+" is not a non-negative integer (mandated by "+s+")"),t.sort||n.push('reduce: aggregator "nth" is meaningless without a specific sort order')):r.isUndefined(f)||n.push("reduce: "+l+" is defined (not mandated by "+s+")")}if(n.length)throw new Error(n.join("\n"))}(t);var n={where:{op:"and",args:r.map(t.filter||[],(function(t){return"age"===t.field[0]?i.relativeTimeComparison(t.comparator||"eq",t.value/i.MILLIS_IN_A_DAY):i.fieldComparison(t.comparator||"eq",i.convertFieldKeyPathFromSpecV0_2(t.field),t.value)}))}};if(t.reduce&&"count"===t.reduce.aggregator)return r.extend(n,{aggregate:[{op:"count",args:[{field:["*"]}]}],select:[{field:["_count_*"]}]});var e=[],o=[];if(t.sort&&(r.each(t.sort,(function(t){r.includes(["ascending","descending"],t.direction)&&(r.includes(["time","age"],t.field[0])&&o.push(t),"frequency"===t.field[0]&&e.push(t))})),o.length&&!e.length&&(n.orderBy=r.filter(r.map(o,(function(t){return"time"===t.field[0]?{field:i.convertFieldKeyPathFromSpecV0_2(["time"]),direction:"ascending"===t.direction?"ASC":"DESC"}:"age"===t.field[0]?{field:i.convertFieldKeyPathFromSpecV0_2(["time"]),direction:"ascending"===t.direction?"DESC":"ASC"}:void 0}))))),t.pick&&t.pick.field){var u=i.convertFieldKeyPathFromSpecV0_2(t.pick.field);if(t.reduce&&r.includes(["avg","max","min","sum"],t.reduce.aggregator))return r.extend(n,{aggregate:[{op:t.reduce.aggregator,args:[{field:u}]}],select:[{field:[c.generateAlias(t.reduce.aggregator,u)]}]});n=e.length?r.extend(n,{groupBy:[{field:u}],aggregate:[{op:"count",args:[{field:["*"]}]}],orderBy:[{field:["_count_*"],direction:"ascending"===e[0].direction?"ASC":"DESC"}],select:[{field:[u.join(".")]}]}):r.extend(n,{select:[{field:u}]})}if(t.reduce&&"nth"===t.reduce.aggregator){var s=t.reduce.n;if(r.isNumber(s)&&s>=0&&Number(s)===Math.floor(Number(s)))return r.extend(n,{offset:s,limit:1})}return n},i.convertFieldKeyPathFromSpecV0_2=function(t){return"tags"===t[0]&&"revenue"===t[1]?["r"]:[o.FIELDS_V0_2[t[0]]].concat(t.slice(1))},i.FieldPurpose={FILTER:"filter",SORT:"sort",PICK:"pick"},i.validateFieldKeyPathV0_2=function(t,n){var e="field "+(a.stringify(t)||String(t));if(!r.isArray(t)||!r.every(t,r.isString))return e+" is not an array of strings";if("tags"===t[0]&&t.length>2||"tags"!==t[0]&&t.length>1)return e+" includes too many strings";if("tags"===t[0]&&t.length<2)return e+" does not specify an exact tag";if(t.length<1)return e+" does not specify a top-level field";var u=r.keys(o.FIELDS_V0_2),c=["age","frequency"];return n===i.FieldPurpose.FILTER&&(u.push("age"),c=["frequency"]),n===i.FieldPurpose.SORT&&(u=["time","age","frequency"],c=["name","type","category","tags"]),r.includes(c,t[0])?e+" is not supported here":r.includes(u,t[0])?void 0:e+" is unknown"},i.validateComparatorAndValue=function(t,n){var e="comparator "+(a.stringify(t)||String(t)),i="value "+(a.stringify(n)||String(n));if(!r.isString(t)&&!r.isUndefined(t))return e+" is not a string";switch(t){case void 0:case"eq":case"is":case"contains":break;case"lt":case"gt":case"lte":case"gte":if(!r.isNumber(n))return i+" is not a number (mandated by "+e+")";break;case"in":if(!r.isArray(n))return i+" is not an array (mandated by "+e+")";break;case"between":if(!(r.isArray(n)&&2===n.length&&r.isNumber(n[0])&&r.isNumber(n[1])&&n[0]<=n[1]))return i+" is not a pair of increasing numbers (mandated by "+e+")";break;case"regex":if(!(r.isString(n)||r.isArray(n)&&2===n.length&&r.isString(n[0])&&r.isString(n[1])))return i+" is not a pattern string or a [pattern string, flags string] array (mandated by "+e+")";break;case"exists":if(!r.isUndefined(n))return i+" is not undefined (mandated by "+e+")";break;default:return e+" is unknown"}}},6266:function(t,n,e){var i=e(1167),r=e(2432),o=e(1004),a=i.bind(o.log,o),u=e(5242),c=e(331).getFieldValue,s=e(7136),f=function(t,n,e){if(t.getValueOrDefault)return t.getValueOrDefault(n,e);if(!i.isArray(n))return e;var r=c(t,n);return void 0===r&&(r=e),r},l=function(t){return"string"==typeof t?t.trim().toLowerCase():t};n.clause={WHERE:"where",GROUP_BY:"groupBy",AGGREGATE:"aggregate",HAVING:"having",ORDER_BY:"orderBy",SELECT:"select",OFFSET:"offset",LIMIT:"limit",FROM:"from"},n.DEFAULT_FIELD=["*"],n.booleanOperators={eq:function(t){var n=i.map(t,l);return n[0]==n[1]},is:function(t){return t[0]===t[1]},gt:function(t){return t[0]>t[1]},lt:function(t){return t[0]<t[1]},gte:function(t){return t[0]>=t[1]},lte:function(t){return t[0]<=t[1]},"in":function(t){var n=i.map(t[1]||[],l);return i.includes(n,l(t[0]))},between:function(t){return t[1][0]<=t[0]&&t[0]<=t[1][1]},contains:function(t){var n=i.map(t,(function(t){return"string"==typeof t?t.toLowerCase():t}));return-1!==(n[0]||"").indexOf(n[1])},regex:function(t){try{var n,e;return i.isString(t[1])?(n=t[1],e="i"):(n=t[1][0]||"",e=t[1][1]||""),new RegExp(n,e).test(t[0])}catch(r){return o.error("Rules",'In operator "regex", error: '+(r.message||"invalid RegExp /"+[n,e].join("/"))),!1}},exists:function(t){return void 0!==t[0]},and:function(t){return i.every(t,(function(t){return t}))},or:function(t){return i.some(t,(function(t){return t}))},not:function(t){return!t[0]}},n.arithmeticOperators={"+":function(t){return(t[0]||0)+(t[1]||0)},"-":function(t){return(t[0]||0)-(t[1]||0)},"/":function(t){return(t[0]||0)/(t[1]||1)},"%":function(t){return(t[0]||0)%(t[1]||1)}},n.aggregateOperators={sum:function(t,e){for(var i=t[0]||n.DEFAULT_FIELD,r=0,o=0;o<e.length;o++)r+=f(e[o],i,0);return r},avg:function(t,e){if(0===e.length)return 0;for(var i=t[0]||n.DEFAULT_FIELD,r=0,o=0;o<e.length;o++)r+=f(e[o],i,0);return r/e.length},max:function(t,e){for(var i=t[0]||n.DEFAULT_FIELD,r=Number.NEGATIVE_INFINITY,o=0;o<e.length;o++)r=Math.max(r,f(e[o],i,Number.NEGATIVE_INFINITY));return r},min:function(t,e){for(var i=t[0]||n.DEFAULT_FIELD,r=Number.POSITIVE_INFINITY,o=0;o<e.length;o++)r=Math.min(r,f(e[o],i,Number.POSITIVE_INFINITY));return r},count:function(t,n){return n.length}};var d={now:function(){return u.now()}},v=function(t,e){if(e.hasOwnProperty("value"))return e.value;if(e.hasOwnProperty("field"))return f(t,e.field);if(e.hasOwnProperty("eval"))return e.eval in d?d[e.eval]():void o.error("Rules","Unknown function: "+e.eval);if(e.op){var r,a=(r=e.op)in n.booleanOperators?n.booleanOperators[r]:r in n.arithmeticOperators?n.arithmeticOperators[r]:null;if(a){var u=i.partial(v,t),c=e.args||[];return a(i.map(c,(function(t){return u(t)})),t)}o.error("Rules","Unknown operator: "+e.op)}else o.error("Rules","No operator specified: "+s.stringify(e))};n.generateAlias=function(t,n){return"_"+t+"_"+n.join(".")};n.rewrite=function(t){var e=[],r={};function a(t,u){if(i.isArray(t)&&("and"!==t[0]&&"or"!==t[0]&&"not"!==t[0]&&o.error("Rules","Unexpected operation "+t[0]+". Continuing optimistically."),t={op:t[0],args:t.slice(1)}),t.hasOwnProperty("field")||t.hasOwnProperty("value")||t.hasOwnProperty("eval"))return t;if(u&&t.op in n.aggregateOperators){var c=(t.args&&t.args[0]||{}).field||n.DEFAULT_FIELD,s=n.generateAlias(t.op,c);return s in r||(e.push({op:t.op,args:t.args}),r[s]=!0),{field:[s]}}for(var f=[],l=t.args||[],d=0;d<l.length;d++)f[d]=a(l[d],u);return{op:t.op,args:f}}var u={};t.hasOwnProperty(n.clause.WHERE)&&(u[n.clause.WHERE]=a(t[n.clause.WHERE],!1)),t.hasOwnProperty(n.clause.HAVING)&&(u[n.clause.HAVING]=a(t[n.clause.HAVING],!0)),(t.hasOwnProperty(n.clause.AGGREGATE)||e.length>0)&&(u[n.clause.AGGREGATE]=(t[n.clause.AGGREGATE]||[]).concat(e));for(var c=[n.clause.GROUP_BY,n.clause.ORDER_BY,n.clause.SELECT,n.clause.OFFSET,n.clause.LIMIT],s=0;s<c.length;s++)t.hasOwnProperty(c[s])&&(u[c[s]]=t[c[s]]);return t.hasOwnProperty(n.clause.FROM)&&(u[n.clause.FROM]=n.rewrite(t[n.clause.FROM])),u};var h=function(t,e){e=e||0;var r=[];if(t.hasOwnProperty(n.clause.WHERE)?t[n.clause.WHERE].op?t[n.clause.WHERE].op in n.booleanOperators||r.push("Non-boolean WHERE clause operator"):r.push("Missing WHERE clause operator"):r.push("Missing WHERE clause"),!t.hasOwnProperty(n.clause.HAVING)||(t[n.clause.HAVING].op?t[n.clause.HAVING].op in n.booleanOperators||r.push("Non-boolean HAVING clause operator"):r.push("Missing HAVING clause operator")),t.hasOwnProperty(n.clause.GROUP_BY)&&!t.hasOwnProperty(n.clause.AGGREGATE)&&r.push("No AGGREGATE clause specified with GROUP_BY clause"),t.hasOwnProperty(n.clause.SELECT)){var o=t[n.clause.SELECT];if(i.isArray(o))for(var a=0;a<o.length;a++)o[a].op&&o[a].op in n.aggregateOperators&&r.push('In SELECT clause, aggregate operator "'+o[a].op+'" specified in selector at index '+a);else r.push("SELECT clause must be an array")}if(t.hasOwnProperty(n.clause.OFFSET)){var u=t[n.clause.OFFSET];(!i.isNumber(u)||Number(u)<0||Number(u)!==Math.floor(Number(u)))&&r.push("OFFSET must be a non-negative integer")}if(t.hasOwnProperty(n.clause.LIMIT)){var c=t[n.clause.LIMIT];(!i.isNumber(c)||Number(c)<0||Number(c)!==Math.floor(Number(c)))&&r.push("LIMIT must be a non-negative integer")}return e>0&&(r=i.map(r,(function(t){return"Sub-rule "+e+": "+t}))),t.hasOwnProperty(n.clause.FROM)&&(r=r.concat(h(t[n.clause.FROM],e+1))),r},p=function(t,e){var r,u,c,l=e;if(t.hasOwnProperty(n.clause.FROM)&&(o.debug("Evaluating FROM clause:",t[n.clause.FROM]),l=p(t[n.clause.FROM],l),o.debug("Results after FROM:",l)),o.debug("Evaluating WHERE clause:",t[n.clause.WHERE]),l=i.filter(l,(function(e){return v(e,t[n.clause.WHERE])})),o.debug("Results after WHERE:",l),t.hasOwnProperty(n.clause.AGGREGATE)){o.debug("Evaluating AGGREGATE clause:",t[n.clause.AGGREGATE]);var d=function(t,n){var e={};if(void 0===t||!i.isArray(t)||0===t.length)return e["*"]={fieldValues:{},events:n},e;for(var r=i.map(t,(function(t){return t.field})),o=0;o<n.length;o++){for(var a=n[o],u=[],c={},l=0;l<r.length;l++){var d=r[l],v=f(a,d),h=d.join(".");c[h]=v,u.push(encodeURIComponent(h)+"="+encodeURIComponent(s.stringify(v)))}var p=u.join("&");e.hasOwnProperty(p)||(e[p]={fieldValues:c,events:[]}),e[p].events.push(a)}return e}(t[n.clause.GROUP_BY],l);l=function(t,n){var e=[];return i.each(t,(function(t,r){var o=i.extend({},t.fieldValues),a=n[r]||{};i.extend(o,a),e.push(o)})),e}(d,(r=t[n.clause.AGGREGATE],u=d,c={},i.each(u,(function(t,e){c[e]={};for(var i=0;i<r.length;i++){var a=r[i],u=a.op;if(u in n.aggregateOperators){var s=(a.args&&a.args[0]||{}).field||n.DEFAULT_FIELD,f=n.generateAlias(u,s),l=n.aggregateOperators[u]([s],t.events);c[e][f]=l}else o.error("Rules","Unknown aggregate operator "+u)}})),c)),o.debug("Results after AGGREGATE:",l)}t.hasOwnProperty(n.clause.HAVING)&&(o.debug("Evaluating HAVING clause:",t[n.clause.HAVING]),l=i.filter(l,(function(e){return v(e,t[n.clause.HAVING])})),o.debug("Results after HAVING:",l)),t.hasOwnProperty(n.clause.ORDER_BY)&&(o.debug("Evaluating ORDER_BY clause:",t[n.clause.ORDER_BY]),l=function(t,n){return i.isArray(t)?0===t.length?n:n.sort((function(n,e){for(var i=0;i<t.length;i++){var r=t[i],o="ASC"===(r.direction||"ASC")?1:-1,a=r.field,u=f(n,a,0),c=f(e,a,0);if(u<c)return-o;if(u>c)return o}return 0})):(a("Rules","groupBy rule must be an array"),n)}(t[n.clause.ORDER_BY],l),o.debug("Results after ORDER_BY:",l));var h,g=0;return t.hasOwnProperty(n.clause.OFFSET)&&(o.debug("Evaluating OFFSET clause:",t[n.clause.OFFSET]),g=Number(t[n.clause.OFFSET])),t.hasOwnProperty(n.clause.LIMIT)&&(o.debug("Evaluating LIMIT clause:",t[n.clause.LIMIT]),h=g+Number(t[n.clause.LIMIT])),(g>0||!i.isUndefined(h))&&(l=l.slice(g,h),o.debug("Results after OFFSET/LIMIT:",l)),t.hasOwnProperty(n.clause.SELECT)&&(o.debug("Evaluating SELECT clause:",t[n.clause.SELECT]),l=function(t,n){return i.map(n,(function(n){return i.map(t,(function(t){return v(n,t)}))}))}(t[n.clause.SELECT],l),o.debug("Results after SELECT:",l)),l};n.execute=function(t,e){t=n.rewrite(t),o.shouldLog(r.LogLevel.DEBUG)&&o.groupCollapsed("Evaluating Behavioral Rule"),o.debug("Rule:",t,s.stringify(t)),o.debug("Events:",e);var i=h(t);if(i.length>0)throw new Error("Rule "+s.stringify(t)+" has violations: "+i.join("\n"));var a=p(t,e);return o.debug("Rule result:",a),o.shouldLog(r.LogLevel.DEBUG)&&o.groupEnd(),a},n.isSatisfied=function(t,e){try{return n.execute(t,e).length>0}catch(i){return o.error("Rules","Error "+i.toString()+" while evaluating rule "+s.stringify(t)),!1}}},720:function(t,n,e){t.exports=function(t){t.registerDependency("sources/browser_id",e(2753)),t.registerVisitorProfileProvider(e(3613)),t.registerVisitorProfileProvider(e(4698)),t.registerAudienceMatcher("browser_version",e(7742))}},7742:function(t,n,e){var i=e(8984).G;t.exports={fieldsNeeded:["browserVersion","browserId"],match:function(t,n){var e=n.value,r=t.browserId,o=t.browserVersion;if(0===e.indexOf(r)){var a=e.substr(r.length);return 0===i(o,a)}return!1}}},3613:function(t){t.exports={provides:"browserId",shouldTrack:!0,isSticky:!0,getter:["sources/browser_id",function(t){return t.getId()}]}},4698:function(t){t.exports={provides:"browserVersion",getter:["sources/browser_id",function(t){return t.getVersion()}]}},2753:function(t,n,e){var i=e(9338);n.getId=function(){return i.get().browser.id},n.getVersion=function(){return i.get().browser.version}},6352:function(t,n,e){t.exports=function(t){t.registerVisitorProfileProvider(e(5506)),t.registerAudienceMatcher("campaign",e(4405))}},4405:function(t,n,e){var i=e(8269);t.exports={fieldsNeeded:["campaign"],match:function(t,n){return i.hasMatch(n.value,n.match,t.campaign)}}},5506:function(t,n,e){var i=e(5766);t.exports={provides:"campaign",shouldTrack:!0,isSticky:!0,getter:[function(){return i.getQueryParamValue("utm_campaign")}]}},8039:function(t,n,e){var i=e(1167),r=e(7136),o=e(9908),a=e(1004),u=e(4029),c=e(1928);n.getCmabPredictionUrl=function(){return"https://prediction.cmab.optimizely.com/predict"},n.getCmabPredictionUrlForExperiment=function(t){return t?n.getCmabPredictionUrl()+"/"+t:""},n.createPayload=function(t,n){var e=i.map(t.variations,"id"),r=c.getVisitorCmabAttributesForExperiment(t),o=c.getDcpCustomerIds(),a=c.getDcpServiceId();return{instances:[{visitorId:u.getCurrentId(),experimentId:t.id,cmabUUID:n,variationIds:e,attributes:r,dcpCustomerIds:o,dcpServiceId:a}]}},n.parseApiResponse=function(t){var n=null;try{n=r.parse(t)}catch(e){return a.error("CMAB API / Error parsing response:",e),null}return n&&n.predictions&&0!==n.predictions.length?n.predictions[0].variation_id.toString():(a.debug("CMAB API / No predictions found in API response",n),null)},n.validateVariationId=function(t,n){return t&&i.find(n.variations,{id:t})?(a.debug("CMAB API / Variation ID:",t,"from API response found in experiment:",n.id),t):(a.debug("CMAB API / Variation ID:",t,"from API response not found in experiment:",n.id),null)},n.handleCmabApiResponse=function(t,e){if(200!==t.status)return a.error("CMAB API / API call failed with status:",t.status,t.statusText),null;a.debug("CMAB API / API call successful:",t.responseText);var i=n.parseApiResponse(t.responseText);return n.validateVariationId(i,e)},n.makeSyncApiCallWithXHR=function(t,e){a.debug("CMAB API / SYNC / Making a synchronous API call to get variation.");try{var i=n.createPayload(t,e),o=n.getCmabPredictionUrlForExperiment(t.id),u=new XMLHttpRequest;return u.open("POST",o,!1),u.send(r.stringify(i)),n.handleCmabApiResponse(u,t)}catch(c){return a.error("CMAB API / SYNC / API call encountered an error:",c),null}},n.makeAsyncApiCall=function(t,e){a.debug("CMAB API / ASYNC / Making an asynchronous API call to get variation.");var i=n.createPayload(t,e),r=n.getCmabPredictionUrlForExperiment(t.id);return o.request({url:r,contentType:"application/json",method:"POST",data:i})}},1479:function(t,n,e){var i=e(1004),r=e(1928),o=e(8039),a=e(3911);n.isCmabEnabled=function(){return!0},n.isExperimentSyncApiEnabled=function(t){return!0},n.defaultToSnippetBucketing=function(t,n,e){i.debug("CMAB / Defaulting to snippet bucketing with variation:",n,"for experiment:",t.id),r.setCmabVariationDataInVisitorStore(t,n,e)},n.processCmabExperiment=function(t,e){if(!n.isCmabEnabled())return i.debug("CMAB / Feature flag is disabled. Defaulting to snippet bucketing with variation:",e,"for experiment:",t.id),e;if(i.debug("CMAB / Feature flag is enabled. Processing CMAB for experiment:",t.id),r.activateTimeoutForNonBucketedCmabExperiments(t),!r.isCmabExperiment(t))return e;var u=r.getCmabVariationDataFromVisitorStore(t);if(!r.isCmabTimeout(t,u))return u.variationId;a.startCmabApiCallPerformanceTimer(t.id);var c=null,s=r.generateCmabUUID();if(n.isExperimentSyncApiEnabled(t))try{return(c=o.makeSyncApiCallWithXHR(t,s))?(r.setCmabVariationDataInVisitorStore(t,c,s),a.endCmabApiCallPerformanceTimer(t.id),c):(n.defaultToSnippetBucketing(t,e,s),a.endCmabApiCallPerformanceTimer(t.id),e)}catch(f){return i.error("CMAB API / SYNC / API call failed with error:",f),n.defaultToSnippetBucketing(t,e,s),a.endCmabApiCallPerformanceTimer(t.id),null}return o.makeAsyncApiCall(t,s).then((function(u){return(c=o.handleCmabApiResponse(u,t))?(i.debug("CMAB API / ASYNC / Variation:",c,"for experiment:",t.id),r.setCmabVariationDataInVisitorStore(t,c,s),a.endCmabApiCallPerformanceTimer(t.id),c):(n.defaultToSnippetBucketing(t,e,s),a.endCmabApiCallPerformanceTimer(t.id),e)}),(function(r){return i.error("CMAB API / ASYNC / API call failed with error:",r),n.defaultToSnippetBucketing(t,e,s),a.endCmabApiCallPerformanceTimer(t.id),null})),n.defaultToSnippetBucketing(t,e,s),a.endCmabApiCallPerformanceTimer(t.id),e},n.getCmabUUIDAndUpdateSessionTimeout=function(t,n){var e=r.getCmabUUIDFromVisitorStore(t,n);return r.updateCmabTimeoutInVisitorStore(t,n),e}},3911:function(t,n,e){e(850),e(1004);n.startCmabApiCallPerformanceTimer=function(t){0},n.endCmabApiCallPerformanceTimer=function(t){0}},1928:function(t,n,e){var i=e(1167),r=e(1925),o=e(7136),a=e(1353),u=e(7432),c=e(4029),s=e(1004),f=e(2432),l=e(3786),d=a.get("stores/visitor"),v=a.get("stores/plugins"),h=a.get("stores/global");n.generateCmabUUID=function(){return u.generate()},n.getCmabLayerIdFromExperiment=function(t){return t.experimentMetadata&&t.experimentMetadata.layerId||t.id},n.isCmabExperiment=function(t){var n=t.experimentMetadata&&t.experimentMetadata.allocationPolicy;return n?n===f.AllocationPolicyEnum.CMAB:(s.debug("No allocation policy found in metadata for experiment:",t.id),!1)},n.isCmabTimeout=function(t,e){if(!n.isCmabVariationStorageDataValid(e))return s.debug("CMAB / Timeout CMAB Storage Variation Data is invalid"),!0;var r=e.variationId;return i.find(t.variations,{id:r})?n.hasSessionOrAbsoluteTimeoutOccurred(e)?(s.debug("CMAB / Timeout Session or absolute timeout occurred:",e.cmabUUID),!0):(s.debug("CMAB / No timeout happened for:",e.cmabUUID),!1):(s.debug("CMAB / Timeout Variation ID:",r,"not found in experiment:",t.id),!0)},n.hasSessionOrAbsoluteTimeoutOccurred=function(t){if(!n.isCmabVariationStorageDataValid(t))return s.debug("CMAB / Timeout CMAB Storage Variation Data is invalid"),!0;var e=(new Date).getTime();new Date(t.stSessionTimeout).getTime();return e-new Date(t.stAbsoluteTimeout).getTime()>864e5},n.isCmabVariationStorageDataValid=function(t){if(!t)return!1;for(var n=["variationId","visitorId","cmabUUID","stSessionTimeout","stAbsoluteTimeout","userAttributeHash"],e=0;e<n.length;e++){var i=n[e];if(!t[i])return s.debug("CMAB / Storage data not found: "+i+" is missing"),!1}return!0},n.activateTimeoutForNonBucketedCmabExperiments=function(t){var e=n.getCmabLayerIdFromExperiment(t),r=t.id;s.debug("CMAB / Visitor is bucketed into experiment id:",r+" from layer id:",e);var o=c.getContextualMabMap();if(o&&o[e]){var a=o[e];s.debug("CMAB / All CMAB experiments found for the layer id:",e,"are:",a),s.debug("CMAB / Excluding the currently bucketed experiment id: ",r," from all CMAB experiments found for the current layer id: ",e);var u=i.omit(a,r);u=i.omitBy(u,(function(t){return t.isTimeout})),s.debug("CMAB / Non-bucketed CMAB experiments which will be timed out:",u),i.forEach(u,(function(t,n){t.isTimeout=!0,c.updateContextualMabMap(e,n,t)})),c.persistContextualMabMap()}else s.debug("CMAB / No CMAB experiments found for the current layer id:",e)},n.getCmabUUIDFromVisitorStore=function(t,n){if(!n||!t)return null;var e=c.getContextualMabMap();return e&&e[t]&&e[t][n]?e[t][n].cmabUUID:null},n.updateCmabTimeoutInVisitorStore=function(t,e){var i;if(!e||!t)return null;var r=c.getContextualMabMap();if(null==r||null==(i=r[t])?void 0:i[e]){var o=r[t][e];o.isTimeout||n.hasSessionOrAbsoluteTimeoutOccurred(o)||(o.stSessionTimeout=(new Date).toISOString(),c.updateContextualMabMap(t,e,o),c.persistContextualMabMap())}},n.getCmabVariationDataFromVisitorStore=function(t){var e,i=n.getCmabLayerIdFromExperiment(t),r=c.getContextualMabMap();if(!(null==r||null==(e=r[i])?void 0:e[t.id]))return s.debug("CMAB / No CMAB store found for experiment:",t.id),null;s.debug("CMAB / CMAB store found for experiment:",t.id);var o=r[i][t.id];return s.debug("CMAB / Contextual MAB Variation Data:",o),o},n.setCmabVariationDataInVisitorStore=function(t,e,i){s.debug("CMAB / Setting CMAB store for experiment:",t.id+" with variation:",e+" and cmabUUID:",i);var r=(new Date).toISOString(),o=n.getCmabLayerIdFromExperiment(t),a=n.getVisitorAttributesHash(t),u={variationId:e,visitorId:c.getCurrentId(),cmabUUID:i,stSessionTimeout:r,stAbsoluteTimeout:r,userAttributeHash:a,isTimeout:!1};c.updateContextualMabMap(o,t.id,u),c.persistContextualMabMap()},n.getStringifiedValue=function(t){if("string"==typeof t)return t;var n="";try{n=o.stringify(t)}catch(e){s.error("CMAB / Failed to stringify value for attributes:",t,e)}return n},n.getVisitorCmabAttributesForExperiment=function(t){var e,r=[],o=v.getAllPlugins(f.PluginTypes.audienceMatchers);if(!(null==t||null==(e=t.experimentMetadata)?void 0:e.cmabAttributes))return r;var a=t.experimentMetadata.cmabAttributes,u=a.customAttributes,c=a.standardAttributes;return i.forEach(u,(function(t){var e,i=(null==(e=d.getAttribute(["custom",t.id]))?void 0:e.value)||"";i=n.getStringifiedValue(i),r.push({id:t.id,type:t.type,value:i,client_api_name:t.clientApiName})})),i.forEach(c,(function(t){var e,i,a=(null==(e=o[t.id])||null==(i=e.fieldsNeeded)?void 0:i[0])||t.id,u=d.getAttribute(a)||"";u=n.getStringifiedValue(u),r.push({id:t.id,type:t.type,value:u})})),s.debug("CMAB / Current Visitor CMAB Attributes for Experiment:",t.id,"are:",r),r},n.generateAttributesHash=function(t){return r.hashToHex(r.toByteString(o.stringify(t)),r.Seed.BEHAVIOR_EVENT)},n.getVisitorAttributesHash=function(t){var e=n.getVisitorCmabAttributesForExperiment(t);return n.generateAttributesHash(e)},n.hasAttributesChanged=function(t,e){var i=n.getVisitorAttributesHash(t);return i!==e.userAttributeHash&&(s.debug("CMAB / User attributes hash has changed from:",e.userAttributeHash," to ",i),!0)},n.getDcpCustomerIds=function(){var t=h.getDCPKeyfieldLocators(),n=c.getCurrentId();return l.getCurrentAliases(t,n)},n.getDcpServiceId=function(){return h.getDCPServiceId()}},7365:function(t,n,e){t.exports=function(t){t.registerVisitorProfileProvider(e(8236));var n=e(97);t.registerAudienceMatcher("custom_attribute",n),t.registerAudienceMatcher("custom_dimension",n)}},97:function(t,n,e){var i=e(1167),r=e(8269);n.match=function(t,n){var e;return t.custom&&(e=t.custom[n.name]),i.isObject(e)&&(e=e.value),r.hasMatch(n.value,n.match,e)}},8236:function(t,n,e){var i=e(1167),r=e(2432),o=e(1004),a=e(1353).get("stores/dimension_data");t.exports={provides:"custom",attributionType:r.AttributionTypes.LAST_TOUCH,restorer:function(t){return i.reduce(t,(function(t,n,e){var r=e,u=a.getByApiName(e),c=a.getById(e);return i.isObject(n)?(!n.id&&u&&(c=u,r=u.id,i.extend(n,{id:c.segmentId||c.id})),!n.name&&c&&c.apiName&&(n.name=c.apiName),n.id||c||o.warn("Unable to determine ID for custom attribute:",e,"; segmentation is disabled."),t[r]=n,t):(o.error('Unable to restore custom attribute "'+e+'" because value is not an object'),t)}),{})},shouldTrack:!0}},3786:function(t,n,e){var i=e(1167),r=e(5766),o=e(9430),a=e(1004),u=e(6670),c="cookie",s="js_variable",f="query_param",l="uid";n.getCurrentAliases=function(t,n){var e={};return i.each(t,(function(t){if(!t.is_optimizely){var d=t.dcp_datasource_id,v=t.type,h=t.name||"";if(d){var p=null;switch(v){case c:p=o.get(h);break;case s:try{p=u.getGlobal(h)}catch(g){a.warn("Failed getting global DCP keyfieldLocator:",h)}break;case f:p=r.getQueryParamValue(h);break;case l:p=n}(i.isNumber(p)||i.isString(p))&&(e[d]=p)}else a.error("DCP / No DCP datasource id specified")}})),e}},5647:function(t,n,e){t.exports=function(t){t.registerDependency("sources/device",e(6166)),t.registerVisitorProfileProvider(e(1814)),t.registerAudienceMatcher("device",e(6405))}},6405:function(t){t.exports={fieldsNeeded:["device"],match:function(t,n){return t.device===n.value}}},1814:function(t){t.exports={provides:"device",shouldTrack:!0,isSticky:!0,getter:["sources/device",function(t){return t.getDevice()}]}},6166:function(t,n,e){var i=e(9338);n.getDevice=function(){var t=i.get().device;return"unknown"!==t.model?t.model:"tablet"===t.type?"tablet":t.isMobile?"mobile":"desktop"}},324:function(t,n,e){t.exports=function(t){t.registerVisitorProfileProvider(e(542)),t.registerAudienceMatcher("device_type",e(8577))}},8577:function(t){t.exports={fieldsNeeded:["device_type"],match:function(t,n){return t.device_type===n.value}}},542:function(t,n,e){var i=e(9338);t.exports={provides:"device_type",shouldTrack:!0,isSticky:!0,getter:[function(){var t=i.get().device;switch(t.type){case"mobile":return"phone";case"tablet":case"desktop_laptop":return t.type;default:return"other"}}]}},7735:function(t,n,e){t.exports=function(t){t.registerVisitorProfileProvider(e(1311)),t.registerAudienceMatcher("query",e(2255))}},2255:function(t,n,e){var i=e(1167),r=e(8269);n.fieldsNeeded=["queryParams"],n.match=function(t,n){var e=i.find(t.queryParams,(function(t){return t[0]===n.name}));return r.hasMatch(n.value,n.match,e?e[1]:null)}},1311:function(t,n,e){var i=e(5766);t.exports={provides:"queryParams",getter:[function(){return i.getQueryParams()}]}},1106:function(t,n,e){t.exports=function(t){t.registerVisitorProfileProvider(e(5940)),t.registerAudienceMatcher("referrer",e(5585))}},5585:function(t,n,e){var i=e(8390);n.fieldsNeeded=["referrer"],n.match=function(t,n){return null!==t.referrer&&i(t.referrer,n)}},5940:function(t,n,e){var i=e(4171),r=e(4744);t.exports={provides:"referrer",shouldTrack:!0,isSticky:!0,getter:[function(){var t=r.getReferrer()||i.getReferrer();return""===t&&(t=null),t}]}},1198:function(t,n,e){t.exports=function(t){t.registerVisitorProfileProvider(e(6290)),t.registerAudienceMatcher("source_type",e(7727))}},7727:function(t,n,e){var i=e(8269);n.fieldsNeeded=["source_type"],n.match=function(t,n){return i.hasMatch(n.value,n.match,t.source_type)}},6290:function(t,n,e){var i=e(5766),r=e(4171),o=e(4744),a=e(5623),u=["google\\.\\w{2,3}(\\.\\w{2,3})?/(search|url)","bing\\.\\w{2,3}(\\.\\w{2,3})?/(search|url)","yahoo\\.\\w{2,3}(\\.\\w{2,3})?/search","baidu\\.\\w{2,3}(\\.\\w{2,3})?/","https://(www)?\\.google\\..*?/?$","https://search\\.yahoo\\..*?/?$","https://(www)?\\.bing\\..*?/?$"];t.exports={provides:"source_type",shouldTrack:!0,isSticky:!1,getter:[function(){return function(t,n){var e,c=t(),s=function(){if(i.getQueryParamValue("utm_source")||i.getQueryParamValue("utm_campaign")||i.getQueryParamValue("gclid")||i.getQueryParamValue("otm_source"))return"campaign";for(var t=o.getReferrer()||r.getReferrer(),n=0;n<u.length;n++){var e=u[n];if(t.match(e))return"search"}return t&&a.guessDomain(t)!==a.guessDomain(i.getUrl())?"referral":"direct"}();e=s,(!c||"direct"!==e)&&n(s)}}]}},4771:function(t,n,e){t.exports=function(t){t.registerVisitorProfileProvider(e(5116)),t.registerVisitorProfileProvider(e(9259)),t.registerAudienceMatcher("time_and_day",e(245))}},245:function(t,n,e){var i=e(7441);n.fieldsNeeded=["currentTimestamp"],n.match=function(t,n){return i.test(n.value,new Date(t.currentTimestamp))}},5116:function(t,n,e){var i=e(5242);t.exports={provides:"currentTimestamp",shouldTrack:!0,isLazy:!0,getter:[function(){return i.now()}]}},9259:function(t){t.exports={provides:"offset",shouldTrack:!0,isLazy:!0,getter:[function(){return(new Date).getTimezoneOffset()}]}},7441:function(t,n,e){var i=e(1167);function r(t){var n=t.split(":");if(2!==n.length)throw new Error("optly.timeAndDayInterval.timeStringToMinutes: Invalid time string "+t);return 60*parseInt(n[0],10)+parseInt(n[1],10)}n.test=function(t,n){var e=function(t){var n=t.split("_");if(3!==n.length)throw new Error("Invalid time and day string "+t);var e=n[2].split(",");return{start_time:n[0],end_time:n[1],days:e}}(t),o=r(e.start_time),a=r(e.end_time),u=60*n.getHours()+n.getMinutes(),c=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][n.getDay()];return u>=o&&u<=a&&i.includes(e.days,c)}},5487:function(t,n,e){t.exports=function(t){t.registerVisitorProfileProvider(e(1990))}},1990:function(t){t.exports={provides:"visitorId",getter:["stores/visitor_id",function(t){return t.getRandomId()}]}},6904:function(t,n,e){var i,r=e(7136),o=e(1004),a=e(850),u=e(8953),c=e(4250),s=e(6670),f=e(478),l=e(2167),d=e(3961),v=e(6665),h=e(1353),p=e(4184),g=h.get("stores/tracker_optimizely"),m=h.get("stores/rum"),_=h.get("stores/integration_settings"),y="google_analytics_4",w="gtag",b="dataLayer",E="optimizely_decision",I="experience_impression",A=[],T=function(){var t=g.canSend();if(o.debug("GA4 Integration: Got canSend:",t),t){for(var n=[];A.length>0;){o.debug("GA4 Integration: decisionEventQueue length:",A.length);var e=A.shift(),r=e.firstPartyData,a=e.customEventData;o.debug("GA4 Integration: calling track with decision data:",{firstPartyData:r,customEventData:a}),i?n.push(k(r,a)["catch"]((function(t){o.warn("Tracker for GTM ",y,"failed:",t)}))):n.push(S(r,a)["catch"]((function(t){o.warn("Tracker for ",y,"failed:",t)})))}return Promise.all(n)}return o.debug("GA4 Integration: Not sending events (holding)"),Promise.resolve()},S=function(t,n){return u.pollFor((function(){return function(t){var n=t.getGlobal(w);return n||null}(s)}),200,50).then((function(e){o.log("GA4 Integration: gtag finally exists, sending now."),m.getSampleRum()&&a.timeEnd("gtagReady"),o.debug("GA4 Integration: calling ga4 with data: "+r.stringify(t)),e("event",I,t),o.debug("GA4 Integration: calling ga4 with custom event data: "+r.stringify(n)),e("event",E,n)}))};var k=function(t,n){var e=s.getGlobal(b);o.debug("GA4 Integration: found dataLayer object "+e),e||(o.debug("GA4 Integration: dataLayer object "+b+" is empty, initializing it"),s.setGlobal(b,[]),e=s.getGlobal(b)),o.log("GA4 Integration: attempting push to "+b);try{var i=Object.assign({event:I},t);o.debug("GA4 Integration: pushing data to GTM: "+r.stringify(i)),e.push(i);var a=Object.assign({event:E},n);o.debug("GA4 Integration: pushing custom data to GTM: "+r.stringify(a)),e.push(a)}catch(u){o.warn("GA4 Integration: Push to "+b+" failed: "+u)}return Promise.resolve()},R={preRedirectPolicy:c.PreRedirectPolicies.PERSIST_BEFORE_REDIRECT,postRedirectPolicy:c.PostRedirectPolicies.TRACK_IMMEDIATELY,nonRedirectPolicy:c.NonRedirectPolicies.TRACK_IMMEDIATELY,trackLayerDecision:function(t){var n=t.integrationSettings;if(!n||!n[y])return o.debug("GA4 Integration: did not find vendor "+y+" in integration settings, exiting"),d.resolve();if(!t.experimentId||!t.variationId)return o.debug("GA4 Integration: empty experiment or variation ID, exiting"),d.resolve();var e=_.get(y)||{};i="on"===e.global_is_use_gtm||"on"===n[y].is_using_gtm,o.debug("GA4 Integration: is using GTM: "+i);var r,a,u,c="equal_priority"===t.layerPolicy;return o.debug("GA4 Integration: is personalization campaign: "+c),c?(u="OPT-"+t.layerId+"("+t.layerName+")-"+t.experimentId+"("+t.experimentName+")-"+t.variationId+"("+t.variationName+")",a={Campaign:t.layerName+" ("+t.layerId+")",Variation:t.variationName+" ("+t.variationId+")",Holdback:t.isLayerHoldback}):(u="OPT-"+t.experimentId+"("+t.experimentName+")-"+t.variationId+"("+t.variationName+")",a={Experiment:t.experimentName+" ("+t.experimentId+")",Variation:t.variationName+" ("+t.variationId+")",Holdback:t.isLayerHoldback}),r={exp_variant_string:u,Holdback:t.isLayerHoldback},o.debug("GA4 Integration: pushing decision data to queue:",{firstPartyData:r,customEventData:a}),A.push({firstPartyData:r,customEventData:a}),T()},serializeSettings:r.stringify,deserializeSettings:r.parse};t.exports=function(t){t.registerAnalyticsTracker("google_analytics_4",R),f.on({filter:{type:l.TYPES.ANALYTICS,name:"sendEvents"},handler:function(){v.dispatch(p.SET_TRACKER_SEND_EVENTS,!0),T()}}),f.on({filter:{type:l.TYPES.ANALYTICS,name:"maybeSendEvents"},handler:function(){T()}})}},8251:function(t,n,e){var i=e(1167),r=e(7136),o=e(1004),a=e(5190),u=e(8953),c=e(4744),s=e(4250),f=e(5623),l=e(6670),d="mixpanel",v=255,h="mixpanel",p=e(9383),g="holdback",m="Campaign Decided: ",_="Experiment Decided: ";function y(t,n,e){var i;if(""===t)i=n;else{var r=e-n.length;if(t.length>r){var o=Math.min(t.length,r);i=(t=t.substring(0,o))+n}else i=t+" "+n}return i}function w(t,n){this.get_config("save_referrer")&&(o.log("Calling register_once to potentially update $initial_referrer to:",t),this.register_once({$initial_referrer:t||"$direct",$initial_referring_domain:n||"$direct"}))}var b={preRedirectPolicy:s.PreRedirectPolicies.PERSIST_BEFORE_REDIRECT,postRedirectPolicy:s.PostRedirectPolicies.TRACK_IMMEDIATELY,nonRedirectPolicy:s.NonRedirectPolicies.TRACK_IMMEDIATELY,trackLayerDecision:function(t){var n=t.integrationSettings;if(n&&n[h]&&t.experimentId&&t.variationId){var e={id:t.layerId,name:t.layerName,policy:t.layerPolicy,integrationStringVersion:t.integrationStringVersion,experiments:[]},r=t.isLayerHoldback;if(!(e.integrationStringVersion&&2===e.integrationStringVersion&&a.isSingleExperimentPolicy(t.layerPolicy)&&r))return function(t,n,e,r){return(s=50,h=200,u.pollFor((function(){return l.getGlobal(d)}),h,s)).then((function(u){o.log("Mixpanel variable found on window"),function(t){var n=c.getExperimentAndVariation(),e=c.getReferrer();if(n){var i;e&&(o.log("effectiveReferrer found, updating Mixpanel $referrer to:",e),i=f.guessDomain(e,!0),t.push(["register",{$referrer:e,$referring_domain:i}])),t.push((function(){w.call(this,e,i)}))}}(u);var s=p.formatNamesAndIdsForAnalytics(t,n,e,!1);!function(t,n){t.push(["register",n]),o.log("Mixpanel super property registered with:",n)}(u,function(t,n,e,r,o){var u=r-2-2,c={};i.each(t,(function(t,e){var i=n[e],o="layer"===e?u:r;c[e]=y(t,i,o)}));var s={};s[c.experiment]=c.variation,a.isSingleExperimentPolicy(o)||(s[c.layer]=c.experiment,s[c.experiment]=e?g:c.variation,c.holdback="HB ["+c.layer+"]",s[c.holdback]=e);return s}(s.names,s.idStrings,r,v,t.policy)),function(t,n,e){var i,r,u;a.isSingleExperimentPolicy(n)?(u=235,r=y(e.names.experiment,e.idStrings.experiment,u),i=_+r):(u=237,r=y(e.names.layer,e.idStrings.layer,u),i=m+r);t.push(["track",i]),o.log("Optimizely Campaign Decision tracked in Mixpanel")}(u,t.policy,s)}));var s,h}(e,{id:t.experimentId,name:t.experimentName,audienceIds:[],variations:[]},{id:t.variationId,name:t.variationName,actions:[]},r)["catch"]((function(t){o.warn("Tracker for",h,"failed:",t)}))}},serializeSettings:r.stringify,deserializeSettings:r.parse};t.exports=function(t){t.registerAnalyticsTracker("mixpanel",b)}},3471:function(t,n,e){var i=e(1167),r=e(1497),o=e(7432),a=e(4184),u=e(4594).v,c=e(7136),s=e(1004),f=e(4250),l=e(4029),d=e(6670),v=e(9908),h=e(1353),p=(e(4171),e(478)),g=e(2167),m=e(6665),_=h.get("stores/global"),y=h.get("stores/tracker_optimizely"),w=e(1479),b=n.Error=u("OptimizelyTrackerError"),E="client_activation",I="campaign_activated",A="view_activated",T={revenue:{validate:M,sanitize:Math.floor,excludeFeature:!0},quantity:{validate:M,sanitize:Math.floor,excludeFeature:!0},value:{validate:M,sanitize:i.identity}},S="AUTO",k=[function(){return function(t){L(function(t){var n=i.extend({entity_id:t.pageId,key:t.pageApiName,timestamp:t.timestamp,uuid:t.eventId,type:A},D(t.eventTags));return n}(t),t.userFeatures,W(t.layerStates))}}],R=[function(){return function(t){!function(t){var n=i.isNull(_.getAnonymizeIP())?void 0:_.getAnonymizeIP(),e={account_id:t.accountId,anonymize_ip:n,client_name:t.clientName,client_version:t.clientVersion,project_id:t.projectId,visitors:[]};e.revision=t.revision,e.enrich_decisions=!0;var r={session_id:V(t.sessionId),visitor_id:t.visitorId,attributes:[],snapshots:[]},o=W(t.layerStates);m.dispatch(a.REGISTER_TRACKER_VISITOR,{data:e,visitor:r,decisions:o}),K()}(t),L(function(t){return{entity_id:null,type:E,uuid:t.eventId,timestamp:t.timestamp}}(t),t.userFeatures,W(t.layerStates))}}],C=[function(){return function(t){var n;L((n=t,i.extend({entity_id:n.eventEntityId,key:n.eventApiName,timestamp:n.timestamp,uuid:n.eventId,type:n.eventCategory,properties:O(n.eventProperties)},D(n.eventTags))),t.userFeatures,W(t.layerStates))}}],N=[function(){return function(t){var n;L((n=t,i.extend({entity_id:n.eventEntityId,key:n.eventApiName,timestamp:n.timestamp,uuid:n.eventId,type:n.eventCategory},D(n.eventTags))),t.userFeatures,W(t.layerStates))}}];function D(t){var n=function(t,n,e){try{x(n),t[e]=n}catch(i){r.emitError(new b("Bad value for eventTags["+e+"]: "+i.message))}return t},e=i.keys(T),o=i.omit(t,e),a=i.pick(t,e),u=i.reduce(o,n,{}),c=i.reduce(a,(function(t,e,i){var o=T[i];o.excludeFeature||n(u,e,i);try{o.validate(e),t[i]=o.sanitize(e),u[i]=t[i]}catch(a){r.emitError(new b("Bad value for eventMetrics["+i+"]: "+a.message))}return t}),{});return c.tags=u,c}function O(t){if(i.keys(t).length<=15)return t;var n={},e={},r=0;for(var o in t)r<15?n[o]=t[o]:e[o]=t[o],r++;return s.log("Custom event has more than 15 properties. The following properties were not pushed",e),n}function x(t){if(null==t)throw new Error("Feature value is null");if("object"==typeof t){var n;try{n=c.stringify(t)}catch(e){}throw new Error('Feature value is complex: "'+n)}}function M(t){if(null==t)throw new Error("Metric value is null");if(!i.isNumber(t))throw new Error("Metric value is not numeric")}function P(t){return i.reduce(t,(function(t,n){try{x(n.value),t.push({entity_id:n.id||null,key:n.name,type:n.type,value:n.value})}catch(e){s.warn("Error evaluating user feature",n,e)}return t}),[])}function L(t,n,e){m.dispatch(a.REGISTER_TRACKER_EVENT,{event:t,decisions:e}),U(n),K()}function U(t){var n=P(t);m.dispatch(a.UPDATE_TRACKER_VISITOR_ATTRIBUTES,{attributes:n})}function V(t){return S}function F(){if(y.canSend()){var t=y.hasEventsToSend(),n=y.hasPreviousBatchesToSend();t||n?(n&&(i.each(y.getPreviousBatches(),B),m.dispatch(a.RESET_TRACKER_PREVIOUS_BATCHES)),t&&(m.dispatch(a.FINALIZE_BATCH_SNAPSHOT),B(y.getEventBatch()),m.dispatch(a.RESET_TRACKER_EVENTS))):s.debug("Not sending events because there are no events to send")}else s.debug("Not sending events (holding)")}function B(t){s.debug("Sending ticket:",t);var n=o.generate(),e={url:"https://logx.optimizely.com/v1/events",method:"POST",data:z(t)};y.shouldUseBeacon()?v.sendBeacon(e,n):v.retryableRequest(e,n)}function z(t){return i.extend({},i.pick(t,["account_id","anonymize_ip","client_name","client_version","enrich_decisions","project_id","revision"]),{visitors:i.map(t.visitors,G)})}function G(t){return{visitor_id:t.visitor_id,session_id:S,attributes:i.map(t.attributes,j),snapshots:i.map(t.snapshots,q)}}function j(t){return $(t,{entity_id:"e",key:"k",type:"t",value:"v"})}function q(t){var n=t.events;return n=function(t){var n=i.reduce(t,(function(t,n){var e;if(t[e=n.type===A&&i.isEmpty(n.tags)&&i.isEmpty(i.pick(n,i.keys(T)))?n.type:n.uuid]){var r=t[e].timestamp;n.timestamp>r&&(r=n.timestamp),t[e]=i.extend({},t[e],{key:t[e].key+"-"+(n.key||""),entity_id:t[e].entity_id+"-"+n.entity_id,timestamp:r})}else t[e]=n;return t}),{});return i.values(n)}(n),{activationTimestamp:_.getActivationTimestamp(),decisions:i.map(t.decisions,H),events:i.map(n,Y)}}function H(t){var n=$(t,{campaign_id:"c",experiment_id:"x",is_campaign_holdback:"h",variation_id:"v"});return n.m=t.metadata?$(t.metadata,{cmab_uuid:"cmab_uuid"}):{},n}function Y(t){return t.key===I&&(t.type=I,delete t.key),$(t,{entity_id:"e",key:"k",quantity:"q",revenue:"$",tags:"a",properties:"p",timestamp:"t",uuid:"u",value:"v",type:"y"})}function $(t,n){return i.reduce(t,(function(t,e,i){return i in n&&(t[n[i]||i]=e),t}),{})}function K(){if(y.shouldBatch()){if(!y.isPolling()){d.setTimeout((function t(){F(),y.isPolling()&&d.setTimeout(t,1e3)}),1e3),m.dispatch(a.SET_TRACKER_POLLING,!0),d.setTimeout((function(){m.dispatch(a.SET_TRACKER_BATCHING,!1),m.dispatch(a.SET_TRACKER_POLLING,!1)}),1e4)}}else F()}function W(t){return i.map(t,(function(t){var n=w.getCmabUUIDAndUpdateSessionTimeout(t.layerId,t.decision.experimentId),e=n?{cmab_uuid:n}:{};return{campaign_id:t.layerId,experiment_id:t.decision.experimentId,variation_id:t.decision.variationId,is_campaign_holdback:t.decision.isLayerHoldback,metadata:e}}))}function X(){var t=y.getPersistableState();if(t)try{s.debug("Persisting pending batch:",t),l.persistTrackerOptimizelyData(t),m.dispatch(a.SET_TRACKER_DIRTY,!1)}catch(n){s.debug("Failed to persist pending batch:",n)}}var J={trackLayerDecision:function(t){t.isLayerConcluded?s.debug("Layer is already concluded, skipping decision tracking"):t.timing===f.TrackLayerDecisionTimingFlags.postRedirectPolicy?function(t){var n=P(t.userFeatures),e={account_id:t.accountId,anonymize_ip:t.anonymizeIP,client_name:t.clientName,client_version:t.clientVersion,project_id:t.projectId,visitors:[{session_id:V(t.sessionId),visitor_id:t.visitorId,attributes:n,snapshots:[{decisions:[{campaign_id:t.layerId,experiment_id:t.experimentId,variation_id:t.variationId,is_campaign_holdback:t.isLayerHoldback}],events:[{uuid:t.decisionId,entity_id:t.layerId,timestamp:t.timestamp,type:I}]}]}]};m.dispatch(a.REGISTER_PREVIOUS_BATCH,e),K()}(t):function(t){var n={entity_id:t.layerId,type:I,uuid:t.decisionId,timestamp:t.timestamp};m.dispatch(a.REGISTER_TRACKER_DECISION,{decisionEvent:n,decisions:W(t.layerStates)}),U(t.userFeatures),K()}(t)},preRedirectPolicy:f.PreRedirectPolicies.PERSIST_BEFORE_AND_TRACK_DURING_REDIRECT,postRedirectPolicy:f.PostRedirectPolicies.TRACK_AFTER_SYNC,nonRedirectPolicy:f.NonRedirectPolicies.TRACK_IMMEDIATELY,onPageActivated:k,onClientActivation:R,onClickEvent:N,onCustomEvent:C};t.exports=function(t){t.registerAnalyticsTracker("optimizely",J),p.on({filter:{type:g.TYPES.ANALYTICS,name:"sendEvents"},handler:function(){m.dispatch(a.SET_TRACKER_SEND_EVENTS,!0),F()}}),p.on({filter:{type:g.TYPES.ANALYTICS,name:"maybeSendEvents"},handler:function(){F()}}),p.on({filter:{type:g.TYPES.ANALYTICS,name:"holdEvents"},handler:function(){m.dispatch(a.SET_TRACKER_SEND_EVENTS,!1)}}),m.dispatch(a.SET_TRACKER_SEND_EVENTS,!0);var n=p.on({filter:{type:"lifecycle",name:"activated"},handler:function(){y.observe(X),p.off(n)}})}},4445:function(t,n,e){var i=e(4171),r={match:function(t,n){return!!i.querySelector(n.value)}};t.exports=function(t){t.registerViewMatcher("element_present",r)}},1628:function(t,n,e){t.exports=function(t){t.registerViewProvider(e(2848)),t.registerViewMatcher("url",e(1675))}},1675:function(t,n,e){var i=e(8390);t.exports={fieldsNeeded:["url"],match:function(t,n){return i(t.url,n)}}},2848:function(t,n,e){var i=e(5766);t.exports={provides:"url",getter:[function(){return i.getUrl()}]}},7065:function(t,n,e){var i=e(4171),r=e(2432),o=e(478),a=e(7447),u=e(5916),c={token:void 0,setUpObserver:function(){a.createDOMChangedObserver(),this.token=o.on({filter:{type:"viewTrigger",name:"DOMChanged"},handler:function(){u.getViewsAndActivate(r.ViewActivationTypes.DOMChanged)}})},turnOffObserver:function(){o.off(this.token)}};t.exports=function(t){i.isReady()?c.setUpObserver():i.addReadyHandler(c.setUpObserver),t.registerViewTrigger("DOMChanged",c)}},9318:function(t,n,e){var i=e(1167),r=e(4184),o=e(1353),a=e(2432),u=e(478),c=e(6665),s=o.get("stores/history"),f=e(1004),l=e(3961).Promise,d=e(5916),v=e(6670);function h(t){u.emit({type:"viewTrigger",name:"URLChanged",data:{source:t,newURL:v.getHref()}},!0)}t.exports=function(t){var n;n=function(){var t=s.getOriginalPushState().apply(this,arguments);return l.resolve().then((function(){h("pushState")}))["catch"]((function(t){f.error("Error while wrapPushState: ",t)})),t},c.dispatch(r.ENSURE_ORIGINAL_PUSHSTATE),v.getGlobal("history").pushState=n,function(){var t=function(){var t=s.getOriginalReplaceState().apply(this,arguments);return l.resolve().then((function(){h("replaceState")}))["catch"]((function(t){f.error("Error while wrapReplaceState: ",t)})),t};c.dispatch(r.ENSURE_ORIGINAL_REPLACESTATE),v.getGlobal("history").replaceState=t}(),v.addEventListener("popstate",p,!1),v.addEventListener("hashchange",g,!1),u.on({filter:{type:"viewTrigger",name:"URLChanged"},handler:function(){d.getViewsAndActivate(a.ViewActivationTypes.URLChanged)}}),t.registerViewTrigger("URLChanged")};var p=i.partial(h,"popstate"),g=i.partial(h,"hashchange")},1119:function(t,n,e){var i=e(1167),r=e(1353),o=e(478),a=e(2167),u=e(6670),c=r.get("stores/directive"),s="optimizelyPreview",f=function(t){u.getGlobal(s).push(t)};n.initialize=function(t){c.isSlave()&&function(t){var n=!1;if(i.isArray(window.optimizely)&&i.each(window.optimizely,(function(e){i.isArray(e)&&"verifyPreviewProject"===e[0]&&String(e[1])===t&&(n=!0)})),!n)throw new Error("Preview projectId: "+t+" does not match expected")}(t),o.on({filter:{type:a.TYPES.ANALYTICS,name:"trackEvent"},handler:f}),o.on({filter:{type:a.TYPES.LIFECYCLE,name:"viewActivated"},handler:f}),o.on({filter:{type:a.TYPES.LIFECYCLE,name:"layerDecided"},handler:f}),o.on({filter:{type:"error"},publicOnly:!0,handler:f})},n.setupPreviewGlobal=function(){u.getGlobal(s)||u.setGlobal(s,[])},n.pushToPreviewGlobal=function(t){f(t)}},2213:function(t,n,e){var i=e(1167),r=e(7432),o=e(8104),a=e(4047),u=e(5242),c=e(4171),s=e(6665),f=e(9929).DT,l=e(1004),d=e(3793),v=e(3961).Promise,h=e(4029),p=e(6670),g=e(9908),m=e(4184),_=e(2432),y=e(1353),w=y.get("stores/async_request"),b=y.get("stores/client_metadata"),E=y.get("stores/global"),I=y.get("stores/rum"),A=y.get("stores/performance"),T=y.get("stores/xdomain"),S=y.get("stores/view_data"),k=e(9993),R="https://rum.optimizely.com/rum",C="1.0";function N(t){return i.isEmpty(t)?v.resolve():(n=function(){return g.request({url:R,method:"POST",data:t,withCredentials:!0}).then((function(t){return o.resolveRequest("RUM_FIRST_BEACON",t),t}))["catch"]((function(t){throw l.error("POST to client-rum failed:",t),o.rejectRequest("RUM_FIRST_BEACON",t),t}))},(e=w.getPromise("RUM_FIRST_BEACON"))?e.then(n):o.makeAsyncRequest("RUM_FIRST_BEACON",n));var n,e}function D(){try{return!c.querySelector("body")}catch(t){return null}}function O(){var t=p.getGlobal("performance"),n=t?t.timing:{},e=A.getMarks()||{},r=I.getApiData(),o=I.getDOMObservationData(),a=k.get("state").getActiveExperimentIds(),u=I.getFeaturesNeededData(),s=c.parseUri(I.getScriptSrc()),l=I.getRumData()||{},v=l.extras||{};i.assign(v,{apiCalls:r,DOMObservationData:o,paintTimings:M(),activeExperimentIds:a,numPages:S.getNumberOfPages(),snippet:{scheme:s.protocol.slice(0,-1),host:s.host,path:s.pathname},networkInfo:x(),experimental:E.getExperimental(),featuresNeeded:u,beacon:{cjsOnload:!0}});var g=p.getGlobal("Prototype");g&&!i.isUndefined(g.Version)&&(v.prototypeJS=g.Version);var m=!1;m=!0;var _=T.getFrames();_.length&&(v.xdFramesLoaded=_.length);var y={id:I.getRumId(),v:C,project:E.getSnippetId()||E.getProjectId(),navigationTimings:n,userTimings:e,xd:m,apis:i.keys(r),extras:v,sampleRate:l.sampleRate};(function(){var t=f.keys(),n=i.filter(i.map(t,(function(t){var n=h.getStorageKeyFromKey(t);return n?{key:t,isForeign:h.isForeignKey(t),category:n,size:t.length+f.getItem(t).length}:null}))),e=i.reduce(n,(function(t,n){var e=n.key,i=h.getIdFromKey(e);return i?((n.isForeign?t.foreign:t.local)[i]=!0,t):t}),{local:{},foreign:{}}),r=i.chain(n).filter({isForeign:!0}).reduce((function(t,n){return t[n.key.split("_")[0]]=!0,t}),{}).value(),o={local:0,foreign:0},a={local:{},foreign:{}};i.forEach(n,(function(t){var n=t.isForeign?"foreign":"local";o[n]+=t.size,a[n][t.category]||(a[n][t.category]=0),a[n][t.category]+=t.size}));var u={numKeys:f.allKeys().length,sizeKeys:f.allKeys().toString().length,sizeValues:f.allValues().toString().length,idCounts:{local:i.keys(e.local).length,foreign:i.keys(e.foreign).length},foreignOriginCount:i.keys(r).length,byteTotals:o,byteTotalsByCategory:a};return d.estimateStorage().then((function(t){return i.assign(u,{storageEstimate:t})}))})().then((function(t){N(i.assign(y,{lsMetrics:t}))}))}function x(){var t=p.getGlobal("navigator");if(t&&t.connection)return i.pick(t.connection,["downlink","rtt","effectiveType"])}function M(){var t=p.getGlobal("performance");if(t)try{var n=t.getEntriesByType("paint");if(i.isEmpty(n))return;return i.reduce(n,(function(t,n){return t[n.name]=Math.round(n.startTime),t}),{})}catch(e){return}}n.initialize=function(){var t,n=r.generate().replace(/-/g,"");t=Math.random()<.01;var e=function(){var t=c.getCurrentScript();if(t)return t.src}();s.dispatch(m.SET_RUM_DATA,{id:n,RumHost:R,inRumSample:t,src:e,data:{id:n,sync:D(),timebase:u.now(),sampleRate:.01,url:e,extras:{initialDOMState:c.getReadyState()}}})},n.queueBeacons=function(){return I.getSampleRum()?(function(){try{p.getGlobal("requestAnimationFrame")((function(){var t=I.getRumData().timebase;s.dispatch(m.SET_RUM_DATA,{data:{render:u.now()-(t||0)}})}))}catch(t){return}}(),c.isLoaded()?p.setTimeout(O,3e3):p.addEventListener("load",O),new v((function(t,n){p.setTimeout((function(){(function(){!function(){var t={id:I.getRumId(),v:C,account:E.getAccountId(),project:E.getSnippetId()||E.getProjectId(),snippet:E.getSnippetId(),revision:E.getRevision(),clientVersion:b.getClientVersion(),hasSlave:!1,wxhr:!0,extras:{}},n=h.getPersistedBehaviorEventCount(),e=a.getEventCount();t.numBehaviorEvents=e;var r=e-n;i.extend(t.extras,{behaviorEventCountDiff:r,behaviorEventCountDecreased:r<0}),i.assign(t,function(){var t=p.getGlobal("performance");if(!t)return;var n,e=I.getScriptSrc();try{if(e){l.debug("Using derived script src: ",e);var r=t.getEntriesByName(e);r.length>0&&(n=r[0])}if(!n){var o=/\/\/[^.]+\.optimizely\.(com|test)\/(js|api\/client)\/[\d]+\.js/gi;l.debug("Scanning resource timing entries with regex");var a=t.getEntriesByType("resource");n=i.find(a,(function(t){return o.test(t.name)}))}if(n)return i.mapValues(_.ResourceTimingAttributes,(function(t,e){var i=n[e];return"number"==typeof i?Math.round(1e3*(i||0))/1e3:"serverTiming"===e?i||[]:void 0}))}catch(u){return}}(),A.getDurationsFor(i.values(_.RUMPerformanceTimingAttributes))),s.dispatch(m.SET_RUM_DATA,{data:t})}();var t=I.getRumData(),n=A.getMarks()||{};return t.extras=t.extras||{},t.extras.beacon={cjsTimeout:!0},t.userTimings=n,N(t=i.pickBy(t,(function(t){return!i.isUndefined(t)})))})().then(t,n)}),3e3)}))["catch"]((function(t){l.warn("RUM / Error sending data:",t)}))):v.resolve()}},5551:function(t,n,e){function i(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=t[e];return i}function r(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return i(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);if("Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return i(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Object.defineProperty(n,"ee",{value:!0}),n.StickyProcesor=void 0;var o=e(1167),a=e(9993),u=e(7899),c=e(3971),s=e(5594),f=e(5916),l=e(6665),d=e(478),v=e(2167),h=e(4184),p=e(3961).Promise,g=e(4514),m=e(1004),_=e(9430),y=e(7136),w=e(7452),b=e(4029),E=e(1353),I=E.get("stores/action_data"),A=E.get("stores/directive"),T=E.get("stores/view"),S=E.get("stores/view_data"),k=E.get("stores/global"),R=E.get("stores/visitor_id"),C=E.get("stores/layer"),N=E.get("stores/layer_data"),D=E.get("stores/event_data"),O=E.get("stores/visitor_bucketing");function x(t){var n;(null==(n=t.metadata)?void 0:n.visitorData)&&(t.metadata.visitorData.id&&(m.log("API / Setting visitor Id from edge:",t.metadata.visitorData.id),b.setId({randomId:t.metadata.visitorData.id})),function(){var t=V(),n=t.getValue(M.VARIATION_MAP);n&&l.dispatch(h.MERGE_VARIATION_ID_MAP,{variationIdMap:n});var e=t.getValue(M.VISITOR_PROFILE);e&&l.dispatch(h.LOAD_EXISTING_VISITOR_PROFILE,{profile:e.profile||{},metadata:e.metadata||{}})}())}var M={VISITOR_PROFILE:"VPROF",VARIATION_MAP:"VMAP"},P={parse:function(t){if(t.includes("{"))return y.parse(t);for(var n={},e=t.split("_"),i=0;i<e.length;i+=3){var r=e[i],o=e[i+1],a=e[i+2];n[r]||(n[r]={}),n[r][o]||(n[r][o]={}),n[r][o]=a}return n},stringify:function(t){var n=[];for(var e in t)if(t.hasOwnProperty(e))for(var i in t[e])t[e].hasOwnProperty(i)&&(n.push(e),n.push(i),n.push(t[e][i]));return n.join("_")}},L={parse:function(t){if(t.startsWith("{"))return y.parse(t);for(var n={profile:{},metadata:{}},e=t.split("~~"),i=0;i<e.length;i+=3){var r=e[i],o=e[i+1],a=e[i+2];o.startsWith("-*")?n.profile[r]=y.parse(o.substring(2)):n.profile[r]=o,a.startsWith("-*")?n.metadata[r]=y.parse(a.substring(2)):n.metadata[r]=a}return n},stringify:function(t){var n=[];for(var e in t.profile)if(t.profile.hasOwnProperty(e)){var i=t.profile[e],r=t.metadata[e];"object"==typeof i&&(i="-*"+y.stringify(i)),"object"==typeof r&&(r="-*"+y.stringify(r)),n.push(e),n.push(i),n.push(r)}return n.join("~~")}},U=function(){function t(t,n,e){var i;this.transformers=((i={})[M.VARIATION_MAP]=P,i[M.VISITOR_PROFILE]=L,i),this.visitorId=t,this.namespace=n,this.cookies=e||{}}var n=t.prototype;return n.getKey=function(n){return["OPTY",this.visitorId,this.namespace,n].join(t.SEPARATOR)},n.getStringValue=function(t){return this.cookies[t]||"{}"},n.getValue=function(t){var n=this.getKey(t),e=this.getStringValue(n),i=this.transformers[t]||y;return e?i.parse(e):null},n.setValue=function(t,n){var e=this.getKey(t),i=this.transformers[t]||y;_.set(e,i.stringify(n))},t}();function V(){return new U(R.getRandomId(),k.getNamespace(),_.getAll())}n.StickyProcesor=U,U.SEPARATOR="$$",t.exports={STICKY_STORAGE_KEY:M,processWebSdk:function(t){var n=d.on({filter:{type:v.TYPES.LIFECYCLE,name:"initialized"},handler:function(){!function(t){var n,e;if(t.logs||(null==(n=t.metadata)?void 0:n.logs)){var i=t.logs||(null==(e=t.metadata)?void 0:e.logs);m.groupCollapsed("Logs from Edge"),(i||[]).forEach((function(t){switch(t.level){case 1:var n;(n=m).debug.apply(n,["[EDGE] "+t.message].concat(r(t.rest)));break;case 2:var e;(e=m).log.apply(e,["[EDGE] "+t.message].concat(r(t.rest)));break;case 3:var i;(i=m).warn.apply(i,["[EDGE] "+t.message].concat(r(t.rest)));break;case 4:var o;(o=m).error.apply(o,["[EDGE] "+t.message].concat(r(t.rest)))}})),m.groupEnd()}}(t),x(t),function(t){var n,e,i=[];((null==(n=t.result)?void 0:n.activeViewsIds)||[]).forEach((function(t){i.push({id:t,isActive:!0})})),((null==(e=t.result)?void 0:e.inactiveViewsIds)||[]).forEach((function(t){i.push({id:t,isActive:!1})})),f.registerViews(i)}(t),function(t){(t.result.activeViewsIds||[]).forEach((function(t){var n=D.getByPageId(t);f.toggleEventImplementations(n,!0)}))}(t),a.push({type:"clientMetadata",clientName:"ed-js"}),function(t){if(0!==(t.queue.unappliedChangesetsIds||[]).length){var n=t.queue.unappliedChangesetsIds,e=[];t.result.decisions.map((function(t){for(var i=["layerId:"+t.layerId,t.experimentId+":"+t.variationId+":"+t.viewId],r=0;r<i.length;r++){var a=i[r],u=I.get(a);u&&0!==((null==u?void 0:u.changeSet)||[]).length&&(u.changeSet=u.changeSet.filter((function(t){var e=o.isObject(t)?t.id:t;return n.includes(e)})),e=e.concat(u))}})),o.forEach(e,u.prepareAction),p.all(o.map(e,(function(t){return u.executePreparedAction(t).then(o.partial(g.emitActionAppliedEvent,t))}))).then((function(){m.log("All pending page actions for applied:",e)}))["catch"]((function(t){m.warn("Error evaluating pending page actions for decision because:",t)}))}}(t);var e=d.on({filter:{type:v.TYPES.LIFECYCLE,name:"activate"},handler:function(){!function(t){var n=A.getForceVariationIds(),e=A.getForceAudienceIds();p.all[(t.queue.undecidedLayerIds||[]).map((function(t){if(C.getLayerState(t))return m.log("Layer "+t+" already has a decision, skipping."),p.resolve();var i=N.get(t),r=T.getActiveViewStates().map((function(t){return t.id})).filter((function(t){return i.viewIds.includes(t)}));return w.decideAndExecuteLayerASAP(n,e,r,i)}))]}(t),function(t){var n,e;((null==(n=t.result)?void 0:n.activeViewsIds)||[]).forEach((function(t){a.push({type:"event",eventType:"pageview",eventData:{id:t,apiName:S.idToApiName(t)}})}));var i=O.getVariationIdMap(),r=k.getActivationId(),o=R.getBucketingId();((null==(e=t.result)?void 0:e.decisions)||[]).forEach((function(t){t.isLayerHoldback=t.isLayerHoldback||!1,t.isLayerConcluded=t.isLayerConcluded||!1;var n={activationId:r,bucketingId:o,audienceIds:[],globalHoldback:t.isGlobalHoldback,preferredVariationMap:i[t.layerId]||{}},e=N.get(t.layerId);s.recordLayerDecision(e.id,n,t),c.trackDecisionEvent(t,n,e),g.emitLayerDecided({layer:e,decisionTicket:n,decision:t})}))}(t),d.off(e)}});d.off(n)}})},getCurrentStickyEdgeData:function(t){return V().getValue(t)},setCurrentStickyEdgeData:function(t,n){V().setValue(t,n)}}},8260:function(){}},__webpack_module_cache__={};function __webpack_require__(t){var n=__webpack_module_cache__[t];if(n!==undefined)return n.exports;var e=__webpack_module_cache__[t]={id:t,loaded:!1,exports:{}};return __webpack_modules__[t].call(e.exports,e,e.exports,__webpack_require__),e.loaded=!0,e.exports}__webpack_require__.amdO={},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t};var __webpack_exports__={};function main(){var t=function(t){var n=[__webpack_require__(5487)];n.push(__webpack_require__(4446)),n.push(__webpack_require__(1666)),n.push(__webpack_require__(8553)),n.push(__webpack_require__(2588)),n.push(__webpack_require__(720)),n.push(__webpack_require__(6352)),n.push(__webpack_require__(7365)),n.push(__webpack_require__(5647)),n.push(__webpack_require__(324)),n.push(__webpack_require__(7735)),n.push(__webpack_require__(1106)),n.push(__webpack_require__(1198)),n.push(__webpack_require__(4771)),n.push(__webpack_require__(6904)),n.push(__webpack_require__(8251)),n.push(__webpack_require__(3471)),n.push(__webpack_require__(1628)),n.push(__webpack_require__(4445)),n.push(__webpack_require__(7065)),n.push(__webpack_require__(9318)),n.push(__webpack_require__(6488)),n.push(__webpack_require__(2135)),n.push(__webpack_require__(5901)),n.push(__webpack_require__(6300)),n.push(__webpack_require__(2405)),n.push(__webpack_require__(2429)),l.initializePlugins(n)};window.performance&&window.performance.mark&&window.performance.mark("optimizely:blockBegin"),__webpack_require__(2213).initialize();var n=__webpack_require__(850);n.time("gtagReady");var e=__webpack_require__(1004),i=__webpack_require__(1353);__webpack_require__(394);var r=i.get("stores/directive");if(!__webpack_require__(9908).isCORSSupported())throw new Error("CORS is not supported on this browser, aborting.");var o,a=__webpack_require__(9430),u=__webpack_require__(4181),c=__webpack_require__(3702),s=__webpack_require__(371),f={"accountId": "19181790056", "namespace": "19181790056", "revision": "20257", "anonymizeIP": true, "enableForceParameters": true, "experimental": {"trimPages": true}, "projectId": "19181790056", "layers": [{"changes": null, "id": "23503640330", "name": "3.3.23 Newsletter Sign-Up Upsell Page", "commitId": "23526240121", "groupId": null, "holdback": 0, "activation": {}, "integrationSettings": {"mixpanel": {}}, "integrationStringVersion": 2, "experiments": [{"audienceIds": null, "audienceName": "Everyone else", "changes": null, "id": "23503570159", "integrationSettings": null, "variations": [{"id": "23498600208", "name": "Original", "actions": [{"viewId": "23474500166", "changes": [{"dependencies": [], "type": "custom_code", "id": "A205EE36-8FE0-4F98-BF84-7E2971CF3DC3", "value": function($){document.addEventListener("DOMContentLoaded", function (event) {
utms = document.querySelectorAll('a.utm');
for (let i = 0; i < utms.length; i++) {
utms[i].onclick = function (e) {
e.preventDefault();
myLocation = window.location.href;
console.log(myLocation);
params = [];
hasParams = myLocation.split("&").length > 1;
if (hasParams) {
myLocation.split("?")[1].split("&").forEach(x => {
if (!x.includes("utm_medium")) {
params.push(x);
}
});
}
baseURL = "https://smartasset.com/retirement/find-a-financial-planner?utm_medium=newsletter-upsell-control";
window.location = baseURL + '&' + params.join("&");
};
}
});
}}, {"selector": ".original-funnel-snippet > #smartadvisor-captivate-funnel", "dependencies": [], "attributes": {}, "type": "attribute", "id": "AD6DF3B6-877B-4AEB-885A-AF1BC8D0F3AF", "css": {}}]}]}, {"id": "23517320025", "name": "Variation #1 - Shorter Copy", "actions": [{"viewId": "23474500166", "changes": [{"dependencies": [], "type": "custom_code", "id": "97768330-7571-4E00-A759-492010D4836A", "value": function($){document.addEventListener("DOMContentLoaded", function (event) {
utms = document.querySelectorAll('a.utm');
for (let i = 0; i < utms.length; i++) {
utms[i].onclick = function (e) {
e.preventDefault();
myLocation = window.location.href;
console.log(myLocation);
params = [];
hasParams = myLocation.split("&").length > 1;
if (hasParams) {
myLocation.split("?")[1].split("&").forEach(x => {
if (!x.includes("utm_medium")) {
params.push(x);
}
});
}
baseURL = "https://smartasset.com/retirement/find-a-financial-planner?utm_medium=newsletter-upsell-shorter-copy";
window.location = baseURL + '&' + params.join("&");
};
}
});
}}, {"selector": ".features__item_text > p:nth-of-type(3)", "dependencies": [], "attributes": {"html": "Move forward on your financial path by matching with up to 3 pre-screened fiduciary advisors using our quick (free!) questionnaire. Compare them, and decide whether to work with one to get tailored advice."}, "type": "attribute", "id": "B494024C-6158-44A5-B137-932504ADD8FF", "css": {}}, {"selector": ".features__item_text > p:nth-of-type(4)", "dependencies": [], "attributes": {"html": "(It only takes 3 minutes!)"}, "type": "attribute", "id": "31B61FE4-5DC0-40B6-AE07-02F251AED526", "css": {}}, {"selector": "p:nth-of-type(5)", "dependencies": [], "attributes": {"html": "Take the Advisor Match quiz below - thanks for subscribing to SmartMoney Minute, and we\u2019ll see you in your inbox next week!"}, "type": "attribute", "id": "922AA81F-4A42-419B-ABBE-B7D74D204CE8", "css": {}}, {"selector": "p:nth-of-type(6)", "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "91A449FA-3C7A-454B-8829-48F439385CE1", "css": {}}, {"selector": "p:nth-of-type(7)", "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "38F84C55-8071-4E51-B601-92F8C1CC5234", "css": {}}, {"selector": "p:nth-of-type(8)", "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "DB377B68-E359-4446-950C-8A3D0E8E2551", "css": {}}, {"selector": "p:nth-of-type(9)", "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "D4F46CDF-E1EC-47F0-B04E-41244BD17082", "css": {}}, {"selector": "p:nth-of-type(10)", "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "170382E1-E5A0-4ECB-81C6-02476260C375", "css": {}}, {"selector": "p:nth-of-type(11)", "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "F605CFB7-454F-4349-B1B6-F34BBA77FB67", "css": {}}, {"selector": "li:nth-of-type(1)", "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "FB178B13-DB6D-43D1-8EF1-1956B486A91F", "css": {}}, {"selector": "li:nth-of-type(2)", "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "ED04D59C-5876-432F-89EA-6CAF656FC170", "css": {}}, {"selector": "li:nth-of-type(3)", "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "D377D08B-2406-4DFA-88B4-377A53DA8840", "css": {}}, {"selector": "p:nth-of-type(12)", "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "099AF2E1-647D-49FD-AE97-EC7580FE773B", "css": {}}, {"selector": "p:nth-of-type(13)", "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "9B8EB89B-A914-4D90-997B-82D55DFC6EFE", "css": {}}, {"selector": "p:nth-of-type(14)", "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "3D5E4083-24E5-4961-95E0-74B385D39614", "css": {}}, {"selector": "p:nth-of-type(15)", "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "BD895481-2924-4C81-9EEF-D7412AC478AA", "css": {}}]}]}, {"id": "23501280302", "name": "Variation #2 - Newsletter Survey", "actions": [{"viewId": "23474500166", "changes": [{"dependencies": [], "type": "custom_code", "id": "2382507B-62C6-424A-BD79-4A5915E61D88", "value": function($){document.addEventListener("DOMContentLoaded", function (event) {
utms = document.querySelectorAll('a.utm');
for (let i = 0; i < utms.length; i++) {
utms[i].onclick = function (e) {
e.preventDefault();
myLocation = window.location.href;
console.log(myLocation);
params = [];
hasParams = myLocation.split("&").length > 1;
if (hasParams) {
myLocation.split("?")[1].split("&").forEach(x => {
if (!x.includes("utm_medium")) {
params.push(x);
}
});
}
baseURL = "https://smartasset.com/retirement/find-a-financial-planner?utm_medium=newsletter-survey";
window.location = baseURL + '&' + params.join("&");
};
}
});
}}, {"value": "<style>.original-funnel-snippet{\n\tdisplay: none !important;\n}\n\n.survey-snippet{\n\tdisplay: block !important;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "B116E8D7-9E4A-46F0-B1F9-26C8D914BC14"}, {"selector": ".features__item_text > p:nth-of-type(3)", "dependencies": [], "attributes": {"html": "And we have even better news\u2026"}, "type": "attribute", "id": "FCDC5219-B992-402F-BC8A-AF96E359D94C", "css": {}}, {"selector": ".features__item_text > p:nth-of-type(4)", "dependencies": [], "attributes": {"html": "We\u2019re working on developing even more variety of content for our readers. Want to have a say? Vote below!"}, "type": "attribute", "id": "00D83492-45B5-4F70-9189-3D90AB0D2235", "css": {}}, {"selector": "p:nth-of-type(5)", "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "30206967-0F74-49BC-9DC3-7F198A5AE627", "css": {}}, {"selector": "p:nth-of-type(6)", "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "247FE0F7-770B-41F8-8B06-C72EDF3C96D1", "css": {}}, {"selector": "p:nth-of-type(7)", "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "E9CF1456-F2C3-470A-AD3F-63CB5B00328E", "css": {}}, {"selector": "p:nth-of-type(8)", "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "AD332C34-45B2-41B5-AD29-7E1F113B77E8", "css": {}}, {"selector": "p:nth-of-type(9)", "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "D05BB365-2938-4463-A37C-24D749A9378D", "css": {}}, {"selector": "p:nth-of-type(10)", "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "932DF7F3-4CA6-4F18-95D8-389B13411545", "css": {}}, {"selector": "p:nth-of-type(11)", "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "0CB25F81-BE6A-42E5-ACBD-FA1C8EDCE231", "css": {}}, {"selector": "li:nth-of-type(1)", "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "2C9A2DE9-B334-45FD-8659-FF3A31E76E59", "css": {}}, {"selector": "li:nth-of-type(2)", "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "36D5EC91-D9B1-45E8-BBFA-3CFED97C6A9D", "css": {}}, {"selector": "li:nth-of-type(3)", "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "05A02362-117E-4FDF-BA18-AB85BB2BABDB", "css": {}}, {"selector": "p:nth-of-type(12)", "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "66353749-7E7F-4F2C-B84B-359C86E35768", "css": {}}, {"selector": "p:nth-of-type(13)", "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "59AC962C-0C71-4ACB-AA47-CBF17EEBAB77", "css": {}}, {"selector": "p:nth-of-type(14)", "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "4E19BF82-5C43-44FB-9112-F2961A174744", "css": {}}, {"selector": "p:nth-of-type(15)", "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "0154EA5C-6517-4F25-B506-E95F8074404C", "css": {}}]}]}], "weightDistributions": [{"entityId": "23498600208", "endOfRange": 4000}, {"entityId": "23517320025", "endOfRange": 8000}, {"entityId": "23501280302", "endOfRange": 10000}], "name": "3.3.23 Newsletter Sign-Up Upsell Page", "bucketingStrategy": null, "experimentMetadata": {"allocationPolicy": "manual", "layerId": "23503640330"}, "deployed": false}], "policy": "single_experiment", "viewIds": ["23474500166"], "weightDistributions": null, "decisionMetadata": null, "concluded": false}, {"changes": null, "id": "27438590239", "name": "Inflation Calculator CTA - Winner 100%", "commitId": "27484860148", "groupId": null, "holdback": 0, "activation": {}, "integrationSettings": {"mixpanel": {}}, "integrationStringVersion": 2, "experiments": [{"audienceIds": null, "audienceName": "Everyone else", "changes": null, "id": "27463620235", "integrationSettings": null, "variations": [{"id": "27465120258", "name": "Variation #2 - Low Placement + Blue Button", "actions": [{"viewId": "27467340335", "changes": [{"id": "4913995B-E97A-4C7E-8574-8EDE512AA9C5", "type": "append", "selector": "head", "value": "<style>.riklam-container.riklam-container-sponsorcalcsimple.riklam-visible { display: none !important;}</style>", "dependencies": []}, {"css": {}, "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "bff6a7aceaf043f58d3317684e540725", "selector": "#google_ads_iframe_\\/137419494\\/smartasset\\/\\/investing_2"}, {"css": {}, "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "4cd233dba6c54c8381f045a0f299c14f", "selector": ".sponsorcalc-wrapper"}, {"id": "2b0dfa0f7bb746bc8605679905dac707", "type": "append", "dependencies": [], "selector": ".inlation-calc-chart-box", "value": "<div style=\"border: 0px solid #cccccc; padding: 20px; text-align: center;\">\n  \n \t<p style=\"margin: 0; padding-bottom: 20px;\">\n  \nAssessing the impact of inflation on your finances? Match with a vetted advisor today.\n  \n  </p>\n  \n<button style=\"background-color: rgb(32, 167, 226); text-transform: none;\"> \n  \n<a href=\"/retirement/find-a-financial-planner?utm_source=smartasset\">\n  \n Get Started\n \n  </a> \n  \n </button>\n  \n</div>", "operator": "after"}, {"css": {"font-weight": "600", "color": "rgba(255, 255, 255, 1)"}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "afb34efe9f8a446ba2f19ca2755f8247", "selector": ".padded > div:nth-of-type(3) a"}, {"css": {"background-color": "rgba(244, 244, 246, 1)"}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "7fadb02366024e36975166abbc4bb1fd", "selector": ".padded > div:nth-of-type(3)"}, {"css": {"font-weight": "600"}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "cd10a4e33aac4c8aa3123ab17b4ab85d", "selector": ".padded > div:nth-of-type(3) > p"}, {"css": {}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "3f6c852a09174ddc84bf581236e9a647", "selector": ".padded button"}]}]}], "weightDistributions": null, "name": "Inflation Calculator CTA - Winner 100%", "bucketingStrategy": null, "experimentMetadata": {"allocationPolicy": "manual", "layerId": "27438590239"}, "deployed": false}], "policy": "single_experiment", "viewIds": ["27467340335"], "weightDistributions": null, "decisionMetadata": null, "concluded": false}, {"changes": null, "id": "27747230472", "name": "Social Security Calculator CTA (With Overlay) - WINNER Rolled out to 100%", "commitId": "27795700046", "groupId": null, "holdback": 0, "activation": {}, "integrationSettings": {"mixpanel": {}}, "integrationStringVersion": 2, "experiments": [{"audienceIds": null, "audienceName": "Everyone else", "changes": null, "id": "27780170050", "integrationSettings": null, "variations": [{"id": "27719310624", "name": "Variation 1 - Blue Button", "actions": [{"viewId": "27772470036", "changes": [{"id": "1bf47d5994c0498094da7eb3468d804f", "type": "append", "selector": "head", "value": "<style>.riklam-container.riklam-container-sponsorcalcsimple.riklam-visible { display: none !important;}</style>", "dependencies": []}, {"css": {}, "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "ca9ab44e5a514f859c8db4ab1999b4d2", "selector": ".riklam-container-sponsorcalcsimple > .riklam-preloader"}, {"id": "8e974e1a57e24eebba3b8dd5dcf601aa", "type": "append", "dependencies": [], "selector": ".answer-title", "value": "<style>\n  .advisor-box {\n    border: 0px solid #cccccc;\n    padding: 1px 1px 1px 1px;\n    text-align: center;\n    width: 100%;\n     /* Adjust this as needed */\n    margin: auto; /* This centers the div on the page */\n\t\tbackground: #f4f4f6;\n  }\n\n  .advisor-box h2 {\n    color: #333333;\n    font-size: 1.5em;\n  }\n  \n  .advisor-box p {\n    font-weight: 500;\n  }\n\n  .advisor-box button {\n    background-color: rgba(32, 167, 226);\n    color: white;\n    border: none;\n    padding: 10px 20px;\n    cursor: pointer;\n    text-transform: none;\n    margin-top: 0px; /* Adds space above the button */\n    margin-left: 0px;\n    margin-bottom: 20px;\n    font-weight: 600;\n  }\n  \n  .advisor-box a:hover {\n    text-decoration: underline;\n  }\n  \n  .advisor-box a.button-link {\n    text-decoration: none;\n    display: inline-block;\n  }\n  \n  .mobile-only {\n    display:none;\n  }\n  \n  @media (max-width:600px) {\n    .mobile-only {\n      display: inline;\n    }\n  }\n  \n</style>\n\n<div class=\"advisor-box\">\n  \n\n  <h3>\n    Still Have Questions About Your Social Security Benefits? </h3>\n  \n   <p>\nA financial advisor may be able to help. Match with an advisor serving your area today.\n</p>\n  \n\n  <a class=\"button-link\" href=\"https://smartasset.com/retirement/find-a-financial-planner?utm_source=smartasset\">\n    \n  <button type=\"button\"> Get Started Now</button>\n  \n</a>\n  \n</div>", "operator": "after"}, {"css": {}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "bee6bbd60a8d45a784d0e929492a9064", "selector": ".button-link > button"}]}]}], "weightDistributions": null, "name": "Social Security Calculator CTA (With Overlay) - WINNER Rolled out to 100%", "bucketingStrategy": null, "experimentMetadata": {"allocationPolicy": "manual", "layerId": "27747230472"}, "deployed": false}], "policy": "single_experiment", "viewIds": ["27772470036"], "weightDistributions": null, "decisionMetadata": null, "concluded": false}, {"changes": null, "id": "27774900008", "name": "401K Calculator (With Overlay) - WINNER Rolled out to 100%", "commitId": "27724900019", "groupId": null, "holdback": 0, "activation": {}, "integrationSettings": {"mixpanel": {}}, "integrationStringVersion": 2, "experiments": [{"audienceIds": null, "audienceName": "Everyone else", "changes": null, "id": "27786060022", "integrationSettings": null, "variations": [{"id": "27757480356", "name": "Variation 1 - Blue Button", "actions": [{"viewId": "27781930084", "changes": [{"id": "3e128e21eb1d4acc9cd2223e33026917", "type": "append", "selector": "head", "value": "<style>.riklam-container.riklam-container-sponsorcalcsimple.riklam-visible { display: none !important;}</style>", "dependencies": []}, {"css": {}, "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "bc23fcb7f7804c9caeffedff51f945f0", "selector": "#google_ads_iframe_\\/137419494\\/smartasset\\/\\/retirement_2"}, {"css": {}, "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "5b25ea02236246a399383d6856d3c0ae", "selector": "#riklam-sponsorcalcsimple-jgsrGl_4708017"}, {"id": "0e12bac2559c4642849a24cb4e2da1be", "type": "append", "dependencies": [], "selector": ".answer-number", "value": "<style>\n  .advisor-box {\n    border: 0px solid #cccccc;\n    padding: 1px 1px 1px 1px;\n    text-align: center;\n    width: 100%;\n     /* Adjust this as needed */\n    margin: auto; /* This centers the div on the page */\n\t\tbackground: #f4f4f6;\n  }\n\n  .advisor-box h2 {\n    color: #333333;\n    font-size: 1.5em;\n  }\n  \n  .advisor-box p {\n    font-weight: 500;\n  }\n\n  .advisor-box button {\n    background-color: rgba(32, 167, 226);\n    color: white;\n    border: none;\n    padding: 10px 20px;\n    cursor: pointer;\n    text-transform: none;\n    margin-top: 0px; /* Adds space above the button */\n    margin-left: 0px;\n    margin-bottom: 20px;\n    font-weight: 600;\n  }\n  \n  .advisor-box a:hover {\n    text-decoration: underline;\n  }\n  \n  .advisor-box a.button-link {\n    text-decoration: none;\n    display: inline-block;\n  }\n  \n  .mobile-only {\n    display:none;\n  }\n  \n  @media (max-width:600px) {\n    .mobile-only {\n      display: inline;\n    }\n  }\n  \n</style>\n\n<div class=\"advisor-box\">\n  \n\n  <h3>\n    Wondering How Much You Should Contribute to Your 401(k)? </h3>\n  \n   <p>\nMatch with a vetted financial advisor to discuss your financial strategy.\n</p>\n  \n\n  <a class=\"button-link\" href=\"https://smartasset.com/retirement/find-a-financial-planner?utm_source=smartasset\">\n    \n  <button type=\"button\"> Get Started Now</button>\n  \n</a>\n  \n</div>", "operator": "after"}, {"css": {}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "8fcb21030ab64373a473452fb593777b", "selector": ".button-link > button"}, {"css": {}, "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "6234f3f09c8c4271bb4413cd8e5ca877", "selector": ".riklam-container-sponsorcalcsimple > .riklam-preloader"}]}]}], "weightDistributions": null, "name": "401K Calculator (With Overlay) - WINNER Rolled out to 100%", "bucketingStrategy": null, "experimentMetadata": {"allocationPolicy": "manual", "layerId": "27774900008"}, "deployed": false}], "policy": "single_experiment", "viewIds": ["27781930084"], "weightDistributions": null, "decisionMetadata": null, "concluded": false}, {"changes": null, "id": "28641420013", "name": "Top FA Methodology Patch", "commitId": "28623130128", "groupId": null, "holdback": 0, "activation": {}, "integrationSettings": {"mixpanel": {}}, "integrationStringVersion": 2, "experiments": [{"audienceIds": null, "audienceName": "Everyone else", "changes": null, "id": "28585360283", "integrationSettings": null, "variations": [{"id": "28565670184", "name": "Original", "actions": [{"viewId": "28594710029", "changes": [{"css": {}, "dependencies": [], "attributes": {"html": "All information is obtained through public records and is updated once per year following the firms' filing of their amendment to Form ADV at the end of March. This list may include firms that have a business relationship with SmartAsset, in which SmartAsset is compensated for lead referrals. Such relationships have no impact on our rankings, and firms are included and ranked based strictly on the above criteria. SmartAsset is not a client of the aforementioned firms, and did not receive compensation for including any of the firms on the aforementioned list."}, "type": "attribute", "id": "7250126B-0A15-42A0-8583-550332BDC572", "selector": ".overview > p:nth-of-type(5)"}]}]}], "weightDistributions": null, "name": "Top FA Methodology Patch", "bucketingStrategy": null, "experimentMetadata": {"allocationPolicy": "manual", "layerId": "28641420013"}, "deployed": false}], "policy": "single_experiment", "viewIds": ["28594710029"], "weightDistributions": null, "decisionMetadata": null, "concluded": false}, {"changes": null, "id": "29318480285", "name": "Mortgage Rate Table Disclosure Update", "commitId": "29378560039", "groupId": null, "holdback": 0, "activation": {}, "integrationSettings": {"mixpanel": {}}, "integrationStringVersion": 2, "experiments": [{"audienceIds": null, "audienceName": "Everyone else", "changes": null, "id": "29322580204", "integrationSettings": null, "variations": [{"id": "29322770282", "name": "Disclosure Tooltip", "actions": [{"viewId": "29334470268", "changes": [{"id": "6CCFC0EF-32C5-4AD6-BEE0-180268A062C4", "type": "append", "selector": "head", "value": "<style>/* Parent container set to flexbox */\n.sa-disclosure-attribution {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%; /* Make sure this doesn't constrain child elements */\n    position: relative;\n    overflow: visible; /* This should allow the tooltip to overflow */\n}\n\n/* Tooltip container */\n.tooltip {\n    position: relative;\n    display: inline-block;\n    cursor: pointer;\n    flex-grow: 1;\n    text-align: left;\n}\n\n/* Tooltip text */\n.tooltip .tooltiptext {\n    visibility: hidden;\n    width: 200px;\n    background-color: white;\n    border-radius: 6px;\n    padding: 5px;\n    position: absolute;\n    z-index: 10;\n    bottom: 100%; /* Adjust if necessary */\n    right: 0; /* Start from the right and adjust if necessary */\n    transform: translateX(10%); /* Adjust this value to ensure it does not cut off */\n    opacity: 0;\n    transition: opacity 0.3s;\n    max-height: 150px;\n    overflow-y: auto;\n    box-shadow: 0 8px 16px rgba(0,0,0,0.2); /* Adds visibility */\n}\n\n/* Showing the tooltip on hover */\n.tooltip:hover .tooltiptext {\n    visibility: visible;\n    opacity: 1;\n}</style>", "dependencies": []}, {"css": {}, "dependencies": [], "attributes": {"html": "Payments do not include taxes and insurance premiums. Actual payments will be greater with taxes and insurance included.", "style": "height: auto;\ncolor: #8c8c8c;\nfont-size: 12px;\nfont-weight: 300;"}, "type": "attribute", "id": "98889157-BD8A-4B68-AF8D-6BADFC7789DA", "selector": ".s20"}, {"id": "2504E196-7DA9-42FB-A059-0E4912E9E423", "type": "append", "dependencies": [], "selector": ".js-mr-attribution", "value": "<div align=\"right\"><span class=\"tooltip\">Disclosure\n    <span class=\"tooltiptext\">\nThe offers that appear on this site are from companies from which <a href='https://smartasset.com/'>SmartAsset.com</a>&nbsp; receives compensation. This compensation may impact how and where products appear on this site (including, for example, the order in which they appear). <a href='https://smartasset.com/'>SmartAsset.com</a>&nbsp; does not include all providers or product offers available in the marketplace.\n<br><br>\nMortgage rate quotes displayed on SmartAsset\u2120, including loan pricing data, rates and fees, are provided by third party data providers including, but not limited to, Mortech\u00ae, a registered trademark of Zillow\u00ae.\n<br><br>\nRates presented does not constitute an actual commitment to lend or an offer to extend credit. The interest rates, annual percentage rates, and other terms advertised here are estimates provided by those advertising partners based on the information you entered above and they do not bind any lender. A commitment to lend can only be issued upon satisfactory submission, review and approval of (1) a complete application, supporting documents and good faith funds, (2) verification of your income, assets and financial condition, (3) satisfactory appraisal of the proposed property, and (4) no adverse change in your credit profile from the time of application. Please note that actual interest rate, APR, and terms of the loan cannot be determined until a complete application has been filed, and a rate Lock-In Agreement have been mutually executed and the rate Lock-In Option within the rate Lock-In Agreement has been selected. Until such activities have taken place, the rate and fees are subject to change without prior notice. The fees listed above represent fees charged and do not include fees charged by third party companies (such as appraisal, credit report, title insurance, state taxes, attorney fees, state fees, county fees or any other non-lender fees), and are also subject to change based on any additional information provided by the person who completed the request, or is subject to change upon receiving more specified information about any online form which was originally deemed by advertising partner to be too general for providing accurate fee information. No lender is liable for typographical or data transmission errors. Monthly payment details does not include property taxes and homeowners insurance, which both must be included in your monthly payment to the mortgage servicer to qualify for the rates and terms provided.\n<br><br>\nAdditional data provided by Icanbuy. Payments do not include amounts for taxes and insurance premiums. The actual payment obligation will be greater if taxes and insurance are included. Click <a href='https://widgets.informars.com/disclaimer.htm'>here</a> for more information on rates and product details.\n\n  </span>\n</span>\n</div>", "operator": "after"}, {"css": {}, "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "DA1E2261-6A61-4764-8159-E770126FA127", "selector": ".sa-disclosure > div:nth-of-type(2)"}]}]}], "weightDistributions": null, "name": "Mortgage Rate Table Disclosure Update", "bucketingStrategy": null, "experimentMetadata": {"allocationPolicy": "manual", "layerId": "29318480285"}, "deployed": false}], "policy": "single_experiment", "viewIds": ["29334470268"], "weightDistributions": null, "decisionMetadata": null, "concluded": false}, {"changes": null, "id": "29596860127", "name": "Checking Account APY Patch", "commitId": "29601920106", "groupId": null, "holdback": 0, "activation": {}, "integrationSettings": {"mixpanel": {}}, "integrationStringVersion": 2, "experiments": [{"audienceIds": null, "audienceName": "Everyone else", "changes": null, "id": "29649660153", "integrationSettings": null, "variations": [{"id": "29596160175", "name": "Original", "actions": [{"viewId": "29611900163", "changes": [{"css": {}, "dependencies": [], "attributes": {"html": "APY"}, "type": "attribute", "id": "F9BD26BA-2630-4E20-8488-A509B2796688", "selector": ".interest.sa-table-header-sortable > div"}]}]}], "weightDistributions": null, "name": "Checking Account APY Patch", "bucketingStrategy": null, "experimentMetadata": {"allocationPolicy": "manual", "layerId": "29596860127"}, "deployed": false}], "policy": "single_experiment", "viewIds": ["29611900163"], "weightDistributions": null, "decisionMetadata": null, "concluded": false}, {"changes": null, "id": "30093630301", "name": "YF Cobranded Funnel", "commitId": "6547480918097920", "groupId": null, "holdback": 0, "activation": {}, "integrationSettings": {"mixpanel": {}}, "integrationStringVersion": 2, "experiments": [{"audienceIds": ["and", "30367780423"], "audienceName": "Yahoo Finance", "changes": null, "id": "30103630193", "integrationSettings": null, "variations": [{"id": "30353750299", "name": "Variant with Baseline", "actions": [{"viewId": "19540800066", "changes": [{"id": "FEAE7389-B384-469D-B4A8-9D0CAE7A409D", "type": "append", "selector": "head", "value": "<style>.heading {\n    font-size: 28px !important;\n    line-height: 36px !important;\n}\n\n.question .label {\n    font-size: 18px !important;\n}\n\n@media only screen and (max-width: 768px) {\n    .answer {\n        height: auto !important;\n        justify-content: center !important;\n    }\n\n    .input--text {\n        min-height: 29px !important;\n        font-size: 18px !important;\n    }\n\n    .slider--labels {\n        font-size: 18px !important;\n    }\n\n    .extraMessage {\n        width: 216px !important;\n        text-align: center !important;\n    }\n\n    .question--type-short_answer input {\n        height: 42px !important;\n    }\n}\n\n@media only screen and (max-width: 425px) {\n    .funnel .menu {\n        justify-content: space-between !important;\n    }\n\n    .button--back {\n        margin-left: 36px !important;\n    }\n}\n\n/* TCPA */\n#sa-funnel_react-app .funnel .question.question--type-checkbox .input--checkbox {\n    display: none !important;\n}\n\n#sa-funnel_react-app .funnel--groupPhone .question--termsOfService label {\n    background-color: #f4f4f6 !important;\n    padding: 5px 15px 7px 15px !important;\n    color: #6c6c6c !important;\n    font-size: 12px !important;\n    line-height: 16px !important;\n}\n\n#sa-funnel_react-app .funnel--groupPhone .question--termsOfService label {\n    pointer-events: none;\n}\n\n#sa-funnel_react-app .funnel--groupPhone .question--termsOfService label a {\n    pointer-events: auto !important;\n}\n\n.funnel--initialLoading {\n    visibility: hidden;\n}\n\n\n\n/* ZIP Code Delighter */\n.welcome-text-block {\n    font-family: 'proxima-nova';\n    font-weight: 500;\n    font-size: 14px;\n    line-height: 20px;\n    margin-top: 5px;\n}\n\n/* Purple CTA */\n#sa-funnel_react-app .funnel nav.menu .button--next{\n    background-color: #410093 !important;\n  }\n  \n  #sa-funnel_react-app .funnel nav.menu .button--next:hover {\n          background-color: #410093 !important;\n  }\n\n\n  #sa-funnel_react-app .funnel .answer .input--radio:hover {\n      border: 1px solid #410093 !important;\n  }\n\n #sa-funnel_react-app .funnel .answer {\n      border: 1px solid #FFFFFF;\n  }\n  \n  .answer:hover {\n          background-color: #FFFFFF !important;\n    \t\t\tborder: 1px solid #410093 !important;\n      }\n  \n  #sa-funnel_react-app .funnel .answer.answer--selected .input--radio:before {\n  background-color: #410093 !important;\n  }\n  \n  #sa-funnel_react-app .funnel .answer.answer--selected .input--radio {\n    border: 1px solid #410093 !important;\n  }\n  \n  .progress {\n  color: #410093 !important;\n  }\n  \n  #sa-funnel_react-app .funnel progress.progress::-webkit-progress-value {\n  \n  background-color:#410093 !important;\n  \n  }\n  /* For Firefox */\n  progress::-moz-progress-bar {\n  background: #410093;\n  }\n  \n  /* For Chrome or Safari */\n  progress::-webkit-progress-value {\n  background: #410093;\n  }\n  \n  /* For IE10 */\n  progress {\n  background: #410093;\n  }\n  \n  progress {\n  -webkit-appearance: none;\n  }\n  \n  ::-webkit-progress-bar {\n  background-color: #410093;\n  }\n  \n  \n  ::-webkit-progress-value {  background-color: #410093 !important; }\n  \n  @media (max-width: 758px) {\n      #sa-funnel_react-app .funnel .answer.answer--selected {\n          border: 1px solid #410093 !important;\n          background: #FFFFFF !important;\n      }\n  }\n  \n  .question-icon {\n   filter: brightness(0) saturate(100%) invert(13%) sepia(61%) saturate(4714%) hue-rotate(265deg) brightness(83%) contrast(133%); \n  }\n  \n  .container.container-lg {background-color: #410093 !important;}\n  \n  header.header {\n      background: #410093 !important;\n  }\n  \n  #sa-funnel_react-app .funnel nav.menu .button--next:hover {\n          background-color: #410093 !important;\n  }\n\n  body {\n    font-family: \"GT America\",\"Yahoo Sans\",\"Helvetica Neue\",Helvetica,Arial,sans-serif !important;\n  }\n\n@media only screen and (max-width: 380px) {\n    .heading {\n        font-size: 24px !important;\n    }\n}\n\n\n/* I'm an advisor CTA */\n.falc-cta a {\n \t\tcolor: #FFFFFF;\n}\n\n.falc-cta {\n \t\tborder: 1px solid #FFFFFF;\n}\n\n.falc-cta:hover {\n \t\tbackground-color: #FFFFFF;\n}\n\n.falc-cta a:hover {\n    color: #410093;\n}\n\n@media (max-width: 660px) {\n    .falc-cta {\n        display: none !important;\n    }\n}</style>", "dependencies": []}, {"css": {}, "dependencies": [], "attributes": {"style": "font-family: \"GT America\",\"Yahoo Sans\",\"Helvetica Neue\",Helvetica,Arial,sans-serif !important;"}, "type": "attribute", "id": "850B8662-F2F3-4144-9795-9E2E20B7F09A", "selector": ".heading"}, {"css": {}, "dependencies": [], "attributes": {"style": "font-family: \"GT America\",\"Yahoo Sans\",\"Helvetica Neue\",Helvetica,Arial,sans-serif !important;"}, "type": "attribute", "id": "8EC3E3C1-065A-4565-98B0-C2110D6896E1", "selector": ".c-kadsAn"}, {"css": {}, "dependencies": [], "attributes": {"style": "font-family: \"GT America\",\"Yahoo Sans\",\"Helvetica Neue\",Helvetica,Arial,sans-serif !important;"}, "type": "attribute", "id": "DCBC728E-ED94-4BC3-ACEF-07EC30834793", "selector": "button"}, {"css": {}, "dependencies": [], "attributes": {"style": "font-family: \"GT America\",\"Yahoo Sans\",\"Helvetica Neue\",Helvetica,Arial,sans-serif !important;"}, "type": "attribute", "id": "B5943F0D-067B-429D-8334-D95A4C067A82", "selector": "section.footer > p"}, {"css": {}, "dependencies": [], "attributes": {"style": "font-family: \"GT America\",\"Yahoo Sans\",\"Helvetica Neue\",Helvetica,Arial,sans-serif !important;"}, "type": "attribute", "id": "8743603E-F983-401C-98FF-38DF13344E3D", "selector": ".progress-percentage"}, {"css": {"height": "20px"}, "dependencies": [], "attributes": {"src": "//cdn.optimizely.com/img/19181790056/c12da90ae2384e8a9e1a12ce05f584e9.svgz"}, "type": "attribute", "id": "FB726B02-DF9C-498F-90BA-AB3CC604ACEE", "selector": ".header__inner > img"}, {"css": {}, "dependencies": [], "attributes": {"style": "font-family: \"GT America\",\"Yahoo Sans\",\"Helvetica Neue\",Helvetica,Arial,sans-serif !important;"}, "type": "attribute", "id": "6ACB277E-F6E7-45FE-802C-DDE79A8C0E56", "selector": "small"}, {"css": {}, "dependencies": [], "attributes": {"style": "font-family: \"GT America\",\"Yahoo Sans\",\"Helvetica Neue\",Helvetica,Arial,sans-serif !important;"}, "type": "attribute", "id": "75FDD09B-0610-4CED-8D90-CA22A1533B54", "selector": ".accordion--title"}, {"css": {}, "dependencies": [], "attributes": {"style": "max-height: 38px;\nfont-family: \"GT America\",\"Yahoo Sans\",\"Helvetica Neue\",Helvetica,Arial,sans-serif !important;"}, "type": "attribute", "id": "7FB94CCE-46B7-438E-A07A-F45B7786B786", "selector": ".accordion--paragraph"}, {"css": {}, "dependencies": [], "attributes": {"style": "font-family: \"GT America\",\"Yahoo Sans\",\"Helvetica Neue\",Helvetica,Arial,sans-serif !important;"}, "type": "attribute", "id": "E6F9CE79-FBAA-4FF5-982D-9CFF40A98D51", "selector": ".c-iPkbni"}, {"css": {}, "dependencies": [], "attributes": {"style": "font-family: \"GT America\",\"Yahoo Sans\",\"Helvetica Neue\",Helvetica,Arial,sans-serif !important;"}, "type": "attribute", "id": "F05B1031-E4F6-4AB1-9F2E-0EE8D179DB52", "selector": ".label"}, {"id": "060A44D4-D21C-4AD6-987D-E9A4F4B80D9B", "type": "append", "dependencies": [], "selector": ".logo > svg", "value": "<img src='//cdn.optimizely.com/img/19181790056/16b57f2094c647859eaed001e8fe41e3.svgz' />", "operator": "before"}]}]}], "weightDistributions": null, "name": "YF Cobranded Funnel", "bucketingStrategy": null, "experimentMetadata": {"allocationPolicy": "manual", "layerId": "30093630301"}, "deployed": false}], "policy": "single_experiment", "viewIds": ["19540800066"], "weightDistributions": null, "decisionMetadata": null, "concluded": false}, {"changes": null, "id": "30154970723", "name": "Life Insurance Quotes No Offers Patch", "commitId": "30142310144", "groupId": null, "holdback": 0, "activation": {}, "integrationSettings": {"mixpanel": {}}, "integrationStringVersion": 2, "experiments": [{"audienceIds": null, "audienceName": "Everyone else", "changes": null, "id": "30100340504", "integrationSettings": null, "variations": [{"id": "30182990008", "name": "Original", "actions": [{"viewId": "30173210244", "changes": [{"css": {}, "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "4363E477-3C5F-4BC6-8BA1-8FB0C2317D31", "selector": ".js-table-unavailable"}]}]}], "weightDistributions": null, "name": "Life Insurance Quotes No Offers Patch", "bucketingStrategy": null, "experimentMetadata": {"allocationPolicy": "manual", "layerId": "30154970723"}, "deployed": false}], "policy": "single_experiment", "viewIds": ["30173210244"], "weightDistributions": null, "decisionMetadata": null, "concluded": false}, {"changes": null, "id": "5188304711188480", "name": "Retirement Budget Longevity ($1.7M) D2F Banner", "commitId": "5447352106876928", "groupId": null, "holdback": 0, "activation": {}, "integrationSettings": {"mixpanel": {}}, "integrationStringVersion": 2, "experiments": [{"audienceIds": ["and", "6018164769685504"], "audienceName": "Retirement Longevity ($1.7M) D2F", "changes": null, "id": "4724433747705856", "integrationSettings": null, "variations": [{"id": "5208882167939072", "name": "Control", "actions": [{"viewId": "6020770103558144", "changes": []}]}, {"id": "6315438917812224", "name": "Banner", "actions": [{"viewId": "6020770103558144", "changes": [{"id": "709e1de3ec864f4d883def3b1bafa231", "type": "custom_code", "value": function($){function waitForBanner() {
  const maxAttempts = 50;
  let attempts = 0;
  
  const interval = setInterval(function() {
    attempts++;
    const banner = document.getElementById('banner');
    const closeButton = document.getElementById('customBannerClose');
    
    if (banner && closeButton) {
      clearInterval(interval);
      
      closeButton.addEventListener('click', function() {
        banner.style.opacity = '0';
        banner.style.transition = 'opacity 0.3s ease';
        
        setTimeout(function() {
          banner.style.display = 'none';
        }, 300);
      });
      
    } else if (attempts >= maxAttempts) {
      clearInterval(interval);
    }
  }, 100);
}

waitForBanner();
}, "dependencies": []}, {"id": "a69d116aa15f485f8a0d545c79465497", "type": "append", "selector": "head", "value": "<style>.banner {\n        display: flex;\n        background-color: #F1FAFF;\n        border-radius: 16px;\n        padding: 16px;\n        max-width: 656px;\n        margin: 0 auto;\n        gap: 16px;\n        position: relative;\n        animation: slideDown 0.3s ease-out;\n        padding: 8px;\n        align-items: center;\n    }\n\n    @keyframes slideDown {\n        from {\n            opacity: 0;\n            transform: translateY(-20px);\n        }\n\n        to {\n            opacity: 1;\n            transform: translateY(0);\n        }\n    }\n\n    .custom-banner-close.closing {\n        animation: slideUp 0.3s ease-out forwards;\n    }\n\n    @keyframes slideUp {\n        from {\n            opacity: 1;\n            transform: translateY(0);\n            max-height: 200px;\n        }\n\n        to {\n            opacity: 0;\n            transform: translateY(-20px);\n            max-height: 0;\n            padding: 0;\n            margin: 0;\n            border: none;\n        }\n    }\n\n    .banner-icon {\n        flex-shrink: 0;\n        width: 32px;\n        height: 32px;\n        color: #0891b2;\n    }\n\n    .banner-icon svg {\n        width: 100%;\n        height: 100%;\n    }\n\n    .banner-content {\n        flex: 1;\n        color: #333;\n        font-size: 16px;\n        line-height: 1.5;\n    }\n\n    .custom-banner-close {\n        flex-shrink: 0;\n        position: relative;\n        top: -16px;\n        right: 0px;\n        background: none;\n        border: none;\n        cursor: pointer;\n        padding: 4px;\n        color: #64748b;\n        width: 24px;\n        height: 24px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 16px;\n        transition: all 0.2s ease;\n    }\n\n    .custom-banner-close:hover {\n        background-color: #cbd5e1;\n        color: #334155;\n    }\n\n    .custom-banner-close svg {\n        width: 16px;\n        height: 16px;\n        position: absolute;\n        /* Add this */\n\n    }\n\n    .hidden {\n        display: none;\n    }\n\n    .progress-wrapper.progress-hidden {\n        height: 32px;\n    }\n\n\t@media (max-width: 700px) {\n    .progress-wrapper.progress-hidden {\n        height: 16px;\n    }\n    .banner {\n        margin-top: 1rem;\n    }\n    .custom-banner-close {\n        top: -26px;\n    }\n}\n\n.banner-content b {\n    font-weight: 900; /* Explicitly removing bold */\n}\n\n    .banner:not(.funnel--groupAge .banner) {\n    display:none;\n}</style>", "dependencies": []}, {"id": "1cfd09d623fe4fda918fa9778e0ea3d5", "type": "append", "dependencies": [], "selector": ".funnel--groupAge .funnel--question-container", "value": "<div class=\"banner\" id=\"banner\">\n        <div class=\"banner-icon\">\n            <!-- Info Icon -->\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\">\n<path d=\"M15 5.2C16.7 6.9 16.7 9.6 15 11.2C13.3 12.8 10.6 12.9 8.99999 11.2C7.39999 9.5 7.29999 6.8 8.99999 5.2C10.7 3.6 13.3 3.6 15 5.2\" stroke=\"#20A7E2\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n<path d=\"M4 20C4 17.5 6 15.5 8.5 15.5H11.1\" stroke=\"#20A7E2\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n<path d=\"M19 17.6V16.5C19 15.7 18.3 15 17.5 15C16.7 15 16 15.7 16 16.5V17.6\" stroke=\"#20A7E2\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M19 17.6H16C15.4 17.6 15 18 15 18.6V20C15 20.6 15.4 21 16 21H19C19.6 21 20 20.6 20 20V18.6C20 18 19.6 17.6 19 17.6Z\" stroke=\"#20A7E2\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n</svg>\n        </div>\n     <div class=\"banner-content\">\n       \"Will <b>$1.7M+</b> last?\" depends on choices\u2014not hope. A <b>fiduciary advisor</b> can help size and structure your retirement budget\n       </div>\n    <button class=\"custom-banner-close\" id=\"customBannerClose\" aria-label=\"Close banner\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n        </svg>\n    </button>\n</div>", "operator": "before"}, {"css": {}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "696b915b57844bdf9e58c33d3e1e030a", "selector": "#customBannerClose"}]}]}], "weightDistributions": [{"entityId": "6315438917812224", "endOfRange": 10000}], "name": "Retirement Budget Longevity ($1.7M) D2F Banner", "bucketingStrategy": null, "experimentMetadata": {"allocationPolicy": "manual", "layerId": "5188304711188480"}, "deployed": true}], "policy": "single_experiment", "viewIds": ["6020770103558144"], "weightDistributions": null, "decisionMetadata": null, "concluded": true}, {"changes": null, "id": "5398731533582336", "name": "D2F Advisor Focused Messaging ($1.1M)", "commitId": "5137570275786752", "groupId": null, "holdback": 5000, "activation": {}, "integrationSettings": {"mixpanel": {}}, "integrationStringVersion": 2, "experiments": [{"audienceIds": ["and", "6565373063987200"], "audienceName": "Retirement Longevity ($1.1M)", "changes": null, "id": "4936046182400000", "integrationSettings": null, "variations": [{"id": "4829226117890048", "name": "Control", "actions": []}, {"id": "6193101438451712", "name": "Treatment", "actions": [{"viewId": "5146443074240512", "changes": [{"id": "94d6d78ce115494ca20ff7b439b2c2cb", "type": "custom_code", "value": function($){var utils = window.optimizely.get("utils");

var NEW_HTML =
  'Will <strong>$1.1M</strong> last? Answer a few questions to discuss your retirement budget and options with a <strong>fiduciary advisor</strong>.';

function applyCopy(el) {
  if (!el) return;
  if (el.innerHTML !== NEW_HTML) {
    el.innerHTML = NEW_HTML;
    console.log("banner text updated");
  }
}

utils.observeSelector(".c-iWJjWs", function (el) {
  // Apply immediately on mount
  applyCopy(el);

  // Prevent attaching multiple observers to the same node
  if (el._saBannerObserver) return;

  var mo = new MutationObserver(function () {
    applyCopy(el);
  });

  mo.observe(el, {
    childList: true,
    characterData: true,
    subtree: true
  });

  el._saBannerObserver = mo;
});
}, "dependencies": []}, {"css": {}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "1D9918F1-1877-41D7-A518-3B909A4A9C17", "selector": ".c-gfNblA > span"}]}]}], "weightDistributions": [{"entityId": "4829226117890048", "endOfRange": 5000}, {"entityId": "6193101438451712", "endOfRange": 10000}], "name": "D2F Advisor Focused Messaging ($1.1M)", "bucketingStrategy": null, "experimentMetadata": {"allocationPolicy": "manual", "layerId": "5398731533582336"}, "deployed": false}], "policy": "single_experiment", "viewIds": ["5146443074240512"], "weightDistributions": null, "decisionMetadata": null, "concluded": false}, {"changes": null, "id": "5458914628599808", "name": "D2F Advisor Focused Messaging ($1.5M)", "commitId": "5981519605399552", "groupId": null, "holdback": 5000, "activation": {}, "integrationSettings": {"mixpanel": {}}, "integrationStringVersion": 2, "experiments": [{"audienceIds": ["and", "5144629171978240"], "audienceName": "Retirement Longevity ($1.5M) D2F", "changes": null, "id": "5348947158368256", "integrationSettings": null, "variations": [{"id": "6103009902460928", "name": "Control", "actions": [{"viewId": "6477596381151232", "changes": [{"css": {}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "85BAEF2B-7444-4BC7-A808-BFCD342ABBD2", "selector": ".c-gfNblA > span"}]}]}, {"id": "4755227186823168", "name": "Treatment", "actions": [{"viewId": "6477596381151232", "changes": [{"id": "8e758a2377974c6495e695aba0dd6b9d", "type": "custom_code", "value": function($){var utils = window.optimizely.get("utils");

var NEW_HTML =
  'Will <strong>$1.5M</strong> last? Answer a few questions to discuss your retirement budget and options with a <strong>fiduciary advisor</strong>.';

function applyCopy(el) {
  if (!el) return;
  if (el.innerHTML !== NEW_HTML) {
    el.innerHTML = NEW_HTML;
    console.log("banner text updated");
  }
}

utils.observeSelector(".c-iWJjWs", function (el) {
  // Apply immediately on mount
  applyCopy(el);

  // Prevent attaching multiple observers to the same node
  if (el._saBannerObserver) return;

  var mo = new MutationObserver(function () {
    applyCopy(el);
  });

  mo.observe(el, {
    childList: true,
    characterData: true,
    subtree: true
  });

  el._saBannerObserver = mo;
});
}, "dependencies": []}, {"css": {}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "a789c0e5a737433cb4ddd4d18959706d", "selector": ".c-gfNblA > span"}]}]}], "weightDistributions": [{"entityId": "6103009902460928", "endOfRange": 5000}, {"entityId": "4755227186823168", "endOfRange": 10000}], "name": "D2F Advisor Focused Messaging ($1.5M)", "bucketingStrategy": null, "experimentMetadata": {"allocationPolicy": "manual", "layerId": "5458914628599808"}, "deployed": false}], "policy": "single_experiment", "viewIds": ["6477596381151232"], "weightDistributions": null, "decisionMetadata": null, "concluded": false}, {"changes": null, "id": "5797507406495744", "name": "Zoe Fin Match Screen", "commitId": "6119198624055296", "groupId": null, "holdback": 0, "activation": {}, "integrationSettings": {"mixpanel": {}}, "integrationStringVersion": 2, "experiments": [{"audienceIds": null, "audienceName": "Everyone else", "changes": null, "id": "4627631816048640", "integrationSettings": null, "variations": [{"id": "5234557453074432", "name": "Zoe Fin", "actions": [{"viewId": "5161889424998400", "changes": [{"id": "6183a876feb74cdd98e4e97a33be8491", "type": "custom_code", "value": function($){// This function contains all of your original logic.
// It will only be called once the observer finds the target elements.
function runMainLogic() {
  // Collect all h4 elements with class "hidden-mobile"
  var h4Elements = document.querySelectorAll(".profile_type");

  var advisorNames = document.querySelectorAll(".profile_robo_name");

  var targetNames1 = ["Zoe Financial"];
  var targetNames2 = ["Zoe Financial"];

  /// Hide CTA
  for (var i = 0; i < advisorNames.length; i++) {
    var h3Text = advisorNames[i].textContent.trim();
    if (targetNames1.includes(h3Text)) {
      var styleSheet = document.createElement("style");
      styleSheet.innerText = ".robo_advisor_profile_logo {align-self: flex-start;} .robo_advisor_profile_logo img {border-radius: 80px;}";
      document.head.appendChild(styleSheet);
      var elementsToHide1 = ["ul.tabs", "span.profile_cta_button", "div.resource_cards_wrapper"];
      elementsToHide1.forEach(function(selector) {
        var elements = document.querySelectorAll(selector);
        elements.forEach(function(element) {
          element.style.display = "none";
        });
      });
      var funnelHeaders = document.querySelectorAll("h2.funnel_header");
      funnelHeaders.forEach(function(header) {
        header.style.paddingBottom = "0px";
      });
      break;
    }
  }

  /// Hide Robo name
  for (var i = 0; i < advisorNames.length; i++) {
    var h3Text = advisorNames[i].textContent.trim();
    if (targetNames2.includes(h3Text)) {
      var elementsToHide2 = [".profile_type"];
      elementsToHide2.forEach(function(selector) {
        var elements = document.querySelectorAll(selector);
        elements.forEach(function(element) {
          element.style.display = "none";
        });
      });
      var funnelHeaders = document.querySelectorAll("h2.funnel_header");
      funnelHeaders.forEach(function(header) {
        header.style.paddingBottom = "0px";
      });
      break;
    }
  }

  // Hide Concierge

  h4Elements.forEach(function(h4) {
    var h4Text = h4.textContent.trim();
    if (h4Text === "Robo Advisor") {
      var elementsToHide3 = ["div.concierge_step", "div.intro"];
      elementsToHide3.forEach(function(selector) {
        var elements = document.querySelectorAll(selector);
        elements.forEach(function(element) {
          element.style.display = "none";
        });
      });
    }
  });
}

// NEW: Wait for the basic document to be ready before setting up the observer.
document.addEventListener("DOMContentLoaded", function() {
  // --- The MutationObserver Setup ---
  const callback = function(mutationsList, observer) {
    if (document.querySelectorAll(".profile_robo_name").length > 0) {
      runMainLogic();
      observer.disconnect();
    }
  };
  const observer = new MutationObserver(callback);
  observer.observe(document.body, {
    childList: true,
    subtree: true
  });
});
}, "dependencies": []}]}]}], "weightDistributions": null, "name": "Zoe Fin Match Screen", "bucketingStrategy": null, "experimentMetadata": {"allocationPolicy": "manual", "layerId": "5797507406495744"}, "deployed": false}], "policy": "single_experiment", "viewIds": ["5161889424998400"], "weightDistributions": null, "decisionMetadata": null, "concluded": false}, {"changes": null, "id": "5856233383526400", "name": "Top FA Content & Design", "commitId": "6456646419873792", "groupId": null, "holdback": 0, "activation": {}, "integrationSettings": {"mixpanel": {}}, "integrationStringVersion": 2, "experiments": [{"audienceIds": null, "audienceName": "Everyone else", "changes": null, "id": "5296694422667264", "integrationSettings": null, "variations": [{"id": "6156140531154944", "name": "Original", "actions": [{"viewId": "6679541083537408", "changes": [{"id": "AE19A916-07DA-41D6-B858-2F40931D29D6", "type": "custom_code", "value": function($){// Optimizely Custom JS
(function() {
  var utils = window.optimizely.get('utils');

  // Helper to send Mixpanel events with current URL
  function track(eventName) {
    if (window.mixpanel && typeof mixpanel.track === 'function') {
      mixpanel.track(eventName, { url: window.location.href });
    }
  }

  //
  // Click events (unchanged)
  //

  // lower-advisor-click
  utils.observeSelector('.top-fa-test__btn--lower', function(el) {
    el.addEventListener('click', function() {
      track('lower-advisor-click');
    });
  });
  utils.observeSelector('.product-details-inner .cta-link', function(el) {
    el.addEventListener('click', function() {
      if (!el.closest('td.smart-review-table-logo_cell')) {
        track('lower-advisor-click');
      }
    });
  });

  // table-advisor-click
  utils.observeSelector('.top-fa-test__btn--primary', function(el) {
    el.addEventListener('click', function() {
      track('table-advisor-click');
    });
  });
  utils.observeSelector('td.smart-review-table-logo_cell .cta-link', function(el) {
    el.addEventListener('click', function() {
      if (!el.closest('.product-details-inner')) {
        track('table-advisor-click');
      }
    });
  });

  // table-review-click
  utils.observeSelector('.top-fa-test__btn--secondary, .read_review', function(el) {
    el.addEventListener('click', function() {
      track('table-review-click');
    });
  });

  // zip-click
  utils.observeSelector('.zip-button', function(el) {
    el.addEventListener('click', function() {
      track('zip-click');
    });
  });

  //
  // Inview events using H2 text
  //

  utils.observeSelector('h2', function(h2) {
    var text = h2.textContent.trim();
    var eventMap = {
      'CAPTRUST': 'listing-1-view',
      'Corient': 'listing-5-view',
      'Moneta Group Investment Advisors': 'listing-10-view'
    };
    var eventName = eventMap[text];
    if (!eventName) return;

    var io = new IntersectionObserver(function(entries, obs) {
      if (entries[0].isIntersecting) {
        track(eventName);
        obs.unobserve(entries[0].target);
      }
    });
    io.observe(h2);
  });

  // methodology-view (unchanged)
  utils.observeSelector('h2', function(h2) {
    if (h2.textContent.trim() === 'What We Use in Our Methodology') {
      var io2 = new IntersectionObserver(function(entries, obs) {
        if (entries[0].isIntersecting) {
          track('methodology-view');
          obs.disconnect();
        }
      });
      io2.observe(h2);
    }
  });

})();
}, "dependencies": []}, {"css": {}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "3F5F2F07-CA4D-4E7F-92FA-3D88536CE378", "selector": ".cta-link"}, {"css": {}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "55DB5091-A60D-4311-B438-E6876B7CCE98", "selector": ".read_review"}, {"css": {}, "dependencies": [], "attributes": {"html": "To find the top financial advisors in the U.S., we first identified all firms registered with the SEC in the country. Next, we filtered out firms that don't offer financial planning services, those that don't serve primarily individual clients and those that have a disclosure history of felonies, misdemeanors or more serious regulatory matters on their record. The qualifying firms were then ranked according to the following criteria:"}, "type": "attribute", "id": "2D203C1F-BC74-47E1-9AD0-E5E73C8EEF66", "selector": ".overview > p:nth-of-type(4)"}]}]}, {"id": "5637221257052160", "name": "Scratch - Star Rating", "actions": [{"viewId": "6679541083537408", "changes": [{"id": "53266722-02FE-423A-918F-E781D3A9EEE2", "type": "append", "selector": "head", "value": "<style>.main {\n  background-color: white; \n}\n\n.smart-review-table {\n  display: none;\n}\n\ndiv.right-column.clearfix.js-right-column {\n  display: none;\n}\n\ndiv.left-column {\n  width: 1200px !important;\n}\n\narticle.left-column.left-column--review {\n  width: 1200px !important;\n}\n\n.zip-container .zip-interact {\n  max-width: 50%;\n}\n\n\n/* \u2500\u2500\u2500 Table Wrapper \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\n.top-fa-test__table {\n  margin-top: 20px;\n  width: 100%;\n  border-collapse: separate;\n  border-spacing: 0;\n  border: 1px solid #ddd;\n  border-radius: 6px;\n  overflow: hidden;\n  table-layout: auto;\n}\n\n/* \u2500\u2500\u2500 Header & Body Cells \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\n.top-fa-test__table th,\n.top-fa-test__table td {\n  display: table-cell;\n  vertical-align: middle;\n  padding: 12px 16px;\n  text-align: center;\n  border-bottom: 1px solid #eee;\n}\n\n/* \u2500\u2500\u2500 Header Row Styling \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\n.top-fa-test__table thead th {\n  background-color: #F1FAFF;\n}\n.top-fa-test__table thead tr {\n  border-bottom: 1px solid #eee;\n}\n\n/* \u2500\u2500\u2500 Remove Last Row Border \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\n.top-fa-test__table tbody tr:last-child td {\n  border-bottom: none;\n}\n\n/* \u2500\u2500\u2500 First Column (\u201cRank\u201d) Width \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\n.top-fa-test__table th:first-child,\n.top-fa-test__table td:first-child {\n  width: 30px;\n}\n\n/* \u2500\u2500\u2500 Advisor Cell (logo + name) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\n.top-fa-test__advisor {\n  display: inline-flex;\n  align-items: center;\n  white-space: nowrap;\n}\n.top-fa-test__advisor img {\n  flex-shrink: 0;\n  width: 40px;\n  height: 40px;\n  object-fit: contain;\n  margin-right: 8px;\n}\n\n/* \u2500\u2500\u2500 Rating Cell \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\n.top-fa-test__rating {\n  font-size: 14px;\n}\n\n/* \u2500\u2500\u2500 Learn More Buttons Cell \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\n/* no flex here\u2014use block links to stack */\n.top-fa-test__actions a {\n  display: block;\n  margin-bottom: 6px;\n}\n.top-fa-test__actions a:last-child {\n  margin-bottom: 0;\n}\n\n/* \u2500\u2500\u2500 Buttons \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\n.top-fa-test__btn {\n  display: inline-block;\n  padding: 8px 12px;\n  font-size: 14px;\n  text-decoration: none;\n  text-align: center;\n  border-radius: 4px;\n}\n.top-fa-test__btn--primary {\n  background-color: #ff7226;\n  color: #fff;\n  border: none;\n}\n.top-fa-test__btn--secondary {\n  background-color: #f1f1f1;\n  color: #333;\n  border: none;\n}</style>", "dependencies": []}, {"id": "5E6956A6-26ED-4B9C-9B07-411B51E85B30", "type": "append", "dependencies": [], "selector": ".zip-container", "value": "<table class=\"top-fa-test__table\">\n  <thead>\n    <tr>\n      <th>Rank</th>\n      <th>Financial Advisor</th>\n      <th>Clients per Advisor</th>\n      <th>Fee Structure</th>\n      <th>Avg Account Size</th>\n      <th>Minimum</th>\n      <th>Learn More</th>\n    </tr>\n  </thead>\n  <tbody>\n    <!-- Row 1 -->\n    <tr>\n      <td>1</td>\n      <td class=\"top-fa-test__advisor\">\n        <img src=\"https://d31s10tn3clc14.cloudfront.net/imgs/falc/Review-Logos/Raleigh/CAPTRUST.png\" alt=\"Advisor Logo\">\n        <span>CAPTRUST </span>\n      </td>\n      <td>45</td>\n      <td>Fee-based</td>\n      <td>$2.2M</td>\n      <td>Varies by account time</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"#\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"#\" class=\"top-fa-test__btn top-fa-test__btn--secondary\">Read Full Review</a>\n      </td>\n    </tr>\n    <!-- Row 2 -->\n    <tr>\n      <td>2</td>\n      <td class=\"top-fa-test__advisor\">\n        <img src=\"https://smartasset.com/wp-content/uploads/sites/2/2024/10/SA-Logo.png\" alt=\"Advisor Logo\">\n        <span>Advisor 2</span>\n      </td>\n      <td>98</td>\n      <td>0.90% AUM</td>\n      <td>$52,000</td>\n      <td class=\"top-fa-test__rating\">\u2605\u2605\u2605\u2606\u2606\u00a03/5</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"#\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"#\" class=\"top-fa-test__btn top-fa-test__btn--secondary\">Read Full Review</a>\n      </td>\n    </tr>\n    <!-- Row 3 -->\n    <tr>\n      <td>3</td>\n      <td class=\"top-fa-test__advisor\">\n        <img src=\"https://smartasset.com/wp-content/uploads/sites/2/2024/10/SA-Logo.png\" alt=\"Advisor Logo\">\n        <span>Advisor 3</span>\n      </td>\n      <td>76</td>\n      <td>1.20% AUM</td>\n      <td>$60,000</td>\n      <td class=\"top-fa-test__rating\">\u2605\u2605\u2605\u2605\u2605\u00a05/5</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"#\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"#\" class=\"top-fa-test__btn top-fa-test__btn--secondary\">Read Full Review</a>\n      </td>\n    </tr>\n    <!-- Row 4 -->\n    <tr>\n      <td>4</td>\n      <td class=\"top-fa-test__advisor\">\n        <img src=\"https://smartasset.com/wp-content/uploads/sites/2/2024/10/SA-Logo.png\" alt=\"Advisor Logo\">\n        <span>Advisor 4</span>\n      </td>\n      <td>112</td>\n      <td>0.75% AUM</td>\n      <td>$45,000</td>\n      <td class=\"top-fa-test__rating\">\u2605\u2605\u2605\u2606\u2606\u00a03/5</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"#\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"#\" class=\"top-fa-test__btn top-fa-test__btn--secondary\">Read Full Review</a>\n      </td>\n    </tr>\n    <!-- Row 5 -->\n    <tr>\n      <td>5</td>\n      <td class=\"top-fa-test__advisor\">\n        <img src=\"https://smartasset.com/wp-content/uploads/sites/2/2024/10/SA-Logo.png\" alt=\"Advisor Logo\">\n        <span>Advisor 5</span>\n      </td>\n      <td>89</td>\n      <td>1.10% AUM</td>\n      <td>$55,000</td>\n      <td class=\"top-fa-test__rating\">\u2605\u2605\u2605\u2605\u2606\u00a04/5</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"#\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"#\" class=\"top-fa-test__btn top-fa-test__btn--secondary\">Read Full Review</a>\n      </td>\n    </tr>\n    <!-- Row 6 -->\n    <tr>\n      <td>6</td>\n      <td class=\"top-fa-test__advisor\">\n        <img src=\"https://smartasset.com/wp-content/uploads/sites/2/2024/10/SA-Logo.png\" alt=\"Advisor Logo\">\n        <span>Advisor 6</span>\n      </td>\n      <td>102</td>\n      <td>0.95% AUM</td>\n      <td>$50,000</td>\n      <td class=\"top-fa-test__rating\">\u2605\u2605\u2605\u2606\u2606\u00a03/5</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"#\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"#\" class=\"top-fa-test__btn top-fa-test__btn--secondary\">Read Full Review</a>\n      </td>\n    </tr>\n    <!-- Row 7 -->\n    <tr>\n      <td>7</td>\n      <td class=\"top-fa-test__advisor\">\n        <img src=\"https://smartasset.com/wp-content/uploads/sites/2/2024/10/SA-Logo.png\" alt=\"Advisor Logo\">\n        <span>Advisor 7</span>\n      </td>\n      <td>67</td>\n      <td>1.05% AUM</td>\n      <td>$47,000</td>\n      <td class=\"top-fa-test__rating\">\u2605\u2605\u2605\u2605\u2606\u00a04/5</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"#\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"#\" class=\"top-fa-test__btn top-fa-test__btn--secondary\">Read Full Review</a>\n      </td>\n    </tr>\n    <!-- Row 8 -->\n    <tr>\n      <td>8</td>\n      <td class=\"top-fa-test__advisor\">\n        <img src=\"https://smartasset.com/wp-content/uploads/sites/2/2024/10/SA-Logo.png\" alt=\"Advisor Logo\">\n        <span>Advisor 8</span>\n      </td>\n      <td>94</td>\n      <td>0.85% AUM</td>\n      <td>$53,000</td>\n      <td class=\"top-fa-test__rating\">\u2605\u2605\u2605\u2606\u2606\u00a03/5</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"#\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"#\" class=\"top-fa-test__btn top-fa-test__btn--secondary\">Read Full Review</a>\n      </td>\n    </tr>\n    <!-- Row 9 -->\n    <tr>\n      <td>9</td>\n      <td class=\"top-fa-test__advisor\">\n        <img src=\"https://smartasset.com/wp-content/uploads/sites/2/2024/10/SA-Logo.png\" alt=\"Advisor Logo\">\n        <span>Advisor 9</span>\n      </td>\n      <td>78</td>\n      <td>1.15% AUM</td>\n      <td>$49,000</td>\n      <td class=\"top-fa-test__rating\">\u2605\u2605\u2605\u2605\u2606\u00a04/5</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"#\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"#\" class=\"top-fa-test__btn top-fa-test__btn--secondary\">Read Full Review</a>\n      </td>\n    </tr>\n    <!-- Row 10 -->\n    <tr>\n      <td>10</td>\n      <td class=\"top-fa-test__advisor\">\n        <img src=\"https://smartasset.com/wp-content/uploads/sites/2/2024/10/SA-Logo.png\" alt=\"Advisor Logo\">\n        <span>Advisor 10</span>\n      </td>\n      <td>85</td>\n      <td>0.98% AUM</td>\n      <td>$51,000</td>\n      <td class=\"top-fa-test__rating\">\u2605\u2605\u2605\u2606\u2606\u00a03/5</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"#\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"#\" class=\"top-fa-test__btn top-fa-test__btn--secondary\">Read Full Review</a>\n      </td>\n    </tr>\n  </tbody>\n</table>", "operator": "after"}, {"css": {}, "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "7AA64B57-B48E-45E7-AB5A-E6859BEB12E7", "selector": ".overview > h2:nth-of-type(1)"}, {"css": {}, "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "29963916-D670-4913-9F9C-12F2FA0DA25B", "selector": ".overview > div:nth-of-type(1) > p:nth-of-type(1)"}, {"css": {}, "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "B6A1DFE7-4D30-4641-9B6F-C7D2AD49E581", "selector": ".overview > div:nth-of-type(1) > p:nth-of-type(2)"}]}]}, {"id": "5453477975949312", "name": "Scratch - No mobile", "actions": [{"viewId": "6679541083537408", "changes": [{"id": "A72E64FB-9816-4458-B3C3-BAB34D60959D", "type": "append", "selector": "head", "value": "<style>/* Main layout CSS */\n.main {\n  background-color: white; \n}\n\n.smart-review-table {\n  display: none;\n}\n\ndiv.right-column.clearfix.js-right-column {\n  display: none;\n}\n\ndiv.left-column {\n  width: 1200px !important;\n}\n\narticle.left-column.left-column--review {\n  width: 1200px !important;\n}\n\n.zip-container .zip-interact {\n  max-width: 50%;\n}\n\n\n/* Lower Article CSS */\n\n.product-details-inner {\n  display: none;\n}\n/*.cta-link {\n  background-color: #ff7226;\n} */\n\n.top-fa-test__btn--primary:hover {\n  background-color: #e65b1f; \n}\n\n.left-column.hash-content.map-content\n{\n  display: none;\n} \n\n.right-column.clearfix.bottom-right.js-bottom-right {\n  display: none;\n}\n\n/* TABLE CSS */ \n\n.top-fa-test__table {\n  width: 100%;\n  margin-top: 20px;\n  border-collapse: collapse;\n  border: 1px solid #ddd;\n  border-radius: 6px;\n  overflow: hidden;\n  table-layout: auto;\n}\n\n.top-fa-test__table th,\n.top-fa-test__table td {\n  padding: 12px 16px;\n  text-align: center;\n  vertical-align: middle;\n  border-bottom: 1px solid #eee;\n  word-wrap: break-word;\n}\n\n.top-fa-test__table thead th {\n  background-color: #F1FAFF;\n    text-wrap: nowrap;\n}\n\n.top-fa-test__table tbody tr:last-child td {\n  border-bottom: none;\n}\n\n/* Rank column */\n.top-fa-test__table th:first-child,\n.top-fa-test__table td:first-child {\n  width: 40px;\n}\n\n/* Advisor cell: logo above name */\n.top-fa-test__advisor {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-start;  /* align at top so images don\u2019t push the line */\n  gap: 8px;                     /* replace image margin with flex gap */\n}\n.top-fa-test__advisor img {\n  height: 25px;\n  width: auto;\n  max-width: 80%;\n  margin-top: 10px;\n  margin-bottom: 10px;\n}\n\n.large {\n  height: 20px !important;\n}\n\n/* Actions column: prevent squish */\n.top-fa-test__actions {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  min-width: 140px;\n}\n.top-fa-test__actions a {\n  display: block;\n  margin-bottom: 6px;\n}\n.top-fa-test__actions a:last-child {\n  margin-bottom: 0;\n}\n\n/* Buttons */\n.top-fa-test__btn {\n  padding: 8px 12px;\n  font-size: 14px;\n  border-radius: 4px;\n  text-decoration: none;\n  text-align: center;\n}\n.top-fa-test__btn--primary {\n  background-color: #ff7226;\n  color: #fff;\n  border: none;\n}\n.top-fa-test__btn--secondary {\n  background-color: #f1f1f1;\n  color: #333;\n  border: none;\n}\n\n/* 1) Kill the old cell-level bottom borders */\n.top-fa-test__table th,\n.top-fa-test__table td {\n  border-bottom: none;\n}\n\n/* 2) Draw one continuous border under each row */\n.top-fa-test__table tbody tr {\n  border-bottom: 1px solid #eee;\n}\n\n/* 3) Don\u2019t draw under the very last row */\n.top-fa-test__table tbody tr:last-child {\n  border-bottom: none;\n}\n\n\n/* Tooltip CSS */\n/* Tooltip styles */\n.tooltip {\n  position: relative;\n  display: inline-block;\n}\n\n.tooltip summary {\n  list-style: none;\n  cursor: pointer;\n  font-weight: normal;\n}\n\n.tooltip summary::-webkit-details-marker {\n  display: none;\n}\n\n/* little info icon */\n.tooltip summary::after {\n  content: \"\u24d8\";\n  font-size: 0.8em;\n  margin-left: 4px;\n  color: #888;\n}\n\n/* hidden by default */\n.tooltip .tooltip-text {\n  display: none;\n  position: absolute;\n  top: 100%;\n  left: 50%;\n  transform: translateX(-50%);\n  margin-top: 8px;\n  padding: 8px 12px;\n  background: rgba(0, 0, 0, 0.8);\n  color: white;\n  font-size: 13px;\n  line-height: 1.4;\n  border-radius: 4px;\n  white-space: normal;\n  max-width: 400px;\n  text-align: left;\n  z-index: 100;\n}\n\n/* show when open */\n.tooltip[open] .tooltip-text {\n  display: block;\n}\n\n/* 1) Keep the <summary> in TH bold like normal header text */\n.top-fa-test__table th summary {\n  font-weight: bold;\n  color: inherit;               /* inherit the TH color */\n}\n\n/* 2) Wider, white-background tooltip */\n.tooltip .tooltip-text {\n  display: none;\n  position: absolute;\n  top: 100%;\n  left: 50%;\n  transform: translateX(-50%);\n  margin-top: 8px;\n  padding: 10px 14px;\n  background: #fff;             /* white bg */\n  color: #000; \n  font-weight: normal; /* black text */\n  border: 1px solid #ccc;       /* light gray border */\n  border-radius: 4px;\n  font-size: 13px;\n  line-height: 1.4;\n  white-space: normal;\n  width: 260px;                 /* set a fixed wider width */\n  box-shadow: 0 2px 6px rgba(0,0,0,0.15);\n  z-index: 100;\n}</style>", "dependencies": []}, {"id": "8AF9E739-F3F9-47EF-9784-BF8C70869CC0", "type": "append", "dependencies": [], "selector": ".zip-container", "value": "<table class=\"top-fa-test__table\">\n<thead>\n  <tr>\n    <th>Rank</th>\n    <th>Financial Advisor</th>\n\n    <th>\n      <details class=\"tooltip\">\n        <summary>Clients per Advisor</summary>\n        <div class=\"tooltip-text\">\n          Calculated by dividing the firm's total client count by its total number of on-staff advisors.\n        </div>\n      </details>\n    </th>\n\n    <th>\n      <details class=\"tooltip\">\n        <summary>Fee Structure</summary>\n        <div class=\"tooltip-text\">\n          To learn how fee-only and fee-based fee structures differ, <a href=\"#\" target=\"_blank\" rel=\"noopener\">read our explainer here</a>.\n        </div>\n      </details>\n    </th>\n\n    <th>\n      <details class=\"tooltip\">\n        <summary>Avg Account Size</summary>\n        <div class=\"tooltip-text\">\n          Calculated by dividing the firm's total assets attributed to individual clients by its total number of individual clients.\n        </div>\n      </details>\n    </th>\n\n    <th>Account Minimum</th>\n    <th>Learn More</th>\n  </tr>\n</thead>\n  <tbody>\n    <tr>\n      <td>1</td>\n      <td class=\"top-fa-test__advisor\" style=\"--advisor-logo-max-height:80px;\">\n        <img src=\"https://d31s10tn3clc14.cloudfront.net/imgs/falc/Review-Logos/Raleigh/CAPTRUST.png\" alt=\"CAPTRUST logo\" class=\"large\">\n        <span>CAPTRUST</span>\n      </td>\n      <td>45</td>\n      <td>Fee-based</td>\n      <td>$2.2M</td>\n      <td>Varies by account type</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"https://smartasset.com/retirement/find-a-financial-planner?utm_source=smartasset&utm_medium=summarytable&utm_content=captrust\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"https://smartasset.com/financial-advisor/captrust-financial-advisors-review\" class=\"top-fa-test__btn top-fa-test__btn--secondary\" target=\"_blank\">Read Full Review</a>\n      </td>\n    </tr>\n    <tr>\n      <td>2</td>\n      <td class=\"top-fa-test__advisor\" style=\"--advisor-logo-max-height:80px;\">\n        <img src=\"https://d31s10tn3clc14.cloudfront.net/imgs/individual+firm+reviews/Fisher_logo.png\" alt=\"Fisher Investments logo\" class=\"large\">\n        <span>Fisher Investments</span>\n      </td>\n      <td>93</td>\n      <td>Fee-only</td>\n      <td>$1.5M</td>\n      <td>$1M</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"https://smartasset.com/retirement/find-a-financial-planner?utm_source=smartasset&utm_medium=summarytable&utm_content=fisher\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"https://smartasset.com/financial-advisor/fisher-investment-management-review\" class=\"top-fa-test__btn top-fa-test__btn--secondary\" target=\"_blank\">Read Full Review</a>\n      </td>\n    </tr>\n    <tr>\n      <td>3</td>\n      <td class=\"top-fa-test__advisor\" style=\"--advisor-logo-max-height:80px;\">\n        <img src=\"https://d31s10tn3clc14.cloudfront.net/imgs/falc/Review-Logos/cerity_logo.png\" alt=\"Cerity Partners logo\" class=\"large\">\n        <span>Cerity Partners</span>\n      </td>\n      <td>23</td>\n      <td>Fee-based</td>\n      <td>$4.4M</td>\n      <td>No set minimum</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"https://smartasset.com/retirement/find-a-financial-planner?utm_source=smartasset&utm_medium=summarytable&utm_content=cerity\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"https://smartasset.com/financial-advisor/cerity-partners-review\" class=\"top-fa-test__btn top-fa-test__btn--secondary\" target=\"_blank\">Read Full Review</a>\n      </td>\n    </tr>\n    <tr>\n      <td>4</td>\n      <td class=\"top-fa-test__advisor\" style=\"--advisor-logo-max-height:80px;\">\n        <img src=\"https://d31s10tn3clc14.cloudfront.net/imgs/falc/Review-Logos/wealth_enhancement_advisory_logo.png\" alt=\"Wealth Enhancement Advisory Services logo\">\n        <span>Wealth Enhancement Advisory Services</span>\n      </td>\n      <td>97</td>\n      <td>Fee-based</td>\n      <td>$1.3M</td>\n      <td>Varies by account type</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"https://smartasset.com/retirement/find-a-financial-planner?utm_source=smartasset&utm_medium=summarytable&utm_content=weas\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"https://smartasset.com/financial-advisor/wealth-enhancement-advisory-services-review\" class=\"top-fa-test__btn top-fa-test__btn--secondary\" target=\"_blank\">Read Full Review</a>\n      </td>\n    </tr>\n    <tr>\n      <td>5</td>\n      <td class=\"top-fa-test__advisor\" style=\"--advisor-logo-max-height:80px;\">\n        <img src=\"https://d31s10tn3clc14.cloudfront.net/imgs/falc/Review-Logos/corient_logo.png\" alt=\"Corient logo\">\n        <span>Corient</span>\n      </td>\n      <td>40</td>\n      <td>Fee-only</td>\n      <td>$5.4M</td>\n      <td>No set minimum</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"https://smartasset.com/retirement/find-a-financial-planner?utm_source=smartasset&utm_medium=summarytable&utm_content=corient\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"https://smartasset.com/financial-advisor/us-top-financial-advisors#listing-5\" class=\"top-fa-test__btn top-fa-test__btn--secondary\">Read Full Review</a>\n      </td>\n    </tr>\n    <tr>\n      <td>6</td>\n      <td class=\"top-fa-test__advisor\" style=\"--advisor-logo-max-height:80px;\">\n        <img src=\"https://d31s10tn3clc14.cloudfront.net/imgs/falc/Review-Logos/pathstone_family_office_logo_1.png\" alt=\"Pathstone logo\">\n        <span>Pathstone</span>\n      </td>\n      <td>6</td>\n      <td>Fee-only</td>\n      <td>$40.5M</td>\n      <td>$10M</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"https://smartasset.com/retirement/find-a-financial-planner?utm_source=smartasset&utm_medium=summarytable&utm_content=pathstone\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"https://smartasset.com/financial-advisor/us-top-financial-advisors#listing-6\" class=\"top-fa-test__btn top-fa-test__btn--secondary\">Read Full Review</a>\n      </td>\n    </tr>\n    <tr>\n      <td>7</td>\n      <td class=\"top-fa-test__advisor\" style=\"--advisor-logo-max-height:80px;\">\n        <img src=\"https://d31s10tn3clc14.cloudfront.net/imgs/falc/Review-Logos/summit_rock_advisors_logo.png\" alt=\"Summit rock Advisors logo\">\n        <span>Summit Rock Advisors</span>\n      </td>\n      <td>2</td>\n      <td>Fee-only</td>\n      <td>$187.7M</td>\n      <td>$100M</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"https://smartasset.com/retirement/find-a-financial-planner?utm_source=smartasset&utm_medium=summarytable&utm_content=summit\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"https://smartasset.com/financial-advisor/us-top-financial-advisors#listing-7\" class=\"top-fa-test__btn top-fa-test__btn--secondary\">Read Full Review</a>\n      </td>\n    </tr>\n    <tr>\n      <td>8</td>\n      <td class=\"top-fa-test__advisor\" style=\"--advisor-logo-max-height:80px;\">\n        <img src=\"https://d31s10tn3clc14.cloudfront.net/imgs/falc/Review-Logos/nfp_logo_1.png\" alt=\"NFP Retirement logo\">\n        <span>NFP Retirement</span>\n      </td>\n      <td>44</td>\n      <td>Fee-based</td>\n      <td>$496.7K</td>\n      <td>$25K</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"https://smartasset.com/retirement/find-a-financial-planner?utm_source=smartasset&utm_medium=summarytable&utm_content=nfp\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"https://smartasset.com/financial-advisor/us-top-financial-advisors#listing-8\" class=\"top-fa-test__btn top-fa-test__btn--secondary\">Read Full Review</a>\n      </td>\n    </tr>\n    <tr>\n      <td>9</td>\n      <td class=\"top-fa-test__advisor\" style=\"--advisor-logo-max-height:80px;\">\n        <img src=\"https://d31s10tn3clc14.cloudfront.net/imgs/falc/Review-Logos/gwk_invest_logo_1.png\" alt=\"GW&K Investment Management logo\">\n        <span>GW&K Investment Management</span>\n      </td>\n      <td>744</td>\n      <td>Fee-only</td>\n      <td>$812.5K</td>\n      <td>Varies by account type</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"https://smartasset.com/retirement/find-a-financial-planner?utm_source=smartasset&utm_medium=summarytable&utm_content=gwk\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"https://smartasset.com/financial-advisor/gwk-investment-management\" class=\"top-fa-test__btn top-fa-test__btn--secondary\" target=\"_blank\">Read Full Review</a>\n      </td>\n    </tr>\n    <tr>\n      <td>10</td>\n      <td class=\"top-fa-test__advisor\" style=\"--advisor-logo-max-height:80px;\">\n        <img src=\"https://d31s10tn3clc14.cloudfront.net/imgs/falc/Review-Logos/moneta_ias_logo.png\" alt=\"Moneta Group Investment Advisors logo\">\n        <span>Moneta Group Investment Advisors</span>\n      </td>\n      <td>36</td>\n      <td>Fee-only</td>\n      <td>$4.8M</td>\n      <td>No set minimum</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"https://smartasset.com/retirement/find-a-financial-planner?utm_source=smartasset&utm_medium=summarytable&utm_content=moneta\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"https://smartasset.com/financial-advisor/moneta-group-investment-advisors-review\" class=\"top-fa-test__btn top-fa-test__btn--secondary\" target=\"_blank\">Read Full Review</a>\n      </td>\n    </tr>\n  </tbody>\n</table>", "operator": "after"}, {"css": {}, "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "163A5309-DAD9-4269-B1A8-E2B4CE453054", "selector": ".overview > h2:nth-of-type(1)"}, {"css": {}, "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "09A3FD14-FF07-4191-BF69-11BAD06C7DCB", "selector": ".overview > div:nth-of-type(1) > p:nth-of-type(1)"}, {"css": {}, "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "EEF88D92-7362-4062-9683-9015F6ACD2CF", "selector": ".overview > div:nth-of-type(1) > p:nth-of-type(2)"}, {"css": {}, "dependencies": [], "attributes": {"html": "We match nearly 50,000 people with financial advisors per month. Get connected to an advisor that serves your area today. "}, "type": "attribute", "id": "DCC8E6F6-AA23-4982-9FF4-AA2BC702026C", "selector": ".zip-copy > span"}, {"css": {}, "dependencies": [], "attributes": {"html": "Free introductory call. All advisors are fiduciaries."}, "type": "attribute", "id": "96A033C5-6985-476B-A26C-9E7796D421A0", "selector": ".zip-small_text > i"}, {"id": "A3A55372-F845-4970-B6A0-ABD6C981D8F3", "type": "append", "dependencies": [], "selector": ".product-details-inner", "value": "<button\n  type=\"button\"\n  class=\"top-fa-test__btn top-fa-test__btn--primary lower\"\n  onclick=\"window.location.href='/retirement/find-a-financial-planner?utm_source=smartasset&utm_medium=lowertable';\"\n>\n  Find an Advisor\n</button>", "operator": "before"}]}]}, {"id": "4792619948048384", "name": "Variation #1 - Full Review", "actions": [{"viewId": "6679541083537408", "changes": [{"id": "AE59DA6A-5F12-49A9-919C-E6F22890E79E", "type": "custom_code", "value": function($){// Optimizely Custom JS
(function() {
  var utils = window.optimizely.get('utils');

  // Helper to send Mixpanel events with current URL
  function track(eventName) {
    if (window.mixpanel && typeof mixpanel.track === 'function') {
      mixpanel.track(eventName, { url: window.location.href });
    }
  }

  //
  // Click events (unchanged)
  //

  // lower-advisor-click
  utils.observeSelector('.top-fa-test__btn--lower', function(el) {
    el.addEventListener('click', function() {
      track('lower-advisor-click');
    });
  });
  utils.observeSelector('.product-details-inner .cta-link', function(el) {
    el.addEventListener('click', function() {
      if (!el.closest('td.smart-review-table-logo_cell')) {
        track('lower-advisor-click');
      }
    });
  });

  // table-advisor-click
  utils.observeSelector('.top-fa-test__btn--primary', function(el) {
    el.addEventListener('click', function() {
      track('table-advisor-click');
    });
  });
  utils.observeSelector('td.smart-review-table-logo_cell .cta-link', function(el) {
    el.addEventListener('click', function() {
      if (!el.closest('.product-details-inner')) {
        track('table-advisor-click');
      }
    });
  });

  // table-review-click
  utils.observeSelector('.top-fa-test__btn--secondary, .read_review', function(el) {
    el.addEventListener('click', function() {
      track('table-review-click');
    });
  });

  // zip-click
  utils.observeSelector('.zip-button', function(el) {
    el.addEventListener('click', function() {
      track('zip-click');
    });
  });

  //
  // Inview events using H2 text
  //

  utils.observeSelector('h2', function(h2) {
    var text = h2.textContent.trim();
    var eventMap = {
      'CAPTRUST': 'listing-1-view',
      'Corient': 'listing-5-view',
      'Moneta Group Investment Advisors': 'listing-10-view'
    };
    var eventName = eventMap[text];
    if (!eventName) return;

    var io = new IntersectionObserver(function(entries, obs) {
      if (entries[0].isIntersecting) {
        track(eventName);
        obs.unobserve(entries[0].target);
      }
    });
    io.observe(h2);
  });

  // methodology-view (unchanged)
  utils.observeSelector('h2', function(h2) {
    if (h2.textContent.trim() === 'What We Use in Our Methodology') {
      var io2 = new IntersectionObserver(function(entries, obs) {
        if (entries[0].isIntersecting) {
          track('methodology-view');
          obs.disconnect();
        }
      });
      io2.observe(h2);
    }
  });

})();
}, "dependencies": []}, {"id": "CA788ABB-9EE1-4A88-B5B2-1EB764154169", "type": "append", "selector": "head", "value": "<style>/* Main layout CSS */\n.main {\n  background-color: white; \n}\n\n.smart-review-table {\n  display: none;\n}\n\ndiv.right-column.clearfix.js-right-column {\n  display: none;\n}\n\ndiv.left-column {\n  /* width: 1200px !important; */\n  width: 100% !important;\n}\n\narticle.left-column.left-column--review {\n  /* width: 1200px !important; */\n  width: 100% !important;\n}\n\n.zip-container .zip-interact {\n  max-width: 50%;\n}\n\n\n/* Lower Article CSS */\n\n.product-details-inner {\n  display: none;\n}\n/*.cta-link {\n  background-color: #ff7226;\n} */\n\n.top-fa-test__btn--primary:hover {\n  background-color: #e65b1f; \n}\n\n.top-fa-test__btn--lower:hover {\n  background-color: #e65b1f; \n}\n.top-fa-test__btn--lower {\n  text-transform: none;\n  font-weight: 550;\n  background-color: #ff7226;\n}\n\n.left-column.hash-content.map-content\n{\n  display: none;\n} \n\n.right-column.clearfix.bottom-right.js-bottom-right {\n  display: none;\n}\n\n/* TABLE CSS */ \n\n.top-fa-test__table {\n  width: 100%;\n  margin-top: 20px;\n  border-collapse: collapse;\n  border: 1px solid #ddd;\n  border-radius: 6px;\n  overflow: hidden;\n  table-layout: auto;\n}\n\n.top-fa-test__table th,\n.top-fa-test__table td {\n  padding: 12px 16px;\n  text-align: center;\n  vertical-align: middle;\n  border-bottom: 1px solid #eee;\n  word-wrap: break-word;\n}\n\n.top-fa-test__table thead th {\n  background-color: #F1FAFF;\n    text-wrap: nowrap;\n}\n\n.top-fa-test__table tbody tr:last-child td {\n  border-bottom: none;\n}\n\n/* Rank column */\n.top-fa-test__table th:first-child,\n.top-fa-test__table td:first-child {\n  width: 40px;\n}\n\n/* Advisor cell: logo above name */\n.top-fa-test__advisor {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-start;  /* align at top so images don\u2019t push the line */\n  gap: 8px;                     /* replace image margin with flex gap */\n}\n.top-fa-test__advisor img {\n  height: 25px;\n  width: auto;\n  max-width: 80%;\n  margin-top: 10px;\n  margin-bottom: 10px;\n}\n\n.large {\n  height: 20px !important;\n}\n\n/* Actions column: prevent squish */\n.top-fa-test__actions {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  min-width: 140px;\n}\n.top-fa-test__actions a {\n  display: block;\n  width: 80%;\n  margin-bottom: 6px;\n}\n.top-fa-test__actions a:last-child {\n  margin-bottom: 0;\n}\n\n/* Buttons */\n.top-fa-test__btn {\n  padding: 8px 12px;\n  font-size: 14px;\n  border-radius: 4px;\n  text-decoration: none;\n  text-align: center;\n}\n.top-fa-test__btn--primary {\n  background-color: #ff7226;\n  color: #fff;\n  border: none;\n}\n.top-fa-test__btn--secondary {\n  background-color: #f1f1f1;\n  color: #333;\n  border: none;\n}\n\n/* 1) Kill the old cell-level bottom borders */\n.top-fa-test__table th,\n.top-fa-test__table td {\n  border-bottom: none;\n}\n\n/* 2) Draw one continuous border under each row */\n.top-fa-test__table tbody tr {\n  border-bottom: 1px solid #eee;\n}\n\n/* 3) Don\u2019t draw under the very last row */\n.top-fa-test__table tbody tr:last-child {\n  border-bottom: none;\n}\n\n\n/* Tooltip CSS */\n/* Tooltip styles */\n.tooltip {\n  position: relative;\n  display: inline-block;\n}\n\n.tooltip summary {\n  list-style: none;\n  cursor: pointer;\n  font-weight: normal;\n}\n\n.tooltip summary::-webkit-details-marker {\n  display: none;\n}\n\n/* little info icon */\n.tooltip summary::after {\n  content: \"\u24d8\";\n  font-size: 0.8em;\n  margin-left: 4px;\n  color: #888;\n}\n\n/* hidden by default */\n.tooltip .tooltip-text {\n  display: none;\n  position: absolute;\n  top: 100%;\n  left: 50%;\n  transform: translateX(-50%);\n  margin-top: 8px;\n  padding: 8px 12px;\n  background: rgba(0, 0, 0, 0.8);\n  color: white;\n  font-size: 13px;\n  line-height: 1.4;\n  border-radius: 4px;\n  white-space: normal;\n  max-width: 400px;\n  text-align: left;\n  z-index: 100;\n}\n\n/* show when open */\n.tooltip[open] .tooltip-text {\n  display: block;\n}\n\n/* 1) Keep the <summary> in TH bold like normal header text */\n.top-fa-test__table th summary {\n  font-weight: bold;\n  color: inherit;               /* inherit the TH color */\n}\n\n/* 2) Wider, white-background tooltip */\n.tooltip .tooltip-text {\n  display: none;\n  position: absolute;\n  top: 100%;\n  left: 50%;\n  transform: translateX(-50%);\n  margin-top: 8px;\n  padding: 10px 14px;\n  background: #fff;             /* white bg */\n  color: #000; \n  font-weight: normal; /* black text */\n  border: 1px solid #ccc;       /* light gray border */\n  border-radius: 4px;\n  font-size: 13px;\n  line-height: 1.4;\n  white-space: normal;\n  width: 260px;                 /* set a fixed wider width */\n  box-shadow: 0 2px 6px rgba(0,0,0,0.15);\n  z-index: 100;\n}\n\n/* Make the summary a full-width, block-level toggle target */\n.top-fa-test__table th .tooltip summary {\n  display: block;\n  width: 100%;\n  padding: 4px 0;       /* tappable padding */\n  cursor: pointer;\n}\n\n/* 1) Make sure the summary sits above the tooltip text */\n.top-fa-test__table th .tooltip summary {\n  position: relative;\n  z-index: 2;\n}\n\n/* 2) Let taps \u201cpass through\u201d the tooltip box so summary can toggle */\n.tooltip .tooltip-text {\n  pointer-events: none;\n  margin-top: 12px;    /* push it a little further down if needed */\n}\n\n/* 3) But keep links inside the tooltip interactive */\n.tooltip .tooltip-text a {\n  pointer-events: auto;\n  cursor: pointer;\n}\n\n/* Mobile template styles - old 768 */\n\n@media only screen and (max-width: 768px) {\n  /* Make the main content full-width on mobile */\n  div.left-column,\n  article.left-column.left-column--review {\n    width: 100% !important;\n    max-width: 100% !important;\n    padding: 0 8px;          /* optional: give a little breathing room */\n    box-sizing: border-box;   /* ensure padding doesn\u2019t break the layout */\n  }\n \n  .zip-container .zip-interact {\n  max-width: 100%;\n}\n  \n  .lower {\n    margin-top: 20px;\n  }\n  \n  \n    /* Turn the table into a scroll container */\n  .top-fa-test__table {\n    display: block;\n    width: 100%;\n    overflow-x: auto;\n    -webkit-overflow-scrolling: touch; /* smooth scrolling on iOS */\n  }\n\n  /* Prevent cells from wrapping so the columns keep their width */\n  .top-fa-test__table th,\n  .top-fa-test__table td {\n    white-space: nowrap;\n  }\n  \n    /* 1) Shrink fonts */\n  .top-fa-test__table th,\n  .top-fa-test__table td,\n  .top-fa-test__btn {\n    font-size: 13px;\n  }\n  \n\n\n  /* 2) Shrink logos */\n  .top-fa-test__advisor img {\n    height: 20px;    \n    width: auto;\n  }\n  \n  .large {\n  height: 15px !important;\n}\n\n  /* 3) Allow text cells to wrap, but keep buttons single-line */\n  .top-fa-test__table td:not(.top-fa-test__actions) {\n    white-space: normal;\n    word-break: break-word;\n  }\n  .top-fa-test__actions a {\n    white-space: nowrap;\n  } \n}</style>", "dependencies": []}, {"id": "0DE5DC78-5FB6-4D2A-A47A-39EDA7D6E608", "type": "append", "dependencies": [], "selector": ".zip-container", "value": "<table class=\"top-fa-test__table\">\n<thead>\n  <tr>\n    <th>Rank</th>\n    <th>Financial Advisor</th>\n\n     <th>\n      <details class=\"tooltip\">\n        <summary>Clients per Advisor</summary>\n        <div class=\"tooltip-text\">\n          Calculated by dividing the firm's total client count by its total number of on-staff advisors.\n        </div>\n      </details>\n    </th>\n\n    <th>\n      <details class=\"tooltip\">\n        <summary>Fee Structure</summary>\n        <div class=\"tooltip-text\">\n          To learn how fee-only and fee-based fee structures differ, <a href=\"https://smartasset.com/financial-advisor/fee-based-vs-fee-only-financial-advisor\" target=\"_blank\" rel=\"noopener\">read our explainer here</a>.\n        </div>\n      </details>\n    </th>\n\n    <th>\n      <details class=\"tooltip\">\n        <summary>Avg Account Size</summary>\n        <div class=\"tooltip-text\">\n          Calculated by dividing the firm's total assets attributed to individual clients by its total number of individual clients.\n        </div>\n      </details>\n    </th>\n\n\n    <th>Account Minimum</th>\n    <th>Learn More</th>\n  </tr>\n</thead>\n  <tbody>\n    <tr>\n      <td>1</td>\n      <td class=\"top-fa-test__advisor\" style=\"--advisor-logo-max-height:80px;\">\n        <img src=\"https://d31s10tn3clc14.cloudfront.net/imgs/falc/Review-Logos/Raleigh/CAPTRUST.png\" alt=\"CAPTRUST logo\" class=\"large\">\n        <span>CAPTRUST</span>\n      </td>\n      <td>45</td>\n      <td>Fee-based</td>\n      <td>$2.2M</td>\n      <td>Varies by account type</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"https://smartasset.com/retirement/find-a-financial-planner?utm_source=smartasset&utm_medium=summarytable&utm_content=captrust\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"https://smartasset.com/financial-advisor/captrust-financial-advisors-review\" class=\"top-fa-test__btn top-fa-test__btn--secondary\" target=\"_blank\">Read Full Review</a>\n      </td>\n    </tr>\n    <tr>\n      <td>2</td>\n      <td class=\"top-fa-test__advisor\" style=\"--advisor-logo-max-height:80px;\">\n        <img src=\"https://d31s10tn3clc14.cloudfront.net/imgs/individual+firm+reviews/Fisher_logo.png\" alt=\"Fisher Investments logo\" class=\"large\">\n        <span>Fisher Investments</span>\n      </td>\n      <td>93</td>\n      <td>Fee-only</td>\n      <td>$1.5M</td>\n      <td>$1M</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"https://smartasset.com/retirement/find-a-financial-planner?utm_source=smartasset&utm_medium=summarytable&utm_content=fisher\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"https://smartasset.com/financial-advisor/fisher-investment-management-review\" class=\"top-fa-test__btn top-fa-test__btn--secondary\" target=\"_blank\">Read Full Review</a>\n      </td>\n    </tr>\n    <tr>\n      <td>3</td>\n      <td class=\"top-fa-test__advisor\" style=\"--advisor-logo-max-height:80px;\">\n        <img src=\"https://d31s10tn3clc14.cloudfront.net/imgs/falc/Review-Logos/cerity_logo.png\" alt=\"Cerity Partners logo\" class=\"large\">\n        <span>Cerity Partners</span>\n      </td>\n      <td>23</td>\n      <td>Fee-based</td>\n      <td>$4.4M</td>\n      <td>No set minimum</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"https://smartasset.com/retirement/find-a-financial-planner?utm_source=smartasset&utm_medium=summarytable&utm_content=cerity\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"https://smartasset.com/financial-advisor/cerity-partners-review\" class=\"top-fa-test__btn top-fa-test__btn--secondary\" target=\"_blank\">Read Full Review</a>\n      </td>\n    </tr>\n    <tr>\n      <td>4</td>\n      <td class=\"top-fa-test__advisor\" style=\"--advisor-logo-max-height:80px;\">\n        <img src=\"https://d31s10tn3clc14.cloudfront.net/imgs/falc/Review-Logos/wealth_enhancement_advisory_logo.png\" alt=\"Wealth Enhancement Advisory Services logo\">\n        <span>Wealth Enhancement Advisory Services</span>\n      </td>\n      <td>97</td>\n      <td>Fee-based</td>\n      <td>$1.3M</td>\n      <td>Varies by account type</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"https://smartasset.com/retirement/find-a-financial-planner?utm_source=smartasset&utm_medium=summarytable&utm_content=weas\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"https://smartasset.com/financial-advisor/wealth-enhancement-advisory-services-review\" class=\"top-fa-test__btn top-fa-test__btn--secondary\" target=\"_blank\">Read Full Review</a>\n      </td>\n    </tr>\n    <tr>\n      <td>5</td>\n      <td class=\"top-fa-test__advisor\" style=\"--advisor-logo-max-height:80px;\">\n        <img src=\"https://d31s10tn3clc14.cloudfront.net/imgs/falc/Review-Logos/corient_logo.png\" alt=\"Corient logo\">\n        <span>Corient</span>\n      </td>\n      <td>40</td>\n      <td>Fee-only</td>\n      <td>$5.4M</td>\n      <td>No set minimum</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"https://smartasset.com/retirement/find-a-financial-planner?utm_source=smartasset&utm_medium=summarytable&utm_content=corient\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"#listing-5\" class=\"top-fa-test__btn top-fa-test__btn--secondary\">Read Full Review</a>\n      </td>\n    </tr>\n    <tr>\n      <td>6</td>\n      <td class=\"top-fa-test__advisor\" style=\"--advisor-logo-max-height:80px;\">\n        <img src=\"https://d31s10tn3clc14.cloudfront.net/imgs/falc/Review-Logos/pathstone_family_office_logo_1.png\" alt=\"Pathstone logo\">\n        <span>Pathstone</span>\n      </td>\n      <td>6</td>\n      <td>Fee-only</td>\n      <td>$40.5M</td>\n      <td>$10M</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"https://smartasset.com/retirement/find-a-financial-planner?utm_source=smartasset&utm_medium=summarytable&utm_content=pathstone\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"#listing-6\" class=\"top-fa-test__btn top-fa-test__btn--secondary\">Read Full Review</a>\n      </td>\n    </tr>\n    <tr>\n      <td>7</td>\n      <td class=\"top-fa-test__advisor\" style=\"--advisor-logo-max-height:80px;\">\n        <img src=\"https://d31s10tn3clc14.cloudfront.net/imgs/falc/Review-Logos/summit_rock_advisors_logo.png\" alt=\"Summit rock Advisors logo\">\n        <span>Summit Rock Advisors</span>\n      </td>\n      <td>2</td>\n      <td>Fee-only</td>\n      <td>$187.7M</td>\n      <td>$100M</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"https://smartasset.com/retirement/find-a-financial-planner?utm_source=smartasset&utm_medium=summarytable&utm_content=summit\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"#listing-7\" class=\"top-fa-test__btn top-fa-test__btn--secondary\">Read Full Review</a>\n      </td>\n    </tr>\n    <tr>\n      <td>8</td>\n      <td class=\"top-fa-test__advisor\" style=\"--advisor-logo-max-height:80px;\">\n        <img src=\"https://d31s10tn3clc14.cloudfront.net/imgs/falc/Review-Logos/nfp_logo_1.png\" alt=\"NFP Retirement logo\">\n        <span>NFP Retirement</span>\n      </td>\n      <td>44</td>\n      <td>Fee-based</td>\n      <td>$496.7K</td>\n      <td>$25K</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"https://smartasset.com/retirement/find-a-financial-planner?utm_source=smartasset&utm_medium=summarytable&utm_content=nfp\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"#listing-8\" class=\"top-fa-test__btn top-fa-test__btn--secondary\">Read Full Review</a>\n      </td>\n    </tr>\n    <tr>\n      <td>9</td>\n      <td class=\"top-fa-test__advisor\" style=\"--advisor-logo-max-height:80px;\">\n        <img src=\"https://d31s10tn3clc14.cloudfront.net/imgs/falc/Review-Logos/gwk_invest_logo_1.png\" alt=\"GW&K Investment Management logo\">\n        <span>GW&K Investment Management</span>\n      </td>\n      <td>744</td>\n      <td>Fee-only</td>\n      <td>$812.5K</td>\n      <td>Varies by account type</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"https://smartasset.com/retirement/find-a-financial-planner?utm_source=smartasset&utm_medium=summarytable&utm_content=gwk\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"https://smartasset.com/financial-advisor/gwk-investment-management\" class=\"top-fa-test__btn top-fa-test__btn--secondary\" target=\"_blank\">Read Full Review</a>\n      </td>\n    </tr>\n    <tr>\n      <td>10</td>\n      <td class=\"top-fa-test__advisor\" style=\"--advisor-logo-max-height:80px;\">\n        <img src=\"https://d31s10tn3clc14.cloudfront.net/imgs/falc/Review-Logos/moneta_ias_logo.png\" alt=\"Moneta Group Investment Advisors logo\">\n        <span>Moneta Group Investment Advisors</span>\n      </td>\n      <td>36</td>\n      <td>Fee-only</td>\n      <td>$4.8M</td>\n      <td>No set minimum</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"https://smartasset.com/retirement/find-a-financial-planner?utm_source=smartasset&utm_medium=summarytable&utm_content=moneta\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"https://smartasset.com/financial-advisor/moneta-group-investment-advisors-review\" class=\"top-fa-test__btn top-fa-test__btn--secondary\" target=\"_blank\">Read Full Review</a>\n      </td>\n    </tr>\n  </tbody>\n</table>", "operator": "after"}, {"css": {}, "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "FAAC564E-B121-468E-A91D-58ED4A814A80", "selector": ".overview > h2:nth-of-type(1)"}, {"css": {}, "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "A34B3ED8-33B4-47AC-A4F6-4E1DD0B5E07B", "selector": ".overview > div:nth-of-type(1) > p:nth-of-type(1)"}, {"css": {}, "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "A99C9B2F-6E6F-45F4-B2C8-F150E8F0E314", "selector": ".overview > div:nth-of-type(1) > p:nth-of-type(2)"}, {"css": {}, "dependencies": [], "attributes": {"html": "We match nearly 50,000 people with financial advisors per month. Get connected to an advisor that serves your area today. "}, "type": "attribute", "id": "1FFD7CA2-DD5D-45A2-BFCA-C2AAC314CEAE", "selector": ".zip-copy > span"}, {"css": {}, "dependencies": [], "attributes": {"html": "Free introductory call. All advisors are fiduciaries."}, "type": "attribute", "id": "BAECBCC4-11A5-46C1-93ED-70B2945B583F", "selector": ".zip-small_text > i"}, {"id": "3D1306A9-22B0-476E-BACF-2528E5F3B27A", "type": "append", "dependencies": [], "selector": ".product-details-inner", "value": "<button\n  type=\"button\"\n  class=\"top-fa-test__btn top-fa-test__btn--lower\"\n  onclick=\"window.location.href='/retirement/find-a-financial-planner?utm_source=smartasset&utm_medium=lowertable';\"\n>\n  Find an Advisor\n</button>", "operator": "before"}, {"css": {}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "7D70B6C9-CD26-416E-8FB7-79ADDDCBC452", "selector": ".top-fa-test__btn--primary"}, {"css": {}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "514A8956-D0D4-4800-A9EF-EF3C9556BF81", "selector": ".top-fa-test__btn--secondary"}, {"css": {}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "A7288478-65C8-40B6-909E-6A6F9A30DCA3", "selector": ".zip-button"}, {"css": {}, "dependencies": [], "attributes": {"html": "To find the top financial advisors in the U.S., we first identified all firms registered with the SEC in the country. Next, we filtered out firms that don't offer financial planning services, those that don't serve primarily individual clients and those that have a disclosure history of felonies, misdemeanors or more serious regulatory matters on their record. The qualifying firms were then ranked according to the following criteria:"}, "type": "attribute", "id": "DC987942-BB35-4D92-8C29-4EAE05D8CE88", "selector": ".overview > p:nth-of-type(4)"}]}]}, {"id": "6052806637912064", "name": "Variation #2 - Jumplink Review", "actions": [{"viewId": "6679541083537408", "changes": [{"id": "7A48848A-42ED-4B74-B824-B2883EE3905B", "type": "custom_code", "value": function($){// Optimizely Custom JS
(function() {
  var utils = window.optimizely.get('utils');

  // Helper to send Mixpanel events with current URL
  function track(eventName) {
    if (window.mixpanel && typeof mixpanel.track === 'function') {
      mixpanel.track(eventName, { url: window.location.href });
    }
  }

  //
  // Click events (unchanged)
  //

  // lower-advisor-click
  utils.observeSelector('.top-fa-test__btn--lower', function(el) {
    el.addEventListener('click', function() {
      track('lower-advisor-click');
    });
  });
  utils.observeSelector('.product-details-inner .cta-link', function(el) {
    el.addEventListener('click', function() {
      if (!el.closest('td.smart-review-table-logo_cell')) {
        track('lower-advisor-click');
      }
    });
  });

  // table-advisor-click
  utils.observeSelector('.top-fa-test__btn--primary', function(el) {
    el.addEventListener('click', function() {
      track('table-advisor-click');
    });
  });
  utils.observeSelector('td.smart-review-table-logo_cell .cta-link', function(el) {
    el.addEventListener('click', function() {
      if (!el.closest('.product-details-inner')) {
        track('table-advisor-click');
      }
    });
  });

  // table-review-click
  utils.observeSelector('.top-fa-test__btn--secondary, .read_review', function(el) {
    el.addEventListener('click', function() {
      track('table-review-click');
    });
  });

  // zip-click
  utils.observeSelector('.zip-button', function(el) {
    el.addEventListener('click', function() {
      track('zip-click');
    });
  });

  //
  // Inview events using H2 text
  //

  utils.observeSelector('h2', function(h2) {
    var text = h2.textContent.trim();
    var eventMap = {
      'CAPTRUST': 'listing-1-view',
      'Corient': 'listing-5-view',
      'Moneta Group Investment Advisors': 'listing-10-view'
    };
    var eventName = eventMap[text];
    if (!eventName) return;

    var io = new IntersectionObserver(function(entries, obs) {
      if (entries[0].isIntersecting) {
        track(eventName);
        obs.unobserve(entries[0].target);
      }
    });
    io.observe(h2);
  });

  // methodology-view (unchanged)
  utils.observeSelector('h2', function(h2) {
    if (h2.textContent.trim() === 'What We Use in Our Methodology') {
      var io2 = new IntersectionObserver(function(entries, obs) {
        if (entries[0].isIntersecting) {
          track('methodology-view');
          obs.disconnect();
        }
      });
      io2.observe(h2);
    }
  });

})();
}, "dependencies": []}, {"id": "9E9ED073-64A7-4509-994F-9C081736B0B1", "type": "append", "selector": "head", "value": "<style>/* Main layout CSS */\n.main {\n  background-color: white; \n}\n\n.smart-review-table {\n  display: none;\n}\n\ndiv.right-column.clearfix.js-right-column {\n  display: none;\n}\n\ndiv.left-column {\n  /* width: 1200px !important; */\n  width: 100% !important;\n}\n\narticle.left-column.left-column--review {\n  /* width: 1200px !important; */\n  width: 100% !important;\n}\n\n.zip-container .zip-interact {\n  max-width: 50%;\n}\n\n\n/* Lower Article CSS */\n\n.product-details-inner {\n  display: none;\n}\n/*.cta-link {\n  background-color: #ff7226;\n} */\n\n.top-fa-test__btn--primary:hover {\n  background-color: #e65b1f; \n}\n\n.top-fa-test__btn--lower:hover {\n  background-color: #e65b1f; \n}\n.top-fa-test__btn--lower {\n  text-transform: none;\n  font-weight: 550;\n  background-color: #ff7226;\n}\n\n.left-column.hash-content.map-content\n{\n  display: none;\n} \n\n.right-column.clearfix.bottom-right.js-bottom-right {\n  display: none;\n}\n\n/* TABLE CSS */ \n\n.top-fa-test__table {\n  width: 100%;\n  margin-top: 20px;\n  border-collapse: collapse;\n  border: 1px solid #ddd;\n  border-radius: 6px;\n  overflow: hidden;\n  table-layout: auto;\n}\n\n.top-fa-test__table th,\n.top-fa-test__table td {\n  padding: 12px 16px;\n  text-align: center;\n  vertical-align: middle;\n  border-bottom: 1px solid #eee;\n  word-wrap: break-word;\n}\n\n.top-fa-test__table thead th {\n  background-color: #F1FAFF;\n    text-wrap: nowrap;\n}\n\n.top-fa-test__table tbody tr:last-child td {\n  border-bottom: none;\n}\n\n/* Rank column */\n.top-fa-test__table th:first-child,\n.top-fa-test__table td:first-child {\n  width: 40px;\n}\n\n/* Advisor cell: logo above name */\n.top-fa-test__advisor {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-start;  /* align at top so images don\u2019t push the line */\n  gap: 8px;                     /* replace image margin with flex gap */\n}\n.top-fa-test__advisor img {\n  height: 25px;\n  width: auto;\n  max-width: 80%;\n  margin-top: 10px;\n  margin-bottom: 10px;\n}\n\n.large {\n  height: 20px !important;\n}\n\n/* Actions column: prevent squish */\n.top-fa-test__actions {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  min-width: 140px;\n}\n.top-fa-test__actions a {\n  display: block;\n  width: 80%;\n  margin-bottom: 6px;\n}\n.top-fa-test__actions a:last-child {\n  margin-bottom: 0;\n}\n\n/* Buttons */\n.top-fa-test__btn {\n  padding: 8px 12px;\n  font-size: 14px;\n  border-radius: 4px;\n  text-decoration: none;\n  text-align: center;\n}\n.top-fa-test__btn--primary {\n  background-color: #ff7226;\n  color: #fff;\n  border: none;\n}\n.top-fa-test__btn--secondary {\n  background-color: #f1f1f1;\n  color: #333;\n  border: none;\n}\n\n/* 1) Kill the old cell-level bottom borders */\n.top-fa-test__table th,\n.top-fa-test__table td {\n  border-bottom: none;\n}\n\n/* 2) Draw one continuous border under each row */\n.top-fa-test__table tbody tr {\n  border-bottom: 1px solid #eee;\n}\n\n/* 3) Don\u2019t draw under the very last row */\n.top-fa-test__table tbody tr:last-child {\n  border-bottom: none;\n}\n\n\n/* Tooltip CSS */\n/* Tooltip styles */\n.tooltip {\n  position: relative;\n  display: inline-block;\n}\n\n.tooltip summary {\n  list-style: none;\n  cursor: pointer;\n  font-weight: normal;\n}\n\n.tooltip summary::-webkit-details-marker {\n  display: none;\n}\n\n/* little info icon */\n.tooltip summary::after {\n  content: \"\u24d8\";\n  font-size: 0.8em;\n  margin-left: 4px;\n  color: #888;\n}\n\n/* hidden by default */\n.tooltip .tooltip-text {\n  display: none;\n  position: absolute;\n  top: 100%;\n  left: 50%;\n  transform: translateX(-50%);\n  margin-top: 8px;\n  padding: 8px 12px;\n  background: rgba(0, 0, 0, 0.8);\n  color: white;\n  font-size: 13px;\n  line-height: 1.4;\n  border-radius: 4px;\n  white-space: normal;\n  max-width: 400px;\n  text-align: left;\n  z-index: 100;\n}\n\n/* show when open */\n.tooltip[open] .tooltip-text {\n  display: block;\n}\n\n/* 1) Keep the <summary> in TH bold like normal header text */\n.top-fa-test__table th summary {\n  font-weight: bold;\n  color: inherit;               /* inherit the TH color */\n}\n\n/* 2) Wider, white-background tooltip */\n.tooltip .tooltip-text {\n  display: none;\n  position: absolute;\n  top: 100%;\n  left: 50%;\n  transform: translateX(-50%);\n  margin-top: 8px;\n  padding: 10px 14px;\n  background: #fff;             /* white bg */\n  color: #000; \n  font-weight: normal; /* black text */\n  border: 1px solid #ccc;       /* light gray border */\n  border-radius: 4px;\n  font-size: 13px;\n  line-height: 1.4;\n  white-space: normal;\n  width: 260px;                 /* set a fixed wider width */\n  box-shadow: 0 2px 6px rgba(0,0,0,0.15);\n  z-index: 100;\n}\n\n/* Make the summary a full-width, block-level toggle target */\n.top-fa-test__table th .tooltip summary {\n  display: block;\n  width: 100%;\n  padding: 4px 0;       /* tappable padding */\n  cursor: pointer;\n}\n\n/* 1) Make sure the summary sits above the tooltip text */\n.top-fa-test__table th .tooltip summary {\n  position: relative;\n  z-index: 2;\n}\n\n/* 2) Let taps \u201cpass through\u201d the tooltip box so summary can toggle */\n.tooltip .tooltip-text {\n  pointer-events: none;\n  margin-top: 12px;    /* push it a little further down if needed */\n}\n\n/* 3) But keep links inside the tooltip interactive */\n.tooltip .tooltip-text a {\n  pointer-events: auto;\n  cursor: pointer;\n}\n\n/* Mobile template styles - old 768 */\n\n@media only screen and (max-width: 768px) {\n  /* Make the main content full-width on mobile */\n  div.left-column,\n  article.left-column.left-column--review {\n    width: 100% !important;\n    max-width: 100% !important;\n    padding: 0 8px;          /* optional: give a little breathing room */\n    box-sizing: border-box;   /* ensure padding doesn\u2019t break the layout */\n  }\n \n  .zip-container .zip-interact {\n  max-width: 100%;\n}\n  \n  .lower {\n    margin-top: 20px;\n  }\n  \n  \n    /* Turn the table into a scroll container */\n  .top-fa-test__table {\n    display: block;\n    width: 100%;\n    overflow-x: auto;\n    -webkit-overflow-scrolling: touch; /* smooth scrolling on iOS */\n  }\n\n  /* Prevent cells from wrapping so the columns keep their width */\n  .top-fa-test__table th,\n  .top-fa-test__table td {\n    white-space: nowrap;\n  }\n  \n    /* 1) Shrink fonts */\n  .top-fa-test__table th,\n  .top-fa-test__table td,\n  .top-fa-test__btn {\n    font-size: 13px;\n  }\n  \n\n\n  /* 2) Shrink logos */\n  .top-fa-test__advisor img {\n    height: 20px;    \n    width: auto;\n  }\n  \n  .large {\n  height: 15px !important;\n}\n\n  /* 3) Allow text cells to wrap, but keep buttons single-line */\n  .top-fa-test__table td:not(.top-fa-test__actions) {\n    white-space: normal;\n    word-break: break-word;\n  }\n  .top-fa-test__actions a {\n    white-space: nowrap;\n  } \n}</style>", "dependencies": []}, {"id": "8E491EED-7727-4FC2-AB62-8FD31B210E24", "type": "append", "dependencies": [], "selector": ".zip-container", "value": "<table class=\"top-fa-test__table\">\n<thead>\n  <tr>\n    <th>Rank</th>\n    <th>Financial Advisor</th>\n\n     <th>\n      <details class=\"tooltip\">\n        <summary>Clients per Advisor</summary>\n        <div class=\"tooltip-text\">\n          Calculated by dividing the firm's total client count by its total number of on-staff advisors.\n        </div>\n      </details>\n    </th>\n\n    <th>\n      <details class=\"tooltip\">\n        <summary>Fee Structure</summary>\n        <div class=\"tooltip-text\">\n          To learn how fee-only and fee-based fee structures differ, <a href=\"https://smartasset.com/financial-advisor/fee-based-vs-fee-only-financial-advisor\" target=\"_blank\" rel=\"noopener\">read our explainer here</a>.\n        </div>\n      </details>\n    </th>\n\n    <th>\n      <details class=\"tooltip\">\n        <summary>Avg Account Size</summary>\n        <div class=\"tooltip-text\">\n          Calculated by dividing the firm's total assets attributed to individual clients by its total number of individual clients.\n        </div>\n      </details>\n    </th>\n\n\n    <th>Account Minimum</th>\n    <th>Learn More</th>\n  </tr>\n</thead>\n  <tbody>\n    <tr>\n      <td>1</td>\n      <td class=\"top-fa-test__advisor\" style=\"--advisor-logo-max-height:80px;\">\n        <img src=\"https://d31s10tn3clc14.cloudfront.net/imgs/falc/Review-Logos/Raleigh/CAPTRUST.png\" alt=\"CAPTRUST logo\" class=\"large\">\n        <span>CAPTRUST</span>\n      </td>\n      <td>45</td>\n      <td>Fee-based</td>\n      <td>$2.2M</td>\n      <td>Varies by account type</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"https://smartasset.com/retirement/find-a-financial-planner?utm_source=smartasset&utm_medium=summarytable&utm_content=captrust\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"#listing-1\" class=\"top-fa-test__btn top-fa-test__btn--secondary\">Read Full Review</a>\n      </td>\n    </tr>\n    <tr>\n      <td>2</td>\n      <td class=\"top-fa-test__advisor\" style=\"--advisor-logo-max-height:80px;\">\n        <img src=\"https://d31s10tn3clc14.cloudfront.net/imgs/individual+firm+reviews/Fisher_logo.png\" alt=\"Fisher Investments logo\" class=\"large\">\n        <span>Fisher Investments</span>\n      </td>\n      <td>93</td>\n      <td>Fee-only</td>\n      <td>$1.5M</td>\n      <td>$1M</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"https://smartasset.com/retirement/find-a-financial-planner?utm_source=smartasset&utm_medium=summarytable&utm_content=fisher\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"#listing-2\" class=\"top-fa-test__btn top-fa-test__btn--secondary\">Read Full Review</a>\n      </td>\n    </tr>\n    <tr>\n      <td>3</td>\n      <td class=\"top-fa-test__advisor\" style=\"--advisor-logo-max-height:80px;\">\n        <img src=\"https://d31s10tn3clc14.cloudfront.net/imgs/falc/Review-Logos/cerity_logo.png\" alt=\"Cerity Partners logo\" class=\"large\">\n        <span>Cerity Partners</span>\n      </td>\n      <td>23</td>\n      <td>Fee-based</td>\n      <td>$4.4M</td>\n      <td>No set minimum</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"https://smartasset.com/retirement/find-a-financial-planner?utm_source=smartasset&utm_medium=summarytable&utm_content=cerity\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"#listing-3\" class=\"top-fa-test__btn top-fa-test__btn--secondary\">Read Full Review</a>\n      </td>\n    </tr>\n    <tr>\n      <td>4</td>\n      <td class=\"top-fa-test__advisor\" style=\"--advisor-logo-max-height:80px;\">\n        <img src=\"https://d31s10tn3clc14.cloudfront.net/imgs/falc/Review-Logos/wealth_enhancement_advisory_logo.png\" alt=\"Wealth Enhancement Advisory Services logo\">\n        <span>Wealth Enhancement Advisory Services</span>\n      </td>\n      <td>97</td>\n      <td>Fee-based</td>\n      <td>$1.3M</td>\n      <td>Varies by account type</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"https://smartasset.com/retirement/find-a-financial-planner?utm_source=smartasset&utm_medium=summarytable&utm_content=weas\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"#listing-4\" class=\"top-fa-test__btn top-fa-test__btn--secondary\">Read Full Review</a>\n      </td>\n    </tr>\n    <tr>\n      <td>5</td>\n      <td class=\"top-fa-test__advisor\" style=\"--advisor-logo-max-height:80px;\">\n        <img src=\"https://d31s10tn3clc14.cloudfront.net/imgs/falc/Review-Logos/corient_logo.png\" alt=\"Corient logo\">\n        <span>Corient</span>\n      </td>\n      <td>40</td>\n      <td>Fee-only</td>\n      <td>$5.4M</td>\n      <td>No set minimum</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"https://smartasset.com/retirement/find-a-financial-planner?utm_source=smartasset&utm_medium=summarytable&utm_content=corient\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"#listing-5\" class=\"top-fa-test__btn top-fa-test__btn--secondary\">Read Full Review</a>\n      </td>\n    </tr>\n    <tr>\n      <td>6</td>\n      <td class=\"top-fa-test__advisor\" style=\"--advisor-logo-max-height:80px;\">\n        <img src=\"https://d31s10tn3clc14.cloudfront.net/imgs/falc/Review-Logos/pathstone_family_office_logo_1.png\" alt=\"Pathstone logo\">\n        <span>Pathstone</span>\n      </td>\n      <td>6</td>\n      <td>Fee-only</td>\n      <td>$40.5M</td>\n      <td>$10M</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"https://smartasset.com/retirement/find-a-financial-planner?utm_source=smartasset&utm_medium=summarytable&utm_content=pathstone\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"#listing-6\" class=\"top-fa-test__btn top-fa-test__btn--secondary\">Read Full Review</a>\n      </td>\n    </tr>\n    <tr>\n      <td>7</td>\n      <td class=\"top-fa-test__advisor\" style=\"--advisor-logo-max-height:80px;\">\n        <img src=\"https://d31s10tn3clc14.cloudfront.net/imgs/falc/Review-Logos/summit_rock_advisors_logo.png\" alt=\"Summit rock Advisors logo\">\n        <span>Summit Rock Advisors</span>\n      </td>\n      <td>2</td>\n      <td>Fee-only</td>\n      <td>$187.7M</td>\n      <td>$100M</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"https://smartasset.com/retirement/find-a-financial-planner?utm_source=smartasset&utm_medium=summarytable&utm_content=summit\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"#listing-7\" class=\"top-fa-test__btn top-fa-test__btn--secondary\">Read Full Review</a>\n      </td>\n    </tr>\n    <tr>\n      <td>8</td>\n      <td class=\"top-fa-test__advisor\" style=\"--advisor-logo-max-height:80px;\">\n        <img src=\"https://d31s10tn3clc14.cloudfront.net/imgs/falc/Review-Logos/nfp_logo_1.png\" alt=\"NFP Retirement logo\">\n        <span>NFP Retirement</span>\n      </td>\n      <td>44</td>\n      <td>Fee-based</td>\n      <td>$496.7K</td>\n      <td>$25K</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"https://smartasset.com/retirement/find-a-financial-planner?utm_source=smartasset&utm_medium=summarytable&utm_content=nfp\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"#listing-8\" class=\"top-fa-test__btn top-fa-test__btn--secondary\">Read Full Review</a>\n      </td>\n    </tr>\n    <tr>\n      <td>9</td>\n      <td class=\"top-fa-test__advisor\" style=\"--advisor-logo-max-height:80px;\">\n        <img src=\"https://d31s10tn3clc14.cloudfront.net/imgs/falc/Review-Logos/gwk_invest_logo_1.png\" alt=\"GW&K Investment Management logo\">\n        <span>GW&K Investment Management</span>\n      </td>\n      <td>744</td>\n      <td>Fee-only</td>\n      <td>$812.5K</td>\n      <td>Varies by account type</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"https://smartasset.com/retirement/find-a-financial-planner?utm_source=smartasset&utm_medium=summarytable&utm_content=gwk\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"#listing-9\" class=\"top-fa-test__btn top-fa-test__btn--secondary\">Read Full Review</a>\n      </td>\n    </tr>\n    <tr>\n      <td>10</td>\n      <td class=\"top-fa-test__advisor\" style=\"--advisor-logo-max-height:80px;\">\n        <img src=\"https://d31s10tn3clc14.cloudfront.net/imgs/falc/Review-Logos/moneta_ias_logo.png\" alt=\"Moneta Group Investment Advisors logo\">\n        <span>Moneta Group Investment Advisors</span>\n      </td>\n      <td>36</td>\n      <td>Fee-only</td>\n      <td>$4.8M</td>\n      <td>No set minimum</td>\n      <td class=\"top-fa-test__actions\">\n        <a href=\"https://smartasset.com/retirement/find-a-financial-planner?utm_source=smartasset&utm_medium=summarytable&utm_content=moneta\" class=\"top-fa-test__btn top-fa-test__btn--primary\">Find an Advisor</a>\n        <a href=\"#listing-10\" class=\"top-fa-test__btn top-fa-test__btn--secondary\">Read Full Review</a>\n      </td>\n    </tr>\n  </tbody>\n</table>", "operator": "after"}, {"css": {}, "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "57DEEB3F-F3FE-451E-9B8C-EA6E1C1E9993", "selector": ".overview > h2:nth-of-type(1)"}, {"css": {}, "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "19A48C89-D93E-4D96-A741-B3EAA94F12A6", "selector": ".overview > div:nth-of-type(1) > p:nth-of-type(1)"}, {"css": {}, "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "5772713C-AB1D-4B04-B55A-FF682491179B", "selector": ".overview > div:nth-of-type(1) > p:nth-of-type(2)"}, {"css": {}, "dependencies": [], "attributes": {"html": "We match nearly 50,000 people with financial advisors per month. Get connected to an advisor that serves your area today. "}, "type": "attribute", "id": "2910899A-050B-4780-95C9-5506CF8DC67A", "selector": ".zip-copy > span"}, {"css": {}, "dependencies": [], "attributes": {"html": "Free introductory call. All advisors are fiduciaries."}, "type": "attribute", "id": "50D1B390-0073-4EF9-B3C2-24DA3979D765", "selector": ".zip-small_text > i"}, {"id": "5598C56E-060E-4D19-A7A1-8A9308DDC7F4", "type": "append", "dependencies": [], "selector": ".product-details-inner", "value": "<button\n  type=\"button\"\n  class=\"top-fa-test__btn top-fa-test__btn--lower\"\n  onclick=\"window.location.href='/retirement/find-a-financial-planner?utm_source=smartasset&utm_medium=lowertable';\"\n>\n  Find an Advisor\n</button>", "operator": "before"}, {"css": {}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "91CED138-78F4-4B3A-AD2E-04F79F1042FA", "selector": ".top-fa-test__btn--primary"}, {"css": {}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "9FCF0F00-03EA-43E5-962D-C9E739DA2212", "selector": ".top-fa-test__btn--secondary"}, {"css": {}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "2A9D976F-C0EA-419A-B17C-5887083AD2FF", "selector": ".zip-button"}]}]}], "weightDistributions": [{"entityId": "6156140531154944", "endOfRange": 10000}], "name": "Top FA Content & Design", "bucketingStrategy": null, "experimentMetadata": {"allocationPolicy": "manual", "layerId": "5856233383526400"}, "deployed": false}], "policy": "single_experiment", "viewIds": ["6679541083537408"], "weightDistributions": null, "decisionMetadata": null, "concluded": false}, {"changes": null, "id": "6108903272873984", "name": "Advisor Preview Width Patch", "commitId": "4789729300840448", "groupId": null, "holdback": 0, "activation": {}, "integrationSettings": {"mixpanel": {}}, "integrationStringVersion": 2, "experiments": [{"audienceIds": null, "audienceName": "Everyone else", "changes": null, "id": "5545953319452672", "integrationSettings": null, "variations": [{"id": "6356819791052800", "name": "Certification width fix", "actions": [{"viewId": "5063356432777216", "changes": [{"id": "1C61FDD6-5D64-41DA-A460-C51A5A09D7BF", "type": "append", "selector": "head", "value": "<style>.listing .details_content .row_box .label {\n\t\tmin-width: 105px;\n}</style>", "dependencies": []}]}]}], "weightDistributions": null, "name": "Advisor Preview Width Patch", "bucketingStrategy": null, "experimentMetadata": {"allocationPolicy": "manual", "layerId": "6108903272873984"}, "deployed": false}], "policy": "single_experiment", "viewIds": ["5063356432777216"], "weightDistributions": null, "decisionMetadata": null, "concluded": false}, {"changes": null, "id": "6129898612326400", "name": "D2F Advisor Focused Messaging ($2.5M)", "commitId": "5486689477459968", "groupId": null, "holdback": 5000, "activation": {}, "integrationSettings": {"mixpanel": {}}, "integrationStringVersion": 2, "experiments": [{"audienceIds": ["and", "5636793752616960"], "audienceName": "Retirement Longevity ($2.5M)", "changes": null, "id": "4997150816337920", "integrationSettings": null, "variations": [{"id": "5513898263052288", "name": "Control", "actions": []}, {"id": "5253416046297088", "name": "Treatment", "actions": [{"viewId": "4581741780795392", "changes": [{"id": "0B50C78A-E987-4628-BA50-3EE5414A71A8", "type": "custom_code", "value": function($){var utils = window.optimizely.get("utils");

var NEW_HTML =
  'Will <strong>$2.5M</strong> last? Answer a few questions to discuss your retirement budget and options with a <strong>fiduciary advisor</strong>.';

function applyCopy(el) {
  if (!el) return;
  if (el.innerHTML !== NEW_HTML) {
    el.innerHTML = NEW_HTML;
    console.log("banner text updated");
  }
}

utils.observeSelector(".c-iWJjWs", function (el) {
  // Apply immediately on mount
  applyCopy(el);

  // Prevent attaching multiple observers to the same node
  if (el._saBannerObserver) return;

  var mo = new MutationObserver(function () {
    applyCopy(el);
  });

  mo.observe(el, {
    childList: true,
    characterData: true,
    subtree: true
  });

  el._saBannerObserver = mo;
});
}, "dependencies": []}]}]}], "weightDistributions": [{"entityId": "5513898263052288", "endOfRange": 5000}, {"entityId": "5253416046297088", "endOfRange": 10000}], "name": "D2F Advisor Focused Messaging ($2.5M)", "bucketingStrategy": null, "experimentMetadata": {"allocationPolicy": "manual", "layerId": "6129898612326400"}, "deployed": false}], "policy": "single_experiment", "viewIds": ["4581741780795392"], "weightDistributions": null, "decisionMetadata": null, "concluded": false}, {"changes": null, "id": "6170318851538944", "name": "Retirement Budget Longevity ($2.5M) Advertorial Banner", "commitId": "6291701136883712", "groupId": null, "holdback": 0, "activation": {}, "integrationSettings": {"mixpanel": {}}, "integrationStringVersion": 2, "experiments": [{"audienceIds": ["and", "4778318591950848"], "audienceName": "2point5milretire ADV", "changes": null, "id": "6552796762210304", "integrationSettings": null, "variations": [{"id": "6733268804960256", "name": "Control", "actions": [{"viewId": "5414898797117440", "changes": []}]}, {"id": "4605175994777600", "name": "Treatment", "actions": [{"viewId": "5414898797117440", "changes": [{"id": "67939b3919b84de4a96f76e9531adcce", "type": "custom_code", "value": function($){function waitForBanner() {
  const maxAttempts = 50;
  let attempts = 0;
  
  const interval = setInterval(function() {
    attempts++;
    const banner = document.getElementById('banner');
    const closeButton = document.getElementById('customBannerClose');
    
    if (banner && closeButton) {
      clearInterval(interval);
      
      closeButton.addEventListener('click', function() {
        banner.style.opacity = '0';
        banner.style.transition = 'opacity 0.3s ease';
        
        setTimeout(function() {
          banner.style.visibility = 'hidden';
          banner.style.height = '0';
        }, 300);
      });
      
    } else if (attempts >= maxAttempts) {
      clearInterval(interval);
    }
  }, 100);
}

waitForBanner();
}, "dependencies": []}, {"id": "b35a2b050b0044fab9c6dbff114237bc", "type": "append", "selector": "head", "value": "<style>.banner {\n        display: flex;\n        background-color: #F1FAFF;\n        border-radius: 16px;\n        padding: 16px;\n        max-width: 656px;\n        margin: 0 auto 40px;\n        gap: 16px;\n        position: relative;\n        animation: slideDown 0.3s ease-out;\n        padding: 8px;\n        align-items: center;\n    }\n\n    @keyframes slideDown {\n        from {\n            opacity: 0;\n            transform: translateY(-20px);\n        }\n\n        to {\n            opacity: 1;\n            transform: translateY(0);\n        }\n    }\n\n    .custom-banner-close.closing {\n        animation: slideUp 0.3s ease-out forwards;\n    }\n\n    @keyframes slideUp {\n        from {\n            opacity: 1;\n            transform: translateY(0);\n            max-height: 200px;\n        }\n\n        to {\n            opacity: 0;\n            transform: translateY(-20px);\n            max-height: 0;\n            padding: 0;\n            margin: 0;\n            border: none;\n        }\n    }\n\n    .banner-icon {\n        flex-shrink: 0;\n        color: #0891b2;\n    }\n\n    .banner-content {\n        flex: 1;\n        color: #333;\n        font-size: 16px;\n        line-height: 1.5;\n    }\n\n    .custom-banner-close {\n        flex-shrink: 0;\n        background: none;\n        border: none;\n        cursor: pointer;\n        padding: 4px;\n        color: #64748b;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 16px;\n        transition: all 0.2s ease;\n        place-self: flex-start;\n        margin: 4px;\n    }\n\n    .custom-banner-close:hover {\n        background-color: #cbd5e1;\n        color: #334155;\n    }\n\n    .custom-banner-close svg {\n        width: 18px;\n        height: 18px;\n        position: absolute;\n        color: rgb(140, 140, 140);\n\n    }\n\n    .hidden {\n        display: none;\n    }\n\n    .progress-wrapper.progress-hidden {\n        height: 32px;\n        display: none;\n    }\n\n  @media (max-width: 700px) {\n    .progress-wrapper.progress-hidden {\n        height: 16px;\n    }\n    .banner {\n        margin: 24px 16px;\n    }\n    .custom-banner-close {\n        top: -26px;\n    }\n}\n\n.banner-content b {\n    font-weight: 900; /* Explicitly removing bold */\n}\n\n.banner:not(.funnel--groupAge .banner) {\n    display:none;\n}</style>", "dependencies": []}, {"id": "ecbb9f0ab14a4f1d916a477cfce0217f", "type": "append", "dependencies": [], "selector": ".funnel--groupAge .funnel--question-container", "value": "<div class=\"banner\" id=\"banner\">\n        <div class=\"banner-icon\">\n            <!-- Info Icon -->\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\">\n<path d=\"M15 5.2C16.7 6.9 16.7 9.6 15 11.2C13.3 12.8 10.6 12.9 8.99999 11.2C7.39999 9.5 7.29999 6.8 8.99999 5.2C10.7 3.6 13.3 3.6 15 5.2\" stroke=\"#20A7E2\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n<path d=\"M4 20C4 17.5 6 15.5 8.5 15.5H11.1\" stroke=\"#20A7E2\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n<path d=\"M19 17.6V16.5C19 15.7 18.3 15 17.5 15C16.7 15 16 15.7 16 16.5V17.6\" stroke=\"#20A7E2\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M19 17.6H16C15.4 17.6 15 18 15 18.6V20C15 20.6 15.4 21 16 21H19C19.6 21 20 20.6 20 20V18.6C20 18 19.6 17.6 19 17.6Z\" stroke=\"#20A7E2\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n</svg>\n        </div>\n     <div class=\"banner-content\">\n       Will <b>$2.5M</b> last? Answer a few questions to discuss your retirement budget and options with a <b>fiduciary advisor</b>.\n       </div>\n    <button class=\"custom-banner-close\" id=\"customBannerClose\" aria-label=\"Close banner\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M6 18L18 6M6 6l12 12\" />\n        </svg>\n    </button>\n</div>", "operator": "before"}, {"css": {}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "fec06425bd114898bf9b757b95c82f69", "selector": "#customBannerClose"}]}]}], "weightDistributions": [{"entityId": "6733268804960256", "endOfRange": 5000}, {"entityId": "4605175994777600", "endOfRange": 10000}], "name": "Retirement Budget Longevity ($2.5M) Advertorial Banner", "bucketingStrategy": null, "experimentMetadata": {"allocationPolicy": "manual", "layerId": "6170318851538944"}, "deployed": false}], "policy": "single_experiment", "viewIds": ["5414898797117440"], "weightDistributions": null, "decisionMetadata": null, "concluded": false}, {"changes": null, "id": "6285398779887616", "name": "Retirement Calc UX", "commitId": "5619344177102848", "groupId": null, "holdback": 3500, "activation": {}, "integrationSettings": {"mixpanel": {}}, "integrationStringVersion": 2, "experiments": [{"audienceIds": null, "audienceName": "Everyone else", "changes": null, "id": "5235036073492480", "integrationSettings": null, "variations": [{"id": "4878023896334336", "name": "Original", "actions": [{"viewId": "5793950586372096", "changes": [{"id": "4F71C58A-507B-4475-BCF2-338875BB6EAE", "type": "custom_code", "value": function($){// Get Optimizely utils
const utils = window.optimizely.get('utils');

// 1) Accordion open/close + mixpanel tracking
utils.observeSelector('.accordion-header', function(header) {
  // Prevent binding multiple times
  if (header._accordionBound) return;
  header._accordionBound = true;

  header.addEventListener('click', function() {
    const isExpanded = header.getAttribute('aria-expanded') === 'true';
    const content    = header.nextElementSibling;

    // Toggle state
    header.setAttribute('aria-expanded', String(!isExpanded));
    if (!isExpanded) {
      content.style.maxHeight = content.scrollHeight + 'px';
    } else {
      content.style.maxHeight = null;
    }

    // Mixpanel event
    mixpanel.track('about answer click', {
      section: header.textContent.trim()
    });
  });
});

// 2) Edit Financial Details clicks
utils.observeSelector('.falcbutton, .inputs-button', function(btn) {
  if (btn._editBound) return;
  btn._editBound = true;

  btn.addEventListener('click', function() {
    mixpanel.track('edit financial details');
  });
});

// 3) Close Financial Details clicks
utils.observeSelector('.mobile-input-close', function(btn) {
  if (btn._closeBound) return;
  btn._closeBound = true;

  btn.addEventListener('click', function() {
    mixpanel.track('close financial details');
  });
});
}, "dependencies": []}, {"id": "1B89ADF1-0C0A-44D3-9D37-9B23C213C5B7", "type": "append", "selector": "head", "value": "<style>/* accordion style */\n.accordion {\n  border: .5px solid #ccc;\n  border-radius: 6px;\n  overflow: hidden;\n  font-family: sans-serif;\n  margin-top: 15px;\n  margin-bottom: 25px;\n}\n\n.accordion-item + .accordion-item {\n  border-top: .5px solid #ccc;\n}\n\n.accordion-header {\n  width: 100%;\n  padding: 8px 16px;\n  background: #F1FAFF;\n  border: none;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 12px;\n  font-weight: bold;\n  cursor: pointer;\n  text-transform: none;\n  color: #11638A;\n}\n\n\n.accordion-icon {\n  transition: transform 0.3s ease;\n}\n\n.accordion-header[aria-expanded=\"true\"] .accordion-icon {\n  transform: rotate(180deg);\n}\n\n.accordion-content {\n  max-height: 0;\n  overflow: hidden;\n  transition: max-height 0.3s ease;\n  background: #fff;\n  padding: 0 16px;\n}\n\n.accordion-header[aria-expanded=\"true\"] + .accordion-content {\n  padding: 12px 16px;\n}\n\n.accordion-content p {\n  margin: 0 0 1em 0;\n    font-size: 12px;\n}\n\n.accordion-content p:last-child {\n  margin-bottom: 0;\n}\n\n.accordion-header:hover {\n  background: #e6f4fc;\n} \n\n.sa-accordion {\n  display: none !important;\n}</style>", "dependencies": []}, {"id": "4C7398A8-28CB-481D-9183-679A0B665768", "type": "append", "dependencies": [], "selector": "#smartadvisor-captivate-funnel", "value": "<div class=\"accordion\">\n  <!-- About This Answer -->\n  <div class=\"accordion-item\">\n    <button class=\"accordion-header\" aria-expanded=\"false\">\n      <span>About This Answer</span>\n      <svg class=\"accordion-icon\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\">\n        <path fill=\"currentColor\" d=\"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6z\"/>\n      </svg>\n    </button>\n    <div class=\"accordion-content\">\n      <p>To figure out how much you need to save for retirement we first calculate how much money we expect you will spend over the course of your retirement. This means looking at the income you will need based on your lifestyle preference, then factoring in the number of years in your retirement (we assume you live to 95).</p>\n      <p>Once we have a good idea of your total need in retirement we use our models to analyze your existing resources. This means estimating your retirement income from Social Security and the impact of current savings plans, pensions and other retirement accounts. In our analysis we include the tax impact of these items so we do not overestimate your retirement income.</p>\n      <p>We then do some fancy math to calculate the savings you will need to have built at the time of retirement, based on your needs and resources, to sustain your desired lifestyle.</p>\n    </div>\n  </div>\n\n  <!-- Our Assumptions -->\n  <div class=\"accordion-item\">\n    <button class=\"accordion-header\" aria-expanded=\"false\">\n      <span>Our Assumptions</span>\n      <svg class=\"accordion-icon\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\">\n        <path fill=\"currentColor\" d=\"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6z\"/>\n      </svg>\n    </button>\n    <div class=\"accordion-content\">\n      <p><strong>Lifespan:</strong> We assume you will live to 95. We stop the analysis there, regardless of your spouse's age.</p>\n      <p><strong>Retirement accounts:</strong> We automatically distribute your savings optimally among different retirement accounts. We assume that the contribution limits for your retirement accounts increase with inflation.</p>\n      <p><strong>Taxes:</strong> We calculate taxes on a federal, state and local level. The tax implications of different tax\u2011advantaged retirement accounts, Social Security income and other sources of retirement income are all considered in our models. To better align with filing season, tax calculations are based on the tax filing calendar; therefore calculations prior to April are based on the previous year\u2019s tax rules.</p>\n      <p><strong>Social Security:</strong> We estimate your Social Security income using your stated annual income and assuming you have worked and paid Social Security taxes for 35 years prior to retirement. Our estimate is sensitive to penalties for early retirement and credits for delaying claiming Social Security benefits.</p>\n      <p><strong>Return on savings:</strong> We assume the return on savings is the same percentage across different savings instruments.</p>\n    </div>\n  </div>\n</div>", "operator": "after"}]}]}, {"id": "6365359796649984", "name": "[Scratch 1] Green Button - Simple Template Change", "actions": [{"viewId": "5793950586372096", "changes": [{"id": "C532F898-A464-4BDC-B200-87B3BF790B02", "type": "append", "selector": "head", "value": "<style>/* Hide button on desktop: screens 768px and wider */\n@media screen and (min-width: 768px) {\n  .advisor-box {\n    display: none !important;\n  }\n}\n/* simple module CSS */\n\n.advisor-box {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: 10px;\n  margin-bottom: 20px;\n  /*padding: 16px 24px;*/\n  width: 100%;\n;\n  }\n\n\n  .advisor-box button {\n    background-color: #05ad79;\n    color: white;\n    border: none;\n    border-radius: 4px;\n    padding: 8px 16px; /* Slightly reduced padding */\n    text-transform: none;\n    font-size: 18px; /* Aligned button font size with body copy */\n    font-weight: 700;\n    line-height: 18px;\n    /* margin: 0 auto; /* Centered button */\n    display: inline-block; /* Ensures button is centered */\n    width: 100% !important;\n    box-sizing: border-box;\n  }\n\n/* Mobile only style */\n@media screen and (max-width: 767px) {\n  h1.title {\n    font-size: 20px !important;\n  }\n}</style>", "dependencies": []}, {"id": "680C5225-CB75-49E8-B29B-DDDBBCA8BE70", "type": "append", "dependencies": [], "selector": "div#retirement-title.answer-title", "value": "<div class=\"advisor-box\">\n\n   \n    <button class =\"falcbutton\" type=\"button\" onclick=\"smartasset.page.toggleInputs();\">Edit Your Financial Details Here</button>\n\n  </div>", "operator": "before"}, {"css": {}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "4F98F966-684D-44FA-AC01-CE9F0D5E1BC1", "selector": "div#rc_display"}, {"id": "4F98F966-684D-44FA-AC01-CE9F0D5E1BC1-rearrange", "type": "rearrange", "selector": "div#rc_display", "insertSelector": "div#retirement-title.answer-title", "operator": "before", "dependencies": ["4F98F966-684D-44FA-AC01-CE9F0D5E1BC1"]}, {"css": {}, "dependencies": ["4F98F966-684D-44FA-AC01-CE9F0D5E1BC1-rearrange"], "attributes": {"style": "margin-bottom: 15px;"}, "type": "attribute", "id": "0E49DD32-F750-49E6-9CE8-935A9510F09B", "selector": "div.breakdowns-box.breakdowns"}, {"id": "0E49DD32-F750-49E6-9CE8-935A9510F09B-rearrange", "type": "rearrange", "selector": "div.breakdowns-box.breakdowns", "insertSelector": "div.riklam-container.riklam-container-sponsorcalcsimple2.riklam-visible", "operator": "before", "dependencies": ["0E49DD32-F750-49E6-9CE8-935A9510F09B"]}]}]}, {"id": "6290043250147328", "name": "[Scratch 2] ToC (Broken Inputs)", "actions": [{"viewId": "5793950586372096", "changes": [{"id": "451C759E-E359-40B7-8FBB-1E047F3FE8AE", "type": "append", "selector": "head", "value": "<style>/* hide ads */\n\ndiv.riklam-container.riklam-container-sponsorcalcsimple2.riklam-visible {\n  display: none !important;\n}\n\ndiv.riklam-container.riklam-container-sponsorcalc.riklam-visible {\n  display: none !important;\n}\n\ndiv.top-banner-ctr {\n  display: none !important;\n}\n\n\n/* Hide button on desktop: screens 768px and wider */\n@media screen and (min-width: 768px) {\n  .advisor-box {\n    display: none !important;\n  }\n}\n/* simple module CSS */\n\n.advisor-box {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: 10px;\n  margin-bottom: 20px;\n  /*padding: 16px 24px;*/\n  width: 100%;\n;\n  }\n\n\n  .advisor-box button {\n    background-color: #05ad79;\n    color: white;\n    border: none;\n    border-radius: 4px;\n    padding: 12px 16px; /* Slightly reduced padding */\n    text-transform: none;\n    font-size: 18px; /* Aligned button font size with body copy */\n    font-weight: 700;\n    line-height: 18px;\n    /* margin: 0 auto; /* Centered button */\n    display: inline-block; /* Ensures button is centered */\n    width: 100% !important;\n    box-sizing: border-box;\n  }\n\n/* Mobile only style */\n@media screen and (max-width: 767px) {\n  h1.title {\n    font-size: 20px !important;\n  }\n  \n  div.right-column.clearfix.js-right-column {\n  display: none !important;\n} \n}\n\n  div#retirement-title.answer-title {\n    font-size: 15px;\n    margin-bottom: -35px !important;\n}\n\n\n.interactive-content .input-data {\n  font-size: 15px;\n  line-height: 18px;\n} \n\n\n\n.funneltitle {\n    font-size: 20px !important;\n  font-weight: 600 !important;\n}\n\n.interactive-content .graphic-title\n{\n  font-size: 20px !important;\n  font-weight: 600 !important;\n}\n\n/* ToC style */\n.table-of-contents {\n  /* Optional: adjust overall spacing if needed */\n  margin-bottom: 1em;\n  margin-top: 1em;\n  background-color: #F1FAFF;\n  border-radius: 10px;\n  font-size: 12px;\n  font-style: italic;\n  padding: 12px 16px;\n}\n\n.table-of-contents p {\n  /* Remove default bottom margin, tighten up */\n  margin: 0 0 0.25em 0;\n  font-weight: 500;\n}\n\n.table-of-contents ul {\n  /* Remove default top margin, tighten up */\n  padding-left: 2em; /* keep your indent for the bullets */\n}\n\n.table-of-contents ul li {\n  /* Optional: control spacing between items */\n  margin: 0.2em 0;\n}</style>", "dependencies": []}, {"css": {}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "B3286C43-991C-409F-ADF9-60FB2D1CBD11", "selector": "div#rc_display"}, {"id": "B3286C43-991C-409F-ADF9-60FB2D1CBD11-rearrange", "type": "rearrange", "selector": "div#rc_display", "insertSelector": "div#retirement-title.answer-title", "operator": "before", "dependencies": ["B3286C43-991C-409F-ADF9-60FB2D1CBD11"]}, {"id": "52F76FFB-F101-473C-8306-75D6BC636AED", "type": "append", "dependencies": ["B3286C43-991C-409F-ADF9-60FB2D1CBD11-rearrange"], "selector": "td.left-box.sa-inputs", "value": "<div class=\"advisor-box\">\n\n   \n    <button class =\"falcbutton\" type=\"button\" onclick=\"smartasset.page.toggleInputs();\">Tap Here to Edit Your Financial Details </button>\n\n  </div>", "operator": "after"}, {"css": {}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "C16E16C6-174A-41B6-9F2A-5282CDE26760", "selector": "div.key-takeaways"}, {"id": "C16E16C6-174A-41B6-9F2A-5282CDE26760-rearrange", "type": "rearrange", "selector": "div.key-takeaways", "insertSelector": "div#retirement-title.answer-title", "operator": "after", "dependencies": ["C16E16C6-174A-41B6-9F2A-5282CDE26760"]}, {"id": "7D6A4C53-DCA0-425E-BD98-F4F516FC1E91", "type": "append", "dependencies": ["C16E16C6-174A-41B6-9F2A-5282CDE26760-rearrange"], "selector": "div#smartadvisor-captivate-funnel", "value": "<p class=\"funneltitle\"> Take Quiz to Get Matched with an Advisor</p>", "operator": "before"}, {"css": {}, "dependencies": [], "attributes": {"html": "Projected Income at Retirement"}, "type": "attribute", "id": "5B68F9BB-3F64-4BE0-B89C-E7AFBD5B6CFF", "selector": ".breakdowns > .graphic-title"}, {"css": {}, "dependencies": [], "attributes": {"html": "Key Insights"}, "type": "attribute", "id": "4BEC86CF-E89F-43BA-9330-81FC0A8F0D56", "selector": ".key-takeaways > .graphic-title"}, {"id": "FC6C6613-0DF3-4D7A-A185-BDB223E6A2E8", "type": "append", "dependencies": ["4BEC86CF-E89F-43BA-9330-81FC0A8F0D56"], "selector": ".key-takeaways", "value": "<div class=\"table-of-contents\">\n  <p>Jump to:</p>\n  <ul>\n    <li><a href=\"#key-insights\">Key Insights</a></li>\n    <li><a href=\"#projected-income-at-retirement\">Projected Income at Retirement</a></li>\n    <li><a href=\"#retirement-savings-over-time\">Retirement Savings Over Time</a></li>\n    <li><a href=\"#how-this-calculator-works\">How This Calculator Works</a></li>\n    <li><a href=\"#more-about-planning-for-retirement\">More About Planning for Retirement</a></li>\n  </ul>\n</div>", "operator": "before"}, {"css": {}, "dependencies": [], "attributes": {"html": "Save more for retirement with these rates that beat the National Average<span class=\"glossary info-icon tooltipstered\" data-align=\"top\" data-title=\"National Average\" data-content=\"The National Average is based on the APY average for high yield savings accounts with a minimum balance of $2,500, using data available from Bankrate.\" data-converted=\"1\"></span>"}, "type": "attribute", "id": "7D82F2B7-77AD-490A-8AC5-21D866D410FC", "selector": ".sa-table-title.js-table-title"}]}]}, {"id": "4620765287415808", "name": "[Scratch 3] Troubleshooting Broken Inputs ", "actions": [{"viewId": "5793950586372096", "changes": [{"id": "AB2872BF-8B12-41A9-9A79-6D1B08289881", "type": "append", "selector": "head", "value": "<style>/* Hide ads */\n\ndiv.riklam-container.riklam-container-sponsorcalcsimple2.riklam-visible {\n  display: none !important;\n}\n\ndiv.riklam-container.riklam-container-sponsorcalc.riklam-visible {\n  display: none !important;\n}\n\ndiv.top-banner-ctr {\n  display: none !important;\n} \n\n\n/* Hide button on desktop: screens 768px and wider */\n@media screen and (min-width: 768px) {\n  .advisor-box {\n    display: none !important;\n  }\n}\n/* simple module CSS */\n\n.advisor-box {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: 15px;\n  margin-bottom: 10px;\n  /*padding: 16px 24px;*/\n  width: 100%;\n;\n  }\n\n\n  .advisor-box button {\n    background-color: #05ad79;\n    color: white;\n    border: none;\n    border-radius: 4px;\n    padding: 12px 16px; /* Slightly reduced padding */\n    text-transform: none;\n    font-size: 18px; /* Aligned button font size with body copy */\n    font-weight: 700;\n    line-height: 18px;\n    /* margin: 0 auto; /* Centered button */\n    display: inline-block; /* Ensures button is centered */\n    width: 100% !important;\n    box-sizing: border-box;\n  }\n\n/* Mobile only style */\n@media screen and (max-width: 767px) {\n  h1.title {\n    font-size: 20px !important;\n  }\n    div.right-column.clearfix.js-right-column {\n  display: none !important;\n} \n}\n\n  /* Output style */\n  div#retirement-title.answer-title {\n    font-size: 15px;\n    margin-bottom: -1px !important;\n}\n\n.interactive-content .input-data {\n  font-size: 15px;\n  line-height: 18px;\n}\n\n.interactive-content .graphic-title\n{\n  font-size: 20px !important;\n  font-weight: 600 !important;\n}\n\n /* Jump link style */\n.jump {\n  font-style: italic;\n  margin-bottom: 1.5em;\n  margin-top: 0px;\n  background-color: #efefef;\n  border-radius: 6px;\n  padding: 6px 12px\n  \n}</style>", "dependencies": []}, {"css": {}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "BDBE9FE1-ACC9-4D22-A79B-FF7AE89A2C70", "selector": "div#rc_display"}, {"id": "BDBE9FE1-ACC9-4D22-A79B-FF7AE89A2C70-rearrange", "type": "rearrange", "selector": "div#rc_display", "insertSelector": "div#retirement-title.answer-title", "operator": "before", "dependencies": ["BDBE9FE1-ACC9-4D22-A79B-FF7AE89A2C70"]}, {"id": "722C5429-F36B-4085-A354-7E9C37BEE75F", "type": "append", "dependencies": ["BDBE9FE1-ACC9-4D22-A79B-FF7AE89A2C70", "BDBE9FE1-ACC9-4D22-A79B-FF7AE89A2C70-rearrange"], "selector": "td.left-box.sa-inputs", "value": "<div class=\"advisor-box\">\n\n   \n    <button class =\"falcbutton\" type=\"button\" onclick=\"smartasset.page.toggleInputs();\">Edit Your Financial Details Here</button>\n\n  </div>", "operator": "after"}, {"css": {}, "dependencies": [], "attributes": {"html": "Projected Income at Retirement"}, "type": "attribute", "id": "3E3A5DAA-2E08-40F5-86BF-A8A1539E887A", "selector": ".breakdowns > .graphic-title"}, {"css": {}, "dependencies": [], "attributes": {"html": "Key Insights"}, "type": "attribute", "id": "9C823962-C59E-4EA7-BC33-177D557FB469", "selector": ".key-takeaways > .graphic-title"}, {"id": "AD62F0DA-2A08-40DC-B05C-BBC810D64D38", "type": "append", "dependencies": [], "selector": "#retirement-title", "value": "<div class=\"jump\">\n  <a href=\"#about\"> How did we calculate your results?\n    </a>  \n</div>", "operator": "after"}, {"id": "E8D18CA0-0576-441A-A4E1-39AA7BB79396", "type": "append", "dependencies": [], "selector": ".sa-accordion.js-accordion", "value": "<div id=\"about\"> </div>", "operator": "before"}]}]}, {"id": "4717953283784704", "name": "Variation #2 - New Template #1", "actions": [{"viewId": "5793950586372096", "changes": [{"id": "9E61754B-A158-4494-B359-EF331B9E1F44", "type": "custom_code", "value": function($){// Get Optimizely utils
const utils = window.optimizely.get('utils');

// 1) Accordion open/close + mixpanel tracking
utils.observeSelector('.accordion-header', function(header) {
  // Prevent binding multiple times
  if (header._accordionBound) return;
  header._accordionBound = true;

  header.addEventListener('click', function() {
    const isExpanded = header.getAttribute('aria-expanded') === 'true';
    const content    = header.nextElementSibling;

    // Toggle state
    header.setAttribute('aria-expanded', String(!isExpanded));
    if (!isExpanded) {
      content.style.maxHeight = content.scrollHeight + 'px';
    } else {
      content.style.maxHeight = null;
    }

    // Mixpanel event
    mixpanel.track('about answer click', {
      section: header.textContent.trim()
    });
  });
});

// 2) Edit Financial Details clicks
utils.observeSelector('.falcbutton, .inputs-button', function(btn) {
  if (btn._editBound) return;
  btn._editBound = true;

  btn.addEventListener('click', function() {
    mixpanel.track('edit financial details');
  });
});

// 3) Close Financial Details clicks
utils.observeSelector('.mobile-input-close', function(btn) {
  if (btn._closeBound) return;
  btn._closeBound = true;

  btn.addEventListener('click', function() {
    mixpanel.track('close financial details');
  });
});
}, "dependencies": []}, {"id": "4A0752EC-C43E-4A87-8F9A-A6F85DF45CA7", "type": "append", "selector": "head", "value": "<style>/* Hide ads */\n\ndiv.riklam-container.riklam-container-sponsorcalcsimple2.riklam-visible {\n  display: none !important;\n}\n\ndiv.riklam-container.riklam-container-sponsorcalc.riklam-visible {\n  display: none !important;\n}\n\ndiv.top-banner-ctr {\n  display: none !important;\n} \n\n\n/* Hide button on desktop: screens 768px and wider */\n@media screen and (min-width: 768px) {\n  .advisor-box {\n    display: none !important;\n  }\n}\n/* simple module CSS */\n\n.advisor-box {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: 15px;\n  margin-bottom: 10px;\n  /*padding: 16px 24px;*/\n  width: 100%;\n;\n  }\n\n\n  .advisor-box button {\n    background-color: #05ad79;\n    color: white;\n    border: none;\n    border-radius: 4px;\n    padding: 12px 16px; /* Slightly reduced padding */\n    text-transform: none;\n    font-size: 18px; /* Aligned button font size with body copy */\n    font-weight: 700;\n    line-height: 18px;\n    /* margin: 0 auto; /* Centered button */\n    display: inline-block; /* Ensures button is centered */\n    width: 100% !important;\n    box-sizing: border-box;\n  }\n\n/* Mobile only style */\n@media screen and (max-width: 767px) {\n  h1.title {\n    font-size: 20px !important;\n  }\n    div.right-column.clearfix.js-right-column {\n  display: none !important;\n} \n}\n\n  /* Output style */\n  div#retirement-title.answer-title {\n    font-size: 15px;\n    margin-bottom: -1px !important;\n}\n\n.interactive-content .input-data {\n  font-size: 15px;\n  line-height: 18px;\n}\n\n.interactive-content .graphic-title\n{\n  font-size: 20px !important;\n  font-weight: 600 !important;\n}\n\n.funneltitle {\n    font-size: 20px !important;\n  font-weight: 600 !important;\n}\n\n /* Jump link style */\n.jump {\n  font-style: italic;\n  margin-bottom: 1.5em;\n  margin-top: 0px;\n  background-color: #efefef;\n  border-radius: 6px;\n  padding: 6px 12px\n  \n}\n\n\n/* accordion style */\n.accordion {\n  border: .5px solid #ccc;\n  border-radius: 6px;\n  overflow: hidden;\n  font-family: sans-serif;\n  margin-top: 15px;\n  margin-bottom: 25px;\n}\n\n.accordion-item + .accordion-item {\n  border-top: .5px solid #ccc;\n}\n\n.accordion-header {\n  width: 100%;\n  padding: 8px 16px;\n  background: #F1FAFF;\n  border: none;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 12px;\n  font-weight: bold;\n  cursor: pointer;\n  text-transform: none;\n  color: #11638A;\n}\n\n\n.accordion-icon {\n  transition: transform 0.3s ease;\n}\n\n.accordion-header[aria-expanded=\"true\"] .accordion-icon {\n  transform: rotate(180deg);\n}\n\n.accordion-content {\n  max-height: 0;\n  overflow: hidden;\n  transition: max-height 0.3s ease;\n  background: #fff;\n  padding: 0 16px;\n}\n\n.accordion-header[aria-expanded=\"true\"] + .accordion-content {\n  padding: 12px 16px;\n}\n\n.accordion-content p {\n  margin: 0 0 1em 0;\n    font-size: 12px;\n}\n\n.accordion-content p:last-child {\n  margin-bottom: 0;\n}\n\n.accordion-header:hover {\n  background: #e6f4fc;\n} \n\n.sa-accordion {\n  display: none !important;\n}</style>", "dependencies": []}, {"css": {}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "16EFDA82-06E3-4061-AE26-CAAD98A3402D", "selector": "div#rc_display"}, {"id": "16EFDA82-06E3-4061-AE26-CAAD98A3402D-rearrange", "type": "rearrange", "selector": "div#rc_display", "insertSelector": "div#retirement-title.answer-title", "operator": "before", "dependencies": ["16EFDA82-06E3-4061-AE26-CAAD98A3402D"]}, {"id": "9DFCB967-0A80-4989-A349-AC99FACCA17A", "type": "append", "dependencies": ["16EFDA82-06E3-4061-AE26-CAAD98A3402D", "16EFDA82-06E3-4061-AE26-CAAD98A3402D-rearrange"], "selector": "td.left-box.sa-inputs", "value": "<div class=\"advisor-box\">\n\n   \n    <button class =\"falcbutton\" type=\"button\" onclick=\"smartasset.page.toggleInputs();\">Tap to Edit Your Financial Details</button>\n\n  </div>", "operator": "after"}, {"css": {}, "dependencies": [], "attributes": {"html": "Projected Income at Retirement"}, "type": "attribute", "id": "9D73DA0B-7006-4DEE-8E55-DE8BC68FE1F9", "selector": ".breakdowns > .graphic-title"}, {"css": {}, "dependencies": [], "attributes": {"html": "Key Insights"}, "type": "attribute", "id": "123C5A2B-4CAC-4BDC-AFB7-2B48762E2777", "selector": ".key-takeaways > .graphic-title"}, {"id": "DF8D9DAC-1467-4272-BE05-BB098036741E", "type": "append", "dependencies": [], "selector": "#smartadvisor-captivate-funnel", "value": "<div class=\"accordion\">\n  <!-- About This Answer -->\n  <div class=\"accordion-item\">\n    <button class=\"accordion-header\" aria-expanded=\"false\">\n      <span>About This Answer</span>\n      <svg class=\"accordion-icon\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\">\n        <path fill=\"currentColor\" d=\"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6z\"/>\n      </svg>\n    </button>\n    <div class=\"accordion-content\">\n      <p>To figure out how much you need to save for retirement we first calculate how much money we expect you will spend over the course of your retirement. This means looking at the income you will need based on your lifestyle preference, then factoring in the number of years in your retirement (we assume you live to 95).</p>\n      <p>Once we have a good idea of your total need in retirement we use our models to analyze your existing resources. This means estimating your retirement income from Social Security and the impact of current savings plans, pensions and other retirement accounts. In our analysis we include the tax impact of these items so we do not overestimate your retirement income.</p>\n      <p>We then do some fancy math to calculate the savings you will need to have built at the time of retirement, based on your needs and resources, to sustain your desired lifestyle.</p>\n    </div>\n  </div>\n\n  <!-- Our Assumptions -->\n  <div class=\"accordion-item\">\n    <button class=\"accordion-header\" aria-expanded=\"false\">\n      <span>Our Assumptions</span>\n      <svg class=\"accordion-icon\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\">\n        <path fill=\"currentColor\" d=\"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6z\"/>\n      </svg>\n    </button>\n    <div class=\"accordion-content\">\n      <p><strong>Lifespan:</strong> We assume you will live to 95. We stop the analysis there, regardless of your spouse's age.</p>\n      <p><strong>Retirement accounts:</strong> We automatically distribute your savings optimally among different retirement accounts. We assume that the contribution limits for your retirement accounts increase with inflation.</p>\n      <p><strong>Taxes:</strong> We calculate taxes on a federal, state and local level. The tax implications of different tax\u2011advantaged retirement accounts, Social Security income and other sources of retirement income are all considered in our models. To better align with filing season, tax calculations are based on the tax filing calendar; therefore calculations prior to April are based on the previous year\u2019s tax rules.</p>\n      <p><strong>Social Security:</strong> We estimate your Social Security income using your stated annual income and assuming you have worked and paid Social Security taxes for 35 years prior to retirement. Our estimate is sensitive to penalties for early retirement and credits for delaying claiming Social Security benefits.</p>\n      <p><strong>Return on savings:</strong> We assume the return on savings is the same percentage across different savings instruments.</p>\n    </div>\n  </div>\n</div>", "operator": "after"}, {"css": {}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "FCED85A0-C829-4235-97DA-01D9CCFCF5C4", "selector": ".falcbutton"}, {"css": {}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "FD6910B8-AC4F-4DAA-9E3C-97F993961204", "selector": ".inputs-button"}, {"css": {}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "061AB10D-5775-4540-9E4E-65B834A37840", "selector": ".accordion-header"}, {"css": {}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "47D7866D-B6FE-4EE2-BE41-55E163E6A39B", "selector": ".mobile-input-close"}]}]}, {"id": "4968641934917632", "name": "Variation #3 - New Template #2 (Includes Snippet Label + Higher About)", "actions": [{"viewId": "5793950586372096", "changes": [{"id": "D104C698-750A-4775-B388-C1C43BFAD8F1", "type": "custom_code", "value": function($){// Get Optimizely utils
const utils = window.optimizely.get('utils');

// 1) Accordion open/close + mixpanel tracking
utils.observeSelector('.accordion-header', function(header) {
  // Prevent binding multiple times
  if (header._accordionBound) return;
  header._accordionBound = true;

  header.addEventListener('click', function() {
    const isExpanded = header.getAttribute('aria-expanded') === 'true';
    const content    = header.nextElementSibling;

    // Toggle state
    header.setAttribute('aria-expanded', String(!isExpanded));
    if (!isExpanded) {
      content.style.maxHeight = content.scrollHeight + 'px';
    } else {
      content.style.maxHeight = null;
    }

    // Mixpanel event
    mixpanel.track('about answer click', {
      section: header.textContent.trim()
    });
  });
});

// 2) Edit Financial Details clicks
utils.observeSelector('.falcbutton, .inputs-button', function(btn) {
  if (btn._editBound) return;
  btn._editBound = true;

  btn.addEventListener('click', function() {
    mixpanel.track('edit financial details');
  });
});

// 3) Close Financial Details clicks
utils.observeSelector('.mobile-input-close', function(btn) {
  if (btn._closeBound) return;
  btn._closeBound = true;

  btn.addEventListener('click', function() {
    mixpanel.track('close financial details');
  });
});
}, "dependencies": []}, {"id": "1D003AB5-7A43-428B-A56B-F564E50D611D", "type": "append", "selector": "head", "value": "<style>/* Hide ads */\n\ndiv.riklam-container.riklam-container-sponsorcalcsimple2.riklam-visible {\n  display: none !important;\n}\n\ndiv.riklam-container.riklam-container-sponsorcalc.riklam-visible {\n  display: none !important;\n}\n\ndiv.top-banner-ctr {\n  display: none !important;\n} \n\n\n/* Hide button on desktop: screens 768px and wider */\n@media screen and (min-width: 768px) {\n  .advisor-box {\n    display: none !important;\n  }\n}\n/* simple module CSS */\n\n.advisor-box {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: 15px;\n  margin-bottom: 10px;\n  /*padding: 16px 24px;*/\n  width: 100%;\n;\n  }\n\n\n  .advisor-box button {\n    background-color: #05ad79;\n    color: white;\n    border: none;\n    border-radius: 4px;\n    padding: 12px 16px; /* Slightly reduced padding */\n    text-transform: none;\n    font-size: 18px; /* Aligned button font size with body copy */\n    font-weight: 700;\n    line-height: 18px;\n    /* margin: 0 auto; /* Centered button */\n    display: inline-block; /* Ensures button is centered */\n    width: 100% !important;\n    box-sizing: border-box;\n  }\n\n/* Mobile only style */\n@media screen and (max-width: 767px) {\n  h1.title {\n    font-size: 20px !important;\n  }\n    div.right-column.clearfix.js-right-column {\n  display: none !important;\n} \n}\n\n  /* Output style */\n  div#retirement-title.answer-title {\n    font-size: 15px;\n    margin-bottom: -1px !important;\n}\n\n.interactive-content .input-data {\n  font-size: 15px;\n  line-height: 18px;\n}\n\n.interactive-content .graphic-title\n{\n  font-size: 20px !important;\n  font-weight: 600 !important;\n}\n\n.funneltitle {\n    font-size: 20px !important;\n  font-weight: 600 !important;\n}\n\n /* Jump link style */\n.jump {\n  font-style: italic;\n  margin-bottom: 1.5em;\n  margin-top: 0px;\n  background-color: #efefef;\n  border-radius: 6px;\n  padding: 6px 12px\n  \n}\n\n\n/* accordion style */\n.accordion {\n  border: .5px solid #ccc;\n  border-radius: 6px;\n  overflow: hidden;\n  font-family: sans-serif;\n  margin-bottom: 12px;\n}\n\n.accordion-item + .accordion-item {\n  border-top: .5px solid #ccc;\n}\n\n.accordion-header {\n  width: 100%;\n  padding: 8px 16px;\n  background: #F1FAFF;\n  border: none;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 12px;\n  font-weight: bold;\n  cursor: pointer;\n  text-transform: none;\n  color: #11638A;\n}\n\n\n.accordion-icon {\n  transition: transform 0.3s ease;\n}\n\n.accordion-header[aria-expanded=\"true\"] .accordion-icon {\n  transform: rotate(180deg);\n}\n\n.accordion-content {\n  max-height: 0;\n  overflow: hidden;\n  transition: max-height 0.3s ease;\n  background: #fff;\n  padding: 0 16px;\n}\n\n.accordion-header[aria-expanded=\"true\"] + .accordion-content {\n  padding: 12px 16px;\n}\n\n.accordion-content p {\n  margin: 0 0 1em 0;\n    font-size: 12px;\n}\n\n.accordion-content p:last-child {\n  margin-bottom: 0;\n}\n\n.accordion-header:hover {\n  background: #e6f4fc;\n} \n\n.sa-accordion {\n  display: none !important;\n}</style>", "dependencies": []}, {"css": {}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "BA3CBCCA-EFEF-4F7B-AB48-D02B3F0AF6D8", "selector": "div#rc_display"}, {"id": "BA3CBCCA-EFEF-4F7B-AB48-D02B3F0AF6D8-rearrange", "type": "rearrange", "selector": "div#rc_display", "insertSelector": "div#retirement-title.answer-title", "operator": "before", "dependencies": ["BA3CBCCA-EFEF-4F7B-AB48-D02B3F0AF6D8"]}, {"id": "D86077B5-9B9F-466E-B5F5-760AB7C350D8", "type": "append", "dependencies": ["BA3CBCCA-EFEF-4F7B-AB48-D02B3F0AF6D8", "BA3CBCCA-EFEF-4F7B-AB48-D02B3F0AF6D8-rearrange"], "selector": "td.left-box.sa-inputs", "value": "<div class=\"advisor-box\">\n\n   \n    <button class =\"falcbutton\" type=\"button\" onclick=\"smartasset.page.toggleInputs();\">Tap to Edit Your Financial Details</button>\n\n  </div>", "operator": "after"}, {"css": {}, "dependencies": [], "attributes": {"html": "Projected Income at Retirement"}, "type": "attribute", "id": "1FBB212E-EAFB-4B79-9ED7-3B686E0DC47A", "selector": ".breakdowns > .graphic-title"}, {"css": {}, "dependencies": [], "attributes": {"html": "Key Insights"}, "type": "attribute", "id": "07A3C21F-8E84-43BA-8190-011004B8FCAD", "selector": ".key-takeaways > .graphic-title"}, {"id": "70345804-7FA0-43B9-AE86-0D934E60FBA2", "type": "append", "dependencies": [], "selector": "div#retirement-title.answer-title", "value": "<div class=\"accordion\">\n  <!-- About This Answer -->\n  <div class=\"accordion-item\">\n    <button class=\"accordion-header\" aria-expanded=\"false\">\n      <span>About This Answer</span>\n      <svg class=\"accordion-icon\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\">\n        <path fill=\"currentColor\" d=\"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6z\"/>\n      </svg>\n    </button>\n    <div class=\"accordion-content\">\n      <p>To figure out how much you need to save for retirement we first calculate how much money we expect you will spend over the course of your retirement. This means looking at the income you will need based on your lifestyle preference, then factoring in the number of years in your retirement (we assume you live to 95).</p>\n      <p>Once we have a good idea of your total need in retirement we use our models to analyze your existing resources. This means estimating your retirement income from Social Security and the impact of current savings plans, pensions and other retirement accounts. In our analysis we include the tax impact of these items so we do not overestimate your retirement income.</p>\n      <p>We then do some fancy math to calculate the savings you will need to have built at the time of retirement, based on your needs and resources, to sustain your desired lifestyle.</p>\n    </div>\n  </div>\n\n  <!-- Our Assumptions -->\n  <div class=\"accordion-item\">\n    <button class=\"accordion-header\" aria-expanded=\"false\">\n      <span>Our Assumptions</span>\n      <svg class=\"accordion-icon\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\">\n        <path fill=\"currentColor\" d=\"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6z\"/>\n      </svg>\n    </button>\n    <div class=\"accordion-content\">\n      <p><strong>Lifespan:</strong> We assume you will live to 95. We stop the analysis there, regardless of your spouse's age.</p>\n      <p><strong>Retirement accounts:</strong> We automatically distribute your savings optimally among different retirement accounts. We assume that the contribution limits for your retirement accounts increase with inflation.</p>\n      <p><strong>Taxes:</strong> We calculate taxes on a federal, state and local level. The tax implications of different tax\u2011advantaged retirement accounts, Social Security income and other sources of retirement income are all considered in our models. To better align with filing season, tax calculations are based on the tax filing calendar; therefore calculations prior to April are based on the previous year\u2019s tax rules.</p>\n      <p><strong>Social Security:</strong> We estimate your Social Security income using your stated annual income and assuming you have worked and paid Social Security taxes for 35 years prior to retirement. Our estimate is sensitive to penalties for early retirement and credits for delaying claiming Social Security benefits.</p>\n      <p><strong>Return on savings:</strong> We assume the return on savings is the same percentage across different savings instruments.</p>\n    </div>\n  </div>\n</div>", "operator": "after"}, {"id": "78919AEF-1F86-44D6-A304-7BA51BF17F13", "type": "append", "dependencies": [], "selector": "div#smartadvisor-captivate-funnel", "value": "<p class=\"funneltitle\"> Take Quiz to Get Matched with an Advisor</p>", "operator": "before"}, {"css": {}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "010CFFC1-240A-47E5-B2B4-E071507910F7", "selector": ".falcbutton"}, {"css": {}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "1FE1D293-934D-4430-B09F-7A1799F07ED6", "selector": ".inputs-button"}, {"css": {}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "96EC0C0E-F0DD-4898-A86B-358D7AC2704D", "selector": ".accordion-header"}, {"css": {}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "CB6784BD-4CC2-4C39-8764-C2F5D6F1DF6E", "selector": ".mobile-input-close"}]}]}], "weightDistributions": [{"entityId": "4717953283784704", "endOfRange": 10000}], "name": "Retirement Calc UX", "bucketingStrategy": null, "experimentMetadata": {"allocationPolicy": "manual", "layerId": "6285398779887616"}, "deployed": false}], "policy": "single_experiment", "viewIds": ["5793950586372096"], "weightDistributions": null, "decisionMetadata": null, "concluded": false}, {"changes": null, "id": "6467381170536448", "name": "OTP Advisor Iconography", "commitId": "6681148168863744", "groupId": null, "holdback": 0, "activation": {}, "integrationSettings": {"mixpanel": {}}, "integrationStringVersion": 2, "experiments": [{"audienceIds": null, "audienceName": "Everyone else", "changes": null, "id": "4626334278746112", "integrationSettings": null, "variations": [{"id": "4772660324859904", "name": "Original", "actions": []}, {"id": "5054419272728576", "name": "Advisor Icons", "actions": [{"viewId": "5341481263693824", "changes": [{"id": "4D17F2A3-D648-45CA-9880-00E6C1FDF71B", "type": "custom_code", "value": function($){var utils = window.optimizely.get('utils');

var createAdvisorPhotos = function(parentContainer) {
  var currentNextStepPhotos = document.querySelector('.next-steps-photos');
  var photosSection = document.createElement('div');
  photosSection.className = 'next-steps-photos';

  var matchesResponses;
  if (window.com_smartasset_smartadvisor_funnel.subscription_responses.postPII) {
    matchesResponses = window.com_smartasset_smartadvisor_funnel.subscription_responses.postPII;
  }

  var latestMatchesResponse = matchesResponses;
  if (Array.isArray(matchesResponses)) {
      latestMatchesResponse = matchesResponses.at(-1);
  }

  var photoUrls;
  if (latestMatchesResponse.data && latestMatchesResponse.data.matches) {
    photoUrls = latestMatchesResponse.data.matches.map(match => {
      return match.advisor.imageUrl;
    }) || [];
  } 

  var imgEls = photoUrls.map(photoUrl => {
    if(photoUrl) {
      var img = document.createElement('div');
      img.className = 'next-steps-bg';
      img.style.background = `url(${photoUrl}) no-repeat center center/cover`;
      return img;
    }
  }).filter(Boolean);

  if (imgEls.length > 3) {
    imgEls = imgEls.slice(0, 3);
  }

  imgEls.forEach(photoEl => {
    var photoContainer = document.createElement('div');
    photoContainer.className = 'next-steps-photo-container';
    
    photoContainer.appendChild(photoEl);
    photosSection.appendChild(photoContainer);
  });

  if (imgEls.length > 0) {
    var questionIcon = document.querySelector('.question-icon');
    questionIcon.style.display = 'none';
  }

  if (currentNextStepPhotos) {
    currentNextStepPhotos.replaceWith(photosSection);
    return;
  }
  parentContainer.prepend(photosSection);
};

utils.observeSelector('.sms-otp-container', function() {
  var otpInputContainer = document.querySelector('.sms-otp-container');
  if (otpInputContainer) {
    var otpParentContainer = otpInputContainer.parentNode;
    createAdvisorPhotos(otpParentContainer);
  }
});
}, "dependencies": []}, {"id": "4AAF39CC-91CB-4531-BF17-38DFD3F3088E", "type": "append", "selector": "head", "value": "<style>.next-steps-photos {\n\tdisplay: flex;\n  justify-content: center;\n}\n\n.next-steps-photo-container {\n\theight: 52px;\n  width: 52px;\n  margin-left: -17px;\n}\n\n.next-steps-bg {\n  position: relative;\n  height: 100%;\n  width: 100%;\n  border-radius: 50%;\n  overflow: hidden;\n  border: 4px solid white;\n  box-sizing: border-box;\n}\n\n.next-steps-bg::before {\n  content: \"\";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  /* Apply the blur to the background behind this pseudo-element */\n  backdrop-filter: blur(1px);\n  /* Ensure it has a background color to be visible (can be semi-transparent) */\n  background-color: rgba(255, 255, 255, 0.1);\n}</style>", "dependencies": []}]}]}], "weightDistributions": [{"entityId": "4772660324859904", "endOfRange": 5000}, {"entityId": "5054419272728576", "endOfRange": 10000}], "name": "OTP Advisor Iconography", "bucketingStrategy": null, "experimentMetadata": {"allocationPolicy": "manual", "layerId": "6467381170536448"}, "deployed": false}], "policy": "single_experiment", "viewIds": ["5341481263693824"], "weightDistributions": null, "decisionMetadata": null, "concluded": false}, {"changes": null, "id": "6602708040286208", "name": "12/10 Network Location Removal", "commitId": "5195569816141824", "groupId": null, "holdback": 0, "activation": {}, "integrationSettings": {"mixpanel": {}}, "integrationStringVersion": 2, "experiments": [{"audienceIds": null, "audienceName": "Everyone else", "changes": null, "id": "5343021680558080", "integrationSettings": null, "variations": [{"id": "6591293762043904", "name": "Original", "actions": []}, {"id": "6493512623980544", "name": "Network Location Removed", "actions": [{"viewId": "6477601078771712", "changes": [{"id": "B6703233-2B41-4F71-8AC8-47B9844994DB", "type": "custom_code", "value": function($){// Use observeSelector to wait for advisor profiles to load
function observeSelector(selector, callback, timeout) {
  const startTime = Date.now();
  const maxTime = timeout || 5000;
  
  const interval = setInterval(function() {
    const elements = document.querySelectorAll(selector);
    
    if (elements.length > 0) {
      clearInterval(interval);
      callback(elements);
    } else if (Date.now() - startTime > maxTime) {
      clearInterval(interval);
    }
  }, 100);
}

// Wait for advisor profiles to be present
observeSelector('.profile.listing', function(profiles) {
  profiles.forEach(function(profile) {
    // Check if this profile has advisor_type of "Advisory network"
    const advisorType = profile.querySelector('.advisor_type');
    
    if (advisorType && advisorType.textContent.trim() === 'Advisory network') {
      // Find all profile_stat elements in the top_right section
      const topRight = profile.querySelector('.top_right');
      
      if (topRight) {
        const profileStats = topRight.querySelectorAll('.profile_stat');
        
        profileStats.forEach(function(stat) {
          // Check if this stat contains "Location:"
          if (stat.textContent.includes('Location:')) {
            stat.style.display = 'none';
          }
        });
      }
    }
  });
});
}, "dependencies": []}]}]}], "weightDistributions": [{"entityId": "6591293762043904", "endOfRange": 5000}, {"entityId": "6493512623980544", "endOfRange": 10000}], "name": "12/10 Network Location Removal", "bucketingStrategy": null, "experimentMetadata": {"allocationPolicy": "manual", "layerId": "6602708040286208"}, "deployed": false}], "policy": "single_experiment", "viewIds": ["6477601078771712"], "weightDistributions": null, "decisionMetadata": null, "concluded": false}, {"changes": null, "id": "6717596536406016", "name": "Chase Disclosure Updates", "commitId": "4724648294744064", "groupId": null, "holdback": 0, "activation": {}, "integrationSettings": {"mixpanel": {}}, "integrationStringVersion": 2, "experiments": [{"audienceIds": null, "audienceName": "Everyone else", "changes": null, "id": "5022641648566272", "integrationSettings": null, "variations": [{"id": "4941320200912896", "name": "Original", "actions": [{"viewId": "4692092643966976", "changes": []}]}, {"id": "6230953186557952", "name": "Chase disclosures", "actions": [{"viewId": "4692092643966976", "changes": [{"id": "DC9E8E46-2DB4-4288-BD4F-09D71FA3034D", "type": "custom_code", "value": function($){const newCopyHtml = `SmartAsset.com maintains strict <a href="/editorial-independence">editorial integrity</a>. This review was produced independently using publicly available information and is for informational purposes only. It is accurate to the best of our knowledge when posted, and SmartAsset does not provide legal, tax, accounting or financial advice. The named institution and its financial professionals have not reviewed, approved or endorsed this content and are not responsible for its accuracy. Any opinions are solely the authors. SmartAsset may be compensated by advertisers or partners, we may receive compensation for marketing their products or services or if users purchase products or services. Such relationships do not influence our editorial content.`;

function updateEditorialDisclosures(newCopyHtml) {
  const blocks = document.querySelectorAll(
    ".author-info .editorial-disclosure, .author-info .editorial-disclosure-mobile"
  );

  blocks.forEach((block) => {
    // Preserve the existing trigger + inline script
    const trigger = block.querySelector(".sa-disclosure-hover");
    const script = block.querySelector("script");

    if (!trigger) return; // nothing to preserve

    // Detach preserved nodes so innerHTML edits don't destroy them
    trigger.remove();
    if (script) script.remove();

    // Replace the disclosure copy (everything leading up to the pipe)
    // IMPORTANT: do NOT include the pipe/trigger in newCopyHtml
    block.innerHTML = newCopyHtml.trim() + " | ";

    // Reattach preserved nodes
    block.appendChild(trigger);
    if (script) block.appendChild(script);
  });
  console.log("updated disclosure 2");
}

function updateArticleDisclosures() {
  document.querySelector(".article-disclosure").innerHTML = `SmartAsset.com maintains strict <a href="/editorial-independence">editorial integrity</a>. This review was produced by SmartAsset based on publicly available information. Our content is for informational purposes only and is accurate to the best of our knowledge when posted. SmartAsset does not provide legal, tax, accounting or financial advice. The named firm and its financial professionals have not reviewed, approved, or endorsed this review and are not responsible for its accuracy. Review content is produced by SmartAsset independently of any business relationships that might exist between SmartAsset and the named firm and its financial professionals, and firms and financial professionals having business relationships with SmartAsset receive no special treatment or consideration in SmartAssets reviews. This page contains links to SmartAssets financial advisor matching tool, in which SmartAsset is compensated for lead referrals, which may or may not match you with the firm mentioned in this review or its financial professionals.`;
  console.log("updated disclosure 1");
}

var utils = window.optimizely.get("utils");

if(location.pathname == "/financial-advisor/jp-morgan-wealth-management-review") {
  utils.observeSelector(".article-disclosure", updateArticleDisclosures);
} else {
  utils.observeSelector(".editorial-disclosure", () => updateEditorialDisclosures(newCopyHtml));
  utils.observeSelector(".editorial-disclosure-mobile", () => updateEditorialDisclosures(newCopyHtml));
}
}, "dependencies": []}, {"css": {}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "B8EC0423-58E1-4CCE-9239-8E2BD08500CF", "selector": ".editorial-disclosure > a"}, {"css": {}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "A891F173-9B04-41F2-83C8-2D8B46D581C3", "selector": ".editorial-disclosure > .js-disclosure"}]}]}], "weightDistributions": [{"entityId": "6230953186557952", "endOfRange": 10000}], "name": "Chase Disclosure Updates", "bucketingStrategy": null, "experimentMetadata": {"allocationPolicy": "manual", "layerId": "6717596536406016"}, "deployed": false}], "policy": "single_experiment", "viewIds": ["4692092643966976"], "weightDistributions": null, "decisionMetadata": null, "concluded": false}, {"changes": null, "id": "6722222853718016", "name": "Match Screen FAV Calculator", "commitId": "5016586382213120", "groupId": null, "holdback": 0, "activation": {}, "integrationSettings": {"mixpanel": {}}, "integrationStringVersion": 2, "experiments": [{"audienceIds": null, "audienceName": "Everyone else", "changes": null, "id": "6404435623018496", "integrationSettings": null, "variations": [{"id": "5315031311581184", "name": "Original", "actions": []}, {"id": "6609461574369280", "name": "FAV Banner", "actions": [{"viewId": "6512760335368192", "changes": [{"id": "50EEFB1E-6360-49FA-B6C4-31CF9CC49123", "type": "append", "selector": "head", "value": "<style>.funnel_header {\n\t\t\t\t\t\tpadding-bottom: 24px !important;\n}\n\n.banner {\n            display: flex;\n            align-items: center;\n            gap: 16px;\n            background: #FFF;\n\t\t\t\t\t\tbox-shadow: 0 4px 32px 0 rgba(166, 199, 214, 0.30);\n            color: #333;\n            padding: 16px 24px;\n            border-radius: 12px;\n            max-width: 1200px;\n            margin: 0 auto;\n  \t\t\t\t\tmargin-bottom: 24px;\n        }\n\n        .banner__icon {\n            flex-shrink: 0;\n            width: 30px;\n            height: 30px;\n        }\n\n        .banner__icon svg {\n            width: 100%;\n            height: 100%;\n        }\n\n        .banner__content {\n            flex: 1;\n            font-size: 16px;\n            line-height: 1.5;\n        }\n\n        .banner__content i {\n            font-style: italic;\n            font-weight: 800;\n        }\n\n        .banner__cta {\n            flex-shrink: 0;\n        }\n\n        .banner__button {\n            background-color: #ff600a;\n            color: #fff;\n            border: none;\n            padding: 10px 20px;\n            font-size: 16px;\n            font-weight: 600;\n            border-radius: 32px;\n            cursor: pointer;\n            transition: transform 0.2s, box-shadow 0.2s;\n            white-space: nowrap;\n              text-transform: none;\n}\n        \n\n        .banner__button:hover {\n            transform: translateY(-1px);\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n          \tbackground-color: #d14900;\n        }\n\n        .banner__button:active {\n            transform: translateY(0);\n        }\n\n        /* Responsive */\n        @media (max-width: 768px) {\n            .banner {\n                flex-direction: column;\n                text-align: center;\n                gap: 12px;\n            }\n\n            .banner__content {\n                font-size: 14px;\n            }\n        }\n\n\n.concierge_steps {\n       margin-bottom: 24px !important;\n}\n\n.concierge_step h3 {margin-bottom: 0px !important;}</style>", "dependencies": []}, {"id": "0EBA6908-4AE8-4D06-8A43-8219E712A896", "type": "append", "dependencies": [], "selector": ".intro", "value": "<div class=\"banner\">\n        <div class=\"banner__icon\">\n            <!-- SVG Icon (calculator icon) -->\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"22\" height=\"25\" viewBox=\"0 0 22 25\" fill=\"none\">\n<path d=\"M3.5 3.5L3.5 6.95L17.875 6.95V3.5L3.5 3.5Z\" stroke=\"#333333\" stroke-width=\"1.25\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n<path d=\"M0.625 1.625V23.2C0.625 23.7523 1.07272 24.2 1.625 24.2H19.75C20.3023 24.2 20.75 23.7523 20.75 23.2V1.625C20.75 1.07271 20.3023 0.625 19.75 0.625H16.725H3.5H1.625C1.07272 0.625 0.625 1.07271 0.625 1.625Z\" stroke=\"#333333\" stroke-width=\"1.25\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n<path d=\"M6.375 12.125H3.5V9.82501H6.375V12.125Z\" stroke=\"#333333\" stroke-width=\"1.25\" stroke-linejoin=\"round\"/>\n<path d=\"M12.125 12.125H9.25V9.82501H12.125V12.125Z\" stroke=\"#333333\" stroke-width=\"1.25\" stroke-linejoin=\"round\"/>\n<path d=\"M17.875 12.125H15V9.82501H17.875V12.125Z\" stroke=\"#333333\" stroke-width=\"1.25\" stroke-linejoin=\"round\"/>\n<path d=\"M17.5 16.725H14.625V14.425H17.5V15.575V16.725Z\" stroke=\"#333333\" stroke-width=\"1.25\" stroke-linejoin=\"round\"/>\n<path d=\"M12.125 16.725H9.25V14.425H12.125V16.725Z\" stroke=\"#333333\" stroke-width=\"1.25\" stroke-linejoin=\"round\"/>\n<path d=\"M9.25 19.025V21.325H12.125V19.025H9.25Z\" stroke=\"#333333\" stroke-width=\"1.25\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n<path d=\"M14.625 19.025V21.325H17.5V19.025H14.625Z\" stroke=\"#333333\" stroke-width=\"1.25\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n<path d=\"M6.375 16.725H3.5V14.425H6.375V16.725Z\" stroke=\"#333333\" stroke-width=\"1.25\" stroke-linejoin=\"round\"/>\n<path d=\"M6.375 21.325H3.5V19.025H6.375V21.325Z\" stroke=\"#333333\" stroke-width=\"1.25\" stroke-linejoin=\"round\"/>\n</svg>\n        </div>\n        \n        <div class=\"banner__content\">\n            <b>New!</b> See how much a financial advisor can potentially add to your net worth over time with our calculator.\n        </div>\n        \n        <div class=\"banner__cta\">\n          <a href=\"https://smartasset.com/financial-advisor/financial-advisor-value-calculator\" target=\"_blank\">\n            <button class=\"banner__button\">Try It Now</button>\n        </div>\n    </div>", "operator": "before"}, {"css": {}, "dependencies": [], "attributes": {}, "type": "attribute", "id": "BB2267F6-99E0-4D39-A184-5DA8230575F8", "selector": ".banner__button"}]}]}], "weightDistributions": [{"entityId": "5315031311581184", "endOfRange": 5000}, {"entityId": "6609461574369280", "endOfRange": 10000}], "name": "Match Screen FAV Calculator", "bucketingStrategy": null, "experimentMetadata": {"allocationPolicy": "manual", "layerId": "6722222853718016"}, "deployed": false}], "policy": "single_experiment", "viewIds": ["6512760335368192"], "weightDistributions": null, "decisionMetadata": null, "concluded": false}], "groups": [], "audiences": [{"id": "30367780423", "name": "Yahoo Finance", "conditions": ["and", ["or", ["or", {"match": "exact", "name": "utm_source", "type": "query", "value": "yahoo_personalfinance"}]]]}, {"id": "4778318591950848", "name": "2point5milretire ADV", "conditions": ["and", ["or", ["or", {"match": "substring", "name": "utm_campaign", "type": "query", "value": "2point5milretire"}, {"match": "substring", "name": "utm_term", "type": "query", "value": "2point5milretire"}, {"match": "substring", "name": "utm_content", "type": "query", "value": "2point5milretire"}]]]}, {"id": "5144629171978240", "name": "Retirement Longevity ($1.5M) D2F", "conditions": ["and", ["or", ["or", {"match": "substring", "name": "utm_campaign", "type": "query", "value": "1point5milretire"}, {"match": "substring", "name": "utm_term", "type": "query", "value": "1point5milretire"}, {"match": "substring", "name": "utm_content", "type": "query", "value": "1point5milretire"}]]]}, {"id": "5636793752616960", "name": "Retirement Longevity ($2.5M)", "conditions": ["and", ["or", ["or", {"match": "substring", "name": "utm_campaign", "type": "query", "value": "25mlr"}, {"match": "substring", "name": "utm_term", "type": "query", "value": "25mlr"}, {"match": "substring", "name": "utm_content", "type": "query", "value": "25mlr"}]]]}, {"id": "6018164769685504", "name": "Retirement Longevity ($1.7M) D2F", "conditions": ["and", ["or", ["or", {"match": "substring", "name": "utm_campaign", "type": "query", "value": "wo17l"}, {"match": "substring", "name": "utm_term", "type": "query", "value": "wo17l"}, {"match": "substring", "name": "utm_content", "type": "query", "value": "wo17l"}]]]}, {"id": "6565373063987200", "name": "Retirement Longevity ($1.1M)", "conditions": ["and", ["or", ["or", {"match": "substring", "name": "utm_campaign", "type": "query", "value": "65rb"}, {"match": "substring", "name": "utm_term", "type": "query", "value": "65rb"}, {"match": "substring", "name": "utm_content", "type": "query", "value": "65rb"}]]]}], "listTargetingKeys": [], "visitorAttributes": [], "visitorIdLocator": {"type": "js", "name": "SA_UUID"}, "integrationSettings": [{"id": "google_analytics_4", "global_is_use_gtm": null}, {"id": "mixpanel"}], "views": [{"id": "19540800066", "category": "other", "apiName": "19181790056_paid_funnel", "name": "Paid Funnel Prod", "staticConditions": ["and", ["or", {"match": "simple", "type": "url", "value": "https://smartasset.com/retirement/find-a-financial-planner"}]], "deactivationEnabled": false, "undoOnDeactivation": false, "tags": [], "activationType": "url_changed"}, {"id": "19664061489", "category": "other", "apiName": "19181790056_match_screen", "name": "Match Screen Prod", "staticConditions": ["and", ["or", {"match": "simple", "type": "url", "value": "https://smartasset.com/retirement/financial-advisor"}], ["or", {"type": "element_present", "value": ".advisors_block"}]], "deactivationEnabled": false, "undoOnDeactivation": false, "tags": [], "activationType": "dom_changed"}, {"id": "23474500166", "category": "other", "apiName": "19181790056_url_targeting_for_3323_newsletter_signup_upsell_page", "name": "URL Targeting for 3.3.23 Newsletter Sign-Up Upsell Page", "staticConditions": ["and", ["or", {"match": "simple", "type": "url", "value": "https://articles.smartasset.com/newsletter-sign-up-sub-acq-thank-you/index.html"}]], "deactivationEnabled": false, "undoOnDeactivation": false, "tags": []}, {"id": "27467340335", "category": "other", "apiName": "19181790056_url_targeting_for_copy_of_inflation_calculator_cta", "name": "URL Targeting for Inflation Calculator CTA - Winner 100%", "staticConditions": ["and", ["or", {"match": "simple", "type": "url", "value": "https://smartasset.com/investing/inflation-calculator"}]], "deactivationEnabled": false, "undoOnDeactivation": false, "tags": []}, {"id": "27772470036", "category": "other", "apiName": "19181790056_url_targeting_for_copy_of_social_security_calculator", "name": "URL Targeting for Social Security Calculator CTA (With Overlay) - WINNER Rolled out to 100%", "staticConditions": ["and", ["or", {"match": "simple", "type": "url", "value": "https://smartasset.com/retirement/social-security-calculator"}]], "deactivationEnabled": false, "undoOnDeactivation": false, "tags": []}, {"id": "27781930084", "category": "other", "apiName": "19181790056_url_targeting_for_copy_of_401k_calculator_with_overl", "name": "URL Targeting for 401K Calculator (With Overlay) - WINNER Rolled out to 100%", "staticConditions": ["and", ["or", {"match": "simple", "type": "url", "value": "https://smartasset.com/retirement/401k-calculator"}]], "deactivationEnabled": false, "undoOnDeactivation": false, "tags": []}, {"id": "28594710029", "category": "other", "apiName": "19181790056_url_targeting_for_top_fa_methodology_patch", "name": "URL Targeting for Top FA Methodology Patch", "staticConditions": ["and", ["or", {"match": "substring", "type": "url", "value": "top-financial-advisors"}], ["or", {"match": "substring", "type": "url", "value": "smartasset.com"}]], "deactivationEnabled": false, "undoOnDeactivation": false, "tags": []}, {"id": "29334470268", "category": "other", "apiName": "19181790056_url_targeting_for_mortgage_rate_table_disclosure_upd", "name": "URL Targeting for Mortgage Rate Table Disclosure Update", "staticConditions": ["and", ["or", {"match": "simple", "type": "url", "value": "https://smartasset.com/mortgage/30-yr-fixed-mortgage-rates"}, {"match": "simple", "type": "url", "value": "https://smartasset.com/mortgage/mortgage-rates"}, {"match": "simple", "type": "url", "value": "https://smartasset.com/mortgage/15-yr-fixed-mortgage-rates"}, {"match": "simple", "type": "url", "value": "https://smartasset.com/mortgage/7-1-arm-mortgage-rates"}, {"match": "simple", "type": "url", "value": "https://smartasset.com/mortgage/5-1-arm-mortgage-rates"}, {"match": "simple", "type": "url", "value": "https://smartasset.com/mortgage/3-1-arm-mortgage-rates"}]], "deactivationEnabled": false, "undoOnDeactivation": false, "tags": []}, {"id": "29611900163", "category": "other", "apiName": "19181790056_url_targeting_for_checking_account_apy_patch", "name": "URL Targeting for Checking Account APY Patch", "staticConditions": ["and", ["or", {"match": "simple", "type": "url", "value": "https://smartasset.com/checking-account/checking-account-comparison"}]], "deactivationEnabled": false, "undoOnDeactivation": false, "tags": []}, {"id": "30173210244", "category": "other", "apiName": "19181790056_url_targeting_for_life_insurance_quotes_no_offers_pa", "name": "URL Targeting for Life Insurance Quotes No Offers Patch", "staticConditions": ["and", ["or", {"match": "simple", "type": "url", "value": "https://smartasset.com/life-insurance/life-insurance-quotes"}]], "deactivationEnabled": false, "undoOnDeactivation": false, "tags": []}, {"id": "4581741780795392", "category": "other", "apiName": "19181790056_url_targeting_for_d2f_advisor_focused_messaging", "name": "URL Targeting for D2F Advisor Focused Messaging ($2.5M)", "staticConditions": ["and", ["or", {"match": "simple", "type": "url", "value": "https://smartasset.com/retirement/find-a-financial-planner"}], ["or", {"type": "element_present", "value": ".c-iWJjWs"}]], "deactivationEnabled": false, "undoOnDeactivation": false, "tags": [], "activationType": "dom_changed"}, {"id": "4692092643966976", "category": "other", "apiName": "19181790056_chase_disclosure_pages", "name": "Chase Disclosure Pages", "staticConditions": ["and", ["or", {"match": "simple", "type": "url", "value": "https://smartasset.com/checking-account/cd-rates-chase"}, {"match": "simple", "type": "url", "value": "https://smartasset.com/checking-account/chase-bank-banking-review"}, {"match": "simple", "type": "url", "value": "https://smartasset.com/financial-advisor/jp-morgan-wealth-management-review"}, {"match": "simple", "type": "url", "value": "https://smartasset.com/mortgage/best-mortgage-lenders"}, {"match": "simple", "type": "url", "value": "https://smartasset.com/mortgage/best-mortgage-lenders-first-time-homebuyers"}, {"match": "simple", "type": "url", "value": "https://smartasset.com/mortgage/best-mortgage-lenders-new-york"}, {"match": "simple", "type": "url", "value": "https://smartasset.com/mortgage/best-refinance-mortgage-lenders"}, {"match": "simple", "type": "url", "value": "https://smartasset.com/mortgage/chase-mortgage-rates"}, {"match": "simple", "type": "url", "value": "https://smartasset.com/mortgage/chase-mortgage-review"}]], "deactivationEnabled": false, "undoOnDeactivation": false, "tags": []}, {"id": "5063356432777216", "category": "other", "apiName": "19181790056_url_targeting_for_copy_of_zoe_fin_match_screen", "name": "URL Targeting for Advisor Preview Width Patch", "staticConditions": ["and", ["or", {"match": "simple", "type": "url", "value": "https://smartasset.com/retirement/advisor-preview"}]], "deactivationEnabled": false, "undoOnDeactivation": false, "tags": []}, {"id": "5146443074240512", "category": "other", "apiName": "19181790056_url_targeting_for_copy_of_d2f_advisor_focused_messag", "name": "URL Targeting for D2F Advisor Focused Messaging ($1.1M)", "staticConditions": ["and", ["or", {"match": "simple", "type": "url", "value": "https://smartasset.com/retirement/find-a-financial-planner"}], ["or", {"type": "element_present", "value": ".c-iWJjWs"}]], "deactivationEnabled": false, "undoOnDeactivation": false, "tags": [], "activationType": "dom_changed"}, {"id": "5161889424998400", "category": "other", "apiName": "19181790056_url_targeting_for_copy_of_bolder_money__match_screen", "name": "URL Targeting for Zoe Fin Match Screen", "staticConditions": ["and", ["or", {"match": "simple", "type": "url", "value": "https://smartasset.com/retirement/financial-advisor/matches"}]], "deactivationEnabled": false, "undoOnDeactivation": false, "tags": []}, {"id": "5341481263693824", "category": "other", "apiName": "19181790056_url_targeting_for_otp_advisor_iconography", "name": "URL Targeting for OTP Advisor Iconography", "staticConditions": ["and", ["or", {"match": "simple", "type": "url", "value": "https://smartasset.com/retirement/find-a-financial-planner"}]], "deactivationEnabled": false, "undoOnDeactivation": false, "tags": []}, {"id": "5414898797117440", "category": "other", "apiName": "19181790056_url_targeting_for_copy_of_retirement_budget_longev_4", "name": "URL Targeting for Retirement Budget Longevity ($2.5M) Advertorial Banner", "staticConditions": ["and", ["or", {"match": "simple", "type": "url", "value": "https://smartasset.com/retirement/find-a-financial-planner"}]], "deactivationEnabled": false, "undoOnDeactivation": false, "tags": []}, {"id": "5793950586372096", "category": "other", "apiName": "19181790056_url_targeting_for_retirement_calc_ux_wip", "name": "URL Targeting for Retirement Calc UX", "staticConditions": ["and", ["or", {"match": "simple", "type": "url", "value": "https://smartasset.com/retirement/retirement-calculator"}]], "deactivationEnabled": false, "undoOnDeactivation": false, "tags": []}, {"id": "6020770103558144", "category": "other", "apiName": "19181790056_url_targeting_for_copy_of_retirement_budget_longev_3", "name": "URL Targeting for Retirement Budget Longevity ($1.7M) D2F Banner", "staticConditions": ["and", ["or", {"match": "simple", "type": "url", "value": "https://smartasset.com/retirement/find-a-financial-planner"}]], "deactivationEnabled": false, "undoOnDeactivation": false, "tags": []}, {"id": "6477596381151232", "category": "other", "apiName": "19181790056_url_targeting_for_copy_of_d2f_advisor_focused_mess_1", "name": "URL Targeting for D2F Advisor Focused Messaging ($1.5M)", "staticConditions": ["and", ["or", {"match": "simple", "type": "url", "value": "https://smartasset.com/retirement/find-a-financial-planner"}], ["or", {"type": "element_present", "value": ".c-iWJjWs"}]], "deactivationEnabled": false, "undoOnDeactivation": false, "tags": [], "activationType": "dom_changed"}, {"id": "6477601078771712", "category": "other", "apiName": "19181790056_url_targeting_for_copy_of_match_screen_fav_calcula_1", "name": "URL Targeting for 12/10 Network Location Removal", "staticConditions": ["and", ["or", {"match": "simple", "type": "url", "value": "https://smartasset.com/retirement/financial-advisor/matches"}]], "deactivationEnabled": false, "undoOnDeactivation": false, "tags": []}, {"id": "6512760335368192", "category": "other", "apiName": "19181790056_url_targeting_for_copy_of_match_screen_advisor_rando", "name": "URL Targeting for Match Screen FAV Calculator", "staticConditions": ["and", ["or", {"match": "simple", "type": "url", "value": "https://smartasset.com/retirement/financial-advisor/matches"}]], "deactivationEnabled": false, "undoOnDeactivation": false, "tags": []}, {"id": "6679541083537408", "category": "other", "apiName": "19181790056_url_targeting_for_top_fa_design_wip", "name": "URL Targeting for Top FA Content & Design", "staticConditions": ["and", ["or", {"match": "simple", "type": "url", "value": "https://smartasset.com/financial-advisor/us-top-financial-advisors"}]], "deactivationEnabled": false, "undoOnDeactivation": false, "tags": []}], "events": [{"id": "19607165283", "viewId": "19540800066", "name": "Panel One Next Button", "category": "other", "apiName": "19181790056_panel_one_next_button", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": "[data-panel-index=\"1\"] .fp-button-next"}}, {"id": "19712893363", "viewId": "19540800066", "name": "Funnel Complete Submit Button", "category": "other", "apiName": "19181790056_phone_panel_funnel_submit_button", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": ".funnel .fp-button-submit"}}, {"id": "19714713284", "viewId": "19540800066", "name": "Panel Four Next Button", "category": "other", "apiName": "19181790056_panel_four_next_button", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": "[data-panel-index=\"4\"] .fp-button-next"}}, {"id": "19722710137", "viewId": null, "name": "Funnel Completion Submit Button Click (All Environments)", "category": "other", "apiName": "funnel_completed", "eventType": "custom", "eventFilter": null}, {"id": "19722874307", "viewId": null, "name": "Feedback Module Score Selected", "category": "other", "apiName": "feedback-module-score-clicked", "eventType": "custom", "eventFilter": null}, {"id": "19732454250", "viewId": "19540800066", "name": "Full Name Panel Next Button", "category": "other", "apiName": "19181790056_full_name_panel_next_button", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": "[data-panel-name=\"username\"] .fp-button-next"}}, {"id": "19737923576", "viewId": "19540800066", "name": "Panel Two Next Button", "category": "other", "apiName": "19181790056_panel_two_next_button", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": "[data-panel-index=\"2\"] .fp-button-next"}}, {"id": "19739575411", "viewId": null, "name": "Feedback Module Score & Comment Submitted", "category": "other", "apiName": "feedback-module-submitted", "eventType": "custom", "eventFilter": null}, {"id": "19739756047", "viewId": "19540800066", "name": "Email Panel Next Button", "category": "other", "apiName": "19181790056_email_panel_next_button", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": "[data-panel-name=\"email\"] .fp-button-next"}}, {"id": "19741782721", "viewId": "19540800066", "name": "Investable Assets Panel Next Button", "category": "other", "apiName": "19181790056_investable_assets_panel_next_button", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": "[data-panel-name=\"currentSavings\"] .fp-button-next"}}, {"id": "19753144398", "viewId": "19540800066", "name": "Panel Three Next Button", "category": "other", "apiName": "19181790056_panel_three_next_button", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": "[data-panel-index=\"3\"] .fp-button-next"}}, {"id": "19755061695", "viewId": "19540800066", "name": "Zip Panel Next Button", "category": "other", "apiName": "19181790056_zip_panel_next_button", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": "[data-panel-name=\"location\"] .fp-button-next"}}, {"id": "20062764166", "viewId": null, "name": "Loading Screen Exit", "category": "other", "apiName": "loading_screen_exit", "eventType": "custom", "eventFilter": null}, {"id": "20064463715", "viewId": null, "name": "Loading Screen Entry", "category": "other", "apiName": "loading_screen_entry", "eventType": "custom", "eventFilter": null}, {"id": "20068854979", "viewId": "19540800066", "name": "Advisor Questions Next Button (last pre-PII)", "category": "other", "apiName": "19181790056_advisor_questions_next_button_last_prepii", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": "[data-panel-name=\"advisorQuestions\"] .fp-button-next"}}, {"id": "20097036609", "viewId": "19540800066", "name": "Phone Panel Submit Button", "category": "other", "apiName": "19181790056_phone_panel_submit_button", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": "[data-panel-name=\"phone\"] .fp-button-submit"}}, {"id": "20192651258", "viewId": "19664061489", "name": "Mobile-Inbound-CTA", "category": "other", "apiName": "19181790056_mobileinboundcta", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": ".match-footer-content > button > a"}}, {"id": "20193547912", "viewId": "19664061489", "name": "Desktop-Inbound-CTA", "category": "other", "apiName": "19181790056_desktopinboundcta", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": ".match-footer-phone > a"}}, {"id": "20193547917", "viewId": "19664061489", "name": "Advisor-Listing-Interaction", "category": "other", "apiName": "19181790056_advisorlistinginteraction", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": ".details_trigger"}}, {"id": "20214372913", "viewId": "19664061489", "name": "FAQ-Interaction", "category": "other", "apiName": "19181790056_faqinteraction", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": "li:nth-of-type(2) > span"}}, {"id": "20381953942", "viewId": null, "name": "Username Panel Entry", "category": "other", "apiName": "username_panel_entry", "eventType": "custom", "eventFilter": null}, {"id": "20392170090", "viewId": null, "name": "Phone Panel Entry", "category": "other", "apiName": "phone_panel_entry", "eventType": "custom", "eventFilter": null}, {"id": "21148602408", "viewId": null, "name": "Submission of Email Address", "category": "other", "apiName": "client-funnel-submit-email", "eventType": "custom", "eventFilter": null}, {"id": "21150552598", "viewId": null, "name": "Matches Page has Two SmartAdvisors", "category": "other", "apiName": "client-matches-page-has-two-advisors", "eventType": "custom", "eventFilter": null}, {"id": "21152212334", "viewId": null, "name": "Homepage Pageview (DOMContentLoaded)", "category": "other", "apiName": "client-homepage-pageview", "eventType": "custom", "eventFilter": null}, {"id": "21162192838", "viewId": null, "name": "Funnel Page (full page loaded)", "category": "other", "apiName": "client-funnel-loaded", "eventType": "custom", "eventFilter": null}, {"id": "21164922147", "viewId": null, "name": "Submission of Current Savings", "category": "other", "apiName": "client-funnel-submit-savings", "eventType": "custom", "eventFilter": null}, {"id": "21168672382", "viewId": null, "name": "Return to Previous Question by use of Backspace", "category": "other", "apiName": "client-funnel-key-back", "eventType": "custom", "eventFilter": null}, {"id": "21170672320", "viewId": null, "name": "Start of Funnel Code Preparing for User Input", "category": "other", "apiName": "client-funnel-app-loaded", "eventType": "custom", "eventFilter": null}, {"id": "21170742362", "viewId": null, "name": "Submission of Household Income", "category": "other", "apiName": "client-funnel-submit-income", "eventType": "custom", "eventFilter": null}, {"id": "21170802280", "viewId": null, "name": "Exited Intermission after Advisor Notes Question", "category": "other", "apiName": "client-funnel-exit-loading-panel", "eventType": "custom", "eventFilter": null}, {"id": "21171312490", "viewId": null, "name": "User has exited the Funnel by their Own Choice (not completed)", "category": "other", "apiName": "client-funnel-intentful-exit", "eventType": "custom", "eventFilter": null}, {"id": "21171622688", "viewId": null, "name": "Funnel Pageview (DOMContentLoaded)", "category": "other", "apiName": "client-funnel-pageview", "eventType": "custom", "eventFilter": null}, {"id": "21173562672", "viewId": null, "name": "Submission of First and Last Name", "category": "other", "apiName": "client-funnel-submit-name", "eventType": "custom", "eventFilter": null}, {"id": "21174123003", "viewId": null, "name": "Matches Page has SmartAdvisor(s)", "category": "other", "apiName": "client-matches-page-has-smartadvisor", "eventType": "custom", "eventFilter": null}, {"id": "21176830538", "viewId": null, "name": "FAQ / Why Section Toggled", "category": "other", "apiName": "client-funnel-toggle-faq", "eventType": "custom", "eventFilter": null}, {"id": "21177662185", "viewId": null, "name": "Matches Page (full page loaded)", "category": "other", "apiName": "client-matches-loaded", "eventType": "custom", "eventFilter": null}, {"id": "21178720040", "viewId": null, "name": "Submission of Question by Enter Keystroke", "category": "other", "apiName": "client-funnel-key-submit", "eventType": "custom", "eventFilter": null}, {"id": "21179292748", "viewId": null, "name": "Terms of Use Checkbox Toggled", "category": "other", "apiName": "client-funnel-toggle-terms", "eventType": "custom", "eventFilter": null}, {"id": "21179482483", "viewId": null, "name": "Submission of Notes to Advisors (last general question)", "category": "other", "apiName": "client-funnel-submit-notes-to-advisors", "eventType": "custom", "eventFilter": null}, {"id": "21179782091", "viewId": null, "name": "Error during Lead Submission to FALC (leadCapture)", "category": "other", "apiName": "client-funnel-error-lead-submission", "eventType": "custom", "eventFilter": null}, {"id": "21180391311", "viewId": null, "name": "Submission of First Question", "category": "other", "apiName": "client-funnel-submit-first-question", "eventType": "custom", "eventFilter": null}, {"id": "21181052069", "viewId": null, "name": "Submission of Fifth Question", "category": "other", "apiName": "client-funnel-submit-fifth-question", "eventType": "custom", "eventFilter": null}, {"id": "21181152567", "viewId": null, "name": "Submission of Zip Code Location", "category": "other", "apiName": "client-funnel-submit-location", "eventType": "custom", "eventFilter": null}, {"id": "21181652368", "viewId": null, "name": "Return to Previous Question via Back Button or Backspace", "category": "other", "apiName": "client-funnel-click-button-previous", "eventType": "custom", "eventFilter": null}, {"id": "21182770746", "viewId": null, "name": "Loading Screen Page (load)", "category": "other", "apiName": "client-funnel-iframe-loading-loaded", "eventType": "custom", "eventFilter": null}, {"id": "21184450018", "viewId": null, "name": "Signal that the Funnel has been Completed by the User", "category": "other", "apiName": "client-funnel-complete", "eventType": "custom", "eventFilter": null}, {"id": "21185302447", "viewId": null, "name": "Response from Matches Request Successful", "category": "other", "apiName": "client-funnel-matches-received", "eventType": "custom", "eventFilter": null}, {"id": "21186251356", "viewId": null, "name": "Matches Page has Roboadvisors", "category": "other", "apiName": "client-matches-page-has-roboadvisor", "eventType": "custom", "eventFilter": null}, {"id": "21186830034", "viewId": null, "name": "Error during Submission of Response / Retrieval of Matches", "category": "other", "apiName": "client-funnel-error-matches-retrieval", "eventType": "custom", "eventFilter": null}, {"id": "21186860037", "viewId": null, "name": "Click of URL in Funnel Page Footer", "category": "other", "apiName": "client-funnel-click-url-footer", "eventType": "custom", "eventFilter": null}, {"id": "21189551955", "viewId": null, "name": "Matches Pageview (DOMContentLoaded)", "category": "other", "apiName": "client-matches-pageview", "eventType": "custom", "eventFilter": null}, {"id": "21189551992", "viewId": null, "name": "Halfway through Duration of Intermission after Advisor Notes Question", "category": "other", "apiName": "client-funnel-midpoint-loading-panel", "eventType": "custom", "eventFilter": null}, {"id": "21192610543", "viewId": null, "name": "Intermission after Advisor Notes Question", "category": "other", "apiName": "client-funnel-entry-loading-panel", "eventType": "custom", "eventFilter": null}, {"id": "21193152149", "viewId": null, "name": "User Contact Info Not Requested / Skip PII", "category": "other", "apiName": "client-funnel-early-exit", "eventType": "custom", "eventFilter": null}, {"id": "21194021466", "viewId": null, "name": "Movement between Input Fields via Tab Keystroke (bidirectional)", "category": "other", "apiName": "client-funnel-key-tab", "eventType": "custom", "eventFilter": null}, {"id": "21198400414", "viewId": null, "name": "Error during Submission of an Answer", "category": "other", "apiName": "client-funnel-error-answer-submission", "eventType": "custom", "eventFilter": null}, {"id": "21198510514", "viewId": null, "name": "Matches Page has One SmartAdvisor", "category": "other", "apiName": "client-matches-page-has-one-advisor", "eventType": "custom", "eventFilter": null}, {"id": "21201391918", "viewId": null, "name": "Click of URL inside of Funnel (disclaimers, Terms, etc)", "category": "other", "apiName": "client-funnel-click-url-in-funnel", "eventType": "custom", "eventFilter": null}, {"id": "21203680896", "viewId": null, "name": "Submission of Second Question", "category": "other", "apiName": "client-funnel-submit-second-question", "eventType": "custom", "eventFilter": null}, {"id": "21208420026", "viewId": null, "name": "Submission of a Question via Next or Enter", "category": "other", "apiName": "client-funnel-click-button-next", "eventType": "custom", "eventFilter": null}, {"id": "21208480006", "viewId": null, "name": "Submission of Third Question", "category": "other", "apiName": "client-funnel-submit-third-question", "eventType": "custom", "eventFilter": null}, {"id": "21209570166", "viewId": null, "name": "Submission of Investable Assets ", "category": "other", "apiName": "client-funnel-submit-investable-assets", "eventType": "custom", "eventFilter": null}, {"id": "21211130992", "viewId": null, "name": "Submission of Phone Number", "category": "other", "apiName": "client-funnel-submit-phone", "eventType": "custom", "eventFilter": null}, {"id": "21211410019", "viewId": null, "name": "Selection of Option(s) by Arrow Key Use", "category": "other", "apiName": "client-funnel-key-arrow", "eventType": "custom", "eventFilter": null}, {"id": "21213150231", "viewId": null, "name": "Click of Funnel Page Top Navigation", "category": "other", "apiName": "client-funnel-click-url-pagenav", "eventType": "custom", "eventFilter": null}, {"id": "21213180114", "viewId": null, "name": "Submission of Fourth Question", "category": "other", "apiName": "client-funnel-submit-fourth-question", "eventType": "custom", "eventFilter": null}, {"id": "21214970474", "viewId": null, "name": "Submission of Marital Status Question", "category": "other", "apiName": "client-funnel-submit-are-you-married", "eventType": "custom", "eventFilter": null}, {"id": "21215040540", "viewId": null, "name": "Matches Page has Three SmartAdvisors", "category": "other", "apiName": "client-matches-page-has-three-advisors", "eventType": "custom", "eventFilter": null}, {"id": "21215040601", "viewId": null, "name": "Submission of Home Ownership Question", "category": "other", "apiName": "client-funnel-submit-homeowner", "eventType": "custom", "eventFilter": null}, {"id": "21224091225", "viewId": null, "name": "Matches have Robo Advisors", "category": "other", "apiName": "smartadvisor-captivate-matches-roboadvisors", "eventType": "custom", "eventFilter": null}, {"id": "21226980021", "viewId": null, "name": "Funnel Ready for User Input", "category": "other", "apiName": "client-funnel-start-user-interaction", "eventType": "custom", "eventFilter": null}, {"id": "21228551025", "viewId": null, "name": "Matches have SmartAdvisors", "category": "other", "apiName": "smartadvisor-captivate-matches-smartadvisors", "eventType": "custom", "eventFilter": null}, {"id": "21232351019", "viewId": null, "name": "Matches Received", "category": "other", "apiName": "smartadvisor-captivate-funnel-matches-received", "eventType": "custom", "eventFilter": null}, {"id": "21327620168", "viewId": null, "name": "Funnel UUID Loaded", "category": "other", "apiName": "client-funnel-uuid-loaded", "eventType": "custom", "eventFilter": null}, {"id": "21331920095", "viewId": null, "name": "Funnel Finalize Error", "category": "other", "apiName": "client-funnel-failure-finalize", "eventType": "custom", "eventFilter": null}, {"id": "21339770108", "viewId": null, "name": "Lead Captured", "category": "other", "apiName": "client-funnel-lead-captured", "eventType": "custom", "eventFilter": null}, {"id": "21901953101", "viewId": null, "name": "Funnel SSO Failure", "category": "other", "apiName": "client-funnel-auth-failure", "eventType": "custom", "eventFilter": null}, {"id": "21964020129", "viewId": null, "name": "Funnel SSO Success", "category": "other", "apiName": "client-funnel-auth-success", "eventType": "custom", "eventFilter": null}, {"id": "22688722454", "viewId": null, "name": "article-CTA-1", "category": "other", "apiName": "article-CTA-1", "eventType": "custom", "eventFilter": null}, {"id": "22700281957", "viewId": null, "name": "map-CTA-2", "category": "other", "apiName": "map-CTA-2", "eventType": "custom", "eventFilter": null}, {"id": "22700372245", "viewId": null, "name": "article-CTA-3", "category": "other", "apiName": "article-CTA-3", "eventType": "custom", "eventFilter": null}, {"id": "22702022039", "viewId": null, "name": "hero-cta-button (control)", "category": "other", "apiName": "hero-cta-button-control", "eventType": "custom", "eventFilter": null}, {"id": "22705841663", "viewId": null, "name": "sa-logo-CTA (new)", "category": "other", "apiName": "sa-logo-CTA-new", "eventType": "custom", "eventFilter": null}, {"id": "22706321443", "viewId": null, "name": "article-CTA-2", "category": "other", "apiName": "article-CTA-2", "eventType": "custom", "eventFilter": null}, {"id": "22713442373", "viewId": null, "name": "map-CTA-1", "category": "other", "apiName": "map-CTA-1", "eventType": "custom", "eventFilter": null}, {"id": "22715752397", "viewId": null, "name": "list-of-FA-CTA (control)", "category": "other", "apiName": "list-of-FA-CTA-control", "eventType": "custom", "eventFilter": null}, {"id": "22715761953", "viewId": null, "name": "sa-logo-CTA (control)", "category": "other", "apiName": "sa-logo-CTA-control", "eventType": "custom", "eventFilter": null}, {"id": "22717682078", "viewId": null, "name": "hero-cta-button (new)", "category": "other", "apiName": "hero-cta-button-new", "eventType": "custom", "eventFilter": null}, {"id": "22719881915", "viewId": null, "name": "below-table-CTA-button (new)", "category": "other", "apiName": "below-table-CTA-button-new", "eventType": "custom", "eventFilter": null}, {"id": "22732550909", "viewId": null, "name": "list-of-FA-CTA (new)", "category": "other", "apiName": "list-of-FA-CTA", "eventType": "custom", "eventFilter": null}, {"id": "22735961078", "viewId": null, "name": "graph-CTA (new)", "category": "other", "apiName": "graph-CTA-new", "eventType": "custom", "eventFilter": null}, {"id": "22735961085", "viewId": null, "name": "graph-CTA (control)", "category": "other", "apiName": "graph-CTA-control", "eventType": "custom", "eventFilter": null}, {"id": "23484160371", "viewId": null, "name": "survey-snippet", "category": "other", "apiName": "survey-snippet", "eventType": "custom", "eventFilter": null}, {"id": "23503210036", "viewId": "23474500166", "name": "funnel-snippet", "category": "other", "apiName": "19181790056_funnelsnippet_1", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": ".original-funnel-snippet > #smartadvisor-captivate-funnel"}}, {"id": "27447890236", "viewId": "27467340335", "name": "CTA Button Clicks 8v6dQ3yekSbjUkEuQRsc2", "category": "other", "apiName": "19181790056_cta_button_clicks_8v6dQ3yekSbjUkEuQRsc2", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": ".padded button"}}, {"id": "27736310475", "viewId": "27781930084", "name": "Get Started Now Clicks VHzqnR3HhCqqUtYERVjJd", "category": "other", "apiName": "19181790056_get_started_now_clicks_1_VHzqnR3HhCqqUtYERVjJd", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": ".button-link > button"}}, {"id": "27793500141", "viewId": "27772470036", "name": "Get Started Button Clicks 6b3B9z3rifcEn5fMmSJYE", "category": "other", "apiName": "19181790056_get_started_button_clicks_6b3B9z3rifcEn5fMmSJYE", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": ".button-link > button"}}, {"id": "28947080084", "viewId": "19540800066", "name": "Exit Intent Click", "category": "other", "apiName": "19181790056_exit_intent_clicks", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": ".exit-intent-popup"}}, {"id": "28947660041", "viewId": "19540800066", "name": "Leave Button Click", "category": "other", "apiName": "19181790056_leave_button_click", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": ".exit-intent-popup--leave-btn"}}, {"id": "28993570227", "viewId": "19540800066", "name": "Leave Button Click Kjx4Sc1tRxCoX7A1aqy3s", "category": "other", "apiName": "19181790056_leave_button_click_Kjx4Sc1tRxCoX7A1aqy3s", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": ".exit-intent-popup--leave-btn"}}, {"id": "29015290268", "viewId": "19540800066", "name": "Exit Intent Click FnufTk5U3cj5ACMDHy8nc", "category": "other", "apiName": "19181790056_exit_intent_clicks_FnufTk5U3cj5ACMDHy8nc", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": ".exit-intent-popup"}}, {"id": "29271700195", "viewId": "19540800066", "name": "Exit Intent Click FnufTk5U3cj5ACMDHy8nc KqZSSr4D4uxXzBMVQB5dq", "category": "other", "apiName": "19181790056_exit_intent_clicks_FnufTk5U3cj_KqZSSr4D4uxXzBMVQB5dq", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": ".exit-intent-popup"}}, {"id": "29293840025", "viewId": "19540800066", "name": "Leave Button Click Kjx4Sc1tRxCoX7A1aqy3s PeDebtkarPTJGwc5jWMD4", "category": "other", "apiName": "19181790056_leave_button_click_Kjx4Sc1tRxC_PeDebtkarPTJGwc5jWMD4", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": ".exit-intent-popup--leave-btn"}}, {"id": "29349860780", "viewId": "19540800066", "name": "Leave Button Click Kjx4Sc1tRxCoX7A1aqy3s P VnaKxFeojbqh5xfizsPgf", "category": "other", "apiName": "19181790056_leave_button_click_Kjx4Sc1tRxC_VnaKxFeojbqh5xfizsPgf", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": ".exit-intent-popup--leave-btn"}}, {"id": "29785100022", "viewId": null, "name": ">25k-lead-capture", "category": "other", "apiName": ">25k-lead-capture", "eventType": "custom", "eventFilter": null}, {"id": "4677615504588800", "viewId": "6679541083537408", "name": "Zip Button Clicks", "category": "other", "apiName": "19181790056_zip_button_clicks", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": ".zip-button"}}, {"id": "4843400302690304", "viewId": "19540800066", "name": "\"I'm an Advisor\" Click", "category": "other", "apiName": "19181790056_im_an_advisor_click", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": ".falc-cta-navigation"}}, {"id": "4973835020140544", "viewId": "6679541083537408", "name": "Read Review Clicks", "category": "other", "apiName": "19181790056_read_review_clicks", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": ".top-fa-test__btn--secondary"}}, {"id": "5219849069133824", "viewId": "5793950586372096", "name": "Accordion Click", "category": "other", "apiName": "19181790056_accordion_click", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": ".accordion-header"}}, {"id": "5252049978261504", "viewId": null, "name": "tier-one-otp-passed", "category": "other", "apiName": "tier-one-otp-passed", "eventType": "custom", "eventFilter": null}, {"id": "5312305433411584", "viewId": null, "name": ">25k-conversion", "category": "other", "apiName": ">25k-conversion", "eventType": "custom", "eventFilter": null}, {"id": "5373129690710016", "viewId": "5793950586372096", "name": "Input Button Click", "category": "other", "apiName": "19181790056_input_button_click", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": ".inputs-button"}}, {"id": "5516107524603904", "viewId": "6679541083537408", "name": "Find an Advisor Clicks", "category": "other", "apiName": "19181790056_find_an_advisor_clicks", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": ".top-fa-test__btn--primary"}}, {"id": "5576586099949568", "viewId": "5793950586372096", "name": "Edit Financial Details Click", "category": "other", "apiName": "19181790056_edit_financial_details_click", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": ".falcbutton"}}, {"id": "5838173159292928", "viewId": null, "name": "FAV calculator click", "category": "other", "apiName": "fav_calculator_click", "eventType": "custom", "eventFilter": null}, {"id": "5915045964546048", "viewId": "6679541083537408", "name": "OG Find Advisor Clicks", "category": "other", "apiName": "19181790056_og_find_advisor_clicks", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": ".cta-link"}}, {"id": "6024679261995008", "viewId": "4692092643966976", "name": "Editorial integrity clicks", "category": "other", "apiName": "19181790056_editorial_integrity_clicks", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": ".editorial-disclosure > a"}}, {"id": "6061654434119680", "viewId": "4692092643966976", "name": "Marketing disclosure clicks", "category": "other", "apiName": "19181790056_marketing_disclosure_clicks", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": ".editorial-disclosure > .js-disclosure"}}, {"id": "6144722926829568", "viewId": "6477596381151232", "name": "Close Banner Clicks - 1point5milretire", "category": "other", "apiName": "19181790056_close_banner_clicks__1point5milretire", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": ".c-gfNblA > span"}}, {"id": "6195685834358784", "viewId": null, "name": "otp-passed", "category": "other", "apiName": "otp-passed", "eventType": "custom", "eventFilter": null}, {"id": "6298148054761472", "viewId": "6679541083537408", "name": "OG Read Review Clicks", "category": "other", "apiName": "19181790056_og_read_review_clicks", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": ".read_review"}}, {"id": "6530060920815616", "viewId": null, "name": "tier-one-conversion", "category": "other", "apiName": "tier-one-conversion", "eventType": "custom", "eventFilter": null}, {"id": "6615272614789120", "viewId": "6512760335368192", "name": "FAV Calculator Click", "category": "other", "apiName": "19181790056_fav_calculator_click", "eventType": "click", "eventFilter": {"filterType": "target_selector", "selector": ".banner__button"}}], "dimensions": [{"id": "19720690560", "name": "Income Level", "apiName": "income_level", "segmentId": null}, {"id": "19722780689", "name": "Has 401k", "apiName": "has_401k", "segmentId": null}, {"id": "19722821913", "name": "Investor Zip Region", "apiName": "investor_zip_region", "segmentId": null}, {"id": "19724570574", "name": "Is Business Owner", "apiName": "is_business_owner", "segmentId": null}, {"id": "19724800346", "name": "Is Married", "apiName": "is_married", "segmentId": null}, {"id": "19728540610", "name": "Years Until Retirement", "apiName": "retirement_time_horizon", "segmentId": null}, {"id": "19730170442", "name": "Investable Assets", "apiName": "investable_assets", "segmentId": null}, {"id": "19734900620", "name": "Monthly Savings", "apiName": "monthly_savings", "segmentId": null}, {"id": "19736220430", "name": "Number of Children", "apiName": "num_children", "segmentId": null}, {"id": "19746000164", "name": "Has Financial Advisor", "apiName": "has_financial_advisor", "segmentId": null}, {"id": "19752960422", "name": "Has IRA", "apiName": "has_ira", "segmentId": null}, {"id": "19755180699", "name": "Is Homeowner", "apiName": "is_homeowner", "segmentId": null}, {"id": "20356783973", "name": "Refinanced Recently ", "apiName": "recent_refinance", "segmentId": null}, {"id": "20360685572", "name": "Has Emergency Fund", "apiName": "has_emergency_fund", "segmentId": null}, {"id": "20362708924", "name": "Advisors Expertise ", "apiName": "advisors_expertise", "segmentId": null}, {"id": "20362715926", "name": "Investing Comfor Level", "apiName": "investing_comfort_level", "segmentId": null}, {"id": "20364403551", "name": "Retirement Vision", "apiName": "retirement_vision", "segmentId": null}, {"id": "20366230009", "name": "Question To Advisor", "apiName": "advisor_questions", "segmentId": null}, {"id": "20368074617", "name": "Help Invest", "apiName": "help_invest", "segmentId": null}, {"id": "20369984697", "name": "Retirement Activity", "apiName": "retirement_activity", "segmentId": null}, {"id": "20372036668", "name": "Overall Health", "apiName": "overall_health", "segmentId": null}, {"id": "20372046363", "name": "College Savings", "apiName": "college_savings", "segmentId": null}, {"id": "20373404318", "name": "Saving Jointly or Separately ", "apiName": "separate_or_joint", "segmentId": null}, {"id": "20373416145", "name": "How Confident Are You", "apiName": "how_confident", "segmentId": null}, {"id": "20375756934", "name": "Retirement Location", "apiName": "retirement_location", "segmentId": null}, {"id": "20377418072", "name": "Responisible Investing", "apiName": "responsible_investing", "segmentId": null}, {"id": "20377447486", "name": "Household Income", "apiName": "household_income", "segmentId": null}, {"id": "20381147187", "name": "Driving Distance ", "apiName": "driving_distance", "segmentId": null}, {"id": "20383244460", "name": "How Did You Hear About Us", "apiName": "hear_about_us", "segmentId": null}, {"id": "20383265414", "name": "Income Expectation", "apiName": "income_expectation", "segmentId": null}, {"id": "20385130034", "name": "Coronavirus ", "apiName": "corona_impact", "segmentId": null}, {"id": "20387016862", "name": "Why New Advisor", "apiName": "why_new_advisor", "segmentId": null}], "projectJS": function(){// Optimizely Full Stack listeners added to leverage Optimizely Web tracking events
// for use in Full Stack feature flags and experiments. The code within this file
// must be copied into the code block located in the Optimizely Web project's
// Settings | JavaScript | JavaScript section.
//
// The code here is modified from the source (link below) to allow the
// window.SA_UUID to be used directly when needed. The push to Optimizely Web using
// 'analytics/trackEvent' adjusts the Web trackEvent process to mirror some Web events
// to the Full Stack project configured at the top.
//
// Note: the code within this component is written for ES5 and runs in the Optimizely
// Web Project JavaScript setting. That placement results in this code running on every
// page of the website where the Optimizely snippet exists. The events herein are
// transmitted to the Full Stack project noted in the first section though only when
// the Optimizely Web snippet is active with an active experiment for the page in view.
//
// Instructions: https://www.optimizely.com/developers/labs/web-full-stack-event-integration/
// Source: https://gist.github.com/davidsertillange-optimizely/4a2d9a04e9029f8fbb0ae8b36810ed31
//
// These values vary per release or per environment
var debug = false;
window.BLUESHIFT_ID = '7e94f1da3aa99263570678f5f759ffa4';
window.FSWebIntegrator = {
  endpoint: 'https://logx.optimizely.com/v1/events',
  method: 'POST',
  account_id: '19181790056',
  project_id: '20487742885',
  // environmentKey: '6VLFVzNzRTQzTB9QUWrDW', // prod
  environmentKey: 'QM3DrEKApgsoJxJsxUqPe', // staging
  pullFrequencyForDatafile: 1800000, // 3 minutes
  variant: '2022 Funnel',
  revisionDate: '20220623.0',
  clientVersion: '2.0.0'
};

if (debug) console.log('Starting FSWebIntegrator', FSWebIntegrator.clientVersion, FSWebIntegrator.revisionDate);

// Send Full Stack by mirroring Web event
window.FSWebIntegrator.sendFullStackEvent = function (event) {
  if (debug) console.log('Starting FSWebIntegrator.sendFullStackEvent', event);

  if (window.SA_UUID) {
    var body = buildEventPayload(event, window.FSWebIntegrator.eventMap);
    if (debug) console.log('Built event for FSWebIntegrator.sendFullStackEvent', event, body);
    dispatchNetworkEvent(body);
  }

  function findEntityId(event_name, eventMap) {
    if (debug) console.log('Looking for mapping in FSWebIntegrator.sendFullStackEvent', event);
    return eventMap.filter(function(event) {
      if (event_name === event.key) {
        return true;
      }
    }).map(function(event) {
      return event.id;
    }).join();
  }

  function dispatchNetworkEvent(body) {
    var Http = new XMLHttpRequest();
    Http.open(window.FSWebIntegrator.method, window.FSWebIntegrator.endpoint);
    Http.send(JSON.stringify(body));
    Http.onreadystatechange = function() {
      if (this.readyState === XMLHttpRequest.DONE && this.status === 204) {
        if (debug) console.log('Transmitted FSWebIntegrator.sendFullStackEvent', event, body);
      }
    };
    Http.onerror = function(e) {
      if (debug) console.log(e);
    };
  }

  function uuidv4() {
    return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, function (c) {
      return (c ^ window.crypto.getRandomValues(new window.Uint8Array(1))[0] & 15 >> c / 4).toString(16);
    });
  }

  function buildEventPayload(event, eventMap) {
    var attributes;
    if (Object.prototype.hasOwnProperty.call(window.optimizely.get('visitor'), 'custom')) {
      attributes = Object.entries(window.optimizely.get('visitor').custom).map(function(entry) {
        return {
          entity_id: null,
          key: entry[0],
          type: 'custom',
          value: entry[1].value
        };
      });
    }

    // Support for bot filtering
    attributes = attributes || [];
    attributes.push({
      entity_id: '$opt_bot_filtering',
      key: '$opt_bot_filtering',
      type: 'custom',
      value: false
    });

    var event_entity_id = findEntityId(event, eventMap);
    if (debug) console.log('FSWebIntegrator.sendFullStackEvent mapping of event to entity', event, event_entity_id);

    var body = {
      'account_id': window.FSWebIntegrator.account_id,
      'project_id': window.FSWebIntegrator.project_id,
      'revision': window.FSWebIntegrator.revisionDate,
      'visitors': [{
        'visitor_id': window.SA_UUID,
        'attributes': attributes,
        'snapshots': [{
          'decisions': [],
          'events': [{
            'entity_id': event_entity_id,
            'key': event,
            'short_name': event,
            'timestamp': Date.now(),
            'uuid': uuidv4()
          }]
        }]
      }],
      'anonymize_ip': true,
      'client_name': 'Optimizely/fsWebIntegration',
      'client_version': window.FSWebIntegrator.clientVersion,
      'enrich_decisions': true
    };
    return body;
  }

  if (debug) console.log('Exiting FSWebIntegrator.sendFullStackEvent', event);
};

window.FSWebIntegrator.mapDatafile = function() {
  // Parse datafile and get event ID-name map
  var datafile = JSON.parse(localStorage.getItem('fsDatafile') || '{}');
  if (Object.prototype.hasOwnProperty.call(datafile, 'events')) {
    window.FSWebIntegrator.eventMap = datafile.events.map(function(DatafileEvent) {
      return {
        id: DatafileEvent.id,
        key: DatafileEvent.key
      };
    });
  }
  if (debug) console.log('FS events mapped in FSWebIntegrator.sendFullStackEvent', window.FSWebIntegrator.eventMap);
};

// This function gets called on every page view on pages where the Optimizely Web tag exists
window.FSWebIntegrator.getFSDatafile = function () {
  if (debug) console.log('Starting FSWebIntegrator.getFSDatafile');

  var lastFetch = localStorage.getItem('fsDatafileFetchedDate') || 0;

  if (Date.now() - lastFetch > window.FSWebIntegrator.pullFrequencyForDatafile) {
    // Get datafile to map entity_id (code below is response handler onreadystatechange),
    // request setup (open), and execution (send)
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if (this.readyState === XMLHttpRequest.DONE && this.status === 200) {
        var datafile = JSON.parse(xhttp.responseText);
        if (Object.prototype.hasOwnProperty.call(datafile, 'events')) {
          localStorage.setItem('fsDatafile', JSON.stringify(datafile));
          localStorage.setItem('fsDatafileFetchedDate', Date.now().toString());

          if (debug) console.log('Successfully retrieved and stored datafile in FSWebIntegrator.getFSDatafile');

          window.FSWebIntegrator.mapDatafile();
        }
      }
    };
    xhttp.open('GET', 'https://cdn.optimizely.com/datafiles/' + window.FSWebIntegrator.environmentKey + '.json', true);
    xhttp.send();
  } else {
    if (debug) console.log('Using cached datafile in FSWebIntegrator.getFSDatafile');
    window.FSWebIntegrator.mapDatafile();
  }

  if (debug) console.log('Exiting FSWebIntegrator.getFSDatafile');
};

window.FSWebIntegrator.isFunnelPage = function () {
  return (window.location.pathname === '/retirement/find-a-financial-planner' ||
    window.location.pathname === '/retirement/financial-advisor/start' ||
    window.location.pathname === '/financial-advisor/local-fiduciary-advisors-near-me' ||
    window.location.pathname === '/retirement/financial-advisor-frame' ||
    window.location.pathname === '/retirement/find-a-financial-planner/' ||
    window.location.pathname === '/retirement/financial-advisor/start/' ||
    window.location.pathname === '/financial-advisor/local-fiduciary-advisors-near-me/' ||
    window.location.pathname === '/retirement/financial-advisor-frame/');
};

window.FSWebIntegrator.isMatchesPage = function () {
  return (document.getElementsByClassName('advisors_container').length === 1 &&
    (window.location.pathname === '/retirement/financial-advisor' ||
      window.location.pathname === '/retirement/financial-advisor-frame' ||
      window.location.pathname === '/retirement/financial-advisor/matches' ||
      window.location.pathname === '/retirement/financial-advisor/' ||
      window.location.pathname === '/retirement/financial-advisor-frame/' ||
          window.location.pathname === '/retirement/financial-advisor/matches/'));
};

window.FSWebIntegrator.isHomePage = function () {
  return window.location.pathname === '/';
};

// Add page loaded event tracking
window.FSWebIntegrator.pageLoad = function () {
  if (debug) console.log('Starting FSWebIntegrator.pageLoad');

  // Temporary patch to #incident-20221228-glcid
  var appDiv = window.jQuery('#sa-funnel_react-app');
  if (appDiv && appDiv.data) {
    var appData = appDiv.data();
    if (appData) {
      var userId = appData.user_identifier;
  		var dataLayerProperties = {
    		event: 'page-loaded-mixpanel-id',
    		mixpanelUserId: userId
  		};
  		window.dataLayer = window.dataLayer || [];
  		window.dataLayer.push(dataLayerProperties);
    }
  }
  
  window.optimizely = window.optimizely || [];

  if (window.FSWebIntegrator.isFunnelPage()) {
    // Optimizely
    window.optimizely.push({ type: 'event', eventName: 'client-funnel-page-load' });
    window.FSWebIntegrator.sendFullStackEvent('client-funnel-page-load');

    // Mixpanel
    if (window.mixpanel) {
      window.mixpanel.track('client-funnel-page-load', {
        'path': window.location.pathname,
        'variant': window.FSWebIntegrator.variant,
        'client_version': window.FSWebIntegrator.clientVersion,
        'user_id': window.USER_ID,
        'session_uuid': window.SA_UUID
      });

      // Set up Mixpanel user profile
      window.mixpanel.people.set({
        'session_uuid': window.SA_UUID,
        'user_id': window.USER_ID
      });
      window.mixpanel.register({
        'variant': window.FSWebIntegrator.variant,
        'client_version': window.FSWebIntegrator.clientVersion,
        'user_id': window.USER_ID,
        'session_uuid': window.SA_UUID
      });
    }
  }
  else if (window.FSWebIntegrator.isMatchesPage()) {
    // Optimizely
    window.optimizely.push({ type: 'event', eventName: 'client-matches-page-load' });
    window.FSWebIntegrator.sendFullStackEvent('client-matches-page-load');

    // Mixpanel
    if (window.mixpanel) {
      window.mixpanel.track('client-matches-page-load', {
        'path': window.location.pathname
      });
    }
  }
  else if (window.FSWebIntegrator.isHomePage()) {
    // Optimizely
    window.optimizely.push({ type: 'event', eventName: 'client-home-page-load' });
    window.FSWebIntegrator.sendFullStackEvent('client-home-page-load');

    // Mixpanel
    if (window.mixpanel) {
      window.mixpanel.track('client-home-page-load', {
        'path': window.location.pathname
      });
    }
  }

  if (debug) console.log('Completed FSWebIntegrator.pageLoad');
};

// Add DOMContentLoaded event tracking
window.FSWebIntegrator.domContentLoaded = function () {
  if (debug) console.log('Starting FSWebIntegrator.domContentLoaded');

  window.optimizely = window.optimizely || [];

  if (window.FSWebIntegrator.isFunnelPage()) {
    // Optimizely
    window.optimizely.push({ type: 'event', eventName: 'client-funnel-page-domcontentloaded' });
    window.FSWebIntegrator.sendFullStackEvent('client-funnel-page-domcontentloaded');

    // Mixpanel
    if (window.mixpanel) {
      window.mixpanel.track('client-funnel-page-domcontentloaded', {
        'path': window.location.pathname,
        'variant': window.FSWebIntegrator.variant,
        'client_version': window.FSWebIntegrator.clientVersion,
        'user_id': window.USER_ID,
        'session_uuid': window.SA_UUID
      });

      // Set up Mixpanel user profile
      window.mixpanel.people.set({
        'session_uuid': window.SA_UUID,
        'user_id': window.USER_ID
      });
      window.mixpanel.register({
        'variant': window.FSWebIntegrator.variant,
        'client_version': window.FSWebIntegrator.clientVersion,
        'user_id': window.USER_ID,
        'session_uuid': window.SA_UUID
      });
    }
  }
  else if (window.FSWebIntegrator.isMatchesPage()) {
    // Optimizely
    window.optimizely.push({ type: 'event', eventName: 'client-matches-page-domcontentloaded' });
    window.FSWebIntegrator.sendFullStackEvent('client-matches-page-domcontentloaded');

    // Mixpanel
    if (window.mixpanel) {
      window.mixpanel.track('client-matches-page-domcontentloaded', {
        'path': window.location.pathname
      });
    }
  }
  else if (window.FSWebIntegrator.isHomePage()) {
    // Optimizely
    window.optimizely.push({ type: 'event', eventName: 'client-home-page-domcontentloaded' });
    window.FSWebIntegrator.sendFullStackEvent('client-home-page-domcontentloaded');

    // Mixpanel
    if (window.mixpanel) {
      window.mixpanel.track('client-home-page-domcontentloaded', {
        'path': window.location.pathname
      });
    }
  }

  if (debug) console.log('Completed FSWebIntegrator.domContentLoaded');
};

if (debug) console.log('Starting setup of FSWebIntegrator');

// Load the Full Stack datafile
window.FSWebIntegrator.getFSDatafile();

// Add window load event tracking
window.addEventListener('load', window.FSWebIntegrator.pageLoad);

// Call the DOMContentLoaded handler either on it occurring or now if it has already occurred
document.addEventListener('DOMContentLoaded', window.FSWebIntegrator.domContentLoaded);
if (document.readyState === 'complete' ||
  document.readyState === 'loaded' ||
  document.readyState === 'interactive') {
  window.FSWebIntegrator.domContentLoaded();
}

if (debug) console.log('Completed setup of FSWebIntegrator');
}, "plugins": [function(PluginManager) {
  
  PluginManager.registerAnalyticsTracker('30450310083', {
      preRedirectPolicy: 'PERSIST_BEFORE_REDIRECT',
      postRedirectPolicy: 'TRACK_IMMEDIATELY',
      nonRedirectPolicy: 'TRACK_IMMEDIATELY',
      trackLayerDecision: function(decisionData) {
        var extension = decisionData.integrationSettings && decisionData.integrationSettings['30450310083'];
        if (!extension) {
          return;
        }
        var campaign = {
          id: decisionData.layerId,
          name: decisionData.layerName,
          policy: decisionData.layerPolicy,
          integrationStringVersion: decisionData.integrationStringVersion,
        };
        var campaignId = campaign.id;
        var experimentId = decisionData.experimentId;
        var variationId = decisionData.variationId;
        var isHoldback = decisionData.isLayerHoldback;
        extension.$fieldDefaults = [];
        (function(widg) {
  var i = 0;
  var field;
  for (; i < widg.$fieldDefaults.length; ++i) {
    field = widg.$fieldDefaults[i];
    if (!widg.hasOwnProperty(field.name)) {
      widg[field.name] = field.default_value;
    }
  }
  })(extension);
        (function () {
 function _fs() { return window[window['_fs_namespace']]; }
 utils = window.optimizely.get('utils');
 utils.waitUntil(function () {
   return typeof _fs() === 'function';
 }).then(function () {
   var campaignStates = window.optimizely.get('state').getCampaignStates({ isActive: true });
   for (var campaignId in campaignStates) {
     var c = campaignStates[campaignId];
     if (c.isInCampaignHoldback !== true) {
       var payload = {};
       payload.campaign = {};
       payload.campaign.id_str = campaignId;
       payload.campaign.name_str = c.campaignName;
       if (c.experiment) {
         payload.experiment = {};
         payload.experiment.id_str = c.experiment.id;
         payload.experiment.name_str = c.experiment.name;
       }
       if (c.variation) {
         payload.variation = {};
         payload.variation.id_str = c.variation.id;
         payload.variation.name_str = c.variation.name;
       }
       _fs().event('Experiment', payload, 'Optimizely');
     }
   }
 });
})();

      },
      serializeSettings: JSON.stringify,
      deserializeSettings: JSON.parse,
    });
    
}
], "interestGroups": [], "tagGroups": []},l=__webpack_require__(7452),d="initializeOptimizelyPreview";if(l.initGlobalStore(f),c.populateDirectiveData(),r.clientHasAlreadyInitialized())e.warn("Main / Disabling because Optimizely has already initialized on this page load. Are there multiple snippets on the page?");else if(r.shouldBailForDesktopApp())e.log("Main / Disabling because of desktop app.");else if(r.conflictInObservingChanges())e.log("Main / Disabling: Observe Changes Indefinitely is on, but browser does not support it.");else{if(r.shouldLoadInnie())u.registerFunction("getProjectId",(function(){return f.projectId})),u.registerFunction("getAccountId",(function(){return f.accountId})),s.addScriptAsync("https://app.optimizely.com/js/innie.js"),e.log("Main / Disabling in favor of the editor client.");else if(r.shouldLoadEmbeddedEditor()){e.log("Main / Loading embedded editor");var v="true"===a.get("useLocalBundle");c.setOptOut(!1);var h=v?"http://localhost:9888/main.js":"https://app.optimizely.com/dist/visual-editor/main.js";s.addScriptAsync(h)}else if(r.shouldLoadPreview()){(r.isSlave()?window.optimizely:window.optimizely=window.optimizely||[]).push({type:"load",data:f}),e.log("Main / Disabling in favor of the preview client."),__webpack_require__(1119).setupPreviewGlobal(),__webpack_require__(1119).pushToPreviewGlobal({type:"pushPreviewData",name:"liveCommitData",data:f}),r.isSlave()||(u.registerFunction("getProjectId",(function(){return f.projectId})),s.addScriptSync("https://cdn.optimizely.com/js/preview2/19181790056.js"))}else if(r.shouldBootstrapDataForPreview()){u.registerFunction(d,(function(n){t(),u.unregisterFunction(d)}));var p=r.isSlave()?PROJECT_ID_FOR_SLAVE_PREVIEW:u.getFunction("getProjectId")();m=r.getProjectToken(),_=p,y=r.getPreviewLayerIds(),o="/dist/preview_data.js?token=__TOKEN__&preview_layer_ids=__PREVIEW_LAYER_IDS__".replace("__TOKEN__",m).replace("__PROJECT_ID__",_).replace("__PREVIEW_LAYER_IDS__",y.join(",")).replace("__GET_ONLY_PREVIEW_LAYERS__",!0);var g=r.getForceVariationIds();g&&g.length>0&&(o+="&optimizely_x="+g.join(",")),s.addScriptSync(o),__webpack_require__(1119).setupPreviewGlobal(),s.addScriptAsync("/dist/js/preview_ui.js")}else r.shouldBootstrapDataForEditor()?(u.registerFunction(d,(function(n){t(),u.unregisterFunction(d)})),s.addScriptAsync(window.optimizely_editor_data_endpoint)):r.shouldInitialize()&&t();var m,_,y;n.timeEnd("block");var w=n.now();n.setMark("optimizelyFinished",w,w)}}try{main()}catch(e){try{__webpack_require__(7617).handleError(e)}catch(err){console.log(err)}}})();