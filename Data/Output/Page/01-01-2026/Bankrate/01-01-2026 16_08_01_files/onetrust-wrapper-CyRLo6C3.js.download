import{C as l}from"./onetrust-BqWgT-PS.js";const a=e=>(e==null?void 0:e.replace(/^www\./i,"").toLowerCase())||"",w=e=>{try{const s=document.cookie.split("; ").find(i=>i.trim().startsWith(`${e}=`));return s?s.split("=")[1]:null}catch{return null}},m=e=>e?e.split(",").filter(Boolean).map(t=>t.trim()):[],d=e=>e?!m(e).includes(l.MARKETING):!1,h=e=>{console.log("Erasing cookie:",e);try{const t=window.location.hostname,s=t.split("."),i=Array.from({length:s.length-1}).flatMap((r,o)=>{const n=s.slice(o).join("."),c=n.startsWith("www.")?n:`www.${n}`,p=n.startsWith("www.")?n.substring(4):n;return[n,`.${n}`,c,`.${c}`,p,`.${p}`]});[...new Set(i)].forEach(r=>{[`${e}=; Max-Age=-99999999; Path=/; Domain=${r}`,`${e}=; Max-Age=-99999999; Path=/; Domain=${r}; Secure; SameSite=None`,`${e}=; Max-Age=-99999999; Path=/; Domain=${r}; Secure; SameSite=Lax`,`${e}=; Expires=Thu, 01 Jan 1970 00:00:00 GMT; Path=/; Domain=${r}`,...a(r)===a(t)?[`${e}=; Max-Age=-99999999; Path=/`]:[]].forEach(n=>{try{document.cookie=n}catch{}})}),document.cookie=`${e}=; Max-Age=-99999999; Path=/`,document.cookie=`${e}=; Expires=Thu, 01 Jan 1970 00:00:00 GMT; Path=/`,localStorage.removeItem(e)}catch{}},g=e=>e?m(e).includes(l.PERFORMANCE):!1,f=async()=>{var e;try{const t=((e=window._Tagular)==null?void 0:e.webContext)||{};await fetch("/api/identify",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({webContext:t})})}catch{}},k=()=>{try{const t=JSON.parse(JSON.stringify(Optanon.GetDomainData().Groups)).find(o=>o.CustomGroupId===l.MARKETING);if(!t)return;const s=a(window.location.hostname),i=t.Cookies.filter(o=>a(o.Host)===s).map(o=>o.Name),u=i.reduce((o,n)=>(o[n]=w(n)!==null,o),{});console.log("Starting Cookie Cleanup:",{domain:window.location.hostname,normalizedDomain:s,cookiesFound:Object.values(u).filter(Boolean).length,totalToProcess:i.length}),i.forEach(o=>{h(o)});const r=i.filter(o=>w(o)!==null||localStorage.getItem(o)!==null);console.log("Cookie Cleanup Complete:",{successfullyDeleted:i.length-r.length,remainingCount:r.length,...r.length>0?{remainingCookies:r}:{}}),r.length>0&&window._Beam&&window._Beam.track({"@type":"redventures.usertracking.v3.FormErrored",errorMessage:"System Error - Cookie Deletion Failed",errorType:"Technical Error",errorDetails:`Failed to delete ${r.length} cookies`})}catch(e){console.error("Cookie Deletion Failed:",{error:e.message}),window._Beam&&window._Beam.track({"@type":"redventures.usertracking.v3.FormErrored",errorMessage:e.message,errorType:"System Error - Cookie Deletion Failed",errorDetails:e.stack})}},D=typeof window.OptanonWrapper=="function"?window.OptanonWrapper:()=>{};window.OptanonWrapper=function(){D(),g(window.OnetrustActiveGroups)&&f(),d(window.OnetrustActiveGroups)&&k()};
