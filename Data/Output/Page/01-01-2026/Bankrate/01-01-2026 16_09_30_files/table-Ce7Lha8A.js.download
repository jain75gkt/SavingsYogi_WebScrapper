function y(o,d){return(o.children[d].innerText||o.children[d].textContent).trim()}function g(o,d){return(m,c)=>((l,h)=>l!==""&&h!==""&&!isNaN(l)&&!isNaN(h)?l-h:l.toString().localeCompare(h))(y(d?m:c,o),y(d?c:m,o))}function p(o,d){const{top:c,height:l}=o.getBoundingClientRect();return c<0&&c>-(l-64)}document.addEventListener("alpine:init",()=>{window.Alpine.data("table",({containerId:o,tableId:d,buttonId:m,rowsToShow:c,enableTracking:l,trackingHtmlId:h,trackingLocation:w})=>({containerId:o,tableId:d,buttonId:m,rowsToShow:c,enableTracking:l,trackingHtmlId:h,trackingLocation:w,init(){this.containerId=o,this.tableId=d,this.buttonId=m,this.rowsToShow=c,this.enableTracking=l,this.trackingHtmlId=h!==""?h:o,this.trackingLocation=w,this.mdBreakpoint=999;const t=document.getElementById(d),e=document.getElementById(o),s=document.getElementById(this.buttonId);[...t.rows].forEach((u,f)=>{f>0&&u.querySelectorAll("a").forEach(n=>{n.classList.contains("Link")||n.classList.add("Link"),n.classList.contains("table-link")||n.classList.add("table-link");const a=n.parentElement.hasAttribute("data-col")?n.parentElement.dataset.col:"0";this.enableTracking!=""&&this.addTracking(n,f,a)})});const i=Array.from(t.querySelector("tbody").cloneNode(!0).children);document.getElementById(d).querySelectorAll("th.sortable").forEach(u=>{u.querySelectorAll(".Button--sort").forEach(f=>{f.querySelector("span.sort-default svg title").textContent="Restore table to default",f.querySelector("span.sort-asc svg title").textContent="Sort column asc",f.querySelector("span.sort-desc svg title").textContent="Sort column desc",f.addEventListener("click",n=>{const a=n.currentTarget;switch(a.dataset.op){case"sort-asc":this.sortTable(u,!0,s),a.dataset.op="sort-default",this.showHideSortIcons(a,"sort-default","sort-asc"),this.highlightClickedArrow(a),a.ariaLabel="Table Sorted Ascending";break;case"sort-desc":this.sortTable(u,!1,s),a.dataset.op="sort-asc",this.showHideSortIcons(a,"sort-asc","sort-desc"),this.highlightClickedArrow(a),a.ariaLabel="Table Sorted Descending";break;default:a.dataset.op="sort-desc",t.querySelector("tbody").replaceChildren(...i),s&&parseInt(s.dataset.show)&&this.showRows(),s&&!parseInt(s.dataset.show)&&(this.showRows(),this.hideRows()),this.showHideSortIcons(a,"sort-desc","sort-default"),a.classList.remove("arrow-clicked"),a.ariaLabel="Table Unsorted";break}})})});const b=t.querySelector("thead").cloneNode(!0),r=document.getElementById(`header-fixed-${o}`);r&&(r.append(b),document.addEventListener("scroll",u=>{if(window.matchMedia(`(min-width: ${this.mdBreakpoint}px)`).matches&&p(t,document.documentElement.scrollTop)){this.copyTdWidth(),r.scrollLeft=e.scrollLeft,r.classList.contains("hidden")&&setTimeout(()=>{r.classList.remove("hidden"),r.classList.add("block"),r.style.width=`${e.clientWidth}px`},100);return}r.classList.contains("block")&&(r.classList.add("hidden"),r.classList.remove("block"))}),e.addEventListener("scroll",u=>{r.scrollLeft=u.currentTarget.scrollLeft}))},showRows(){document.getElementById(this.tableId).querySelectorAll(".hidden-row").forEach(t=>{t.classList.remove("hidden-row")})},hideRows(){const t=document.getElementById(this.tableId);c=this.rowsToShow,[...t.rows].forEach((e,s)=>{s>0&&s>c&&e.classList.add("hidden-row")})},showHiddenRows(t){const e=parseInt(t.currentTarget.dataset.show);e?(this.hideRows(),t.currentTarget.textContent=t.currentTarget.dataset.showLabel):(this.showRows(),t.currentTarget.textContent=t.currentTarget.dataset.hideLabel),t.currentTarget.dataset.show=e===1?"0":"1"},copyTdWidth(){const t=document.getElementById(this.tableId),e=[...document.getElementById(`header-fixed-${this.containerId}`).querySelectorAll("th")];t.querySelectorAll("th").forEach((s,i)=>{e[i].setAttribute("style",`width: ${s.offsetWidth}px !important;`)})},addTracking(t,e,s){t.hasAttribute("id")||(t.id=`${this.trackingHtmlId}-table-${e}-${s}`),t.hasAttribute("data-beam-element-clicked-no-delay")||(t.dataset.beamElementClickedNoDelay=""),t.hasAttribute("data-type")||(t.dataset.type="link"),t.hasAttribute("data-location")||(t.dataset.location=this.trackingLocation!==""?this.trackingLocation:"calculator"),t.hasAttribute("data-name")||(t.dataset.name="table_link"),t.hasAttribute("data-position")||(t.dataset.position=`row-${e}-col-${s}`),t.hasAttribute("data-text")||(t.dataset.text=t.innerText),t.hasAttribute("data-outcome")||(t.dataset.outcome="open_link")},highlightClickedArrow(t){const e=document.getElementById(this.tableId).querySelector(".arrow-clicked");e&&e.classList.remove("arrow-clicked"),t.classList.add("arrow-clicked")},sortTable(t,e,s){const b=t.closest("table").querySelector("tbody");Array.from(b.querySelectorAll("tr")).sort(g(Array.from(t.parentNode.children).indexOf(t),e)).forEach(r=>b.appendChild(r)),s&&!parseInt(s.dataset.show)&&(this.showRows(),this.hideRows())},showHideSortIcons(t,e,s){document.getElementById(this.tableId).querySelectorAll(".Button--sort").forEach(i=>{t!==i?i.dataset.op!=="sort-desc"&&(i.querySelector(`.${i.dataset.op}`).classList.add("hidden"),i.dataset.op="sort-desc",i.querySelector(".sort-desc").classList.remove("hidden")):(t.querySelector(`.${e}`).classList.remove("hidden"),t.querySelector(`.${s}`).classList.add("hidden"))})}}))});
