(globalThis.webpackChunkCE2=globalThis.webpackChunkCE2||[]).push([[806,60],{8878:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AssetTracker:()=>mt,EventHandlers:()=>Et,compress:()=>X,timing:()=>a});var s=r(1509),i=r(3380),n=r(7866);const o=function(){this.metrics={}};o.prototype={start(e){this.metrics[e]=+new Date},stop(e){const t=this.metrics[e];if(!t)return void(0,i.Yz)(`[TimingMetric] No starting point for "${e}", ignoring.`);const r=+new Date-t;this.cancel(e),this.send(e,r)},cancel(e){delete this.metrics[e]},send(e,t){if(e.length>100)throw new Error("Key is too long (max 100)");if((t=Number(t,10))&&Number.isNaN(Number(t)))throw new Error("Value is NaN");if(!CE2.site)return void(0,i.Yz)(`[TimingMetric] No site, skipping metric ${e}`);const r=[[(0,n.M4)(0,1),CE2.tracker?.visitorID,25,CE2.VERSION,+new Date,CE2.tabId],[CE2.tracker?.visitID,e,t||"",CE2.visitorTracker?.getIdentification()]];(0,s.sendEvents)({context:"TimingMetric",userId:CE2.data.uid,siteId:CE2.site.id,snapshotIds:CE2.tracker?.snapshotIds,sessionId:CE2.tracker?.sessionId,pageFingerprintMd5:CE2.tracker?.pageFingerprintMd5},[r]),(0,i.Yz)(`[TimingMetric] Sent key=${e} value=${t}`)},getTrackerValue(e){if(CE2.tracker)return CE2.tracker[e]}};const a=new o;var c=Uint8Array,l=Uint16Array,h=Int32Array,u=new c([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),d=new c([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),p=new c([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),f=function(e,t){for(var r=new l(31),s=0;s<31;++s)r[s]=t+=1<<e[s-1];var i=new h(r[30]);for(s=1;s<30;++s)for(var n=r[s];n<r[s+1];++n)i[n]=n-r[s]<<5|s;return{b:r,r:i}},m=f(u,2),E=m.b,g=m.r;E[28]=258,g[258]=28;for(var v=f(d,0),C=(v.b,v.r),y=new l(32768),b=0;b<32768;++b){var k=(43690&b)>>1|(21845&b)<<1;k=(61680&(k=(52428&k)>>2|(13107&k)<<2))>>4|(3855&k)<<4,y[b]=((65280&k)>>8|(255&k)<<8)>>1}var w=function(e,t,r){for(var s=e.length,i=0,n=new l(t);i<s;++i)e[i]&&++n[e[i]-1];var o,a=new l(t);for(i=1;i<t;++i)a[i]=a[i-1]+n[i-1]<<1;if(r){o=new l(1<<t);var c=15-t;for(i=0;i<s;++i)if(e[i])for(var h=i<<4|e[i],u=t-e[i],d=a[e[i]-1]++<<u,p=d|(1<<u)-1;d<=p;++d)o[y[d]>>c]=h}else for(o=new l(s),i=0;i<s;++i)e[i]&&(o[i]=y[a[e[i]-1]++]>>15-e[i]);return o},T=new c(288);for(b=0;b<144;++b)T[b]=8;for(b=144;b<256;++b)T[b]=9;for(b=256;b<280;++b)T[b]=7;for(b=280;b<288;++b)T[b]=8;var S=new c(32);for(b=0;b<32;++b)S[b]=5;var _=w(T,9,0),A=w(S,5,0),I=function(e){return(e+7)/8|0},O=function(e,t,r){return(null==t||t<0)&&(t=0),(null==r||r>e.length)&&(r=e.length),new c(e.subarray(t,r))},N=function(e,t,r){r<<=7&t;var s=t/8|0;e[s]|=r,e[s+1]|=r>>8},R=function(e,t,r){r<<=7&t;var s=t/8|0;e[s]|=r,e[s+1]|=r>>8,e[s+2]|=r>>16},L=function(e,t){for(var r=[],s=0;s<e.length;++s)e[s]&&r.push({s,f:e[s]});var i=r.length,n=r.slice();if(!i)return{t:F,l:0};if(1==i){var o=new c(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort((function(e,t){return e.f-t.f})),r.push({s:-1,f:25001});var a=r[0],h=r[1],u=0,d=1,p=2;for(r[0]={s:-1,f:a.f+h.f,l:a,r:h};d!=i-1;)a=r[r[u].f<r[p].f?u++:p++],h=r[u!=d&&r[u].f<r[p].f?u++:p++],r[d++]={s:-1,f:a.f+h.f,l:a,r:h};var f=n[0].s;for(s=1;s<i;++s)n[s].s>f&&(f=n[s].s);var m=new l(f+1),E=M(r[d-1],m,0);if(E>t){s=0;var g=0,v=E-t,C=1<<v;for(n.sort((function(e,t){return m[t.s]-m[e.s]||e.f-t.f}));s<i;++s){var y=n[s].s;if(!(m[y]>t))break;g+=C-(1<<E-m[y]),m[y]=t}for(g>>=v;g>0;){var b=n[s].s;m[b]<t?g-=1<<t-m[b]++-1:++s}for(;s>=0&&g;--s){var k=n[s].s;m[k]==t&&(--m[k],++g)}E=t}return{t:new c(m),l:E}},M=function(e,t,r){return-1==e.s?Math.max(M(e.l,t,r+1),M(e.r,t,r+1)):t[e.s]=r},P=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new l(++t),s=0,i=e[0],n=1,o=function(e){r[s++]=e},a=1;a<=t;++a)if(e[a]==i&&a!=t)++n;else{if(!i&&n>2){for(;n>138;n-=138)o(32754);n>2&&(o(n>10?n-11<<5|28690:n-3<<5|12305),n=0)}else if(n>3){for(o(i),--n;n>6;n-=6)o(8304);n>2&&(o(n-3<<5|8208),n=0)}for(;n--;)o(i);n=1,i=e[a]}return{c:r.subarray(0,s),n:t}},D=function(e,t){for(var r=0,s=0;s<t.length;++s)r+=e[s]*t[s];return r},x=function(e,t,r){var s=r.length,i=I(t+2);e[i]=255&s,e[i+1]=s>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var n=0;n<s;++n)e[i+n+4]=r[n];return 8*(i+4+s)},B=function(e,t,r,s,i,n,o,a,c,h,f){N(t,f++,r),++i[256];for(var m=L(i,15),E=m.t,g=m.l,v=L(n,15),C=v.t,y=v.l,b=P(E),k=b.c,I=b.n,O=P(C),M=O.c,B=O.n,U=new l(19),F=0;F<k.length;++F)++U[31&k[F]];for(F=0;F<M.length;++F)++U[31&M[F]];for(var H=L(U,7),V=H.t,$=H.l,q=19;q>4&&!V[p[q-1]];--q);var G,K,z,W,Y=h+5<<3,j=D(i,T)+D(n,S)+o,Q=D(i,E)+D(n,C)+o+14+3*q+D(U,V)+2*U[16]+3*U[17]+7*U[18];if(c>=0&&Y<=j&&Y<=Q)return x(t,f,e.subarray(c,c+h));if(N(t,f,1+(Q<j)),f+=2,Q<j){G=w(E,g,0),K=E,z=w(C,y,0),W=C;var X=w(V,$,0);N(t,f,I-257),N(t,f+5,B-1),N(t,f+10,q-4),f+=14;for(F=0;F<q;++F)N(t,f+3*F,V[p[F]]);f+=3*q;for(var J=[k,M],Z=0;Z<2;++Z){var ee=J[Z];for(F=0;F<ee.length;++F){var te=31&ee[F];N(t,f,X[te]),f+=V[te],te>15&&(N(t,f,ee[F]>>5&127),f+=ee[F]>>12)}}}else G=_,K=T,z=A,W=S;for(F=0;F<a;++F){var re=s[F];if(re>255){R(t,f,G[(te=re>>18&31)+257]),f+=K[te+257],te>7&&(N(t,f,re>>23&31),f+=u[te]);var se=31&re;R(t,f,z[se]),f+=W[se],se>3&&(R(t,f,re>>5&8191),f+=d[se])}else R(t,f,G[re]),f+=K[re]}return R(t,f,G[256]),f+K[256]},U=new h([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new c(0),H=function(e,t,r,s,i,n){var o=n.z||e.length,a=new c(s+o+5*(1+Math.ceil(o/7e3))+i),p=a.subarray(s,a.length-i),f=n.l,m=7&(n.r||0);if(t){m&&(p[0]=n.r>>3);for(var E=U[t-1],v=E>>13,y=8191&E,b=(1<<r)-1,k=n.p||new l(32768),w=n.h||new l(b+1),T=Math.ceil(r/3),S=2*T,_=function(t){return(e[t]^e[t+1]<<T^e[t+2]<<S)&b},A=new h(25e3),N=new l(288),R=new l(32),L=0,M=0,P=n.i||0,D=0,F=n.w||0,H=0;P+2<o;++P){var V=_(P),$=32767&P,q=w[V];if(k[$]=q,w[V]=$,F<=P){var G=o-P;if((L>7e3||D>24576)&&(G>423||!f)){m=B(e,p,0,A,N,R,M,D,H,P-H,m),D=L=M=0,H=P;for(var K=0;K<286;++K)N[K]=0;for(K=0;K<30;++K)R[K]=0}var z=2,W=0,Y=y,j=$-q&32767;if(G>2&&V==_(P-j))for(var Q=Math.min(v,G)-1,X=Math.min(32767,P),J=Math.min(258,G);j<=X&&--Y&&$!=q;){if(e[P+z]==e[P+z-j]){for(var Z=0;Z<J&&e[P+Z]==e[P+Z-j];++Z);if(Z>z){if(z=Z,W=j,Z>Q)break;var ee=Math.min(j,Z-2),te=0;for(K=0;K<ee;++K){var re=P-j+K&32767,se=re-k[re]&32767;se>te&&(te=se,q=re)}}}j+=($=q)-(q=k[$])&32767}if(W){A[D++]=268435456|g[z]<<18|C[W];var ie=31&g[z],ne=31&C[W];M+=u[ie]+d[ne],++N[257+ie],++R[ne],F=P+z,++L}else A[D++]=e[P],++N[e[P]]}}for(P=Math.max(P,F);P<o;++P)A[D++]=e[P],++N[e[P]];m=B(e,p,f,A,N,R,M,D,H,P-H,m),f||(n.r=7&m|p[m/8|0]<<3,m-=7,n.h=w,n.p=k,n.i=P,n.w=F)}else{for(P=n.w||0;P<o+f;P+=65535){var oe=P+65535;oe>=o&&(p[m/8|0]=f,oe=o),m=x(p,m+1,e.subarray(P,oe))}n.i=o}return O(a,0,s+I(m)+i)},V=function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var r=t,s=9;--s;)r=(1&r&&-306674912)^r>>>1;e[t]=r}return e}(),$=function(){var e=-1;return{p:function(t){for(var r=e,s=0;s<t.length;++s)r=V[255&r^t[s]]^r>>>8;e=r},d:function(){return~e}}},q=function(e,t,r,s,i){if(!i&&(i={l:1},t.dictionary)){var n=t.dictionary.subarray(-32768),o=new c(n.length+e.length);o.set(n),o.set(e,n.length),e=o,i.w=n.length}return H(e,null==t.level?6:t.level,null==t.mem?i.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,r,s,i)},G=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},K=function(e,t){var r=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&G(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),r){e[3]=8;for(var s=0;s<=r.length;++s)e[s+10]=r.charCodeAt(s)}},z=function(e){return 10+(e.filename?e.filename.length+1:0)};function W(e,t){t||(t={});var r=$(),s=e.length;r.p(e);var i=q(e,t,z(t),8),n=i.length;return K(i,t),G(i,n-8,r.d()),G(i,n-4,s),i}var Y="undefined"!=typeof TextEncoder&&new TextEncoder,j="undefined"!=typeof TextDecoder&&new TextDecoder;try{j.decode(F,{stream:!0}),1}catch(e){}function Q(e,t){if(t){for(var r=new c(e.length),s=0;s<e.length;++s)r[s]=e.charCodeAt(s);return r}if(Y)return Y.encode(e);var i=e.length,n=new c(e.length+(e.length>>1)),o=0,a=function(e){n[o++]=e};for(s=0;s<i;++s){if(o+5>n.length){var l=new c(o+8+(i-s<<1));l.set(n),n=l}var h=e.charCodeAt(s);h<128||t?a(h):h<2048?(a(192|h>>6),a(128|63&h)):h>55295&&h<57344?(a(240|(h=65536+(1047552&h)|1023&e.charCodeAt(++s))>>18),a(128|h>>12&63),a(128|h>>6&63),a(128|63&h)):(a(224|h>>12),a(128|h>>6&63),a(128|63&h))}return O(n,0,o)}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;const X=e=>{if("string"==typeof e)return W(Q(e));if(!ArrayBuffer.isView(e))throw new Error("Data must be UInt* data type or string");return W(e)};var J=r(2886);class Z{constructor(e){CE2BH.defineProperty(this,"CHECKOUT_STARTED_KEY","ceeccs"),CE2BH.defineProperty(this,"eventTypes",{ADD_TO_CART:1,CHECKOUT_STARTED:2,CHECKOUT_COMPLETED:3}),this.tracker=e,this.tracker.addEventListener("mousedown",(e=>{"l"===(0,J.CU)(e)&&this.onClick&&this.onClick(e)}))}static api(){return this.NAME.toLowerCase()}api(){return this.constructor.api()}setCheckoutStarted(){CE2.cookieStorage.set(this.CHECKOUT_STARTED_KEY,1)}getCheckoutStarted(){return"1"===CE2.cookieStorage.get(this.CHECKOUT_STARTED_KEY)}delCheckoutStarted(){CE2.cookieStorage.del(this.CHECKOUT_STARTED_KEY)}isCheckoutStarted(){return!this.getCheckoutStarted()&&this.CHECKOUT_STARTED_PATH_REGEXP&&this.CHECKOUT_STARTED_PATH_REGEXP.test(CE2.w.location.pathname)}isCheckoutCompleted(){return this.getCheckoutStarted()&&this.CHECKOUT_COMPLETED_PATH_REGEXP&&this.CHECKOUT_COMPLETED_PATH_REGEXP.test(CE2.w.location.pathname)}update(){this.isCheckoutStarted()&&this.startCheckout(),this.isCheckoutCompleted()&&this.checkoutCompleted()}startCheckout(){this.setCheckoutStarted(),this.sendCheckoutStartedEvent()}checkoutCompleted(e=[]){this.delCheckoutStarted(),this.sendCheckoutCompletedEvent(e)}sendCheckoutStartedEvent(){this.sendEvent([this.eventTypes.CHECKOUT_STARTED]),this.emitEvent("startCheckout")}sendCheckoutCompletedEvent(e=[]){this.sendEvent([this.eventTypes.CHECKOUT_COMPLETED,...e]);const[t,r,s]=e;this.tracker.session?.isFull()&&(r||0===r)&&CE2.setSessionWorth(r/1e4,s);let i={};(r||0===r)&&(i={value:r/1e4,currency:s}),this.emitEvent("checkoutCompleted",i)}addToCart(e){this.delCheckoutStarted(),this.sendEvent([this.eventTypes.ADD_TO_CART,...e]);const[t,r,s,i,n]=e;this.tracker.session?.isFull()&&(i||0===i)&&CE2.increaseSessionWorth(i/1e4,n);let o={};(i||0===i)&&(o={value:i/1e4,currency:n}),this.emitEvent("addToCart",o)}sendEvent(e=[]){if(!this.tracker.session?.isFull())return;e=[this.tracker.visitID,...e];const t=this.tracker.newEvent(CE2.eventTypes.ECOMMERCE,{attributes:e});this.tracker.send(t)}emitEvent(e,t={}){CE2.w.dispatchEvent(new CustomEvent(`crazyegg.${e}`,{detail:CE2BH.extends({type:e,api:this.constructor.api()},t)}))}amountInCents(e){return this.tracker.amountInCents(e)}}CE2BH.defineProperty(Z,"NAME","Base");class ee extends Z{}function te(e,...t){const r=1===t.length&&t[0].includes(".")?t[0].split("."):t;let s=e;for(let e=0;e<r.length;e++){if(s=s[r[e]],!s)break}return s}function re(e){if(!e)return;const t=e.match(/[\d,]+/);return t&&parseFloat(t[0].replace(",","."))}function se(e,t){let r;if(r="function"==typeof t?e.findIndex(t):e.findIndex((e=>e===t)),r>=0){const t=e.splice(r,1);if(t&&t.length>0)return t[0]}}CE2BH.defineProperty(ee,"NAME","Generic");const ie=()=>{if(void 0===CE2.state._isFB){const e=CE2.n.userAgent;for(let t=0,r=["FBSN","FBAN","FBAV"];t<r.length;t++){const s=r[t];if(e.indexOf(s)>-1){CE2.state._isFB=!0;break}}CE2.state._isFB||(CE2.state._isFB=!1)}return CE2.state._isFB};class ne extends Z{constructor(...e){super(...e),CE2BH.defineProperty(this,"CHECKOUT_STARTED_PATH_REGEXP",/\/checkout(s)?\//i),CE2BH.defineProperty(this,"CHECKOUT_COMPLETED_PATH_REGEXP",/\/checkout(s)?\/.*thank(_|-)?you/i)}onClick(e){const t=e.composedPath?.()?.[0]||e.target;if((0,J.B5)(t,'button[name=add], button[name=add] *, form[action="/cart/add"] button[type=submit], form[action="/cart/add"] button[type=submit] *')||(0,J.B5)(t,"button[type=submit]",!0)&&e.target.closest('form[action="/cart/add"]')||/^\s*(add to (cart|bag|basket)|buy now)\s*$/i.test(t.innerText||t.value)){let e=[];const t=CE2.w.ShopifyAnalytics?.meta;if(t?.currency&&t?.product?.variants?.length&&(t?.selectedVariantId||1===t?.product?.variants?.length)){const r=t.selectedVariantId,s=t?.product?.variants?.length>1&&r?t.product.variants.find((e=>e.id==r)):t.product.variants[0],i=parseInt(CE2.d.querySelector("input[name=quantity]")?.value,10)||1;e=[s.id,s.name,i,this.amountInCents(s.price/100)*i,t.currency]}this.addToCart(e)}}sendCheckoutCompletedEvent(){const e=CE2.w.Shopify&&CE2.w.Shopify.checkout||{},t=this.amountInCents(e.total_price&&e.total_price);super.sendCheckoutCompletedEvent([e.order_id,t,e.currency])}static match(){return CE2.w&&CE2.w.Shopify&&te(CE2.w,"ShopifyAnalytics.lib.integrations")}}CE2BH.defineProperty(ne,"NAME","Shopify");class oe extends Z{constructor(...e){super(...e),CE2BH.defineProperty(this,"CHECKOUT_STARTED_PATH_REGEXP",/\/checkout(s)?\//i),CE2BH.defineProperty(this,"CHECKOUT_COMPLETED_PATH_REGEXP",/\/checkout(s)?\/.*((thank(_|-)?you)|(order-received))/i)}onClick(e){const{target:t}=e;if((0,J.B5)(t,'.single_add_to_cart_button, [class*="add_to_cart"], [class*="add-to-cart"]')||/^\s*(add to (cart|bag|basket)|buy now)\s*$/i.test(t.innerText||t.value)){let e=[];const t=oe.getProduct();if(t)try{const r=CE2.d.querySelector("input.qty"),s=t.offers&&(t.offers[0]||t.offers);this.currency=s&&s.priceCurrency,e=[t.sku||t["@id"],t.name,r&&r.value,this.amountInCents(s&&(s.price||s.lowPrice||s.hightPrice)),s&&s.priceCurrency]}catch(e){(0,i.Yz)("error extracting product data",e)}this.addToCart(e)}}static getProduct(){for(let e=0,t=CE2.d.querySelectorAll('script[type="application/ld+json"]');e<t.length;e++){const r=t[e];try{const e=CE2.Native.JSON.parse(r.textContent.trim());if(e){if("Product"===e["@type"])return e;if(e["@graph"]instanceof Array){const t=e["@graph"].find((e=>"Product"===e["@type"]));if(t)return t}}}catch(e){(0,i.Yz)("error extracting product data",e)}}}sendCheckoutCompletedEvent(){const e=CE2.d.querySelector(".order"),t=CE2.d.querySelector(".total");super.sendCheckoutCompletedEvent([oe.getValue(e&&e.innerText),this.amountInCents(oe.getValue(t&&t.innerText)),this.currency])}static getValue(e){return e&&(e.indexOf(":")>-1?e.split(":")[1].trim():e)}static match(){return CE2.w&&Object.keys(CE2.w).find((e=>/^wc_.*_params$/.test(e)))}}CE2BH.defineProperty(oe,"NAME","Woocommerce");class ae extends Z{constructor(...e){super(...e),CE2BH.defineProperty(this,"CHECKOUT_STARTED_PATH_REGEXP",/\/checkout(s)?\//i),CE2BH.defineProperty(this,"CHECKOUT_COMPLETED_PATH_REGEXP",/\/checkout(s)?\/.*success/i)}onClick(e){const{target:t}=e;if((0,J.B5)(t,'#product-addtocart-button, [class*="add_to_cart"], [class*="add-to-cart"]')||/^\s*(add to (cart|bag|basket)|buy now)\s*$/i.test(t.innerText||t.value)){let e=[];const r=ae.getProduct(t);this.currency=r.priceCurrency,r&&(e=[r.id,r.name,r.qty,this.amountInCents(r.price),r.priceCurrency]),this.addToCart(e)}}static getProduct(e){const t={};try{const r=e.closest(".product-info-main");t.name=CE2.d.querySelector(".page-title")&&CE2.d.querySelector(".page-title").innerText,t.qty=r.querySelector("input.qty")&&r.querySelector("input.qty").value,t.id=r.querySelector('input[name="product"]')&&r.querySelector('input[name="product"]').value,t.price=r.querySelector('[itemprop="price"]')&&(r.querySelector('[itemprop="price"]').getAttribute("content")||r.querySelector('[itemprop="price"]').innerText),t.priceCurrency=r.querySelector('[itemprop="priceCurrency"]')&&r.querySelector('[itemprop="priceCurrency"]').getAttribute("content")}catch(e){(0,i.Yz)("error extracting product data",e)}return t}sendCheckoutCompletedEvent(){const e=CE2.d.querySelector(".order-number"),t=CE2.d.querySelector(".grand_total .amount");super.sendCheckoutCompletedEvent([e&&e.innerText,t&&t.innerText&&this.amountInCents(t.innerText),this.currency])}static match(){return CE2.w&&CE2.w.checkout&&CE2.w.checkout.checkoutUrl&&CE2.w.checkout.websiteId||[...document.scripts].find((e=>e.src&&e.src.indexOf("Magento")>-1))||[...document.querySelectorAll("link")].find((e=>e.href&&e.href.indexOf("Magento")>-1))}}CE2BH.defineProperty(ae,"NAME","Magento");class ce extends Z{constructor(...e){super(...e);const t=CE2.w.location.host,r=this.onEvent.bind(this),s=()=>{window.wixDevelopersAnalytics.register(t,r)};CE2.w.wixDevelopersAnalytics?s():CE2.w.addEventListener("wixDevelopersAnalyticsReady",s)}onEvent(e,t){if("AddToCart"===e){const e=[t.sku,t.name,t.quantity,this.amountInCents(t.price),t.currency];this.addToCart(e)}"InitiateCheckout"===e&&this.startCheckout(),"Purchase"===e&&this.checkoutCompleted([t.orderId,this.amountInCents(t.revenue),t.currency])}static match(){return CE2.w&&!!CE2.w.fedops}}CE2BH.defineProperty(ce,"NAME","WixApi");class le extends Z{constructor(...e){super(...e),CE2BH.defineProperty(this,"CHECKOUT_STARTED_PATH_REGEXP",/\/checkout\?cartToken/i),CE2BH.defineProperty(this,"CHECKOUT_COMPLETED_PATH_REGEXP",/\/website\/thank-you-page/i),CE2BH.defineProperty(this,"ADD_TO_CART_BUTTON_NAME_PATTERN",/add to (cart|bag|basket)/i),CE2BH.defineProperty(this,"CHECKOUT_BUTTON_NAME_PATTERN",/checkout/i)}onClick(e){const{target:t}=e;if((e=>(0,J.B5)(e,".sqs-add-to-cart-button",!0))(t)&&(e=>this.ADD_TO_CART_BUTTON_NAME_PATTERN.test(e.innerText||e.value))(t))return this.processAddToCardAction();(e=>this.CHECKOUT_BUTTON_NAME_PATTERN.test(e.innerText||e.value))(t)&&!this.getCheckoutStarted()&&this.startCheckout()}getProductData(){const e=CE2.d.querySelectorAll('script[type="application/ld+json"]'),t=CE2.d.querySelector(".product-variants[data-selected-variant]"),r=CE2.w.Static?.SQUARESPACE_CONTEXT?.product;let s;if(t?s=CE2.Native.JSON.parse(t.getAttribute("data-selected-variant")):1===r?.variants?.length&&([s]=r.variants),!s)return(0,i.Yz)("Variant not found"),null;for(let t=0;t<e.length;t++){const r=e[t],i=CE2.Native.JSON.parse(r.textContent);if(i.offers){const e=CE2.d.querySelector(".product-quantity-input input");return this.currency=s.priceMoney?.currency,[s.sku,i.name,e&&parseInt(e.value,10),this.amountInCents(re(s.priceMoney?.value)),this.currency]}}}processAddToCardAction(){try{const e=this.getProductData();e&&this.addToCart(e)}catch(e){(0,i.Yz)("error extracting product data",e)}}static match(){return CE2.w&&(CE2.w.SQUARESPACE_ROLLUPS||Object.keys(CE2.w).find((e=>e.includes("__INITIAL_SQUARESPACE"))))}}CE2BH.defineProperty(le,"NAME","Squarespace");const he=[ne,oe,ae,ce,le],ue=function(){for(let e=0;e<he.length;e++){const t=he[e];if(t.match())return(0,i.Yz)(`[Tracker] [Ecommerce] ${t.api()} site detected`),t}}()||ee,de="<unknown>",pe=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/|[a-z]:\\|\\\\).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,fe=/\((\S*)(?::(\d+))(?::(\d+))\)/;const me=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;const Ee=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,ge=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;const ve=/^\s*(?:([^@]*)(?:\((.*?)\))?@)?(\S.*?):(\d+)(?::(\d+))?\s*$/i;const Ce=/^\s*at (?:((?:\[object object\])?[^\\/]+(?: \[as \S+\])?) )?\(?(.*?):(\d+)(?::(\d+))?\)?\s*$/i;function ye(e){return e.split("\n").reduce(((e,t)=>{const r=function(e){const t=pe.exec(e);if(!t)return null;const r=t[2]&&0===t[2].indexOf("native"),s=t[2]&&0===t[2].indexOf("eval"),i=fe.exec(t[2]);return s&&null!=i&&(t[2]=i[1],t[3]=i[2],t[4]=i[3]),{file:r?null:t[2],methodName:t[1]||de,arguments:r?[t[2]]:[],lineNumber:t[3]?+t[3]:null,column:t[4]?+t[4]:null}}(t)||function(e){const t=me.exec(e);return t?{file:t[2],methodName:t[1]||de,arguments:[],lineNumber:+t[3],column:t[4]?+t[4]:null}:null}(t)||function(e){const t=Ee.exec(e);if(!t)return null;const r=t[3]&&t[3].indexOf(" > eval")>-1,s=ge.exec(t[3]);return r&&null!=s&&(t[3]=s[1],t[4]=s[2],t[5]=null),{file:t[3],methodName:t[1]||de,arguments:t[2]?t[2].split(","):[],lineNumber:t[4]?+t[4]:null,column:t[5]?+t[5]:null}}(t)||function(e){const t=Ce.exec(e);return t?{file:t[2],methodName:t[1]||de,arguments:[],lineNumber:+t[3],column:t[4]?+t[4]:null}:null}(t)||function(e){const t=ve.exec(e);return t?{file:t[3],methodName:t[1]||de,arguments:[],lineNumber:+t[4],column:t[5]?+t[5]:null}:null}(t);return r&&e.push(r),e}),[])}var be=r(401);class ke{constructor(e=[]){this.cached_assets=new Set;for(let t=0;t<e.length;t++){const r=e[t];this.cached_assets.add(r)}}add(e){this.cached_assets.add((0,be.F)(e))}test(e){return this.cached_assets.has((0,be.F)(e))}items(){const e=[];return this.cached_assets.forEach((t=>e.push(t))),e}}var we=r(4808);const Te=["Failed to execute 'importScripts' on 'WorkerGlobalScope'"];class Se{constructor(e){this.tracker=e,this.setupCache(),this.setupQueue(),"undefined"!=typeof CE_ERROR_TRACKING_CONFIG&&CE_ERROR_TRACKING_CONFIG.app_version&&(this.appVersion=CE_ERROR_TRACKING_CONFIG.app_version),"undefined"!=typeof CE_ERROR_TRACKING_CONFIG&&CE_ERROR_TRACKING_CONFIG.delay_time?this.delayTime=CE_ERROR_TRACKING_CONFIG.delay_time:this.delayTime=1e4,"undefined"!=typeof CE_ERROR_TRACKING_CONFIG&&CE_ERROR_TRACKING_CONFIG.fingerprint?this.fingerprint=CE_ERROR_TRACKING_CONFIG.fingerprint:this.fingerprint=(e,t)=>{const r=[];return r.push(`${t.name}`),t.file&&r.push(`[${t.file}:${t.lineno}:${t.colno}]`),r.join(" ")},this.tracker.addEventListener("error",(0,J.oI)(this,"onError")),this.tracker.addEventListener("unhandledrejection",(0,J.oI)(this,"onError"))}static removeFingerprintFrom(e){if(!e)return e;if(e.replace(".js","").match(/^([0-9]+([\-|\.|\_])?)+$/))return e;return e.split(/([a-z0-9]+[\-|\.|\_]+)/i).filter((e=>{if(!e)return!1;const t=e.replace(/[^0-9]/g,"").length,r=e.replace(/[\.\-\_]/,"").length,s=t===r;return!!(s&&t<=3)||!(t/r>.15||s)})).join("").replace(/[\-\.\_]js$/,".js")}update(){this.setupQueue(),this.setupCache()}onError(e){try{let t;t="Script error."===e.message?this.buildBaseError(e,e.reason,null,"CrossOrigin Error"):e.error?this.buildBaseError(e,e.error):e.promise?this.buildBaseError(e,e.reason,"UnhandledPromise ->"):this.buildBaseError(e);for(let e=0;e<Te.length;e++){const r=Te[e];if(t.message.match(r))return}if(this.cache.test(t.fingerprint))return;this.bufferQueue.push({timestamp:+new Date,errorAttributes:t}),this.cache.add(t.fingerprint)}catch(t){(0,we.A)(t),(0,i.Yz)(e)}}setupCache(){this.cache=new ke}setupQueue(){this.bufferQueueTimeout&&clearTimeout(this.bufferQueueTimeout),this.bufferQueue=[],this.processQueue(!0)}processQueue(e,t=!1,r=!1){for(;this.bufferQueue.length>0;){const{timestamp:e,errorAttributes:s}=this.bufferQueue[0];if(!t&&+new Date-e<this.delayTime)break;const i=[this.tracker.visitID,s.name,s.message,s.filename,s.lineno,s.colno,s.stack,s.appVersion,s.fingerprint,s.url,s.uuid,s.bounced||r,s.rageClicked],n=this.tracker.newEvent(CE2.eventTypes.ERROR,{timestamp:e,attributes:i});this.tracker.send(n),this.bufferQueue.shift()}if(e){const t=(0,J.oI)(this,"processQueue");this.bufferQueueTimeout=setTimeout((()=>{t(e)}),this.delayTime)}}flush(e){this.processQueue(!1,!0,e)}assignAttribute(e="rageClicked"){this.bufferQueue.forEach((t=>{t.errorAttributes[e]=!0}))}buildBaseError(e,t,r,s=null){const i=CE2BH.extends({},this.parseErrorFileAttributes(e,t),this.parseErrorMessageAttributes(e,t,s));return i.uuid=(0,J.Jl)(),i.appVersion=this.appVersion,i.url=CE2.w.location.href,i.name=r?`${r} ${i.name}`:i.name,i.fingerprint=e.fingerprint||this.fingerprint(e,i),i.rageClicked=!1,i.bounced=!1,i}parseErrorFileAttributes(e,t){let r={};if(e.filename)r={filename:e.filename,lineno:e.lineno,colno:e.colno,stack:t&&t.stack&&t.stack.toString()};else if(t&&t.stack)try{const e=ye(t.stack);e.length>=1&&(r={filename:e[0].file,lineno:e[0].lineNumber,colno:e[0].column,stack:t.stack.toString()})}catch(e){(0,we.A)(e)}if(r.filename&&0!==r.filename.indexOf("blob:"))if(this.isValidFileUrl(r.filename)){const e=new CE2.URL(r.filename),t=new CE2.URL(CE2.w.location.href);if(e.path!==t.path){let t=e.path;"/"!==e.path&&"/"===e.path[e.path.length-1]&&(t=e.path.slice(0,e.path.length-1)),r.file="/"!==t?t.split("/").pop():t}}else r.file="unknown";return r.file=Se.removeFingerprintFrom(r.file),r}parseErrorMessageAttributes(e,t,r=null){const s={};if(t&&t.message){const e=t.message.replace(/^Uncaught /,"");s.message=t.name?`${t.name}: ${e}`:e}else if(t)s.message=t;else if(e.message)s.message=e.message.replace(/^Uncaught /,"");else if(e.target){const t=["Error on"];e.target.tagName&&t.push(e.target.tagName),e.target.src&&t.push(e.target.src!==CE2.w.location.href?e.target.src:"Empty src attribute"),s.message=t.join(" "),s.name="Unknown Resource Error"}return s.message||(s.message="Unknown Error"),r?s.name=r:s.name||(s.name=function(e){if(e.length<=50)return e.trim();const t=e.trim().split(" ");for(let e=1;e<=t.length;e++){const r=t.slice(0,e).join(" ");if(r.length<=50)continue;const s=e===t.length;return r.trim()+(s?"":" ...")}return e.trim()}(s.message)),s}isValidFileUrl(e){try{if(window.URL)return!!new window.URL(e)}catch(e){(0,we.A)(e)}}}const _e=[[.4,.4],[.5,.4],[.5,.5],[.4,.5],[.3,.5],[.3,.4],[.3,.3],[.4,.3],[.5,.3],[.6,.3],[.6,.4],[.6,.5],[.6,.6],[.5,.6],[.4,.6],[.3,.6],[.2,.6],[.2,.5],[.2,.4],[.2,.3],[.2,.2],[.3,.2],[.4,.2],[.5,.2],[.6,.2],[.7,.2],[.7,.3],[.7,.4],[.7,.5],[.7,.6],[.7,.7],[.6,.7],[.5,.7],[.4,.7],[.3,.7],[.2,.7],[.1,.7],[.1,.6],[.1,.5],[.1,.4],[.1,.3],[.1,.2],[.1,.1],[.2,.1],[.3,.1],[.4,.1],[.5,.1],[.6,.1],[.7,.1],[.8,.1],[.8,.2],[.8,.3],[.8,.4],[.8,.5],[.8,.6],[.8,.7],[.8,.8],[.7,.8],[.6,.8],[.5,.8],[.4,.8],[.3,.8],[.2,.8],[.1,.8],[0,.8],[0,.7],[0,.6],[0,.5],[0,.4],[0,.3],[0,.2],[0,.1],[0,0],[.1,0],[.2,0],[.3,0],[.4,0],[.5,0],[.6,0],[.7,0],[.8,0],[.9,0],[.9,.1],[.9,.2],[.9,.3],[.9,.4],[.9,.5],[.9,.6],[.9,.7],[.9,.8],[.9,.9],[.8,.9],[.7,.9],[.6,.9],[.5,.9],[.4,.9],[.3,.9],[.2,.9],[.1,.9],[0,.9]],Ae=`cedk${Math.random().toString().replace(/\D/g,"")}`,Ie=[];function Oe(e,t){if(!e||!e.nodeName)return!1;if(!CE2.d.documentElement.contains(e))return!1;if(e==CE2.d||e==CE2.d.documentElement||e==CE2.d.body)return!1;if((0,J.KQ)(e))return!1;if(!function(e){if(e[Ae])return!1;for(;e&&e!=CE2.d&&e!=CE2.d.documentElement&&e!=CE2.d.body;e=e.parentNode){const t=CE2.w.getComputedStyle(e)?.position;if("absolute"===t||"fixed"===t||"sticky"===t)return!(e[Ae]=!0)}return!0}(e))return!1;return!(CE2.fp.getBox(e).height>2*t.height)}class Ne{constructor(){this.lastRecordedScroll=null,this.lastRecordedTime=0,this.lastRecordedY=0,this.idleAt=null,this.idleSince=(new Date).getTime()}shouldRecordScroll(e){const t=e.top,r=e.height,s=`${t}:${r}`,i=(new Date).getTime();if(s==this.lastRecordedScroll)return!1;if(s==this.idleAt){if(i-this.idleSince>=800)return this.lastRecordedScroll=s,this.lastRecordedTime=i,this.lastRecordedY=t,!0}else this.idleAt=s,this.idleSince=i;return null==this.lastRecordedScroll||Math.abs(t-this.lastRecordedY)>r/2&&i-this.lastRecordedTime>=1600?(this.lastRecordedScroll=s,this.lastRecordedTime=i,this.lastRecordedY=t,!0):void 0}findAnchor(e,t){if(!CE2.d.elementsFromPoint)return t(e);let r=0;const{width:s}=e,{height:i}=e,n=()=>{const o=_e[r++];if(!o){for(let r=Ie.length-1;r>=0;r--){const s=Ie[r];if(Oe(s,e))return t(e,s)}return t(e,null)}{const r=(o[0]+.1*Math.random())*s,a=(o[1]+.1*Math.random())*i,c=CE2.d.elementsFromPoint(r,a).find((t=>Oe(t,e)));if(c){if(Ie.push(c),Ie.length>10){const e=Ie.length-10;Ie.splice(0,e)}return t(e,c)}setTimeout(n,0)}};setTimeout(n,0)}}CE2.EXCESSIVE_SCROLL_TIMEOUT=3e3;var Re=r(715);const Le="ce_submit_forms";function Me(e,t){const r=e[t];return"string"==typeof r?r:e.getAttribute(t)}class Pe{static formAttributes(e){return[Me(e,"id"),Me(e,"name"),new CE2.Native.URL(Me(e,"action"),CE2.w.location.href).toString()]}static validateEmail(e){const t=document.createElement("input");return t.type="email",t.required=!0,t.value=e,"function"==typeof t.checkValidity?t.checkValidity():/\S+@\S+\.\S+/.test(e)}constructor(e){CE2BH.defineProperty(this,"EMAIL_ATTRIBUTE_REGEX",/e([-_])?mail/i),CE2BH.defineProperty(this,"FORM_REGEX",/sign([-_\s])?up|checkout|log([-_\s])?in|sign([-_\s])?in/i),CE2BH.defineProperty(this,"eventTypes",{SUBMIT:1,RESUBMIT:2,ABANDON:3,SIGNUP:4,LOGIN:5,EMAIL:6,SEARCH:7}),this.tracker=e,this.tracker.addEventListener("mousedown",(e=>{"l"===(0,J.CU)(e)&&this.onClick(e)})),CE2.site?.settings?.autoIdentify&&!CE2.IDENTIFIER&&(CE2.w.ShopifyAnalytics&&te(CE2.w,"ShopifyAnalytics.meta.page.customerId")&&(0,Re.ls)(CE2.w.ShopifyAnalytics.meta.page.customerId),this.tracker.addEventListener("blur",(0,J.oI)(this,"onBlur")),this.tracker.addEventListener("submit",(0,J.oI)(this,"onBlur"))),this.tracker.addEventListener("submit",(0,J.oI)(this,"onSubmit")),this.tracker.addEventListener("input",(0,J.oI)(this,"onInput")),this.tracker.addEventListener("beforeunload",(0,J.oI)(this,"beforeUnload")),this.editedForms=[],this.submittedForms=CE2.Native.JSON.parse(CE2.Native.sessionStorageWrapper.read(Le)||"[]")}onClick(e){const{target:t}=e;if(!t)return;const r=t.closest("form"),s="INPUT"===t.tagName&&("button"===t.type||"submit"===t.type);if(r&&s||"BUTTON"===t.tagName){const e="INPUT"===t.tagName?t.value:t.innerText;(/(log\s*in)|(sign\s*in)/i.test(e)||r&&/(log[\-_]in)|(sign[\-_]in)/i.test(r.action))&&this.sendEvent([this.eventTypes.LOGIN]),(/(sign\s*up)|register/i.test(e)||r&&/(sign[\-_\s]up)|register/i.test(r.action))&&this.sendEvent([this.eventTypes.SIGNUP])}"INPUT"!==t.tagName&&"BUTTON"!==t.tagName||"submit"===t.type&&r&&this.submit(r,t)}onSubmit(e){const t=e.target;t&&(t.ce_submit&&+new Date-t.ce_submit<100||this.submit(t))}onBlur(e){try{const{target:t}=e;if(!t||"function"!=typeof t.closest)return;const r=t.closest("form"),s="INPUT"===t.tagName&&t.value&&Pe.validateEmail(t.value);r&&this.isAuthForm(r)&&s&&!CE2.IDENTIFIER&&(0,Re.ls)(t.value)}catch(e){(0,i.Yz)("form blur trigger failed",e)}}onInput(e){const{target:t}=e;if(!t)return;const r=t.closest("form");r&&!this.editedForms.includes(r)&&this.editedForms.push(r),r&&!r.ce_time_start&&(r.ce_time_start=+new Date),"INPUT"===t.tagName&&("search"===t.type||t.placeholder&&/search/i.test(t.placeholder))&&(!t.ce_search||+new Date-t.ce_search>3e4)&&(t.ce_search=+new Date,this.sendEvent([this.eventTypes.SEARCH])),"INPUT"===t.tagName&&t.value&&Pe.validateEmail(t.value)&&(!t.ce_email_sent||+new Date-t.ce_email_sent>6e4)&&(t.ce_email_sent=+new Date,this.sendEvent([this.eventTypes.EMAIL]))}beforeUnload(){this.editedForms.forEach((e=>{this.sendEvent([this.eventTypes.ABANDON,...Pe.formAttributes(e)])})),this.editedForms=[],CE2.Native.sessionStorageWrapper.write(Le,CE2.Native.JSON.stringify(this.submittedForms))}submit(e){try{const t=this.editedForms.indexOf(e);-1!==t&&this.editedForms.splice(t,1),e.ce_submit=+new Date;const r=Pe.formAttributes(e);let s;-1!==this.submittedForms.indexOf(CE2.Native.JSON.stringify(r))?s=this.eventTypes.RESUBMIT:(this.submittedForms.push(CE2.Native.JSON.stringify(r)),s=this.eventTypes.SUBMIT);const i=[s,...r];e.ce_time_start&&(i.push(+new Date-e.ce_time_start),delete e.ce_time_start),this.sendEvent(i)}catch(e){(0,i.Yz)("form submit event failed",e)}}sendEvent(e=[]){e=[this.tracker.visitID,...e];const t=this.tracker.newEvent(CE2.eventTypes.FORM,{attributes:e});this.tracker.send(t)}isAuthForm(e){const t=Me(e,"action"),r=Me(e,"class"),s=Me(e,"id"),i=Me(e,"name");return this.isMatch(t)||this.isMatch(r)||this.isMatch(s)||this.isMatch(i)}isMatch(e,t=this.FORM_REGEX){return e&&e.match(t)}}class De{constructor(){this.events=[],this.api=this.apiName(),this.find(),this.listeners=new Set}destroy(){throw new Error(`${this.constructor.name}.destroy() not implemented`)}find(){throw new Error(`${this.constructor.name}.find() not implemented`)}apiName(){throw new Error(`${this.constructor.name}.apiName() not implemented`)}urlMatches(){throw new Error(`${this.constructor.name}.urlMatches(url) not implemented`)}getId(){throw new Error(`${this.constructor.name}.getId() not implemented`)}getEventType(){throw new Error(`${this.constructor.name}.getEventType() not implemented`)}recordEvent(e){const t={api:this.api,properties:e},r=this.getId(e);null!=r&&(t.id=r);const s=this.getEventType(e);"string"==typeof s&&s.trim().length>0&&(t.type=s),this.events.push(t),this.listeners.forEach((e=>{e(t)}))}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}}class xe{constructor(){this.listeners=new Set,this.bufferedEvents=[]}trigger(...e){0===this.listeners.size?this.bufferedEvents.push(e):this.listeners.forEach((t=>{t(...e)}))}destroy(){throw new Error(`${this.constructor.name}.destroy() not implemented`)}triggerBuffered(){if(this.bufferedEvents.length>0){for(let e=0,t=this.bufferedEvents;e<t.length;e++){const r=t[e];this.trigger(...r)}this.bufferedEvents=[]}}static getInstance(){return this.instance||(this.instance=new this),this.instance}static destroy(){this.instance&&(this.instance.destroy(),delete this.instance)}static addListener(e){const t=this.getInstance();t.listeners.add(e),t.triggerBuffered()}static removeListener(e){this.instance&&(this.instance.listeners.delete(e),0===this.instance.listeners.size&&this.destroy())}static trigger(...e){this.instance&&this.instance.trigger(...e)}}class Be extends xe{constructor(){super(),this.observer=new MutationObserver(this.onMutation.bind(this)),"interactive"===document.readyState||"complete"===document.readyState?this.startObserver():document.addEventListener("DOMContentLoaded",this.startObserver.bind(this))}startObserver(){document.querySelectorAll("script[src]").forEach((e=>{this.trigger(e.getAttribute("src"))})),this.observer.observe(document.documentElement,{subtree:!0,childList:!0})}onMutation(e){for(let t=0;t<e.length;t++){const r=e[t];if(r.addedNodes&&0!==r.addedNodes.length)for(let e=0,t=r.addedNodes;e<t.length;e++){const r=t[e];"SCRIPT"===r.nodeName&&this.trigger(r.getAttribute("src"))}}}destroy(){this.observer.disconnect()}}function Ue(e){const t={};return new URL(e).searchParams.forEach(((e,r)=>{t[r]=e})),t}class Fe extends De{constructor(){super(),this.$onScript=this.onScript.bind(this),Be.addListener(this.$onScript)}destroy(){Be.removeListener(this.$onScript)}apiName(){return"google"}urlMatches(e){if(!e||"string"!=typeof e)return;return["googleadservices.com/pagead/conversion/","googleads.g.doubleclick.net/pagead/viewthroughconversion/"].some((t=>e.toLowerCase().includes(t.toLowerCase())))}find(){const e=new Set;for(let t=0,r=document.querySelectorAll('script[src*="/gtag/"]');t<r.length;t++){const s=r[t];try{const t=new URL(s.src).searchParams.get("id");t&&/^(AW|G)-/.test(t)&&e.add(t)}catch(e){continue}}e.size>0&&(this.ids=Array.from(e))}getId(e){if(e.source_url){const t=/\/pagead\/(viewthrough)?conversion\/([^/?#]+)/.exec(e.source_url);if(t&&t[2])return t[2]}}getEventType(e){if(e.gclid&&(e.medium||e.utm_medium))return"ad_click";const{data:t}=e;if(t){const e=/event=([^;]+)/.exec(t);if(e&&e[1])return e[1]}}onScript(e){if(!this.urlMatches(e))return;const t=Ue(e);t.source_url=e,this.getEventType(t)&&this.recordEvent(t)}detectAdWordsConversion(e){const t=Ue(e||window.location.href);t.gclid&&("cpc"===t.medium&&t.gad_source||"paid_search"===t.utm_medium&&t.utm_source)&&this.recordEvent(t)}}const He=window.Image;function Ve(...e){const t=new He(...e);return Object.defineProperty(t,"src",{set(e){setTimeout((()=>{$e.trigger(e)}),0),t.setAttribute("src",e)},get:()=>t.getAttribute("src")}),t}class $e extends xe{constructor(){super(),window.Image=Ve,window.Image.toString=()=>He.toString()}destroy(){window.Image=He}}class qe extends De{constructor(){super(),this.$onImage=this.onImage.bind(this),$e.addListener(this.$onImage)}destroy(){$e.removeListener(this.$onImage)}apiName(){return"meta"}urlMatches(e){return e.startsWith("https://www.facebook.com/tr/")}find(){if(window.fbq&&window.fbq.instance&&window.fbq.instance.pixelsByID){const e=Object.keys(window.fbq.instance.pixelsByID);e.length>0&&(this.ids=e)}}getId(e){return e.id}getEventType(e){return e.ev}onImage(e){if(!this.urlMatches(e))return;const t=Ue(e);this.getEventType(t)&&this.recordEvent(t)}}const Ge=navigator.sendBeacon;function Ke(e,t){return setTimeout((()=>{try{ze.trigger(e,t)}catch(e){console.error("sendBeacon error: ",e.stack)}}),0),Ge.call(navigator,e,t)}class ze extends xe{constructor(){super(),navigator.sendBeacon=Ke,navigator.sendBeacon.toString=()=>Ge.toString()}destroy(){navigator.sendBeacon=Ge}}class We extends De{constructor(){super(),this.$onSendBeacon=this.onSendBeacon.bind(this),ze.addListener(this.$onSendBeacon)}destroy(){ze.removeListener(this.$onSendBeacon)}apiName(){return"tiktok"}urlMatches(e){return e.startsWith("https://analytics.tiktok.com/")}find(){const e=document.querySelectorAll('script[src*="analytics.tiktok.com"][data-id]'),t=new Set(Array.from(e).map((e=>e.dataset.id)));t.size>0&&(this.ids=Array.from(t))}getId(e){return e?.context?.pixel?.code}getEventType(e){return e.event}onSendBeacon(e,t){if(!this.urlMatches(e))return;const r=JSON.parse(t);this.getEventType(r)&&this.recordEvent(r)}}const Ye={google:Fe,meta:qe,tiktok:We};class je{constructor(e="all"){if("all"===e)this.pixels={google:new Fe,meta:new qe,tiktok:new We};else{this.pixels={};for(let t=0;t<e.length;t++){const r=e[t],s=Ye[r];this.pixels[r]=new s}}this.$onLoad=this.findPixels.bind(this),window.addEventListener("load",this.$onLoad),this.$onDomReady=()=>{this.findPixels(),this.initMutationObserver()},document.addEventListener("DOMContentLoaded",this.$onDomReady),this.findPixels(),this.initMutationObserver()}destroy(){document.removeEventListener("DOMContentLoaded",this.$onDomReady),window.removeEventListener("load",this.$onLoad);for(let e=0,t=Object.values(this.pixels);e<t.length;e++){t[e].destroy()}}findPixels(){for(let e=0,t=Object.values(this.pixels);e<t.length;e++){t[e].find()}}initMutationObserver(){this.mutationObserver||document.documentElement&&(this.mutationObserver=new MutationObserver((e=>{for(let t=0;t<e.length;t++){if(e[t].addedNodes){this.findPixels();break}}})),this.mutationObserver.observe(document.documentElement,{subtree:!0,childList:!0}))}addEventListener(e){for(let t=0,r=Object.values(this.pixels);t<r.length;t++){r[t].addListener(e)}}removeEventListener(e){for(let t=0,r=Object.values(this.pixels);t<r.length;t++){r[t].removeListener(e)}}}var Qe=r(1789),Xe=r(2080),Je=r(7471);const Ze=(e,t,r,s)=>{if(!r||r.type!==t)return!1;if(!e.on_any_page&&!(0,Je.V4)(e.on_page,CE2.w.location.href))return!1;let i=e[`selector_for_${{1:"desktop",2:"phone",3:"tablet"}[CE2.clock.getDeviceType()]}`];return!!i&&("function"==typeof CE2.fixTriggerSelector&&(i=CE2.fixTriggerSelector(s,i)),!(!i||!(0,J.B5)(r.target,i,!0)))};Je.DM.url_visit=Je.DM.visited_page,Je.DM.click=(e,{operand:t}={})=>{const{event:r,goalId:s}=t;return Ze(e,"mousedown",r,s)},Je.DM.form_submission=(e,{operand:t}={})=>{const{event:r,goalId:s}=t;return Ze(e,"submit",r,s)},Je.DM.pixel_event=(e,{operand:t}={})=>((e,t)=>{if(!e.on_any_page&&!(0,Je.V4)(e.on_page,CE2.w.location.href))return!1;if(e.api!==t.api)return!1;const r="string"==typeof e.event&&e.event.toLowerCase();return!(r&&r!==t.type.toLowerCase()||"ad_click"!==r&&"string"==typeof e.id&&e.id.replace(/^(G|AW)-/,"")!==t.id)})(e,t.event),Je.DM.ecommerce_event=(e,{operand:t}={})=>((e,t)=>{if(!e.on_any_page&&!(0,Je.V4)(e.on_page,CE2.w.location.href))return!1;if(e.api!==t.detail?.api)return!1;const r="string"==typeof e.event&&e.event.toLowerCase();return!r||r===t.detail?.type?.toLowerCase()})(e,t.event);class et{constructor(e){this.tracker=e,this.goals=this.tracker.goals;const t=(0,J.oI)(this,"onClickOrSubmit");this.tracker.addEventListener("mousedown",t),this.tracker.addEventListener("submit",t);const{onActivity:r}=et;this.tracker.addEventListener("mousemove",r),this.tracker.addEventListener("scroll",r),this.tracker.addEventListener("keydown",r),this.tracker.addEventListener("pagehide",r);const s=(0,J.oI)(this,"onEcommerceEvent");this.tracker.addEventListener("crazyegg.addToCart",s),this.tracker.addEventListener("crazyegg.startCheckout",s),this.tracker.addEventListener("crazyegg.checkoutCompleted",s);const i=(0,J.oI)(this,"onHubSpotMessage");this.tracker.addEventListener("message",i),this.pixelObserver=new je(et.pixelApisFromGoals(this.goals)),this.pixelObserver.addEventListener(this.onPixelEvent.bind(this)),this.pixelObserver.pixels?.google?.detectAdWordsConversion(),this.goalValuesObserver=new Xe.O(this.goals,[this.onGoalValueEvent.bind(this)]),this.setupGravityFormsListener()}cleanup(){this.pixelObserver.destroy(),delete this.pixelObserver}setupGravityFormsListener(){CE2.w.gform?.utils&&CE2.w.gform.utils.addAsyncFilter("gform/submission/pre_submission",(async e=>{try{this.onGravityFormSuccess(e)}catch(e){console.error("Gravity Forms goal tracking failed",e)}return e}))}onHubSpotMessage(e){if(CE2.w.hubspot&&e.data&&"hsFormCallback"===e.data.type&&"onFormSubmitted"===e.data.eventName){const t=e.data.id;if(!t)return;const r={type:"submit",target:{matches:e=>{if(!e||"string"!=typeof e)return!1;const r=e.toLowerCase(),s=`hsform_${t}`.toLowerCase();return r.includes(`#${s}`)||r.includes(s)},closest:()=>null}};this.processFormSubmission(r)}}onGravityFormSuccess(e){if(e?.form){const t={type:"submit",target:e.form};this.processFormSubmission(t)}}processFormSubmission(e){Qe.r.alive(),this.goals.forEach((t=>{t.triggers.forEach((r=>{const s=r.filter.conditions.filter((e=>"form_submission"===e.criteria));0!==s.length&&this.matchGoal(t,r,s,"form_submission",e)}))}))}onClickOrSubmit(e){Qe.r.alive(),this.goals.forEach((t=>{t.triggers.forEach((r=>{const s=r.filter.conditions.filter((e=>"click"===e.criteria||"form_submission"===e.criteria));0!==s.length&&this.matchGoal(t,r,s,"click",e)}))}))}onUrlVisit(){this.goals.forEach((e=>{e.triggers.forEach((t=>{const r=t.filter.conditions.filter((e=>"url_visit"===e.criteria));0!==r.length&&this.matchGoal(e,t,r)}))}))}onPixelEvent(e){this.goals.forEach((t=>{t.triggers.forEach((r=>{const s=r.filter.conditions.filter((e=>"pixel_event"===e.criteria));0!==s.length&&this.matchGoal(t,r,s,"pixel_event",e)}))}))}onEcommerceEvent(e){this.goals.forEach((t=>{t.triggers.forEach((r=>{const s=r.filter.conditions.filter((e=>"ecommerce_event"===e.criteria));0!==s.length&&this.matchGoal(t,r,s,"ecommerce_event",e)}))}))}onGoalValueEvent(e){CE2.nextGoalConversionValue(e.goal.id,e.value,e.trigger.id)}matchGoal(e,t,r,s,i){if((0,Je._9)(r,{operand:{event:i,goalId:e.id}})){let r;i?.detail?.value&&(r={worth:i.detail?.value,currency:i.detail?.currency||Qe.r.getCurrency()}),this.tracker.goalConversion({goalId:e.id,value:r,triggerId:t.id,skipSessionWorth:"ecommerce_event"===s})}}static onActivity(){const e=+new Date;et.lastActive&&e-et.lastActive<=1e4||(et.lastActive=e,Qe.r.alive())}static pixelApisFromGoals(e){if(!CE2.Native.Array.isArray(e))return[];const t=new Set;return e.forEach((e=>{e.triggers.forEach((e=>{e.filter.conditions.forEach((e=>{"pixel_event"===e.criteria&&e.values.forEach((e=>{e.api&&t.add(e.api)}))}))}))})),CE2.Native.Array.from(t)}}const tt=/[:@;%~='"\|\*\/\\\.\[\]\{\}\(\)]/g,rt=/^-?[_a-zA-Z]+[_a-zA-Z0-9-]*$/;function st(e){if(e instanceof DocumentFragment)return":scope";let t=[];const{id:r}=e;if(t.push(e.nodeName.toLowerCase()),r&&"string"==typeof r&&!/^\d/.test(r))t.push(`#${i=r,i.replace(tt,"\\$&").replace(/^\s+|\s+$/g,"")}`);else{const r=(s=e,[].slice.call(s.classList).filter((e=>e.match(rt))).map((e=>`.${e}`)).join(""));r&&t.push(r)}var s,i;if(t=t.join(""),1===e.parentNode.querySelectorAll(t).length)return t;const n=function(e){const{children:t}=e.parentNode;let r=0;for(let s=0;s<t.length;s++){const i=t[s];if(i.tagName===e.tagName&&r++,i===e)return r}}(e);return`${e.nodeName.toLowerCase()}:nth-of-type(${n})`}function it(e){return e.getRootNode?e.getRootNode():e.ownerDocument}function nt(e){const t=[],{body:r,documentElement:s}=e.ownerDocument;let i;if(e===r||e===s)return e.tagName.toLowerCase();if(e._ce_selector){const t=it(e).querySelectorAll(e._ce_selector);if(1===t.length&&t[0]===e)return e._ce_selector}for(;e&&(t.unshift(st(e)),i=it(e).querySelectorAll(t.join(" > ")),1!==i.length);e=e.parentNode);return e._ce_selector=t.join(" > ")}function ot(e){try{!e||e.isCensored||CE2.d.hidden||(e.ce||(e.ce={}),e.ce.imgScheduled||(e.ce.imgScheduled=!0,setTimeout((()=>{try{e.ce.imgScheduled=!1,e.toBlob((t=>{const r=new CE2.Native.URL(`/canvas-urls/${e.width}x${e.height}/${t.size}/${t.type&&t.type.replace("/",".")}`,CE2.d.baseURI).toString();e.ce.imgUrl=r,e.ce.blob=t,r!==e.getAttribute("ce-img-taken")&&e.setAttribute("ce-img-taken",r)}),"image/webp")}catch(e){(0,i.Yz)("error saving the canvas image",e)}}),1e3)))}catch(e){(0,i.Yz)("error saving the canvas image",e)}}function at(e){ot(e.canvas)}const ct=[{type:CE2.w.CanvasRenderingContext2D,methods:["stroke","fillText","strokeText","fillRect","drawImage","clearRect","translate","transform","fill","clear","rect","strokeRect","putImageData"]}],lt={track(){this.overridden||(ct.forEach((e=>{e.type&&e.methods&&e.methods.forEach((t=>{!function(e,t,r){const s=e.prototype[t];e.prototype[t]=function(...e){s.call(this,...e),r(this,t,...e)}}(e.type,t,at)}))})),CE2.d.querySelectorAll("canvas").forEach((e=>{ot(e)})),this.overridden=!0)}};const ht="ce_visit_timings";class ut{constructor(e){e===document?this.doc=e:(this.doc=e.shadowRoot,this.container=e),this.attachShadowListeners=[],this.patchAttachShadow(),this.onMutation=this._onMutation.bind(this),this.mutationObserver=new MutationObserver(this.onMutation),this.mutationObserver.observe(this.doc,{subtree:!0,childList:!0}),this.listeners=[],this.subMonitors=[],this.timeoutId=null,this.setupSubMonitors()}setupSubMonitors(){clearTimeout(this.timeoutId),this.timeoutId=setTimeout((()=>{this.subMonitors.filter((e=>!this.doc.contains(e.container))).forEach((e=>this.removeSubMonitor(e.container))),this.findAllContainers().map((e=>this.addSubMonitor(e)))}))}destroy(){clearTimeout(this.timeoutId),this.mutationObserver&&this.mutationObserver.disconnect(),this.mutationObserver=null;for(let e=0,t=this.listeners;e<t.length;e++){const{event:r,callback:s,opt:i}=t[e];this.doc.removeEventListener(r,s,i)}for(let e=0,t=this.subMonitors;e<t.length;e++){t[e].destroy()}this.subMonitors=[],this.doc=null,this.container=null,this.listeners=[],this.attachShadowListeners=[]}findAllContainers(){return CE2.Native.Array.from(this.doc.querySelectorAll("*")).filter((e=>e.shadowRoot))}findMonitor(e){if(this.doc===e||this.doc.contains(e))return this;for(let t=0,r=this.subMonitors;t<r.length;t++){const s=r[t].findMonitor(e);if(s)return s}}attachShadow(e){const t=this.findMonitor(e);t&&t.addSubMonitor(e),this.attachShadowListeners.forEach((t=>{t(e)}))}onAttachShadow(e){this.attachShadowListeners.push(e)}_onMutation(){this.setupSubMonitors()}patchAttachShadow(){if(ut.patchedAttachShadow)return;const e=Element.prototype.attachShadow,t=this;Element.prototype.attachShadow=function(r){const s=e.call(this,r);return r&&"open"===r.mode&&t.attachShadow(this),s},ut.patchedAttachShadow=!0}addSubMonitor(e){if(!this.findSubMonitor(e)){const t=new ut(e);this.subMonitors.push(t);for(let e=0,r=this.listeners;e<r.length;e++){const s=r[e];t.addEventListener(s.event,s.callback,s.opt)}}}findSubMonitor(e){return this.subMonitors.find((t=>t.container===e))}removeSubMonitor(e){const t=se(this.subMonitors,(t=>t.container===e));t&&t.destroy()}addEventListener(e,t,r){this.listeners.push({event:e,callback:t,opt:r}),this.doc.addEventListener(e,t,r);for(let s=0,i=this.subMonitors;s<i.length;s++){i[s].addEventListener(e,t,r)}}removeEventListener(e,t,r){se(this.listeners,(s=>s.event===e&&s.callback===t&&s.opt===r)),this.doc.removeEventListener(e,t,r);for(let s=0,i=this.subMonitors;s<i.length;s++){i[s].removeEventListener(e,t,r)}}getComposedPath(e){const t=[];let r=e;for(;r;){if(t.push(r),r===document){t.push(window);break}if(r.parentNode)r=r.parentNode;else{const e=this.findMonitor(r);r=e&&e.container}}return t}}const dt=new ut(document);CE2.ASSET_COLLECTOR_IGNORE_DOMAINS=["bat.bing.com","www.facebook.com/tr","www.google.","www.google-analytics.","ssl.google-analytics.","www.googletagmanager.","googleads.g","sp.analytics.yahoo.","heapanalytics.com","dev.visualwebsiteoptimizer.","b.6sc.co","hn.inspectlet.","d.adroll.","secure.adnxs.","match.adsrvr.","ads.travelaudience.","www.linkconnector.","px.ads.linkedin.","cdn.bizible.","ih.adscale.","rtb-csync.smartadserver.","x.bidswitch.net/sync","ad.doubleclick."];const pt={3:"Crazy Egg Bot",2:"Crazy Egg Bot (Mobile)",1:"Crazy Egg Bot"};class ft{constructor(e=null){if(e){this.storageKey=e;const t=CE2.Native.sessionStorageWrapper.read(this.storageKey);t&&(this.queue=CE2.Native.JSON.parse(t))}this.queue||(this.queue=[])}push(e){const t=[];for(let r=0;r<e.length;r++){const s=e[r];if(!s||!s.url)continue;const i=this.queue.findIndex((e=>e.url===s.url));if(i>=0)this.queue[i]=s;else{t.findIndex((e=>e.url===s.url))<0&&t.push(s)}}t.length&&(this.queue=this.queue.concat(t)),this.updateStorage()}fetch(e){const t=this.queue.splice(0,e);return this.updateStorage(),t}include(e){return this.queue.findIndex((t=>t.url===e))>-1}length(){return this.queue.length}updateStorage(){this.storageKey&&CE2.Native.sessionStorageWrapper.write(this.storageKey,CE2.Native.JSON.stringify(this.queue))}}class mt{constructor(e){this.tracker=e,this.OBSERVER_CACHE_KEY="ce_asset",this.LOCAL_CACHE_ASSET_MAX_SIZE=5e3,this.LOCAL_ASSET_OBSERVER_CACHE_KEY="ce_local_asset_cache",this.WAITING_QUEUE_KEY="ce_asset_waiting",this.SAMPLE_INTERVAL="undefined"==typeof CE_ASSET_COLLECTOR_INTERVAL?1e4:CE_ASSET_COLLECTOR_INTERVAL,this.URL_REGEX=/url\(["'](.+?)["']\)/,this.BATCH_SIZE=20;const t=new Set;for(let e=0,r=CE2.ASSET_COLLECTOR_IGNORE_DOMAINS;e<r.length;e++){const s=r[e];t.add(s)}for(let e=0,r=CE2.data.asset_collector_ignore||[];e<r.length;e++){const s=r[e];t.add(s)}this.IGNORE_DOMAINS=[],t.forEach((e=>{this.IGNORE_DOMAINS.push(e)}))}setup(){this.uri=new CE2.URL(CE2.w.location.toString()),this.setupObserverCache(),this.setupWorker(),this.schedulePerformanceObserver(),this.scheduleDataAndBlobCollection(1e3),this.collectCanvasImages()}cleanup(){this.performanceObserver&&(this.performanceObserver.disconnect(),delete this.performanceObserver),this.collectAssetsTimeout&&clearTimeout(this.collectAssetsTimeout),this.collectCanvasImagesTimeout&&clearTimeout(this.collectCanvasImagesTimeout),this.worker&&this.worker.terminate()}setupObserverCache(){const e=CE2.Native.sessionStorageWrapper.read(this.LOCAL_ASSET_OBSERVER_CACHE_KEY);this.observerCache=e?new ke(CE2.Native.JSON.parse(e)):new ke}addObserverCache(e){if(e&&e.length){for(let t=0;t<e.length;t++){const r=e[t];this.observerCache.add(r.cacheKey)}CE2.Native.sessionStorageWrapper.write(this.LOCAL_ASSET_OBSERVER_CACHE_KEY,CE2.Native.JSON.stringify(this.observerCache.items().slice(0,this.LOCAL_CACHE_ASSET_MAX_SIZE)))}}checkObserverCache(e){return this.observerCache.test(e)}collectCanvasImages(){const e=[];let t;for(let r=0,s=CE2.d.querySelectorAll("canvas[ce-img-taken]");r<s.length;r++){const i=s[r],{ce:n}=i;if(n&&n.imgUrl&&n.blob){const{blob:r,imgUrl:s}=n;t=this.prepareAsset(s,{source:"canvas"}),t&&(t.data=r,t.contentType=r.type,t.contentLength=r.size,e.push(t)),delete i.ce.blob}}this.queueForWorker(e),this.collectCanvasImagesTimeout=setTimeout((0,J.oI)(this,"collectCanvasImages"),500)}collectDataAndBlobAssets(){const e=[];let t;if(CE2.d.images)for(let r=0,s=CE2.d.images;r<s.length;r++){const i=s[r],n=i.currentSrc||i.src;this.isBlobOrDataUrl(n)&&(t=this.prepareAsset(n,{source:"images"}),t&&e.push(t))}if(CE2.d.styleSheets)for(let r=0,s=CE2.d.styleSheets;r<s.length;r++){const i=s[r];this.isBlobOrDataUrl(i.href)&&(t=this.prepareAsset(i.href,{source:"stylesheets"}),t&&e.push(t))}this.queueForWorker(e),this.scheduleDataAndBlobCollection(this.SAMPLE_INTERVAL)}schedulePerformanceObserver(){const e=CE2.w;e.performance&&e.performance.getEntriesByType&&(this.handlePerformanceEntries(e.performance.getEntriesByType("resource")),"undefined"!=typeof PerformanceObserver&&(this.performanceObserver=new PerformanceObserver((e=>{this.handlePerformanceEntries(e.getEntries())})),this.performanceObserver.observe({entryTypes:["resource"]})))}scheduleDataAndBlobCollection(e){this.collectAssetsTimeout=setTimeout((0,J.oI)(this,"collectDataAndBlobAssets"),e)}handlePerformanceEntries(e){const t=[];let r;const s=[];let i=!1;for(let n=0;n<e.length;n++){const o=e[n];let a=!1;"img"!==o.initiatorType&&"css"!==o.initiatorType||(a=!0);try{if(o.name){new URL(o.name).pathname.endsWith(".ttf")&&(a=!0)}}catch(e){CE2.debugError(e)}"link"!==o.initiatorType&&"other"!==o.initiatorType||(i||([document.querySelectorAll("link[rel=stylesheet]"),document.querySelectorAll("link[rel~=preload][as=style]"),document.querySelectorAll("link[rel~=preload][as=font]"),document.querySelectorAll("link[rel~=preload][as=image]")].forEach((e=>e.forEach((e=>s.push(e.href))))),i=!0),s.includes(o.name)&&(a=!0)),a&&(r=this.prepareAsset(o.name,{source:"network"}),r&&t.push(r))}this.queueForWorker(t)}setupWorker(){if(!this.worker){if(this.workerQueue=new ft,this.workerWaitingQueue=new ft(this.WAITING_QUEUE_KEY),this.worker=(0,J.UO)("crazyegg-assets",(e=>{if("undefined"==typeof CE2libs)return void CE2.debug("[Tracker] CE2libs not available");const{assets:t,session:r,uid:s,origin:i,trackURL:n,trackingKey:o,userAgent:a}=e.data,c={session:r,uid:s,origin:i,assets:[],userAgent:a};for(let e=0;e<t.length;e++){const r=t[e],s={url:r.url};r.data&&(s.contentType=r.contentType,s.contentLength=r.contentLength,s.contentEncoding="gzip",r.contentType&&r.contentType.indexOf("text/css")>-1?s.digest=CE2libs.md5(r.data):s.digest=CE2libs.md5((new FileReaderSync).readAsText(r.data.slice(0,8e3)))),c.assets.push(s)}CE2.http.send(`${n}/assets?tk=${o}`,JSON.stringify(c),{contentType:"application/json",retry:5,callback:e=>{let r;if(200===e.status)r=JSON.parse(e.responseText);else{if(204!==e.status)return void postMessage({status:e.status,assets:t});r=[]}for(let e=0;e<t.length;e++){const s=t[e],i=r.find((e=>s.url===e.url));i?(s.status=i.status,s.s3=i.s3):(s.status=2,s.timestampEnd=+new Date,s.collector="s")}CE2.promisePool(t,2,(e=>new Promise((t=>{if(e.s3){const r=new CE2.FormData;for(let t=0,s=Object.keys(e.s3.fields);t<s.length;t++){const i=s[t];r.append(i,e.s3.fields[i])}let s=e.data;e.data instanceof Blob&&(s=new Uint8Array((new FileReaderSync).readAsArrayBuffer(s))),r.append("file",CE2libs.compress(s)),CE2.http.send(e.s3.url,r,{retry:5,callback:()=>{e.status=2,e.timestampEnd=+new Date,e.collector="c",t(e)}})}else t(e)})))).then((()=>{postMessage({status:"ok",assets:t})})).catch((e=>{CE2.debugError(e)}))}})}),!0),!this.worker)return;this.worker.onmessage=e=>{const t=[],r=[],s=[];"ok"!==e.data.status&&CE2.debug("[Tracker] Assets api unavailable",e.data.status);for(let i=0,n=e.data.assets;i<n.length;i++){const e=n[i];1===e.status?(void 0===e.waiting?e.waiting=0:e.waiting+=1,t.push(e)):3===e.status||4===e.status&&CE2.data.recordings_2_cors_collect?(e.corsSafe=!0,r.push(e)):s.push(e)}t.length&&this.workerWaitingQueue.push(t),this.addObserverCache(r),this.addObserverCache(s),(0,J.jI)("assets-debug-event")&&this.sendEvent(e.data.assets),r.length?this.runWorker(r):this.workerQueue.length()>0?this.runWorker():setTimeout((0,J.oI)(this,"runWorker"),this.SAMPLE_INTERVAL)},this.runWorker()}}queueForWorker(e){e.length&&this.workerQueue.push(e)}runWorker(e){let t=e;t&&t.length||(t=this.workerQueue.fetch(this.BATCH_SIZE),t.length||(t=this.workerWaitingQueue.fetch(this.BATCH_SIZE))),t.length?this.fetchAssetsData(t).then((e=>{this.worker.postMessage({assets:e,session:this.tracker.session.id,uid:CE2.data.uid,origin:`${CE2.w.location.protocol}//${CE2.w.location.host}`,trackURL:this.tracker.trackURL,trackingKey:CE2.data.tracking_key,userAgent:CE2.site?.settings?.explicitAgent&&pt[CE2.clock.getDeviceType()]||""})})).catch((e=>{CE2.debugError(e)})):setTimeout((0,J.oI)(this,"runWorker"),this.SAMPLE_INTERVAL)}isBlobUrl(e){return 0===e.indexOf("blob:")}fetchAssetsData(e){return new Promise((t=>{CE2.promisePool(e,2,(e=>new Promise((t=>{if(!e.data&&e.corsSafe){let r=e.originalUrl;if(!e.local){const e=new CE2.URL(r);e.query=e.query&&e.query.length?`${e.query}&`:"",e.query+="ce=true",r=e.getFullUrl()}try{CE2.http.get(r,(r=>{200===r.status&&r.response?(e.data=r.response,e.contentType=r.getResponseHeader("Content-Type"),e.contentLength=r.response.size?r.response.size:parseInt(r.getResponseHeader("Content-Length"),10)):e.failed=!0,t(e)}),"blob")}catch(r){e.failed=!0,t(e)}}else t(e)})))).then((e=>{const r=[],s=[];for(let t=0;t<e.length;t++){const i=e[t];i.failed||i.local&&!i.data?s.push(i):r.push(i)}this.addObserverCache(s),t(r)}))}))}localUrl(e){return!!this.isBlobUrl(e)||this.uri.sameOrigin(e)}prepareAsset(e,t){const r={originalUrl:e,source:t.source,timestamp:+new Date},s=new CE2.URL(t.baseUrl||CE2.d.baseURI);if(!e||"images"!==r.source&&0===e.indexOf("data:"))return;if(this.IGNORE_DOMAINS)for(let t=0,r=this.IGNORE_DOMAINS;t<r.length;t++){const s=r[t];if(e.indexOf(s)>=0)return}let i=e;this.isBlobUrl(e)&&(i=e.replace("blob:","")),0===e.indexOf("data:")&&(i=`${CE2.w.location.protocol}//${CE2.w.location.host}/data-urls/${e.length}`),0===i.indexOf("//")&&(i=`${s.protocol}:${i}`);let n=new CE2.URL(i);n.host||(n=s.join(n)),n.normalize();const o=n.getFullUrl();return"http"!==n.protocol&&"https"!==n.protocol||this.checkObserverCache(o)||this.workerWaitingQueue.include(o)?void 0:(r.url=n.getFullUrl(),r.cacheKey=o,this.localUrl(r.url)&&(r.local=!0,r.corsSafe=!0),r)}isBlobOrDataUrl(e){return e&&(e.indexOf("blob:")>=0||e.indexOf("data:")>=0)}sendEvent(e){const t=[];for(let r=0;r<e.length;r++){const s=e[r];if(1===s.status&&s.waiting>0)continue;const i=[s.url,s.status,s.timestamp];s.timestampEnd&&(i.push(s.timestampEnd),i.push(s.collector)),t.push(i)}if(!t.length)return;const r=[this.tracker.visitID,t],s=this.tracker.newEvent(CE2.eventTypes.ASSETS,{attributes:r});this.tracker.send(s)}}const Et={PageState:class{constructor(e){this.tracker=e,this.pageStateCapturing=!1}update(e){if(this.prevState=null,e&&this.pageStateCapturing&&(CE2.pageState.stopCapture(),this.pageStateCapturing=!1),!this.pageStateCapturing){(0,J.jI)("v11_canvas_tracking")&&lt.track();try{CE2.pageState.startCapture(this.captureOptions()),this.pageStateCapturing=!0}catch(e){this.tracker.pageStateError(e)}}}cleanup(){this.pageStateCapturing&&CE2.pageState.stopCapture()}trigger(e,t,r,s,i,n){if(!this.prevState||this.prevState.pageUrl!==e||this.prevState.md5!==r){const o=[i||this.tracker.visitID,e,r,t,n],a=this.tracker.newEvent(CE2.eventTypes.PAGE_STATE,{timestamp:s,attributes:o});this.tracker.send(a,{timestamp:s}),this.prevState={pageUrl:e,md5:r}}}captureOptions(){const{tracker:e}=this;return{uid:CE2.data.uid,trackURL:e.trackURL,getVisitId:()=>e.visitID,getUrl:()=>e.url,onPageState:(...t)=>e.pageState(...t),onPageStateError:(...t)=>e.pageStateError(...t),censoredElements:e.censoredElements,hideIframes:e.hideIframes,disableMasking:!!CE2.data.disable_recordings_masking,disableEmailMasking:!!CE2.data.disable_recordings_email_masking,stylesheetPerformance:(0,J.jI)("v11_page_state_performance")}}},Error:Se,Scroll:class{constructor(e){this.tracker=e,this.scrollTracker=new Ne,this.trackScrollInterval=setInterval((0,J.oI)(this,"trackScroll"),100),this.foundAnchorBind=(0,J.oI)(this,"foundAnchor"),this.resetLimitCount()}update(){this.resetLimitCount()}cleanup(){clearInterval(this.trackScrollInterval),delete this.scrollTracker,delete this.foundAnchorBind,this.resetLimitCount()}trackScroll(){if(this.overLimit())return;const e=CE2.fp.scroll();this.scrollTracker?.shouldRecordScroll(e)&&this.scrollTracker.findAnchor(e,this.foundAnchorBind)}foundAnchor(e,t){const r=e.top,s=e.height;let i,n,o;this.scrollTotal+=1,t&&(t=this.tracker.getElementToRecord(t),i=this.tracker.getFingerprint(t),n=e.top-i.pageY,o=e.top+e.height-i.pageY);const a=[this.tracker.visitID,...this.tracker.getFingerprintAttributes(i,{blank:["name"]}),r,s,n,o],c=this.tracker.newEvent(CE2.eventTypes.SCROLL,{attributes:a});this.tracker.send(c)}resetLimitCount(){this.scrollTotal=0}overLimit(){return!!(0,J.jI)("per-visit-event-limit")&&this.scrollTotal>=1e3}},Ecommerce:ue,GoalConversion:et,ExcessiveScroll:class{constructor(e){this.tracker=e,this.timeout=CE2.EXCESSIVE_SCROLL_TIMEOUT,this.isTriggered=!1,this.isScrolledDown=!1,this.scrollTracker=new Ne,this.viewport=null,setTimeout((0,J.oI)(this,"cleanup"),this.timeout),this.trackScrollInterval=setInterval((0,J.oI)(this,"trackScroll"),500),this.foundAnchorBind=(0,J.oI)(this,"foundAnchor")}cleanup(){clearInterval(this.trackScrollInterval),this.isTriggered=!1,this.isScrolledDown=!1,this.viewport=null,delete this.scrollTracker,delete this.foundAnchorBind}trackScroll(){const e=CE2.fp.scroll();this.scrollTracker?.findAnchor(e,this.foundAnchorBind)}foundAnchor(e,t){if(this.isTriggered)return;const r=this.anchorViewport(e,t),s=r.viewportTop/r.viewportHeight*100;this.isScrolledDown?s<=80&&(this.sendEvent(this.viewport),this.isTriggered=!0):s>90&&(this.viewport=r,this.isScrolledDown=!0)}anchorViewport(e,t){const r=e.top,s=e.height;let i,n,o;return t&&(t=this.tracker.getElementToRecord(t),i=this.tracker.getFingerprint(t),n=e.top-i.pageY,o=e.top+e.height-i.pageY),{viewportTop:r,viewportHeight:s,viewportTopDistance:n,viewportBottomDistance:o}}sendEvent({viewportTop:e,viewportHeight:t,viewportTopDistance:r,viewportBottomDistance:s}){const i=[this.tracker.visitID,e,t,r,s],n=this.tracker.newEvent(CE2.eventTypes.EXCESSIVE_SCROLL,{attributes:i});this.tracker.send(n),this.tracker.addTag("excessive scroll")}},MouseMovement:class{constructor(e){CE2BH.defineProperty(this,"mouseEventTypes",{movement:"m",mouseup:"u",mousedown:"d"}),this.tracker=e,this.mousePos=null,this.mousePositions=[],this.tracker.addEventListener("mousemove",(0,J.oI)(this,"mousemove")),this.tracker.addEventListener("mouseup",(0,J.oI)(this,"mouseup")),this.tracker.addEventListener("mousedown",(0,J.oI)(this,"mousedown")),this.tracker.addSampleCallback((0,J.oI)(this,"sample")),this.tracker.addDiffCallback((0,J.oI)(this,"diff"))}overLimit(){const e=this.tracker?.commonEventHandlers?.click;return e?.overLimit()}cleanup(){}mousedown(e){if(!e)return;this.tracker.onActivity();const t=this.buildMouseEvent(e,this.mouseEventTypes.mousedown);t&&(this.mousePos=t,this.sample())}mouseup(e){if(!e)return;this.tracker.onActivity();const t=this.buildMouseEvent(e,this.mouseEventTypes.mouseup);t&&(this.mousePos=t,this.sample())}mousemove(e){if(!e)return;this.tracker.onActivity();const t=this.buildMouseEvent(e,this.mouseEventTypes.movement);t&&(this.mousePos=t)}sample(){try{const{mousePos:e}=this;if(e){const t=this.mousePositions[this.mousePositions.length-1];if(t&&((e,t)=>{const r=Object.getOwnPropertyNames(e),s=Object.getOwnPropertyNames(t);if(r.length!=s.length)return!1;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i])return!1}return!0})(e.fingerprint,t.fingerprint)){const t=e.movements[0];this.mousePositions[this.mousePositions.length-1].movements.push(t)}else this.mousePositions.push(e);delete this.mousePos}}catch(e){(0,we.A)(e)}}diff(){try{if(this.overLimit())return;if(this.mousePositions.length>0){const e=[];for(let t=0,r=this.mousePositions;t<r.length;t++){const s=r[t],i=[];for(let e=0,t=s.movements;e<t.length;e++){const r=t[e];let s;"m"===r.type?s=[r.relativeX,r.relativeY,r.timestamp,r.pageX,r.pageY,r.type]:"u"!==r.type&&"d"!==r.type||(s=[r.relativeX,r.relativeY,r.timestamp,r.pageX,r.pageY,r.type,r.button,r.clickType]),i.push(s)}const n=[s.movements.length,i,s.selector];e.push(n)}const t=[this.tracker.visitID,"v2",e],r=this.tracker.newEvent(CE2.eventTypes.MOUSE_MOVEMENT,{attributes:t});this.tracker.send(r),this.mousePositions=[]}}catch(e){(0,we.A)(e)}}buildMouseEvent(e,t){try{if(t===this.mouseEventTypes.mousedown||t===this.mouseEventTypes.mouseup){const{fp:r,selector:s}=this.lastPosition,i=CE2BH.extends({},this.lastPosition.movementData,{type:t,timestamp:+new Date}),n=(0,J.CU)(e);return i.button=n,"l"===n&&t===this.mouseEventTypes.mousedown&&this.tracker.commonEventHandlers.click&&(i.clickType=this.tracker.commonEventHandlers.click.getClickType(e)),{fingerprint:r,selector:s,movements:[i]}}const r=document.elementFromPoint(e.clientX,e.clientY);if(r&&r.getBoundingClientRect){const s=r.getBoundingClientRect(),i=this.tracker.getFingerprint(r),n=e.clientX-(s.x||s.left),o=e.clientY-(s.y||s.top),a=(n/s.width*100).toFixed(4),c=(o/s.height*100).toFixed(4),l=e.pageX||0,h=e.pageY||0,u={relativeX:a,relativeY:c,timestamp:+new Date,pageX:l,pageY:h,type:t},d=nt(r);return this.lastPosition={fp:i,movementData:u,selector:d},{fingerprint:i,selector:d,movements:[u]}}}catch(e){(0,we.A)(e)}}},Performance,Form:Pe,Typing:class{constructor(e){CE2BH.defineProperty(this,"LIMIT_BETWEEN_TYPE_EVENTS",6e4),this.tracker=e,this.tracker.addEventListener("keydown",(0,J.oI)(this,"onKeydown"))}update(){delete this.formEntry}onKeydown(e){this.tracker.onActivity();const t=e.target,r=+new Date;if((0,J.B5)(t,"input, [contenteditable]")&&("INPUT"!==t.tagName||!["submit","reset","button"].some((e=>e===t.type&&t.type.toLowerCase())))&&(this.lastTypedElement!==t||this.lastTypedTime-r>this.LIMIT_BETWEEN_TYPE_EVENTS)){const e=(0,J.B5)(t,"form *"),s=[this.tracker.visitID,e],i=this.tracker.newEvent(CE2.eventTypes.TYPING,{attributes:s});this.tracker.send(i),e&&(this.formEntry=r)}this.lastTypedElement=t,this.lastTypedTime=t}},SessionScroll:class{constructor(e){this.tracker=e,this.scrolls=[],this.calculateInitialScrolls(),this.tracker.addEventListener("scroll",(0,J.oI)(this,"onScroll"),dt),this.tracker.addDiffCallback((0,J.oI)(this,"diff"))}onScroll(e){if(this.tracker.onActivity(),this.overLimit())return;let t=e.target;t===CE2.d&&(t=CE2.d.scrollingElement);const r=e.composed&&e.composedPath();this.bufferScrollFor(t,r)}bufferScrollFor(e,t=null){const r=function(e,t=null){if(!t)return[nt(e)];const r=[[]];for(let e=0;e<t.length;e++){const s=t[e];r[0].push(s),s.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&r.unshift([])}return r.map((e=>nt(e[0])))}(e,t||dt.getComposedPath(e)),s=this.scrollKey(r),i=this.scrolls.find((e=>this.scrollKey(e[0])===s)),n=Date.now(),o=this.recordScrollOfElement(e);if(i){const t=i[1],r=t[t.length-1];n-r[2]>this.tracker.SAMPLE_INTERVAL?t.push(o):(r[0]=e.scrollTop,r[1]=e.scrollLeft)}else this.scrolls.push([r,[o]])}recordScrollOfElement(e){return[e.scrollTop,e.scrollLeft,+new Date]}diff(){try{if(this.scrolls.length>0){const e=[this.tracker.visitID,this.scrolls],t=this.tracker.newEvent(CE2.eventTypes.SESSION_SCROLL,{attributes:e});this.tracker.send(t),this.scrolls=[]}}catch(e){(0,we.A)(e)}}scrollKey(e){return e.join("")}calculateInitialScrolls(){const e=CE2.d.querySelectorAll("html, body, body *");for(let t=0;t<e.length;t++){const r=e[t];(r.scrollTop||r.scrollLeft)&&this.scrolls.push([[nt(r)],[this.recordScrollOfElement(r)]])}this.diff()}overLimit(){const e=this.tracker?.eventHandlers?.scroll;return e?.overLimit()}},QuickBack:class{constructor(e){this.tracker=e,this.isReloadedVisit=CE2.w.performance?.getEntriesByType("navigation").map((e=>e.type)).includes("reload")}update(e,t){if(this.isReloadedVisit)return;const{pathname:r}=CE2.w.location;if(!this.visitPath||t){this.visitPath=r,this.currentVisit=this.getVisitTiming(r)||{};const e=+new Date;if(this.currentVisit&&this.currentVisit.endTime&&this.currentVisit.endTime-e<2e4){const e=[this.tracker.visitID],t=this.tracker.newEvent(CE2.eventTypes.QUICKBACK,{attributes:e});this.tracker.send(t)}this.isReloadedVisit=!1}}unload(){return this.currentVisit&&(this.currentVisit.endTime=+new Date,this.putVisitTiming(this.visitPath,this.currentVisit)),!1}putVisitTiming(e,t){const r=this.getVisitsTimings();r[e]=t,CE2.Native.sessionStorageWrapper.write(ht,CE2.Native.JSON.stringify(r))}getVisitTiming(e){return this.getVisitsTimings()[e]}getVisitsTimings(){return CE2.Native.JSON.parse(CE2.Native.sessionStorageWrapper.read(ht)||"{}")}},Resize:class{constructor(e){this.tracker=e,this.browserSizes=[],this.tracker.addSampleCallback((0,J.oI)(this,"sample")),this.tracker.addDiffCallback((0,J.oI)(this,"diff"))}sample(){try{const e=CE2.w,t=e.innerWidth||e.screen.availWidth,r=e.innerHeight||e.screen.availHeight,{lastBrowserSize:s}=this;if(s&&s[0]===t&&s[1]===r)return;if(ie&&s&&s[0]===t&&s[1]!==r)return;this.lastBrowserSize=[t,r,+new Date],this.browserSizes.push(this.lastBrowserSize)}catch(e){(0,we.A)(e)}}diff(){try{if(this.browserSizes.length>0){const e=[this.tracker.visitID,this.browserSizes],t=this.tracker.newEvent(CE2.eventTypes.RESIZE,{attributes:e});this.tracker.send(t),this.browserSizes=[]}}catch(e){(0,we.A)(e)}}},Activity:class{constructor(e){CE2BH.defineProperty(this,"ACTIVITY_WINDOW",1e4),CE2BH.defineProperty(this,"INACTIVE_TIME_LIMIT",9e4),this.tracker=e,this.trigger()}update(){this.trigger()}trigger(){const e=+new Date;if(this.lastActive){const t=e-this.lastActive;if(t>this.INACTIVE_TIME_LIMIT){const e=[this.tracker.visitID,t],r=this.tracker.newEvent(CE2.eventTypes.INACTIVE,{attributes:e});this.tracker.send(r,{timestamp:this.lastActive})}}const t=this.lastActive&&e-this.lastActive;t&&t<=this.ACTIVITY_WINDOW||(this.lastActive=e,this.tracker.session&&this.tracker.session.alive())}},Visibility:class{constructor(e){this.tracker=e,this.tracker.addEventListener("visibilitychange",(0,J.oI)(this,"onVisibilitychange"))}onVisibilitychange(){if(this.tracker.pageUnloading)return;const e=!document.hidden;if(this.tracker.isDocumentHiddenOnce||(this.tracker.isDocumentHiddenOnce=document.hidden),this.pageVisibility!==e){this.pageVisibility=e;const t=[this.tracker.visitID,e],r=this.tracker.newEvent(CE2.eventTypes.PAGE_VISIBILITY,{attributes:t});this.tracker.send(r),this.tracker.processBuffer({sendBeacon:!0})}}},Metric:class{constructor(e){this.tracker=e,this.tracker.addEventListener(CE2.opera?"unload":"beforeunload",(0,J.oI)(this,"onUnload"))}trigger(e,t){if(e.length>100)throw new Error("Key is too long (max 100)");if((t=Number(t,10))&&Number.isNaN(Number(t)))throw new Error("Value is NaN");const r=[this.tracker.visitID,e,t||""],s=this.tracker.newEvent(CE2.eventTypes.CUSTOM_PERFORMANCE,{attributes:r});this.tracker.send(s)}onUnload(){if(Object.keys(a.metrics).length)for(let e=0,t=Object.keys(a.metrics);e<t.length;e++){const r=t[e];this.trigger(r)}}}}}},e=>{e.O(0,[76],(()=>{return t=8878,e(e.s=t);var t}));var t=e.O(),r=CE2="undefined"==typeof CE2?{}:CE2;for(var s in t)r[s]=t[s];t.__esModule&&Object.defineProperty(r,"__esModule",{value:!0})}]);