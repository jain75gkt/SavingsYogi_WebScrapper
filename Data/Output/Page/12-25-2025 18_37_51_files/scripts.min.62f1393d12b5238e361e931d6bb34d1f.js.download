(function(){window.addEventListener("DOMContentLoaded",function(){var g=document.querySelector(".cdzipinput");if(g){var r=g.querySelector(".label-text"),h=g.querySelector("#zipcode_form"),e=g.querySelector(".error-container"),t=g.querySelector(".zipCodeSubmitBtn"),c=g.querySelector("#zipcode-label"),k=g.querySelector(".input-box"),u=e.querySelector(".valid-zip").textContent,v=e.querySelector(".service-down").textContent,q=e.querySelector(".input-zip-validate").textContent,m={getDependentComponents:function(){return usbUtils.nodeListArray(document.querySelectorAll("[data-zipDependent]"))},
display:function(a){a.style.display="block";a.removeAttribute("aria-hidden")},hide:function(a){a.style.display="none";a.setAttribute("aria-hidden","true")},inputZipContentToggle:function(a,b){b=void 0===b?!1:b;a.forEach(function(a){b?m.display(a):m.hide(a)})},removeUrlParam:function(a){var b=new URLSearchParams(window.location.search);b["delete"](a);history.replaceState&&history.replaceState(null,"",window.location.protocol+"//"+window.location.host+window.location.pathname+(0<b.toString().length?
"?"+b.toString():"")+window.location.hash)}},n={setCookie:function(a,b,l,d){b=b||"";l=l||100;if("string"===typeof a&&""!==b)if(window.navigator.cookieEnabled){var c=new Date;c.setTime(c.getTime()+864E5*l);l="expires\x3d"+c.toUTCString();sessionStorage.removeItem(a);document.cookie=a+"\x3d"+b+";"+l+";"+(d?"max-age\x3d"+d+";":"")+"path\x3d/"}else sessionStorage.setItem(a,b)},getCookie:function(a){if("string"===typeof a)return window.navigator.cookieEnabled?(sessionStorage.removeItem(a),a=((new RegExp((a||
"\x3d")+"\x3d(.*?); ","gm")).exec(document.cookie+"; ")||["",null])[1]||""):a=sessionStorage.getItem(a)||"",a}},p={uri:"/svt/usbank/zipcodemapping.ZipCode-__zip__.json",stepGetZip:function(a){5==a.length&&$.ajax({type:"GET",url:p.uri.replace("__zip__",a),dataType:"json",success:function(a){p.stepEvaluateZipQuery(a)},error:function(){f.zipError("zipcode_service_error")}})},stepEvaluateZipQuery:function(a){a.ZipCodeMappingVO&&(n.setCookie("zipcode",a.ZipCodeMappingVO.zipCode),location.reload());if(a.Error&&
("EA007"==$.trim(a.Error.code)||"EA006"==$.trim(a.Error.code)))return n.setCookie("zipcode","",0),n.setCookie("state_code","",0),f.zipError("zipcode_service_error")}},f={validateForm:function(){f.zipClearError();var a=c&&c.value||null;if(null==a)return f.zipError("empty_field"),!1;if(a&&5!=a.length)return f.zipError("wrong_length"),!1;p.stepGetZip(c.value);return!0},zipError:function(a){f.zipClearError();var b=e.querySelector(".error-message"),c="";if(null!==e)switch(a){case "empty_field":c=q;break;
case "wrong_length":c=u;break;case "zipcode_service_error":c=v;break;default:c=q}a=document.createElement("p");a.className="error";b.appendChild(a);a.textContent=c;e.parentNode.parentNode.classList.add("error")},zipClearError:function(){var a=e.querySelector(".error-message p");null!=a&&null!=e&&(a.remove(),e.parentNode.parentNode.classList.remove("error"))}},d={formElementFocus:function(a){a.preventDefault();h.parentElement.classList.add("active-border");h.classList.add("active");h.classList.add("focused");
c.focus();c.setSelectionRange(c.value.length,c.value.length);return!1},formElementState:function(a){a.preventDefault();h.parentElement.classList.remove("active-border");""!=c.value&&null!=c.value||h.classList.remove("active");h.classList.remove("focused");return!1},formKeyUp:function(){var a=c.value.trim();a=a.replace(/\D/g,"");c.value=a;return!1},formKeyDown:function(a){if(13==a.keyCode)return a.preventDefault(),a.stopImmediatePropagation(),f.validateForm(),!1},listenTo:function(a,b,c){a.attachEvent?
a.attachEvent("on"+b,c):a.addEventListener(b,c,!0)},formElementHandler:function(){d.listenTo(k,"focus",d.formElementFocus);d.listenTo(k,"blur",d.formElementState);d.listenTo(k,"change",d.formElementState);d.listenTo(k,"keydown",d.formKeyDown);d.listenTo(k,"keyup",d.formKeyUp);d.listenTo(r,"click",d.formElementFocus)}};(function(){var a=(new URLSearchParams(window.location.search)).get("zipcode");a&&(n.setCookie("zipcode",a),m.removeUrlParam("zipcode"));var b=n.getCookie("zipcode");if(a=b&&void 0!=
b&&!isNaN(parseInt(b))&&5==b.length)h.classList.add("active"),c.value=b;b=m.getDependentComponents();m.inputZipContentToggle(b,a);d.formElementHandler();t.addEventListener("click",f.validateForm)})()}})})();