//~~tv:20010.20140827
//~~tc: Tealium Custom Container

/*
  Tealium Custom Container Notes:
  - Add sending code between "Start Tag Sending Code" and "End Tag Sending Code".
  - Add JavaScript tag library code between "Start Tag Library Code" and "End Tag Library Code".
  - Add JavaScript code only, do not add HTML code in this file.
  - Remove any <script> and </script> tags from the code you place in this file.

  Loading external JavaScript files (Loader):
  - If you need to load an additional external JavaScript file, un-comment the singe-line JavaScript comments ("//") within the following Loader sections near the bottom of this file:
      - "Start Loader Function Call"
      - "End Loader Function Call"
      - "Start Loader Callback Function"
      - "End Loader Callback Function"
  - After un-commenting, insert the path to the external JavaScript file you want to load.
  - Finally, within the Loader callback function, insert the JavaScript code that should run after the external JavaScript file has loaded.
*/

/* Start Tag Library Code */
/* End Tag Library Code */

//tealium universal tag - utag.sender.custom_container ut4.0.202511210110, Copyright 2025 Tealium.com Inc. All Rights Reserved.
try {
  (function (id, loader) {
    var u = {};
    utag.o[loader].sender[id] = u;

    // Start Tealium loader 4.32
    // Please do not modify
    if (utag === undefined) { utag = {}; } if (utag.ut === undefined) { utag.ut = {}; } if (utag.ut.loader === undefined) { u.loader = function (o) { var a, b, c, l; a = document; if (o.type === "iframe") { b = a.createElement("iframe"); b.setAttribute("height", "1"); b.setAttribute("width", "1"); b.setAttribute("style", "display:none"); b.setAttribute("src", o.src); } else if (o.type === "img") { utag.DB("Attach img: " + o.src); b = new Image(); b.src = o.src; return; } else { b = a.createElement("script"); b.language = "javascript"; b.type = "text/javascript"; b.async = 1; b.charset = "utf-8"; b.src = o.src; } if (o.id) { b.id = o.id; } if (typeof o.cb === "function") { if (b.addEventListener) { b.addEventListener("load", function () { o.cb(); }, false); } else { b.onreadystatechange = function () { if (this.readyState === "complete" || this.readyState === "loaded") { this.onreadystatechange = null; o.cb(); } }; } } l = o.loc || "head"; c = a.getElementsByTagName(l)[0]; if (c) { utag.DB("Attach to " + l + ": " + o.src); if (l === "script") { c.parentNode.insertBefore(b, c); } else { c.appendChild(b); } } }; } else { u.loader = utag.ut.loader; }
    // End Tealium loader

    u.ev = {'view' : 1};

    u.initialized = false;

      u.map={};
  u.extend=[function(a,b){ try{ if(1){
/******/ (function() { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/cometd/cometd.js":
/*!***************************************!*\
  !*** ./node_modules/cometd/cometd.js ***!
  \***************************************/
/***/ (function(module, exports) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
/*
 * Copyright (c) 2008-2020 the original author or authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/* CometD Version 4.0.9 */

(function (root, factory) {
  if (( false ? 0 : _typeof(exports)) === 'object') {
    // CommonJS.
    module.exports = factory();
  } else if (true) {
    // AMD.
    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
		__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
		(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
		__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
  } else {}
})(this, function () {
  /**
   * Browsers may throttle the Window scheduler,
   * so we may replace it with a Worker scheduler.
   */
  var Scheduler = function Scheduler() {
    var _ids = 0;
    var _tasks = {};
    this.register = function (funktion) {
      var id = ++_ids;
      _tasks[id] = funktion;
      return id;
    };
    this.unregister = function (id) {
      var funktion = _tasks[id];
      delete _tasks[id];
      return funktion;
    };
    this.setTimeout = function (funktion, delay) {
      return window.setTimeout(funktion, delay);
    };
    this.clearTimeout = function (id) {
      window.clearTimeout(id);
    };
  };

  /**
   * The scheduler code that will run in the Worker.
   * Workers have a built-in `self` variable similar to `window`.
   */
  function WorkerScheduler() {
    var _tasks = {};
    self.onmessage = function (e) {
      var cmd = e.data;
      var id = _tasks[cmd.id];
      switch (cmd.type) {
        case 'setTimeout':
          _tasks[cmd.id] = self.setTimeout(function () {
            delete _tasks[cmd.id];
            self.postMessage({
              id: cmd.id
            });
          }, cmd.delay);
          break;
        case 'clearTimeout':
          delete _tasks[cmd.id];
          if (id) {
            self.clearTimeout(id);
          }
          break;
        default:
          throw 'Unknown command ' + cmd.type;
      }
    };
  }

  /**
   * Utility functions.
   */
  var Utils = {
    isString: function isString(value) {
      if (value === undefined || value === null) {
        return false;
      }
      return typeof value === 'string' || value instanceof String;
    },
    isArray: function isArray(value) {
      if (value === undefined || value === null) {
        return false;
      }
      return value instanceof Array;
    },
    /**
     * Returns whether the given element is contained into the given array.
     * @param element the element to check presence for
     * @param array the array to check for the element presence
     * @return the index of the element, if present, or a negative index if the element is not present
     */
    inArray: function inArray(element, array) {
      for (var i = 0; i < array.length; ++i) {
        if (element === array[i]) {
          return i;
        }
      }
      return -1;
    }
  };

  /**
   * A registry for transports used by the CometD object.
   */
  var TransportRegistry = function TransportRegistry() {
    var _types = [];
    var _transports = {};
    this.getTransportTypes = function () {
      return _types.slice(0);
    };
    this.findTransportTypes = function (version, crossDomain, url) {
      var result = [];
      for (var i = 0; i < _types.length; ++i) {
        var type = _types[i];
        if (_transports[type].accept(version, crossDomain, url) === true) {
          result.push(type);
        }
      }
      return result;
    };
    this.negotiateTransport = function (types, version, crossDomain, url) {
      for (var i = 0; i < _types.length; ++i) {
        var type = _types[i];
        for (var j = 0; j < types.length; ++j) {
          if (type === types[j]) {
            var transport = _transports[type];
            if (transport.accept(version, crossDomain, url) === true) {
              return transport;
            }
          }
        }
      }
      return null;
    };
    this.add = function (type, transport, index) {
      var existing = false;
      for (var i = 0; i < _types.length; ++i) {
        if (_types[i] === type) {
          existing = true;
          break;
        }
      }
      if (!existing) {
        if (typeof index !== 'number') {
          _types.push(type);
        } else {
          _types.splice(index, 0, type);
        }
        _transports[type] = transport;
      }
      return !existing;
    };
    this.find = function (type) {
      for (var i = 0; i < _types.length; ++i) {
        if (_types[i] === type) {
          return _transports[type];
        }
      }
      return null;
    };
    this.remove = function (type) {
      for (var i = 0; i < _types.length; ++i) {
        if (_types[i] === type) {
          _types.splice(i, 1);
          var transport = _transports[type];
          delete _transports[type];
          return transport;
        }
      }
      return null;
    };
    this.clear = function () {
      _types = [];
      _transports = {};
    };
    this.reset = function (init) {
      for (var i = 0; i < _types.length; ++i) {
        _transports[_types[i]].reset(init);
      }
    };
  };

  /**
   * Base object with the common functionality for transports.
   */
  var Transport = function Transport() {
    var _type;
    var _cometd;
    var _url;

    /**
     * Function invoked just after a transport has been successfully registered.
     * @param type the type of transport (for example 'long-polling')
     * @param cometd the cometd object this transport has been registered to
     * @see #unregistered()
     */
    this.registered = function (type, cometd) {
      _type = type;
      _cometd = cometd;
    };

    /**
     * Function invoked just after a transport has been successfully unregistered.
     * @see #registered(type, cometd)
     */
    this.unregistered = function () {
      _type = null;
      _cometd = null;
    };
    this._debug = function () {
      _cometd._debug.apply(_cometd, arguments);
    };
    this._mixin = function () {
      return _cometd._mixin.apply(_cometd, arguments);
    };
    this.getConfiguration = function () {
      return _cometd.getConfiguration();
    };
    this.getAdvice = function () {
      return _cometd.getAdvice();
    };
    this.setTimeout = function (funktion, delay) {
      return _cometd.setTimeout(funktion, delay);
    };
    this.clearTimeout = function (id) {
      _cometd.clearTimeout(id);
    };

    /**
     * Converts the given response into an array of bayeux messages
     * @param response the response to convert
     * @return an array of bayeux messages obtained by converting the response
     */
    this.convertToMessages = function (response) {
      if (Utils.isString(response)) {
        try {
          return JSON.parse(response);
        } catch (x) {
          this._debug('Could not convert to JSON the following string', '"' + response + '"');
          throw x;
        }
      }
      if (Utils.isArray(response)) {
        return response;
      }
      if (response === undefined || response === null) {
        return [];
      }
      if (response instanceof Object) {
        return [response];
      }
      throw 'Conversion Error ' + response + ', typeof ' + _typeof(response);
    };

    /**
     * Returns whether this transport can work for the given version and cross domain communication case.
     * @param version a string indicating the transport version
     * @param crossDomain a boolean indicating whether the communication is cross domain
     * @param url the URL to connect to
     * @return true if this transport can work for the given version and cross domain communication case,
     * false otherwise
     */
    this.accept = function (version, crossDomain, url) {
      throw 'Abstract';
    };

    /**
     * Returns the type of this transport.
     * @see #registered(type, cometd)
     */
    this.getType = function () {
      return _type;
    };
    this.getURL = function () {
      return _url;
    };
    this.setURL = function (url) {
      _url = url;
    };
    this.send = function (envelope, metaConnect) {
      throw 'Abstract';
    };
    this.reset = function (init) {
      this._debug('Transport', _type, 'reset', init ? 'initial' : 'retry');
    };
    this.abort = function () {
      this._debug('Transport', _type, 'aborted');
    };
    this.toString = function () {
      return this.getType();
    };
  };
  Transport.derive = function (baseObject) {
    function F() {}
    F.prototype = baseObject;
    return new F();
  };

  /**
   * Base object with the common functionality for transports based on requests.
   * The key responsibility is to allow at most 2 outstanding requests to the server,
   * to avoid that requests are sent behind a long poll.
   * To achieve this, we have one reserved request for the long poll, and all other
   * requests are serialized one after the other.
   */
  var RequestTransport = function RequestTransport() {
    var _super = new Transport();
    var _self = Transport.derive(_super);
    var _requestIds = 0;
    var _metaConnectRequest = null;
    var _requests = [];
    var _envelopes = [];
    function _coalesceEnvelopes(envelope) {
      while (_envelopes.length > 0) {
        var envelopeAndRequest = _envelopes[0];
        var newEnvelope = envelopeAndRequest[0];
        var newRequest = envelopeAndRequest[1];
        if (newEnvelope.url === envelope.url && newEnvelope.sync === envelope.sync) {
          _envelopes.shift();
          envelope.messages = envelope.messages.concat(newEnvelope.messages);
          this._debug('Coalesced', newEnvelope.messages.length, 'messages from request', newRequest.id);
          continue;
        }
        break;
      }
    }
    function _transportSend(envelope, request) {
      this.transportSend(envelope, request);
      request.expired = false;
      if (!envelope.sync) {
        var maxDelay = this.getConfiguration().maxNetworkDelay;
        var delay = maxDelay;
        if (request.metaConnect === true) {
          delay += this.getAdvice().timeout;
        }
        this._debug('Transport', this.getType(), 'waiting at most', delay, 'ms for the response, maxNetworkDelay', maxDelay);
        var self = this;
        request.timeout = this.setTimeout(function () {
          request.expired = true;
          var errorMessage = 'Request ' + request.id + ' of transport ' + self.getType() + ' exceeded ' + delay + ' ms max network delay';
          var failure = {
            reason: errorMessage
          };
          var xhr = request.xhr;
          failure.httpCode = self.xhrStatus(xhr);
          self.abortXHR(xhr);
          self._debug(errorMessage);
          self.complete(request, false, request.metaConnect);
          envelope.onFailure(xhr, envelope.messages, failure);
        }, delay);
      }
    }
    function _queueSend(envelope) {
      var requestId = ++_requestIds;
      var request = {
        id: requestId,
        metaConnect: false,
        envelope: envelope
      };

      // Consider the /meta/connect requests which should always be present.
      if (_requests.length < this.getConfiguration().maxConnections - 1) {
        _requests.push(request);
        _transportSend.call(this, envelope, request);
      } else {
        this._debug('Transport', this.getType(), 'queueing request', requestId, 'envelope', envelope);
        _envelopes.push([envelope, request]);
      }
    }
    function _metaConnectComplete(request) {
      var requestId = request.id;
      this._debug('Transport', this.getType(), '/meta/connect complete, request', requestId);
      if (_metaConnectRequest !== null && _metaConnectRequest.id !== requestId) {
        throw '/meta/connect request mismatch, completing request ' + requestId;
      }
      _metaConnectRequest = null;
    }
    function _complete(request, success) {
      var index = Utils.inArray(request, _requests);
      // The index can be negative if the request has been aborted
      if (index >= 0) {
        _requests.splice(index, 1);
      }
      if (_envelopes.length > 0) {
        var envelopeAndRequest = _envelopes.shift();
        var nextEnvelope = envelopeAndRequest[0];
        var nextRequest = envelopeAndRequest[1];
        this._debug('Transport dequeued request', nextRequest.id);
        if (success) {
          if (this.getConfiguration().autoBatch) {
            _coalesceEnvelopes.call(this, nextEnvelope);
          }
          _queueSend.call(this, nextEnvelope);
          this._debug('Transport completed request', request.id, nextEnvelope);
        } else {
          // Keep the semantic of calling response callbacks asynchronously after the request
          var self = this;
          this.setTimeout(function () {
            self.complete(nextRequest, false, nextRequest.metaConnect);
            var failure = {
              reason: 'Previous request failed'
            };
            var xhr = nextRequest.xhr;
            failure.httpCode = self.xhrStatus(xhr);
            nextEnvelope.onFailure(xhr, nextEnvelope.messages, failure);
          }, 0);
        }
      }
    }
    _self.complete = function (request, success, metaConnect) {
      if (metaConnect) {
        _metaConnectComplete.call(this, request);
      } else {
        _complete.call(this, request, success);
      }
    };

    /**
     * Performs the actual send depending on the transport type details.
     * @param envelope the envelope to send
     * @param request the request information
     */
    _self.transportSend = function (envelope, request) {
      throw 'Abstract';
    };
    _self.transportSuccess = function (envelope, request, responses) {
      if (!request.expired) {
        this.clearTimeout(request.timeout);
        this.complete(request, true, request.metaConnect);
        if (responses && responses.length > 0) {
          envelope.onSuccess(responses);
        } else {
          envelope.onFailure(request.xhr, envelope.messages, {
            httpCode: 204
          });
        }
      }
    };
    _self.transportFailure = function (envelope, request, failure) {
      if (!request.expired) {
        this.clearTimeout(request.timeout);
        this.complete(request, false, request.metaConnect);
        envelope.onFailure(request.xhr, envelope.messages, failure);
      }
    };
    function _metaConnectSend(envelope) {
      if (_metaConnectRequest !== null) {
        throw 'Concurrent /meta/connect requests not allowed, request id=' + _metaConnectRequest.id + ' not yet completed';
      }
      var requestId = ++_requestIds;
      this._debug('Transport', this.getType(), '/meta/connect send, request', requestId, 'envelope', envelope);
      var request = {
        id: requestId,
        metaConnect: true,
        envelope: envelope
      };
      _transportSend.call(this, envelope, request);
      _metaConnectRequest = request;
    }
    _self.send = function (envelope, metaConnect) {
      if (metaConnect) {
        _metaConnectSend.call(this, envelope);
      } else {
        _queueSend.call(this, envelope);
      }
    };
    _self.abort = function () {
      _super.abort();
      for (var i = 0; i < _requests.length; ++i) {
        var request = _requests[i];
        if (request) {
          this._debug('Aborting request', request);
          if (!this.abortXHR(request.xhr)) {
            this.transportFailure(request.envelope, request, {
              reason: 'abort'
            });
          }
        }
      }
      var metaConnectRequest = _metaConnectRequest;
      if (metaConnectRequest) {
        this._debug('Aborting /meta/connect request', metaConnectRequest);
        if (!this.abortXHR(metaConnectRequest.xhr)) {
          this.transportFailure(metaConnectRequest.envelope, metaConnectRequest, {
            reason: 'abort'
          });
        }
      }
      this.reset(true);
    };
    _self.reset = function (init) {
      _super.reset(init);
      _metaConnectRequest = null;
      _requests = [];
      _envelopes = [];
    };
    _self.abortXHR = function (xhr) {
      if (xhr) {
        try {
          var state = xhr.readyState;
          xhr.abort();
          return state !== window.XMLHttpRequest.UNSENT;
        } catch (x) {
          this._debug(x);
        }
      }
      return false;
    };
    _self.xhrStatus = function (xhr) {
      if (xhr) {
        try {
          return xhr.status;
        } catch (x) {
          this._debug(x);
        }
      }
      return -1;
    };
    return _self;
  };
  var LongPollingTransport = function LongPollingTransport() {
    var _super = new RequestTransport();
    var _self = Transport.derive(_super);
    // By default, support cross domain
    var _supportsCrossDomain = true;
    _self.accept = function (version, crossDomain, url) {
      return _supportsCrossDomain || !crossDomain;
    };
    _self.newXMLHttpRequest = function () {
      return new window.XMLHttpRequest();
    };
    function _copyContext(xhr) {
      try {
        // Copy external context, to be used in other environments.
        xhr.context = _self.context;
      } catch (e) {
        // May happen if XHR is wrapped by Object.seal(),
        // Object.freeze(), or Object.preventExtensions().
        this._debug('Could not copy transport context into XHR', e);
      }
    }
    _self.xhrSend = function (packet) {
      var xhr = _self.newXMLHttpRequest();
      _copyContext(xhr);
      xhr.withCredentials = true;
      xhr.open('POST', packet.url, packet.sync !== true);
      var headers = packet.headers;
      if (headers) {
        for (var headerName in headers) {
          if (headers.hasOwnProperty(headerName)) {
            xhr.setRequestHeader(headerName, headers[headerName]);
          }
        }
      }
      xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');
      xhr.onload = function () {
        if (xhr.status === 200) {
          packet.onSuccess(xhr.responseText);
        } else {
          packet.onError(xhr.statusText);
        }
      };
      xhr.onabort = xhr.onerror = function () {
        packet.onError(xhr.statusText);
      };
      xhr.send(packet.body);
      return xhr;
    };
    _self.transportSend = function (envelope, request) {
      this._debug('Transport', this.getType(), 'sending request', request.id, 'envelope', envelope);
      var self = this;
      try {
        var sameStack = true;
        request.xhr = this.xhrSend({
          transport: this,
          url: envelope.url,
          sync: envelope.sync,
          headers: this.getConfiguration().requestHeaders,
          body: JSON.stringify(envelope.messages),
          onSuccess: function onSuccess(response) {
            self._debug('Transport', self.getType(), 'received response', response);
            var success = false;
            try {
              var received = self.convertToMessages(response);
              if (received.length === 0) {
                _supportsCrossDomain = false;
                self.transportFailure(envelope, request, {
                  httpCode: 204
                });
              } else {
                success = true;
                self.transportSuccess(envelope, request, received);
              }
            } catch (x) {
              self._debug(x);
              if (!success) {
                _supportsCrossDomain = false;
                var failure = {
                  exception: x
                };
                failure.httpCode = self.xhrStatus(request.xhr);
                self.transportFailure(envelope, request, failure);
              }
            }
          },
          onError: function onError(reason, exception) {
            self._debug('Transport', self.getType(), 'received error', reason, exception);
            _supportsCrossDomain = false;
            var failure = {
              reason: reason,
              exception: exception
            };
            failure.httpCode = self.xhrStatus(request.xhr);
            if (sameStack) {
              // Keep the semantic of calling response callbacks asynchronously after the request
              self.setTimeout(function () {
                self.transportFailure(envelope, request, failure);
              }, 0);
            } else {
              self.transportFailure(envelope, request, failure);
            }
          }
        });
        sameStack = false;
      } catch (x) {
        _supportsCrossDomain = false;
        // Keep the semantic of calling response callbacks asynchronously after the request
        this.setTimeout(function () {
          self.transportFailure(envelope, request, {
            exception: x
          });
        }, 0);
      }
    };
    _self.reset = function (init) {
      _super.reset(init);
      _supportsCrossDomain = true;
    };
    return _self;
  };
  var CallbackPollingTransport = function CallbackPollingTransport() {
    var _super = new RequestTransport();
    var _self = Transport.derive(_super);
    var jsonp = 0;
    _self.accept = function (version, crossDomain, url) {
      return true;
    };
    _self.jsonpSend = function (packet) {
      var head = document.getElementsByTagName('head')[0];
      var script = document.createElement('script');
      var callbackName = '_cometd_jsonp_' + jsonp++;
      window[callbackName] = function (responseText) {
        head.removeChild(script);
        delete window[callbackName];
        packet.onSuccess(responseText);
      };
      var url = packet.url;
      url += url.indexOf('?') < 0 ? '?' : '&';
      url += 'jsonp=' + callbackName;
      url += '&message=' + encodeURIComponent(packet.body);
      script.src = url;
      script.async = packet.sync !== true;
      script.type = 'application/javascript';
      script.onerror = function (e) {
        packet.onError('jsonp ' + e.type);
      };
      head.appendChild(script);
    };
    function _failTransportFn(envelope, request, x) {
      var self = this;
      return function () {
        self.transportFailure(envelope, request, 'error', x);
      };
    }
    _self.transportSend = function (envelope, request) {
      var self = this;

      // Microsoft Internet Explorer has a 2083 URL max length
      // We must ensure that we stay within that length
      var start = 0;
      var length = envelope.messages.length;
      var lengths = [];
      while (length > 0) {
        // Encode the messages because all brackets, quotes, commas, colons, etc
        // present in the JSON will be URL encoded, taking many more characters
        var json = JSON.stringify(envelope.messages.slice(start, start + length));
        var urlLength = envelope.url.length + encodeURI(json).length;
        var maxLength = this.getConfiguration().maxURILength;
        if (urlLength > maxLength) {
          if (length === 1) {
            var x = 'Bayeux message too big (' + urlLength + ' bytes, max is ' + maxLength + ') ' + 'for transport ' + this.getType();
            // Keep the semantic of calling response callbacks asynchronously after the request
            this.setTimeout(_failTransportFn.call(this, envelope, request, x), 0);
            return;
          }
          --length;
          continue;
        }
        lengths.push(length);
        start += length;
        length = envelope.messages.length - start;
      }

      // Here we are sure that the messages can be sent within the URL limit

      var envelopeToSend = envelope;
      if (lengths.length > 1) {
        var begin = 0;
        var end = lengths[0];
        this._debug('Transport', this.getType(), 'split', envelope.messages.length, 'messages into', lengths.join(' + '));
        envelopeToSend = this._mixin(false, {}, envelope);
        envelopeToSend.messages = envelope.messages.slice(begin, end);
        envelopeToSend.onSuccess = envelope.onSuccess;
        envelopeToSend.onFailure = envelope.onFailure;
        for (var i = 1; i < lengths.length; ++i) {
          var nextEnvelope = this._mixin(false, {}, envelope);
          begin = end;
          end += lengths[i];
          nextEnvelope.messages = envelope.messages.slice(begin, end);
          nextEnvelope.onSuccess = envelope.onSuccess;
          nextEnvelope.onFailure = envelope.onFailure;
          this.send(nextEnvelope, request.metaConnect);
        }
      }
      this._debug('Transport', this.getType(), 'sending request', request.id, 'envelope', envelopeToSend);
      try {
        var sameStack = true;
        this.jsonpSend({
          transport: this,
          url: envelopeToSend.url,
          sync: envelopeToSend.sync,
          headers: this.getConfiguration().requestHeaders,
          body: JSON.stringify(envelopeToSend.messages),
          onSuccess: function onSuccess(responses) {
            var success = false;
            try {
              var received = self.convertToMessages(responses);
              if (received.length === 0) {
                self.transportFailure(envelopeToSend, request, {
                  httpCode: 204
                });
              } else {
                success = true;
                self.transportSuccess(envelopeToSend, request, received);
              }
            } catch (x) {
              self._debug(x);
              if (!success) {
                self.transportFailure(envelopeToSend, request, {
                  exception: x
                });
              }
            }
          },
          onError: function onError(reason, exception) {
            var failure = {
              reason: reason,
              exception: exception
            };
            if (sameStack) {
              // Keep the semantic of calling response callbacks asynchronously after the request
              self.setTimeout(function () {
                self.transportFailure(envelopeToSend, request, failure);
              }, 0);
            } else {
              self.transportFailure(envelopeToSend, request, failure);
            }
          }
        });
        sameStack = false;
      } catch (xx) {
        // Keep the semantic of calling response callbacks asynchronously after the request
        this.setTimeout(function () {
          self.transportFailure(envelopeToSend, request, {
            exception: xx
          });
        }, 0);
      }
    };
    return _self;
  };
  var WebSocketTransport = function WebSocketTransport() {
    var _super = new Transport();
    var _self = Transport.derive(_super);
    var _cometd;
    // By default WebSocket is supported
    var _webSocketSupported = true;
    // Whether we were able to establish a WebSocket connection
    var _webSocketConnected = false;
    var _stickyReconnect = true;
    // The context contains the envelopes that have been sent
    // and the timeouts for the messages that have been sent.
    var _context = null;
    var _connecting = null;
    var _connected = false;
    var _successCallback = null;
    _self.reset = function (init) {
      _super.reset(init);
      _webSocketSupported = true;
      if (init) {
        _webSocketConnected = false;
      }
      _stickyReconnect = true;
      _context = null;
      _connecting = null;
      _connected = false;
    };
    function _forceClose(context, event) {
      if (context) {
        this.webSocketClose(context, event.code, event.reason);
        // Force immediate failure of pending messages to trigger reconnect.
        // This is needed because the server may not reply to our close()
        // and therefore the onclose function is never called.
        this.onClose(context, event);
      }
    }
    function _sameContext(context) {
      return context === _connecting || context === _context;
    }
    function _storeEnvelope(context, envelope, metaConnect) {
      var messageIds = [];
      for (var i = 0; i < envelope.messages.length; ++i) {
        var message = envelope.messages[i];
        if (message.id) {
          messageIds.push(message.id);
        }
      }
      context.envelopes[messageIds.join(',')] = [envelope, metaConnect];
      this._debug('Transport', this.getType(), 'stored envelope, envelopes', context.envelopes);
    }
    function _websocketConnect(context) {
      // We may have multiple attempts to open a WebSocket
      // connection, for example a /meta/connect request that
      // may take time, along with a user-triggered publish.
      // Early return if we are already connecting.
      if (_connecting) {
        return;
      }

      // Mangle the URL, changing the scheme from 'http' to 'ws'.
      var url = _cometd.getURL().replace(/^http/, 'ws');
      this._debug('Transport', this.getType(), 'connecting to URL', url);
      try {
        var protocol = _cometd.getConfiguration().protocol;
        context.webSocket = protocol ? new window.WebSocket(url, protocol) : new window.WebSocket(url);
        _connecting = context;
      } catch (x) {
        _webSocketSupported = false;
        this._debug('Exception while creating WebSocket object', x);
        throw x;
      }

      // By default use sticky reconnects.
      _stickyReconnect = _cometd.getConfiguration().stickyReconnect !== false;
      var self = this;
      var connectTimeout = _cometd.getConfiguration().connectTimeout;
      if (connectTimeout > 0) {
        context.connectTimer = this.setTimeout(function () {
          _cometd._debug('Transport', self.getType(), 'timed out while connecting to URL', url, ':', connectTimeout, 'ms');
          // The connection was not opened, close anyway.
          _forceClose.call(self, context, {
            code: 1000,
            reason: 'Connect Timeout'
          });
        }, connectTimeout);
      }
      var onopen = function onopen() {
        _cometd._debug('WebSocket onopen', context);
        if (context.connectTimer) {
          self.clearTimeout(context.connectTimer);
        }
        if (_sameContext(context)) {
          _connecting = null;
          _context = context;
          _webSocketConnected = true;
          self.onOpen(context);
        } else {
          // We have a valid connection already, close this one.
          _cometd._warn('Closing extra WebSocket connection', this, 'active connection', _context);
          _forceClose.call(self, context, {
            code: 1000,
            reason: 'Extra Connection'
          });
        }
      };

      // This callback is invoked when the server sends the close frame.
      // The close frame for a connection may arrive *after* another
      // connection has been opened, so we must make sure that actions
      // are performed only if it's the same connection.
      var onclose = function onclose(event) {
        event = event || {
          code: 1000
        };
        _cometd._debug('WebSocket onclose', context, event, 'connecting', _connecting, 'current', _context);
        if (context.connectTimer) {
          self.clearTimeout(context.connectTimer);
        }
        self.onClose(context, event);
      };
      var onmessage = function onmessage(wsMessage) {
        _cometd._debug('WebSocket onmessage', wsMessage, context);
        self.onMessage(context, wsMessage);
      };
      context.webSocket.onopen = onopen;
      context.webSocket.onclose = onclose;
      context.webSocket.onerror = function () {
        // Clients should call onclose(), but if they do not we do it here for safety.
        onclose({
          code: 1000,
          reason: 'Error'
        });
      };
      context.webSocket.onmessage = onmessage;
      this._debug('Transport', this.getType(), 'configured callbacks on', context);
    }
    function _webSocketSend(context, envelope, metaConnect) {
      var json = JSON.stringify(envelope.messages);
      context.webSocket.send(json);
      this._debug('Transport', this.getType(), 'sent', envelope, '/meta/connect =', metaConnect);

      // Manage the timeout waiting for the response.
      var maxDelay = this.getConfiguration().maxNetworkDelay;
      var delay = maxDelay;
      if (metaConnect) {
        delay += this.getAdvice().timeout;
        _connected = true;
      }
      var self = this;
      var messageIds = [];
      for (var i = 0; i < envelope.messages.length; ++i) {
        (function () {
          var message = envelope.messages[i];
          if (message.id) {
            messageIds.push(message.id);
            context.timeouts[message.id] = self.setTimeout(function () {
              _cometd._debug('Transport', self.getType(), 'timing out message', message.id, 'after', delay, 'on', context);
              _forceClose.call(self, context, {
                code: 1000,
                reason: 'Message Timeout'
              });
            }, delay);
          }
        })();
      }
      this._debug('Transport', this.getType(), 'waiting at most', delay, 'ms for messages', messageIds, 'maxNetworkDelay', maxDelay, ', timeouts:', context.timeouts);
    }
    _self._notifySuccess = function (fn, messages) {
      fn.call(this, messages);
    };
    _self._notifyFailure = function (fn, context, messages, failure) {
      fn.call(this, context, messages, failure);
    };
    function _send(context, envelope, metaConnect) {
      try {
        if (context === null) {
          context = _connecting || {
            envelopes: {},
            timeouts: {}
          };
          _storeEnvelope.call(this, context, envelope, metaConnect);
          _websocketConnect.call(this, context);
        } else {
          _storeEnvelope.call(this, context, envelope, metaConnect);
          _webSocketSend.call(this, context, envelope, metaConnect);
        }
      } catch (x) {
        // Keep the semantic of calling response callbacks asynchronously after the request.
        var self = this;
        this.setTimeout(function () {
          _forceClose.call(self, context, {
            code: 1000,
            reason: 'Exception',
            exception: x
          });
        }, 0);
      }
    }
    _self.onOpen = function (context) {
      var envelopes = context.envelopes;
      this._debug('Transport', this.getType(), 'opened', context, 'pending messages', envelopes);
      for (var key in envelopes) {
        if (envelopes.hasOwnProperty(key)) {
          var element = envelopes[key];
          var envelope = element[0];
          var metaConnect = element[1];
          // Store the success callback, which is independent from the envelope,
          // so that it can be used to notify arrival of messages.
          _successCallback = envelope.onSuccess;
          _webSocketSend.call(this, context, envelope, metaConnect);
        }
      }
    };
    _self.onMessage = function (context, wsMessage) {
      this._debug('Transport', this.getType(), 'received websocket message', wsMessage, context);
      var close = false;
      var messages = this.convertToMessages(wsMessage.data);
      var messageIds = [];
      for (var i = 0; i < messages.length; ++i) {
        var message = messages[i];

        // Detect if the message is a response to a request we made.
        // If it's a meta message, for sure it's a response; otherwise it's
        // a publish message and publish responses don't have the data field.
        if (/^\/meta\//.test(message.channel) || message.data === undefined) {
          if (message.id) {
            messageIds.push(message.id);
            var timeout = context.timeouts[message.id];
            if (timeout) {
              this.clearTimeout(timeout);
              delete context.timeouts[message.id];
              this._debug('Transport', this.getType(), 'removed timeout for message', message.id, ', timeouts', context.timeouts);
            }
          }
        }
        if ('/meta/connect' === message.channel) {
          _connected = false;
        }
        if ('/meta/disconnect' === message.channel && !_connected) {
          close = true;
        }
      }

      // Remove the envelope corresponding to the messages.
      var removed = false;
      var envelopes = context.envelopes;
      for (var j = 0; j < messageIds.length; ++j) {
        var id = messageIds[j];
        for (var key in envelopes) {
          if (envelopes.hasOwnProperty(key)) {
            var ids = key.split(',');
            var index = Utils.inArray(id, ids);
            if (index >= 0) {
              removed = true;
              ids.splice(index, 1);
              var envelope = envelopes[key][0];
              var metaConnect = envelopes[key][1];
              delete envelopes[key];
              if (ids.length > 0) {
                envelopes[ids.join(',')] = [envelope, metaConnect];
              }
              break;
            }
          }
        }
      }
      if (removed) {
        this._debug('Transport', this.getType(), 'removed envelope, envelopes', envelopes);
      }
      this._notifySuccess(_successCallback, messages);
      if (close) {
        this.webSocketClose(context, 1000, 'Disconnect');
      }
    };
    _self.onClose = function (context, event) {
      this._debug('Transport', this.getType(), 'closed', context, event);
      if (_sameContext(context)) {
        // Remember if we were able to connect.
        // This close event could be due to server shutdown,
        // and if it restarts we want to try websocket again.
        _webSocketSupported = _stickyReconnect && _webSocketConnected;
        _connecting = null;
        _context = null;
      }
      var timeouts = context.timeouts;
      context.timeouts = {};
      for (var id in timeouts) {
        if (timeouts.hasOwnProperty(id)) {
          this.clearTimeout(timeouts[id]);
        }
      }
      var envelopes = context.envelopes;
      context.envelopes = {};
      for (var key in envelopes) {
        if (envelopes.hasOwnProperty(key)) {
          var envelope = envelopes[key][0];
          var metaConnect = envelopes[key][1];
          if (metaConnect) {
            _connected = false;
          }
          var failure = {
            websocketCode: event.code,
            reason: event.reason
          };
          if (event.exception) {
            failure.exception = event.exception;
          }
          this._notifyFailure(envelope.onFailure, context, envelope.messages, failure);
        }
      }
    };
    _self.registered = function (type, cometd) {
      _super.registered(type, cometd);
      _cometd = cometd;
    };
    _self.accept = function (version, crossDomain, url) {
      this._debug('Transport', this.getType(), 'accept, supported:', _webSocketSupported);
      // Using !! to return a boolean (and not the WebSocket object).
      return _webSocketSupported && !!window.WebSocket && _cometd.websocketEnabled !== false;
    };
    _self.send = function (envelope, metaConnect) {
      this._debug('Transport', this.getType(), 'sending', envelope, '/meta/connect =', metaConnect);
      _send.call(this, _context, envelope, metaConnect);
    };
    _self.webSocketClose = function (context, code, reason) {
      try {
        if (context.webSocket) {
          context.webSocket.close(code, reason);
        }
      } catch (x) {
        this._debug(x);
      }
    };
    _self.abort = function () {
      _super.abort();
      _forceClose.call(this, _context, {
        code: 1000,
        reason: 'Abort'
      });
      this.reset(true);
    };
    return _self;
  };

  /**
   * The constructor for a CometD object, identified by an optional name.
   * The default name is the string 'default'.
   * @param name the optional name of this cometd object
   */
  var CometD = function CometD(name) {
    var _scheduler = new Scheduler();
    var _cometd = this;
    var _name = name || 'default';
    var _crossDomain = false;
    var _transports = new TransportRegistry();
    var _transport;
    var _status = 'disconnected';
    var _messageId = 0;
    var _clientId = null;
    var _batch = 0;
    var _messageQueue = [];
    var _internalBatch = false;
    var _listenerId = 0;
    var _listeners = {};
    var _backoff = 0;
    var _scheduledSend = null;
    var _extensions = [];
    var _advice = {};
    var _handshakeProps;
    var _handshakeCallback;
    var _callbacks = {};
    var _remoteCalls = {};
    var _reestablish = false;
    var _connected = false;
    var _unconnectTime = 0;
    var _handshakeMessages = 0;
    var _metaConnect = null;
    var _config = {
      useWorkerScheduler: true,
      protocol: null,
      stickyReconnect: true,
      connectTimeout: 0,
      maxConnections: 2,
      backoffIncrement: 1000,
      maxBackoff: 60000,
      logLevel: 'info',
      maxNetworkDelay: 10000,
      requestHeaders: {},
      appendMessageTypeToURL: true,
      autoBatch: false,
      urls: {},
      maxURILength: 2000,
      advice: {
        timeout: 60000,
        interval: 0,
        reconnect: undefined,
        maxInterval: 0
      }
    };
    function _fieldValue(object, name) {
      try {
        return object[name];
      } catch (x) {
        return undefined;
      }
    }

    /**
     * Mixes in the given objects into the target object by copying the properties.
     * @param deep if the copy must be deep
     * @param target the target object
     * @param objects the objects whose properties are copied into the target
     */
    this._mixin = function (deep, target, objects) {
      var result = target || {};

      // Skip first 2 parameters (deep and target), and loop over the others
      for (var i = 2; i < arguments.length; ++i) {
        var object = arguments[i];
        if (object === undefined || object === null) {
          continue;
        }
        for (var propName in object) {
          if (object.hasOwnProperty(propName)) {
            var prop = _fieldValue(object, propName);
            var targ = _fieldValue(result, propName);

            // Avoid infinite loops
            if (prop === target) {
              continue;
            }
            // Do not mixin undefined values
            if (prop === undefined) {
              continue;
            }
            if (deep && _typeof(prop) === 'object' && prop !== null) {
              if (prop instanceof Array) {
                result[propName] = this._mixin(deep, targ instanceof Array ? targ : [], prop);
              } else {
                var source = _typeof(targ) === 'object' && !(targ instanceof Array) ? targ : {};
                result[propName] = this._mixin(deep, source, prop);
              }
            } else {
              result[propName] = prop;
            }
          }
        }
      }
      return result;
    };
    function _isString(value) {
      return Utils.isString(value);
    }
    function _isFunction(value) {
      if (value === undefined || value === null) {
        return false;
      }
      return typeof value === 'function';
    }
    function _zeroPad(value, length) {
      var result = '';
      while (--length > 0) {
        if (value >= Math.pow(10, length)) {
          break;
        }
        result += '0';
      }
      result += value;
      return result;
    }
    function _log(level, args) {
      if (window.console) {
        var logger = window.console[level];
        if (_isFunction(logger)) {
          var now = new Date();
          [].splice.call(args, 0, 0, _zeroPad(now.getHours(), 2) + ':' + _zeroPad(now.getMinutes(), 2) + ':' + _zeroPad(now.getSeconds(), 2) + '.' + _zeroPad(now.getMilliseconds(), 3));
          logger.apply(window.console, args);
        }
      }
    }
    this._warn = function () {
      _log('warn', arguments);
    };
    this._info = function () {
      if (_config.logLevel !== 'warn') {
        _log('info', arguments);
      }
    };
    this._debug = function () {
      if (_config.logLevel === 'debug') {
        _log('debug', arguments);
      }
    };
    function _splitURL(url) {
      // [1] = protocol://,
      // [2] = host:port,
      // [3] = host,
      // [4] = IPv6_host,
      // [5] = IPv4_host,
      // [6] = :port,
      // [7] = port,
      // [8] = uri,
      // [9] = rest (query / fragment)
      return new RegExp('(^https?://)?(((\\[[^\\]]+])|([^:/?#]+))(:(\\d+))?)?([^?#]*)(.*)?').exec(url);
    }

    /**
     * Returns whether the given hostAndPort is cross domain.
     * The default implementation checks against window.location.host
     * but this function can be overridden to make it work in non-browser
     * environments.
     *
     * @param hostAndPort the host and port in format host:port
     * @return whether the given hostAndPort is cross domain
     */
    this._isCrossDomain = function (hostAndPort) {
      if (window.location && window.location.host) {
        if (hostAndPort) {
          return hostAndPort !== window.location.host;
        }
      }
      return false;
    };
    function _configure(configuration) {
      _cometd._debug('Configuring cometd object with', configuration);
      // Support old style param, where only the Bayeux server URL was passed.
      if (_isString(configuration)) {
        configuration = {
          url: configuration
        };
      }
      if (!configuration) {
        configuration = {};
      }
      _config = _cometd._mixin(false, _config, configuration);
      var url = _cometd.getURL();
      if (!url) {
        throw 'Missing required configuration parameter \'url\' specifying the Bayeux server URL';
      }

      // Check if we're cross domain.
      var urlParts = _splitURL(url);
      var hostAndPort = urlParts[2];
      var uri = urlParts[8];
      var afterURI = urlParts[9];
      _crossDomain = _cometd._isCrossDomain(hostAndPort);

      // Check if appending extra path is supported.
      if (_config.appendMessageTypeToURL) {
        if (afterURI !== undefined && afterURI.length > 0) {
          _cometd._info('Appending message type to URI ' + uri + afterURI + ' is not supported, disabling \'appendMessageTypeToURL\' configuration');
          _config.appendMessageTypeToURL = false;
        } else {
          var uriSegments = uri.split('/');
          var lastSegmentIndex = uriSegments.length - 1;
          if (uri.match(/\/$/)) {
            lastSegmentIndex -= 1;
          }
          if (uriSegments[lastSegmentIndex].indexOf('.') >= 0) {
            // Very likely the CometD servlet's URL pattern is mapped to an extension, such as *.cometd
            // It will be difficult to add the extra path in this case
            _cometd._info('Appending message type to URI ' + uri + ' is not supported, disabling \'appendMessageTypeToURL\' configuration');
            _config.appendMessageTypeToURL = false;
          }
        }
      }
      if (window.Worker && window.Blob && window.URL && _config.useWorkerScheduler) {
        var code = WorkerScheduler.toString();
        // Remove the function declaration, the opening brace and the closing brace.
        code = code.substring(code.indexOf('{') + 1, code.lastIndexOf('}'));
        var blob = new window.Blob([code], {
          type: 'application/json'
        });
        var blobURL = window.URL.createObjectURL(blob);
        var worker = new window.Worker(blobURL);
        _scheduler.setTimeout = function (funktion, delay) {
          var id = _scheduler.register(funktion);
          worker.postMessage({
            id: id,
            type: 'setTimeout',
            delay: delay
          });
          return id;
        };
        _scheduler.clearTimeout = function (id) {
          _scheduler.unregister(id);
          worker.postMessage({
            id: id,
            type: 'clearTimeout'
          });
        };
        worker.onmessage = function (e) {
          var id = e.data.id;
          var funktion = _scheduler.unregister(id);
          if (funktion) {
            funktion();
          }
        };
      }
    }
    function _removeListener(subscription) {
      if (subscription) {
        var subscriptions = _listeners[subscription.channel];
        if (subscriptions && subscriptions[subscription.id]) {
          delete subscriptions[subscription.id];
          _cometd._debug('Removed', subscription.listener ? 'listener' : 'subscription', subscription);
        }
      }
    }
    function _removeSubscription(subscription) {
      if (subscription && !subscription.listener) {
        _removeListener(subscription);
      }
    }
    function _clearSubscriptions() {
      for (var channel in _listeners) {
        if (_listeners.hasOwnProperty(channel)) {
          var subscriptions = _listeners[channel];
          if (subscriptions) {
            for (var id in subscriptions) {
              if (subscriptions.hasOwnProperty(id)) {
                _removeSubscription(subscriptions[id]);
              }
            }
          }
        }
      }
    }
    function _setStatus(newStatus) {
      if (_status !== newStatus) {
        _cometd._debug('Status', _status, '->', newStatus);
        _status = newStatus;
      }
    }
    function _isDisconnected() {
      return _status === 'disconnecting' || _status === 'disconnected';
    }
    function _nextMessageId() {
      var result = ++_messageId;
      return '' + result;
    }
    function _applyExtension(scope, callback, name, message, outgoing) {
      try {
        return callback.call(scope, message);
      } catch (x) {
        var handler = _cometd.onExtensionException;
        if (_isFunction(handler)) {
          _cometd._debug('Invoking extension exception handler', name, x);
          try {
            handler.call(_cometd, x, name, outgoing, message);
          } catch (xx) {
            _cometd._info('Exception during execution of extension exception handler', name, xx);
          }
        } else {
          _cometd._info('Exception during execution of extension', name, x);
        }
        return message;
      }
    }
    function _applyIncomingExtensions(message) {
      for (var i = 0; i < _extensions.length; ++i) {
        if (message === undefined || message === null) {
          break;
        }
        var extension = _extensions[i];
        var callback = extension.extension.incoming;
        if (_isFunction(callback)) {
          var result = _applyExtension(extension.extension, callback, extension.name, message, false);
          message = result === undefined ? message : result;
        }
      }
      return message;
    }
    function _applyOutgoingExtensions(message) {
      for (var i = _extensions.length - 1; i >= 0; --i) {
        if (message === undefined || message === null) {
          break;
        }
        var extension = _extensions[i];
        var callback = extension.extension.outgoing;
        if (_isFunction(callback)) {
          var result = _applyExtension(extension.extension, callback, extension.name, message, true);
          message = result === undefined ? message : result;
        }
      }
      return message;
    }
    function _notify(channel, message) {
      var subscriptions = _listeners[channel];
      if (subscriptions) {
        for (var id in subscriptions) {
          if (subscriptions.hasOwnProperty(id)) {
            var subscription = subscriptions[id];
            // Subscriptions may come and go, so the array may have 'holes'
            if (subscription) {
              try {
                subscription.callback.call(subscription.scope, message);
              } catch (x) {
                var handler = _cometd.onListenerException;
                if (_isFunction(handler)) {
                  _cometd._debug('Invoking listener exception handler', subscription, x);
                  try {
                    handler.call(_cometd, x, subscription, subscription.listener, message);
                  } catch (xx) {
                    _cometd._info('Exception during execution of listener exception handler', subscription, xx);
                  }
                } else {
                  _cometd._info('Exception during execution of listener', subscription, message, x);
                }
              }
            }
          }
        }
      }
    }
    function _notifyListeners(channel, message) {
      // Notify direct listeners
      _notify(channel, message);

      // Notify the globbing listeners
      var channelParts = channel.split('/');
      var last = channelParts.length - 1;
      for (var i = last; i > 0; --i) {
        var channelPart = channelParts.slice(0, i).join('/') + '/*';
        // We don't want to notify /foo/* if the channel is /foo/bar/baz,
        // so we stop at the first non recursive globbing
        if (i === last) {
          _notify(channelPart, message);
        }
        // Add the recursive globber and notify
        channelPart += '*';
        _notify(channelPart, message);
      }
    }
    function _cancelDelayedSend() {
      if (_scheduledSend !== null) {
        _cometd.clearTimeout(_scheduledSend);
      }
      _scheduledSend = null;
    }
    function _delayedSend(operation, delay) {
      _cancelDelayedSend();
      var time = _advice.interval + delay;
      _cometd._debug('Function scheduled in', time, 'ms, interval =', _advice.interval, 'backoff =', _backoff, operation);
      _scheduledSend = _cometd.setTimeout(operation, time);
    }

    // Needed to break cyclic dependencies between function definitions
    var _handleMessages;
    var _handleFailure;

    /**
     * Delivers the messages to the CometD server
     * @param messages the array of messages to send
     * @param metaConnect true if this send is on /meta/connect
     * @param extraPath an extra path to append to the Bayeux server URL
     */
    function _send(messages, metaConnect, extraPath) {
      // We must be sure that the messages have a clientId.
      // This is not guaranteed since the handshake may take time to return
      // (and hence the clientId is not known yet) and the application
      // may create other messages.
      for (var i = 0; i < messages.length; ++i) {
        var message = messages[i];
        var messageId = message.id;
        if (_clientId) {
          message.clientId = _clientId;
        }
        message = _applyOutgoingExtensions(message);
        if (message !== undefined && message !== null) {
          // Extensions may have modified the message id, but we need to own it.
          message.id = messageId;
          messages[i] = message;
        } else {
          delete _callbacks[messageId];
          messages.splice(i--, 1);
        }
      }
      if (messages.length === 0) {
        return;
      }
      if (metaConnect) {
        _metaConnect = messages[0];
      }
      var url = _cometd.getURL();
      if (_config.appendMessageTypeToURL) {
        // If url does not end with '/', then append it
        if (!url.match(/\/$/)) {
          url = url + '/';
        }
        if (extraPath) {
          url = url + extraPath;
        }
      }
      var envelope = {
        url: url,
        sync: false,
        messages: messages,
        onSuccess: function onSuccess(rcvdMessages) {
          try {
            _handleMessages.call(_cometd, rcvdMessages);
          } catch (x) {
            _cometd._info('Exception during handling of messages', x);
          }
        },
        onFailure: function onFailure(conduit, messages, failure) {
          try {
            var transport = _cometd.getTransport();
            failure.connectionType = transport ? transport.getType() : "unknown";
            _handleFailure.call(_cometd, conduit, messages, failure);
          } catch (x) {
            _cometd._info('Exception during handling of failure', x);
          }
        }
      };
      _cometd._debug('Send', envelope);
      _transport.send(envelope, metaConnect);
    }
    function _queueSend(message) {
      if (_batch > 0 || _internalBatch === true) {
        _messageQueue.push(message);
      } else {
        _send([message], false);
      }
    }

    /**
     * Sends a complete bayeux message.
     * This method is exposed as a public so that extensions may use it
     * to send bayeux message directly, for example in case of re-sending
     * messages that have already been sent but that for some reason must
     * be resent.
     */
    this.send = _queueSend;
    function _resetBackoff() {
      _backoff = 0;
    }
    function _increaseBackoff() {
      if (_backoff < _config.maxBackoff) {
        _backoff += _config.backoffIncrement;
      }
      return _backoff;
    }

    /**
     * Starts a the batch of messages to be sent in a single request.
     * @see #_endBatch(sendMessages)
     */
    function _startBatch() {
      ++_batch;
      _cometd._debug('Starting batch, depth', _batch);
    }
    function _flushBatch() {
      var messages = _messageQueue;
      _messageQueue = [];
      if (messages.length > 0) {
        _send(messages, false);
      }
    }

    /**
     * Ends the batch of messages to be sent in a single request,
     * optionally sending messages present in the message queue depending
     * on the given argument.
     * @see #_startBatch()
     */
    function _endBatch() {
      --_batch;
      _cometd._debug('Ending batch, depth', _batch);
      if (_batch < 0) {
        throw 'Calls to startBatch() and endBatch() are not paired';
      }
      if (_batch === 0 && !_isDisconnected() && !_internalBatch) {
        _flushBatch();
      }
    }

    /**
     * Sends the connect message
     */
    function _connect() {
      if (!_isDisconnected()) {
        var bayeuxMessage = {
          id: _nextMessageId(),
          channel: '/meta/connect',
          connectionType: _transport.getType()
        };

        // In case of reload or temporary loss of connection
        // we want the next successful connect to return immediately
        // instead of being held by the server, so that connect listeners
        // can be notified that the connection has been re-established
        if (!_connected) {
          bayeuxMessage.advice = {
            timeout: 0
          };
        }
        _setStatus('connecting');
        _cometd._debug('Connect sent', bayeuxMessage);
        _send([bayeuxMessage], true, 'connect');
        _setStatus('connected');
      }
    }
    function _delayedConnect(delay) {
      _setStatus('connecting');
      _delayedSend(function () {
        _connect();
      }, delay);
    }
    function _updateAdvice(newAdvice) {
      if (newAdvice) {
        _advice = _cometd._mixin(false, {}, _config.advice, newAdvice);
        _cometd._debug('New advice', _advice);
      }
    }
    function _disconnect(abort) {
      _cancelDelayedSend();
      if (abort && _transport) {
        _transport.abort();
      }
      _crossDomain = false;
      _transport = null;
      _setStatus('disconnected');
      _clientId = null;
      _batch = 0;
      _resetBackoff();
      _reestablish = false;
      _connected = false;
      _unconnectTime = 0;
      _metaConnect = null;

      // Fail any existing queued message
      if (_messageQueue.length > 0) {
        var messages = _messageQueue;
        _messageQueue = [];
        _handleFailure.call(_cometd, undefined, messages, {
          reason: 'Disconnected'
        });
      }
    }
    function _notifyTransportException(oldTransport, newTransport, failure) {
      var handler = _cometd.onTransportException;
      if (_isFunction(handler)) {
        _cometd._debug('Invoking transport exception handler', oldTransport, newTransport, failure);
        try {
          handler.call(_cometd, failure, oldTransport, newTransport);
        } catch (x) {
          _cometd._info('Exception during execution of transport exception handler', x);
        }
      }
    }

    /**
     * Sends the initial handshake message
     */
    function _handshake(handshakeProps, handshakeCallback) {
      if (_isFunction(handshakeProps)) {
        handshakeCallback = handshakeProps;
        handshakeProps = undefined;
      }
      _clientId = null;
      _clearSubscriptions();

      // Reset the transports if we're not retrying the handshake
      if (_isDisconnected()) {
        _transports.reset(true);
      }

      // Reset the advice.
      _updateAdvice({});
      _batch = 0;

      // Mark the start of an internal batch.
      // This is needed because handshake and connect are async.
      // It may happen that the application calls init() then subscribe()
      // and the subscribe message is sent before the connect message, if
      // the subscribe message is not held until the connect message is sent.
      // So here we start a batch to hold temporarily any message until
      // the connection is fully established.
      _internalBatch = true;

      // Save the properties provided by the user, so that
      // we can reuse them during automatic re-handshake
      _handshakeProps = handshakeProps;
      _handshakeCallback = handshakeCallback;
      var version = '1.0';

      // Figure out the transports to send to the server
      var url = _cometd.getURL();
      var transportTypes = _transports.findTransportTypes(version, _crossDomain, url);
      var bayeuxMessage = {
        id: _nextMessageId(),
        version: version,
        minimumVersion: version,
        channel: '/meta/handshake',
        supportedConnectionTypes: transportTypes,
        advice: {
          timeout: _advice.timeout,
          interval: _advice.interval
        }
      };
      // Do not allow the user to override important fields.
      var message = _cometd._mixin(false, {}, _handshakeProps, bayeuxMessage);

      // Save the callback.
      _cometd._putCallback(message.id, handshakeCallback);

      // Pick up the first available transport as initial transport
      // since we don't know if the server supports it
      if (!_transport) {
        _transport = _transports.negotiateTransport(transportTypes, version, _crossDomain, url);
        if (!_transport) {
          var failure = 'Could not find initial transport among: ' + _transports.getTransportTypes();
          _cometd._warn(failure);
          throw failure;
        }
      }
      _cometd._debug('Initial transport is', _transport.getType());

      // We started a batch to hold the application messages,
      // so here we must bypass it and send immediately.
      _setStatus('handshaking');
      _cometd._debug('Handshake sent', message);
      _send([message], false, 'handshake');
    }
    function _delayedHandshake(delay) {
      _setStatus('handshaking');

      // We will call _handshake() which will reset _clientId, but we want to avoid
      // that between the end of this method and the call to _handshake() someone may
      // call publish() (or other methods that call _queueSend()).
      _internalBatch = true;
      _delayedSend(function () {
        _handshake(_handshakeProps, _handshakeCallback);
      }, delay);
    }
    function _notifyCallback(callback, message) {
      try {
        callback.call(_cometd, message);
      } catch (x) {
        var handler = _cometd.onCallbackException;
        if (_isFunction(handler)) {
          _cometd._debug('Invoking callback exception handler', x);
          try {
            handler.call(_cometd, x, message);
          } catch (xx) {
            _cometd._info('Exception during execution of callback exception handler', xx);
          }
        } else {
          _cometd._info('Exception during execution of message callback', x);
        }
      }
    }
    this._getCallback = function (messageId) {
      return _callbacks[messageId];
    };
    this._putCallback = function (messageId, callback) {
      var result = this._getCallback(messageId);
      if (_isFunction(callback)) {
        _callbacks[messageId] = callback;
      }
      return result;
    };
    function _handleCallback(message) {
      var callback = _cometd._getCallback([message.id]);
      if (_isFunction(callback)) {
        delete _callbacks[message.id];
        _notifyCallback(callback, message);
      }
    }
    function _handleRemoteCall(message) {
      var context = _remoteCalls[message.id];
      delete _remoteCalls[message.id];
      if (context) {
        _cometd._debug('Handling remote call response for', message, 'with context', context);

        // Clear the timeout, if present.
        var timeout = context.timeout;
        if (timeout) {
          _cometd.clearTimeout(timeout);
        }
        var callback = context.callback;
        if (_isFunction(callback)) {
          _notifyCallback(callback, message);
          return true;
        }
      }
      return false;
    }
    this.onTransportFailure = function (message, failureInfo, failureHandler) {
      this._debug('Transport failure', failureInfo, 'for', message);
      var transports = this.getTransportRegistry();
      var url = this.getURL();
      var crossDomain = this._isCrossDomain(_splitURL(url)[2]);
      var version = '1.0';
      var transportTypes = transports.findTransportTypes(version, crossDomain, url);
      if (failureInfo.action === 'none') {
        if (message.channel === '/meta/handshake') {
          if (!failureInfo.transport) {
            var failure = 'Could not negotiate transport, client=[' + transportTypes + '], server=[' + message.supportedConnectionTypes + ']';
            this._warn(failure);
            _notifyTransportException(_transport.getType(), null, {
              reason: failure,
              connectionType: _transport.getType(),
              transport: _transport
            });
          }
        }
      } else {
        failureInfo.delay = this.getBackoffPeriod();
        // Different logic depending on whether we are handshaking or connecting.
        if (message.channel === '/meta/handshake') {
          if (!failureInfo.transport) {
            // The transport is invalid, try to negotiate again.
            var oldTransportType = _transport ? _transport.getType() : null;
            var newTransport = transports.negotiateTransport(transportTypes, version, crossDomain, url);
            if (!newTransport) {
              this._warn('Could not negotiate transport, client=[' + transportTypes + ']');
              _notifyTransportException(oldTransportType, null, message.failure);
              failureInfo.action = 'none';
            } else {
              var newTransportType = newTransport.getType();
              this._debug('Transport', oldTransportType, '->', newTransportType);
              _notifyTransportException(oldTransportType, newTransportType, message.failure);
              failureInfo.action = 'handshake';
              failureInfo.transport = newTransport;
            }
          }
          if (failureInfo.action !== 'none') {
            this.increaseBackoffPeriod();
          }
        } else {
          var now = new Date().getTime();
          if (_unconnectTime === 0) {
            _unconnectTime = now;
          }
          if (failureInfo.action === 'retry') {
            failureInfo.delay = this.increaseBackoffPeriod();
            // Check whether we may switch to handshaking.
            var maxInterval = _advice.maxInterval;
            if (maxInterval > 0) {
              var expiration = _advice.timeout + _advice.interval + maxInterval;
              var unconnected = now - _unconnectTime;
              if (unconnected + _backoff > expiration) {
                failureInfo.action = 'handshake';
              }
            }
          }
          if (failureInfo.action === 'handshake') {
            failureInfo.delay = 0;
            transports.reset(false);
            this.resetBackoffPeriod();
          }
        }
      }
      failureHandler.call(_cometd, failureInfo);
    };
    function _handleTransportFailure(failureInfo) {
      _cometd._debug('Transport failure handling', failureInfo);
      if (failureInfo.transport) {
        _transport = failureInfo.transport;
      }
      if (failureInfo.url) {
        _transport.setURL(failureInfo.url);
      }
      var action = failureInfo.action;
      var delay = failureInfo.delay || 0;
      switch (action) {
        case 'handshake':
          _delayedHandshake(delay);
          break;
        case 'retry':
          _delayedConnect(delay);
          break;
        case 'none':
          _disconnect(true);
          break;
        default:
          throw 'Unknown action ' + action;
      }
    }
    function _failHandshake(message, failureInfo) {
      _handleCallback(message);
      _notifyListeners('/meta/handshake', message);
      _notifyListeners('/meta/unsuccessful', message);

      // The listeners may have disconnected.
      if (_isDisconnected()) {
        failureInfo.action = 'none';
      }
      _cometd.onTransportFailure.call(_cometd, message, failureInfo, _handleTransportFailure);
    }
    function _handshakeResponse(message) {
      var url = _cometd.getURL();
      if (message.successful) {
        var crossDomain = _cometd._isCrossDomain(_splitURL(url)[2]);
        var newTransport = _transports.negotiateTransport(message.supportedConnectionTypes, message.version, crossDomain, url);
        if (newTransport === null) {
          message.successful = false;
          _failHandshake(message, {
            cause: 'negotiation',
            action: 'none',
            transport: null
          });
          return;
        } else if (_transport !== newTransport) {
          _cometd._debug('Transport', _transport.getType(), '->', newTransport.getType());
          _transport = newTransport;
        }
        _clientId = message.clientId;

        // End the internal batch and allow held messages from the application
        // to go to the server (see _handshake() where we start the internal batch).
        _internalBatch = false;
        _flushBatch();

        // Here the new transport is in place, as well as the clientId, so
        // the listeners can perform a publish() if they want.
        // Notify the listeners before the connect below.
        message.reestablish = _reestablish;
        _reestablish = true;
        _handleCallback(message);
        _notifyListeners('/meta/handshake', message);
        _handshakeMessages = message['x-messages'] || 0;
        var action = _isDisconnected() ? 'none' : _advice.reconnect || 'retry';
        switch (action) {
          case 'retry':
            _resetBackoff();
            if (_handshakeMessages === 0) {
              _delayedConnect(0);
            } else {
              _cometd._debug('Processing', _handshakeMessages, 'handshake-delivered messages');
            }
            break;
          case 'none':
            _disconnect(true);
            break;
          default:
            throw 'Unrecognized advice action ' + action;
        }
      } else {
        _failHandshake(message, {
          cause: 'unsuccessful',
          action: _advice.reconnect || 'handshake',
          transport: _transport
        });
      }
    }
    function _handshakeFailure(message) {
      _failHandshake(message, {
        cause: 'failure',
        action: 'handshake',
        transport: null
      });
    }
    function _matchMetaConnect(connect) {
      if (_status === 'disconnected') {
        return true;
      }
      if (_metaConnect && _metaConnect.id === connect.id) {
        _metaConnect = null;
        return true;
      }
      return false;
    }
    function _failConnect(message, failureInfo) {
      // Notify the listeners after the status change but before the next action.
      _notifyListeners('/meta/connect', message);
      _notifyListeners('/meta/unsuccessful', message);

      // The listeners may have disconnected.
      if (_isDisconnected()) {
        failureInfo.action = 'none';
      }
      _cometd.onTransportFailure.call(_cometd, message, failureInfo, _handleTransportFailure);
    }
    function _connectResponse(message) {
      if (_matchMetaConnect(message)) {
        _connected = message.successful;
        if (_connected) {
          _notifyListeners('/meta/connect', message);

          // Normally, the advice will say "reconnect: 'retry', interval: 0"
          // and the server will hold the request, so when a response returns
          // we immediately call the server again (long polling).
          // Listeners can call disconnect(), so check the state after they run.
          var action = _isDisconnected() ? 'none' : _advice.reconnect || 'retry';
          switch (action) {
            case 'retry':
              _resetBackoff();
              _delayedConnect(_backoff);
              break;
            case 'none':
              _disconnect(false);
              break;
            default:
              throw 'Unrecognized advice action ' + action;
          }
        } else {
          _failConnect(message, {
            cause: 'unsuccessful',
            action: _advice.reconnect || 'retry',
            transport: _transport
          });
        }
      } else {
        _cometd._debug('Mismatched /meta/connect reply', message);
      }
    }
    function _connectFailure(message) {
      if (_matchMetaConnect(message)) {
        _connected = false;
        _failConnect(message, {
          cause: 'failure',
          action: 'retry',
          transport: null
        });
      } else {
        _cometd._debug('Mismatched /meta/connect failure', message);
      }
    }
    function _failDisconnect(message) {
      _disconnect(true);
      _handleCallback(message);
      _notifyListeners('/meta/disconnect', message);
      _notifyListeners('/meta/unsuccessful', message);
    }
    function _disconnectResponse(message) {
      if (message.successful) {
        // Wait for the /meta/connect to arrive.
        _disconnect(false);
        _handleCallback(message);
        _notifyListeners('/meta/disconnect', message);
      } else {
        _failDisconnect(message);
      }
    }
    function _disconnectFailure(message) {
      _failDisconnect(message);
    }
    function _failSubscribe(message) {
      var subscriptions = _listeners[message.subscription];
      if (subscriptions) {
        for (var id in subscriptions) {
          if (subscriptions.hasOwnProperty(id)) {
            var subscription = subscriptions[id];
            if (subscription && !subscription.listener) {
              delete subscriptions[id];
              _cometd._debug('Removed failed subscription', subscription);
            }
          }
        }
      }
      _handleCallback(message);
      _notifyListeners('/meta/subscribe', message);
      _notifyListeners('/meta/unsuccessful', message);
    }
    function _subscribeResponse(message) {
      if (message.successful) {
        _handleCallback(message);
        _notifyListeners('/meta/subscribe', message);
      } else {
        _failSubscribe(message);
      }
    }
    function _subscribeFailure(message) {
      _failSubscribe(message);
    }
    function _failUnsubscribe(message) {
      _handleCallback(message);
      _notifyListeners('/meta/unsubscribe', message);
      _notifyListeners('/meta/unsuccessful', message);
    }
    function _unsubscribeResponse(message) {
      if (message.successful) {
        _handleCallback(message);
        _notifyListeners('/meta/unsubscribe', message);
      } else {
        _failUnsubscribe(message);
      }
    }
    function _unsubscribeFailure(message) {
      _failUnsubscribe(message);
    }
    function _failMessage(message) {
      if (!_handleRemoteCall(message)) {
        _handleCallback(message);
        _notifyListeners('/meta/publish', message);
        _notifyListeners('/meta/unsuccessful', message);
      }
    }
    function _messageResponse(message) {
      if (message.data !== undefined) {
        if (!_handleRemoteCall(message)) {
          _notifyListeners(message.channel, message);
          if (_handshakeMessages > 0) {
            --_handshakeMessages;
            if (_handshakeMessages === 0) {
              _cometd._debug('Processed last handshake-delivered message');
              _delayedConnect(0);
            }
          }
        }
      } else {
        if (message.successful === undefined) {
          _cometd._warn('Unknown Bayeux Message', message);
        } else {
          if (message.successful) {
            _handleCallback(message);
            _notifyListeners('/meta/publish', message);
          } else {
            _failMessage(message);
          }
        }
      }
    }
    function _messageFailure(failure) {
      _failMessage(failure);
    }
    function _receive(message) {
      _unconnectTime = 0;
      message = _applyIncomingExtensions(message);
      if (message === undefined || message === null) {
        return;
      }
      _updateAdvice(message.advice);
      var channel = message.channel;
      switch (channel) {
        case '/meta/handshake':
          _handshakeResponse(message);
          break;
        case '/meta/connect':
          _connectResponse(message);
          break;
        case '/meta/disconnect':
          _disconnectResponse(message);
          break;
        case '/meta/subscribe':
          _subscribeResponse(message);
          break;
        case '/meta/unsubscribe':
          _unsubscribeResponse(message);
          break;
        default:
          _messageResponse(message);
          break;
      }
    }

    /**
     * Receives a message.
     * This method is exposed as a public so that extensions may inject
     * messages simulating that they had been received.
     */
    this.receive = _receive;
    _handleMessages = function _handleMessages(rcvdMessages) {
      _cometd._debug('Received', rcvdMessages);
      for (var i = 0; i < rcvdMessages.length; ++i) {
        var message = rcvdMessages[i];
        _receive(message);
      }
    };
    _handleFailure = function _handleFailure(conduit, messages, failure) {
      _cometd._debug('handleFailure', conduit, messages, failure);
      failure.transport = conduit;
      for (var i = 0; i < messages.length; ++i) {
        var message = messages[i];
        var failureMessage = {
          id: message.id,
          successful: false,
          channel: message.channel,
          failure: failure
        };
        failure.message = message;
        switch (message.channel) {
          case '/meta/handshake':
            _handshakeFailure(failureMessage);
            break;
          case '/meta/connect':
            _connectFailure(failureMessage);
            break;
          case '/meta/disconnect':
            _disconnectFailure(failureMessage);
            break;
          case '/meta/subscribe':
            failureMessage.subscription = message.subscription;
            _subscribeFailure(failureMessage);
            break;
          case '/meta/unsubscribe':
            failureMessage.subscription = message.subscription;
            _unsubscribeFailure(failureMessage);
            break;
          default:
            _messageFailure(failureMessage);
            break;
        }
      }
    };
    function _hasSubscriptions(channel) {
      var subscriptions = _listeners[channel];
      if (subscriptions) {
        for (var id in subscriptions) {
          if (subscriptions.hasOwnProperty(id)) {
            if (subscriptions[id]) {
              return true;
            }
          }
        }
      }
      return false;
    }
    function _resolveScopedCallback(scope, callback) {
      var delegate = {
        scope: scope,
        method: callback
      };
      if (_isFunction(scope)) {
        delegate.scope = undefined;
        delegate.method = scope;
      } else {
        if (_isString(callback)) {
          if (!scope) {
            throw 'Invalid scope ' + scope;
          }
          delegate.method = scope[callback];
          if (!_isFunction(delegate.method)) {
            throw 'Invalid callback ' + callback + ' for scope ' + scope;
          }
        } else if (!_isFunction(callback)) {
          throw 'Invalid callback ' + callback;
        }
      }
      return delegate;
    }
    function _addListener(channel, scope, callback, isListener) {
      // The data structure is a map<channel, subscription[]>, where each subscription
      // holds the callback to be called and its scope.

      var delegate = _resolveScopedCallback(scope, callback);
      _cometd._debug('Adding', isListener ? 'listener' : 'subscription', 'on', channel, 'with scope', delegate.scope, 'and callback', delegate.method);
      var id = ++_listenerId;
      var subscription = {
        id: id,
        channel: channel,
        scope: delegate.scope,
        callback: delegate.method,
        listener: isListener
      };
      var subscriptions = _listeners[channel];
      if (!subscriptions) {
        subscriptions = {};
        _listeners[channel] = subscriptions;
      }
      subscriptions[id] = subscription;
      _cometd._debug('Added', isListener ? 'listener' : 'subscription', subscription);
      return subscription;
    }

    //
    // PUBLIC API
    //

    /**
     * Registers the given transport under the given transport type.
     * The optional index parameter specifies the "priority" at which the
     * transport is registered (where 0 is the max priority).
     * If a transport with the same type is already registered, this function
     * does nothing and returns false.
     * @param type the transport type
     * @param transport the transport object
     * @param index the index at which this transport is to be registered
     * @return true if the transport has been registered, false otherwise
     * @see #unregisterTransport(type)
     */
    this.registerTransport = function (type, transport, index) {
      var result = _transports.add(type, transport, index);
      if (result) {
        this._debug('Registered transport', type);
        if (_isFunction(transport.registered)) {
          transport.registered(type, this);
        }
      }
      return result;
    };

    /**
     * Unregisters the transport with the given transport type.
     * @param type the transport type to unregister
     * @return the transport that has been unregistered,
     * or null if no transport was previously registered under the given transport type
     */
    this.unregisterTransport = function (type) {
      var transport = _transports.remove(type);
      if (transport !== null) {
        this._debug('Unregistered transport', type);
        if (_isFunction(transport.unregistered)) {
          transport.unregistered();
        }
      }
      return transport;
    };
    this.unregisterTransports = function () {
      _transports.clear();
    };

    /**
     * @return an array of all registered transport types
     */
    this.getTransportTypes = function () {
      return _transports.getTransportTypes();
    };
    this.findTransport = function (name) {
      return _transports.find(name);
    };

    /**
     * @returns the TransportRegistry object
     */
    this.getTransportRegistry = function () {
      return _transports;
    };

    /**
     * Configures the initial Bayeux communication with the Bayeux server.
     * Configuration is passed via an object that must contain a mandatory field <code>url</code>
     * of type string containing the URL of the Bayeux server.
     * @param configuration the configuration object
     */
    this.configure = function (configuration) {
      _configure.call(this, configuration);
    };

    /**
     * Configures and establishes the Bayeux communication with the Bayeux server
     * via a handshake and a subsequent connect.
     * @param configuration the configuration object
     * @param handshakeProps an object to be merged with the handshake message
     * @see #configure(configuration)
     * @see #handshake(handshakeProps)
     */
    this.init = function (configuration, handshakeProps) {
      this.configure(configuration);
      this.handshake(handshakeProps);
    };

    /**
     * Establishes the Bayeux communication with the Bayeux server
     * via a handshake and a subsequent connect.
     * @param handshakeProps an object to be merged with the handshake message
     * @param handshakeCallback a function to be invoked when the handshake is acknowledged
     */
    this.handshake = function (handshakeProps, handshakeCallback) {
      if (_status !== 'disconnected') {
        throw 'Illegal state: handshaken';
      }
      _handshake(handshakeProps, handshakeCallback);
    };

    /**
     * Disconnects from the Bayeux server.
     * @param disconnectProps an object to be merged with the disconnect message
     * @param disconnectCallback a function to be invoked when the disconnect is acknowledged
     */
    this.disconnect = function (disconnectProps, disconnectCallback) {
      if (_isDisconnected()) {
        return;
      }
      if (_isFunction(disconnectProps)) {
        disconnectCallback = disconnectProps;
        disconnectProps = undefined;
      }
      var bayeuxMessage = {
        id: _nextMessageId(),
        channel: '/meta/disconnect'
      };
      // Do not allow the user to override important fields.
      var message = this._mixin(false, {}, disconnectProps, bayeuxMessage);

      // Save the callback.
      _cometd._putCallback(message.id, disconnectCallback);
      _setStatus('disconnecting');
      _send([message], false, 'disconnect');
    };

    /**
     * Marks the start of a batch of application messages to be sent to the server
     * in a single request, obtaining a single response containing (possibly) many
     * application reply messages.
     * Messages are held in a queue and not sent until {@link #endBatch()} is called.
     * If startBatch() is called multiple times, then an equal number of endBatch()
     * calls must be made to close and send the batch of messages.
     * @see #endBatch()
     */
    this.startBatch = function () {
      _startBatch();
    };

    /**
     * Marks the end of a batch of application messages to be sent to the server
     * in a single request.
     * @see #startBatch()
     */
    this.endBatch = function () {
      _endBatch();
    };

    /**
     * Executes the given callback in the given scope, surrounded by a {@link #startBatch()}
     * and {@link #endBatch()} calls.
     * @param scope the scope of the callback, may be omitted
     * @param callback the callback to be executed within {@link #startBatch()} and {@link #endBatch()} calls
     */
    this.batch = function (scope, callback) {
      var delegate = _resolveScopedCallback(scope, callback);
      this.startBatch();
      try {
        delegate.method.call(delegate.scope);
        this.endBatch();
      } catch (x) {
        this._info('Exception during execution of batch', x);
        this.endBatch();
        throw x;
      }
    };

    /**
     * Adds a listener for bayeux messages, performing the given callback in the given scope
     * when a message for the given channel arrives.
     * @param channel the channel the listener is interested to
     * @param scope the scope of the callback, may be omitted
     * @param callback the callback to call when a message is sent to the channel
     * @returns the subscription handle to be passed to {@link #removeListener(object)}
     * @see #removeListener(subscription)
     */
    this.addListener = function (channel, scope, callback) {
      if (arguments.length < 2) {
        throw 'Illegal arguments number: required 2, got ' + arguments.length;
      }
      if (!_isString(channel)) {
        throw 'Illegal argument type: channel must be a string';
      }
      return _addListener(channel, scope, callback, true);
    };

    /**
     * Removes the subscription obtained with a call to {@link #addListener(string, object, function)}.
     * @param subscription the subscription to unsubscribe.
     * @see #addListener(channel, scope, callback)
     */
    this.removeListener = function (subscription) {
      // Beware of subscription.id == 0, which is falsy => cannot use !subscription.id
      if (!subscription || !subscription.channel || !("id" in subscription)) {
        throw 'Invalid argument: expected subscription, not ' + subscription;
      }
      _removeListener(subscription);
    };

    /**
     * Removes all listeners registered with {@link #addListener(channel, scope, callback)} or
     * {@link #subscribe(channel, scope, callback)}.
     */
    this.clearListeners = function () {
      _listeners = {};
    };

    /**
     * Subscribes to the given channel, performing the given callback in the given scope
     * when a message for the channel arrives.
     * @param channel the channel to subscribe to
     * @param scope the scope of the callback, may be omitted
     * @param callback the callback to call when a message is sent to the channel
     * @param subscribeProps an object to be merged with the subscribe message
     * @param subscribeCallback a function to be invoked when the subscription is acknowledged
     * @return the subscription handle to be passed to {@link #unsubscribe(object)}
     */
    this.subscribe = function (channel, scope, callback, subscribeProps, subscribeCallback) {
      if (arguments.length < 2) {
        throw 'Illegal arguments number: required 2, got ' + arguments.length;
      }
      if (!_isString(channel)) {
        throw 'Illegal argument type: channel must be a string';
      }
      if (_isDisconnected()) {
        throw 'Illegal state: disconnected';
      }

      // Normalize arguments
      if (_isFunction(scope)) {
        subscribeCallback = subscribeProps;
        subscribeProps = callback;
        callback = scope;
        scope = undefined;
      }
      if (_isFunction(subscribeProps)) {
        subscribeCallback = subscribeProps;
        subscribeProps = undefined;
      }

      // Only send the message to the server if this client has not yet subscribed to the channel
      var send = !_hasSubscriptions(channel);
      var subscription = _addListener(channel, scope, callback, false);
      if (send) {
        // Send the subscription message after the subscription registration to avoid
        // races where the server would send a message to the subscribers, but here
        // on the client the subscription has not been added yet to the data structures
        var bayeuxMessage = {
          id: _nextMessageId(),
          channel: '/meta/subscribe',
          subscription: channel
        };
        // Do not allow the user to override important fields.
        var message = this._mixin(false, {}, subscribeProps, bayeuxMessage);

        // Save the callback.
        _cometd._putCallback(message.id, subscribeCallback);
        _queueSend(message);
      }
      return subscription;
    };

    /**
     * Unsubscribes the subscription obtained with a call to {@link #subscribe(string, object, function)}.
     * @param subscription the subscription to unsubscribe.
     * @param unsubscribeProps an object to be merged with the unsubscribe message
     * @param unsubscribeCallback a function to be invoked when the unsubscription is acknowledged
     */
    this.unsubscribe = function (subscription, unsubscribeProps, unsubscribeCallback) {
      if (arguments.length < 1) {
        throw 'Illegal arguments number: required 1, got ' + arguments.length;
      }
      if (_isDisconnected()) {
        throw 'Illegal state: disconnected';
      }
      if (_isFunction(unsubscribeProps)) {
        unsubscribeCallback = unsubscribeProps;
        unsubscribeProps = undefined;
      }

      // Remove the local listener before sending the message
      // This ensures that if the server fails, this client does not get notifications
      this.removeListener(subscription);
      var channel = subscription.channel;
      // Only send the message to the server if this client unsubscribes the last subscription
      if (!_hasSubscriptions(channel)) {
        var bayeuxMessage = {
          id: _nextMessageId(),
          channel: '/meta/unsubscribe',
          subscription: channel
        };
        // Do not allow the user to override important fields.
        var message = this._mixin(false, {}, unsubscribeProps, bayeuxMessage);

        // Save the callback.
        _cometd._putCallback(message.id, unsubscribeCallback);
        _queueSend(message);
      }
    };
    this.resubscribe = function (subscription, subscribeProps) {
      _removeSubscription(subscription);
      if (subscription) {
        return this.subscribe(subscription.channel, subscription.scope, subscription.callback, subscribeProps);
      }
      return undefined;
    };

    /**
     * Removes all subscriptions added via {@link #subscribe(channel, scope, callback, subscribeProps)},
     * but does not remove the listeners added via {@link addListener(channel, scope, callback)}.
     */
    this.clearSubscriptions = function () {
      _clearSubscriptions();
    };

    /**
     * Publishes a message on the given channel, containing the given content.
     * @param channel the channel to publish the message to
     * @param content the content of the message
     * @param publishProps an object to be merged with the publish message
     * @param publishCallback a function to be invoked when the publish is acknowledged by the server
     */
    this.publish = function (channel, content, publishProps, publishCallback) {
      if (arguments.length < 1) {
        throw 'Illegal arguments number: required 1, got ' + arguments.length;
      }
      if (!_isString(channel)) {
        throw 'Illegal argument type: channel must be a string';
      }
      if (/^\/meta\//.test(channel)) {
        throw 'Illegal argument: cannot publish to meta channels';
      }
      if (_isDisconnected()) {
        throw 'Illegal state: disconnected';
      }
      if (_isFunction(content)) {
        publishCallback = content;
        content = {};
        publishProps = undefined;
      } else if (_isFunction(publishProps)) {
        publishCallback = publishProps;
        publishProps = undefined;
      }
      var bayeuxMessage = {
        id: _nextMessageId(),
        channel: channel,
        data: content
      };
      // Do not allow the user to override important fields.
      var message = this._mixin(false, {}, publishProps, bayeuxMessage);

      // Save the callback.
      _cometd._putCallback(message.id, publishCallback);
      _queueSend(message);
    };

    /**
     * Publishes a message with binary data on the given channel.
     * The binary data chunk may be an ArrayBuffer, a DataView, a TypedArray
     * (such as Uint8Array) or a plain integer array.
     * The meta data object may contain additional application data such as
     * a file name, a mime type, etc.
     * @param channel the channel to publish the message to
     * @param data the binary data to publish
     * @param last whether the binary data chunk is the last
     * @param meta an object containing meta data associated to the binary chunk
     * @param callback a function to be invoked when the publish is acknowledged by the server
     */
    this.publishBinary = function (channel, data, last, meta, callback) {
      if (_isFunction(data)) {
        callback = data;
        data = new ArrayBuffer(0);
        last = true;
        meta = undefined;
      } else if (_isFunction(last)) {
        callback = last;
        last = true;
        meta = undefined;
      } else if (_isFunction(meta)) {
        callback = meta;
        meta = undefined;
      }
      var content = {
        meta: meta,
        data: data,
        last: last
      };
      var ext = {
        ext: {
          binary: {}
        }
      };
      this.publish(channel, content, ext, callback);
    };
    this.remoteCall = function (target, content, timeout, callProps, callback) {
      if (arguments.length < 1) {
        throw 'Illegal arguments number: required 1, got ' + arguments.length;
      }
      if (!_isString(target)) {
        throw 'Illegal argument type: target must be a string';
      }
      if (_isDisconnected()) {
        throw 'Illegal state: disconnected';
      }
      if (_isFunction(content)) {
        callback = content;
        content = {};
        timeout = _config.maxNetworkDelay;
        callProps = undefined;
      } else if (_isFunction(timeout)) {
        callback = timeout;
        timeout = _config.maxNetworkDelay;
        callProps = undefined;
      } else if (_isFunction(callProps)) {
        callback = callProps;
        callProps = undefined;
      }
      if (typeof timeout !== 'number') {
        throw 'Illegal argument type: timeout must be a number';
      }
      if (!target.match(/^\//)) {
        target = '/' + target;
      }
      var channel = '/service' + target;
      var bayeuxMessage = {
        id: _nextMessageId(),
        channel: channel,
        data: content
      };
      var message = this._mixin(false, {}, callProps, bayeuxMessage);
      var context = {
        callback: callback
      };
      if (timeout > 0) {
        context.timeout = _cometd.setTimeout(function () {
          _cometd._debug('Timing out remote call', message, 'after', timeout, 'ms');
          _failMessage({
            id: message.id,
            error: '406::timeout',
            successful: false,
            failure: {
              message: message,
              reason: 'Remote Call Timeout'
            }
          });
        }, timeout);
        _cometd._debug('Scheduled remote call timeout', message, 'in', timeout, 'ms');
      }
      _remoteCalls[message.id] = context;
      _queueSend(message);
    };
    this.remoteCallBinary = function (target, data, last, meta, timeout, callback) {
      if (_isFunction(data)) {
        callback = data;
        data = new ArrayBuffer(0);
        last = true;
        meta = undefined;
        timeout = _config.maxNetworkDelay;
      } else if (_isFunction(last)) {
        callback = last;
        last = true;
        meta = undefined;
        timeout = _config.maxNetworkDelay;
      } else if (_isFunction(meta)) {
        callback = meta;
        meta = undefined;
        timeout = _config.maxNetworkDelay;
      } else if (_isFunction(timeout)) {
        callback = timeout;
        timeout = _config.maxNetworkDelay;
      }
      var content = {
        meta: meta,
        data: data,
        last: last
      };
      var ext = {
        ext: {
          binary: {}
        }
      };
      this.remoteCall(target, content, timeout, ext, callback);
    };

    /**
     * Returns a string representing the status of the bayeux communication with the Bayeux server.
     */
    this.getStatus = function () {
      return _status;
    };

    /**
     * Returns whether this instance has been disconnected.
     */
    this.isDisconnected = _isDisconnected;

    /**
     * Sets the backoff period used to increase the backoff time when retrying an unsuccessful or failed message.
     * Default value is 1 second, which means if there is a persistent failure the retries will happen
     * after 1 second, then after 2 seconds, then after 3 seconds, etc. So for example with 15 seconds of
     * elapsed time, there will be 5 retries (at 1, 3, 6, 10 and 15 seconds elapsed).
     * @param period the backoff period to set
     * @see #getBackoffIncrement()
     */
    this.setBackoffIncrement = function (period) {
      _config.backoffIncrement = period;
    };

    /**
     * Returns the backoff period used to increase the backoff time when retrying an unsuccessful or failed message.
     * @see #setBackoffIncrement(period)
     */
    this.getBackoffIncrement = function () {
      return _config.backoffIncrement;
    };

    /**
     * Returns the backoff period to wait before retrying an unsuccessful or failed message.
     */
    this.getBackoffPeriod = function () {
      return _backoff;
    };

    /**
     * Increases the backoff period up to the maximum value configured.
     * @returns the backoff period after increment
     * @see getBackoffIncrement
     */
    this.increaseBackoffPeriod = function () {
      return _increaseBackoff();
    };

    /**
     * Resets the backoff period to zero.
     */
    this.resetBackoffPeriod = function () {
      _resetBackoff();
    };

    /**
     * Sets the log level for console logging.
     * Valid values are the strings 'error', 'warn', 'info' and 'debug', from
     * less verbose to more verbose.
     * @param level the log level string
     */
    this.setLogLevel = function (level) {
      _config.logLevel = level;
    };

    /**
     * Registers an extension whose callbacks are called for every incoming message
     * (that comes from the server to this client implementation) and for every
     * outgoing message (that originates from this client implementation for the
     * server).
     * The format of the extension object is the following:
     * <pre>
     * {
     *     incoming: function(message) { ... },
     *     outgoing: function(message) { ... }
     * }
     * </pre>
     * Both properties are optional, but if they are present they will be called
     * respectively for each incoming message and for each outgoing message.
     * @param name the name of the extension
     * @param extension the extension to register
     * @return true if the extension was registered, false otherwise
     * @see #unregisterExtension(name)
     */
    this.registerExtension = function (name, extension) {
      if (arguments.length < 2) {
        throw 'Illegal arguments number: required 2, got ' + arguments.length;
      }
      if (!_isString(name)) {
        throw 'Illegal argument type: extension name must be a string';
      }
      var existing = false;
      for (var i = 0; i < _extensions.length; ++i) {
        var existingExtension = _extensions[i];
        if (existingExtension.name === name) {
          existing = true;
          break;
        }
      }
      if (!existing) {
        _extensions.push({
          name: name,
          extension: extension
        });
        this._debug('Registered extension', name);

        // Callback for extensions
        if (_isFunction(extension.registered)) {
          extension.registered(name, this);
        }
        return true;
      } else {
        this._info('Could not register extension with name', name, 'since another extension with the same name already exists');
        return false;
      }
    };

    /**
     * Unregister an extension previously registered with
     * {@link #registerExtension(name, extension)}.
     * @param name the name of the extension to unregister.
     * @return true if the extension was unregistered, false otherwise
     */
    this.unregisterExtension = function (name) {
      if (!_isString(name)) {
        throw 'Illegal argument type: extension name must be a string';
      }
      var unregistered = false;
      for (var i = 0; i < _extensions.length; ++i) {
        var extension = _extensions[i];
        if (extension.name === name) {
          _extensions.splice(i, 1);
          unregistered = true;
          this._debug('Unregistered extension', name);

          // Callback for extensions
          var ext = extension.extension;
          if (_isFunction(ext.unregistered)) {
            ext.unregistered();
          }
          break;
        }
      }
      return unregistered;
    };

    /**
     * Find the extension registered with the given name.
     * @param name the name of the extension to find
     * @return the extension found or null if no extension with the given name has been registered
     */
    this.getExtension = function (name) {
      for (var i = 0; i < _extensions.length; ++i) {
        var extension = _extensions[i];
        if (extension.name === name) {
          return extension.extension;
        }
      }
      return null;
    };

    /**
     * Returns the name assigned to this CometD object, or the string 'default'
     * if no name has been explicitly passed as parameter to the constructor.
     */
    this.getName = function () {
      return _name;
    };

    /**
     * Returns the clientId assigned by the Bayeux server during handshake.
     */
    this.getClientId = function () {
      return _clientId;
    };

    /**
     * Returns the URL of the Bayeux server.
     */
    this.getURL = function () {
      if (_transport) {
        var url = _transport.getURL();
        if (url) {
          return url;
        }
        url = _config.urls[_transport.getType()];
        if (url) {
          return url;
        }
      }
      return _config.url;
    };
    this.getTransport = function () {
      return _transport;
    };
    this.getConfiguration = function () {
      return this._mixin(true, {}, _config);
    };
    this.getAdvice = function () {
      return this._mixin(true, {}, _advice);
    };
    this.setTimeout = function (funktion, delay) {
      return _scheduler.setTimeout(function () {
        try {
          _cometd._debug('Invoking timed function', funktion);
          funktion();
        } catch (x) {
          _cometd._debug('Exception invoking timed function', funktion, x);
        }
      }, delay);
    };
    this.clearTimeout = function (id) {
      _scheduler.clearTimeout(id);
    };

    // Initialize transports.
    if (window.WebSocket) {
      this.registerTransport('websocket', new WebSocketTransport());
    }
    this.registerTransport('long-polling', new LongPollingTransport());
    this.registerTransport('callback-polling', new CallbackPollingTransport());
  };
  var _z85EncodeTable = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', '.', '-', ':', '+', '=', '^', '!', '/', '*', '?', '&', '<', '>', '(', ')', '[', ']', '{', '}', '@', '%', '$', '#'];
  var _z85DecodeTable = [0x00, 0x44, 0x00, 0x54, 0x53, 0x52, 0x48, 0x00, 0x4B, 0x4C, 0x46, 0x41, 0x00, 0x3F, 0x3E, 0x45, 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x40, 0x00, 0x49, 0x42, 0x4A, 0x47, 0x51, 0x24, 0x25, 0x26, 0x27, 0x28, 0x29, 0x2A, 0x2B, 0x2C, 0x2D, 0x2E, 0x2F, 0x30, 0x31, 0x32, 0x33, 0x34, 0x35, 0x36, 0x37, 0x38, 0x39, 0x3A, 0x3B, 0x3C, 0x3D, 0x4D, 0x00, 0x4E, 0x43, 0x00, 0x00, 0x0A, 0x0B, 0x0C, 0x0D, 0x0E, 0x0F, 0x10, 0x11, 0x12, 0x13, 0x14, 0x15, 0x16, 0x17, 0x18, 0x19, 0x1A, 0x1B, 0x1C, 0x1D, 0x1E, 0x1F, 0x20, 0x21, 0x22, 0x23, 0x4F, 0x00, 0x50, 0x00, 0x00];
  var Z85 = {
    encode: function encode(bytes) {
      var buffer = null;
      if (bytes instanceof ArrayBuffer) {
        buffer = bytes;
      } else if (bytes.buffer instanceof ArrayBuffer) {
        buffer = bytes.buffer;
      } else if (Array.isArray(bytes)) {
        buffer = new Uint8Array(bytes).buffer;
      }
      if (buffer == null) {
        throw 'Cannot Z85 encode ' + bytes;
      }
      var length = buffer.byteLength;
      var remainder = length % 4;
      var padding = 4 - (remainder === 0 ? 4 : remainder);
      var view = new DataView(buffer);
      var result = '';
      var value = 0;
      for (var i = 0; i < length + padding; ++i) {
        var isPadding = i >= length;
        value = value * 256 + (isPadding ? 0 : view.getUint8(i));
        if ((i + 1) % 4 === 0) {
          var divisor = 85 * 85 * 85 * 85;
          for (var j = 5; j > 0; --j) {
            if (!isPadding || j > padding) {
              var code = Math.floor(value / divisor) % 85;
              result += _z85EncodeTable[code];
            }
            divisor /= 85;
          }
          value = 0;
        }
      }
      return result;
    },
    decode: function decode(string) {
      var remainder = string.length % 5;
      var padding = 5 - (remainder === 0 ? 5 : remainder);
      for (var p = 0; p < padding; ++p) {
        string += _z85EncodeTable[_z85EncodeTable.length - 1];
      }
      var length = string.length;
      var buffer = new ArrayBuffer(length * 4 / 5 - padding);
      var view = new DataView(buffer);
      var value = 0;
      var charIdx = 0;
      var byteIdx = 0;
      for (var i = 0; i < length; ++i) {
        var code = string.charCodeAt(charIdx++) - 32;
        value = value * 85 + _z85DecodeTable[code];
        if (charIdx % 5 === 0) {
          var divisor = 256 * 256 * 256;
          while (divisor >= 1) {
            if (byteIdx < view.byteLength) {
              view.setUint8(byteIdx++, Math.floor(value / divisor) % 256);
            }
            divisor /= 256;
          }
          value = 0;
        }
      }
      return buffer;
    }
  };
  return {
    CometD: CometD,
    Transport: Transport,
    RequestTransport: RequestTransport,
    LongPollingTransport: LongPollingTransport,
    CallbackPollingTransport: CallbackPollingTransport,
    WebSocketTransport: WebSocketTransport,
    Utils: Utils,
    Z85: Z85
  };
});

/***/ }),

/***/ "./src/site/site-utilities/isMobileChat.js":
/*!*************************************************!*\
  !*** ./src/site/site-utilities/isMobileChat.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   cookieCheck: function() { return /* binding */ cookieCheck; },
/* harmony export */   isMobileChat: function() { return /* binding */ isMobileChat; },
/* harmony export */   nativeAndRefIDDefined: function() { return /* binding */ nativeAndRefIDDefined; }
/* harmony export */ });
/* harmony import */ var _utilities__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities */ "./src/site/site-utilities/utilities.ts");
/* harmony import */ var _utilities_getParentInfo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/getParentInfo */ "./src/site/site-utilities/utilities/getParentInfo.ts");
/* harmony import */ var _site_utilities_cookie_storage_get__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../site-utilities/cookie-storage/get */ "./src/site/site-utilities/cookie-storage/get.ts");
// @ts-nocheck





/**
 * cookieCheck
 * @param {string} name 
 * @returns boolean
 */
function cookieCheck(name, key, getValue) {
  var bactmCookies = new bactm.Cookies();
  var cookieExists = bactmCookies.get(name);
  var cookie = cookieExists ? JSON.parse(cookieExists) : '';
  if (getValue) return cookie[key];
  return cookie[key] ? true : false; // if key exists, return true.
}

/**
 * isMobileChat
 * @returns boolean
 */
function isMobileChat() {
  var _parentDDO$page;
  var _getParentInfo = (0,_utilities_getParentInfo__WEBPACK_IMPORTED_MODULE_1__.getParentInfo)(),
    parentDDO = _getParentInfo.parentDDO,
    parentHref = _getParentInfo.parentHref;

  // read qs for parameters
  var qsParameters = ['nativeChat=available', 'nativeChat=active', 'wrap=MDA']; // wrap=MDA is not a solid indicator of ACS flow
  var qsCheck = parentHref.includes(qsParameters); // this won't work.

  // read ddo for parameters
  var ddoCheck = (parentDDO === null || parentDDO === void 0 || (_parentDDO$page = parentDDO.page) === null || _parentDDO$page === void 0 || (_parentDDO$page = _parentDDO$page.attributes) === null || _parentDDO$page === void 0 || (_parentDDO$page = _parentDDO$page.chat) === null || _parentDDO$page === void 0 ? void 0 : _parentDDO$page.mobileIndicator) == 'Y' ? true : false;

  // check occtChat cookie
  var occtChatCookieCheck = cookieCheck('occtChat', 'nativeChat');

  // check occtChat_LTS cookie
  var occtChat_LTSCookieCheck = cookieCheck('occtChat_LTS', 'nativeChat');
  if (qsCheck || ddoCheck || occtChatCookieCheck || occtChat_LTSCookieCheck) {
    (0,_utilities__WEBPACK_IMPORTED_MODULE_0__.logGenesysEvent)(1, 'Mobile ACS FLOW ', true);
    return true;
  } else {
    return false;
  }
}
function nativeAndRefIDDefined() {
  var nativeChatCorrect = false;
  var refIDCorrect = false;
  var _getParentInfo2 = (0,_utilities_getParentInfo__WEBPACK_IMPORTED_MODULE_1__.getParentInfo)(),
    parentHref = _getParentInfo2.parentHref;

  // read qs for parameters
  var qsCheck = function qsCheck(key) {
    if (!parentHref) return;
    var parentURLParts = new URL(parentHref);
    // parentHref.includes(qsParameters) // loop through indicators.
    var chatQS = parentURLParts.searchParams.get(key);
    if (!chatQS) return;
    if (key === 'nativeChat' && (chatQS.includes('available') || chatQS.includes('active'))) return nativeChatCorrect = true;
    if (key === 'chatRefID' && chatQS.length > 1 && typeof chatQS === "string") return refIDCorrect = true; // working
    return false;
  };
  var ensureCookieVal = function ensureCookieVal(cookieName, values) {
    var cookie = (0,_site_utilities_cookie_storage_get__WEBPACK_IMPORTED_MODULE_2__["default"])(cookieName);
    if (!cookie) return false;
    if (Array.isArray(values)) {
      values.forEach(function (val) {
        // ensure cookie contains expected values, if so, set 'correct' flags to true.
        if (!cookie || !cookie[val]) return;
        if (val === "nativeChat" && typeof cookie[val] === "string" && cookie[val].length > 0) return nativeChatCorrect = true;
        if (val === "chatRefID" && typeof cookie[val] === "string" && cookie[val].length > 0) return refIDCorrect = true;
        return false;
      });
    }
  };

  // check if query strings are populated and correct.
  qsCheck('nativeChat');
  qsCheck('chatRefID');
  // check if cookies are populated and correct
  // ensureCookieVal('occtChat_LTS', ['chatRefID', 'nativeChat']);
  ensureCookieVal('occtChat', ['chatRefID', 'nativeChat']);

  // if both are defined correctly, return true
  if (nativeChatCorrect && refIDCorrect) return true;
  return false;
}

/***/ }),

/***/ "./src/site/site-utilities/utilities/logger.js":
/*!*****************************************************!*\
  !*** ./src/site/site-utilities/utilities/logger.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ mobileACSLoggerService; }
/* harmony export */ });
/* harmony import */ var _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../site-pub-sub/site-globals */ "./src/site/site-pub-sub/site-globals.ts");
/* harmony import */ var _utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utilities */ "./src/site/site-utilities/utilities.ts");
/* harmony import */ var _getParentInfo__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getParentInfo */ "./src/site/site-utilities/utilities/getParentInfo.ts");



function mobileACSLoggerService(label, error) {
  var _getParentInfo = (0,_getParentInfo__WEBPACK_IMPORTED_MODULE_2__.getParentInfo)(),
    parentHref = _getParentInfo.parentHref;
  console.info(parentHref);
  if (parentHref.includes('secure')) {
    var parentUrl = new URL(parentHref);
    if (!window.bactm_envSelector) return;
    (0,_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(1, 'Client Logger fired', error);
    var errorPayload = {
      "payload": [{
        "logLevel": "debug",
        "entry": "label: ".concat(label, " | error: ").concat(error.message)
      }]
    };
    var domain = parentUrl.origin.replace('secure', 'mservice');
    var errorURL = "".concat(domain).concat(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.ACS_LOGGER_URL);
    fetch(errorURL, {
      headers: {
        Accept: "application/json",
        "Content-Type": "application/json"
      },
      method: "POST",
      body: JSON.stringify(errorPayload),
      credentials: 'include'
    }).then(function (res) {
      console.info(res);
    })["catch"](function (e) {
      console.info(e);
    });
  }
}

/***/ }),

/***/ "./src/site/messaging/channel.ts":
/*!***************************************!*\
  !*** ./src/site/messaging/channel.ts ***!
  \***************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   cometdRequestChannel: function() { return /* binding */ cometdRequestChannel; },
/* harmony export */   cometdSendMessage: function() { return /* binding */ cometdSendMessage; },
/* harmony export */   cometdSubscribeChannel: function() { return /* binding */ cometdSubscribeChannel; },
/* harmony export */   isValidHTMLtag: function() { return /* binding */ isValidHTMLtag; },
/* harmony export */   publishCometdChannelMessages: function() { return /* binding */ publishCometdChannelMessages; },
/* harmony export */   publishCometdChannelSubscription: function() { return /* binding */ publishCometdChannelSubscription; }
/* harmony export */ });
/* harmony import */ var _vendor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./vendor */ "./src/site/messaging/vendor.ts");
/* harmony import */ var _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../site-pub-sub/site-globals */ "./src/site/site-pub-sub/site-globals.ts");
/* harmony import */ var _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../site-utilities/utilities */ "./src/site/site-utilities/utilities.ts");
/* harmony import */ var _site_utilities_cookie_storage_get__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../site-utilities/cookie-storage/get */ "./src/site/site-utilities/cookie-storage/get.ts");
/* harmony import */ var _post_messages__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./post-messages */ "./src/site/messaging/post-messages.ts");
// @ts-nocheck
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
/* eslint-disable camelcase */
/* eslint-disable no-undef */
/** @module cometd/channel */





/**
 * Publish cometd channel messages
 * @param {object} payload - cometd channel messages payload
 */
function publishCometdChannelMessages(payload) {
    TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.COMETD_CHANNEL_MESSAGES, payload);
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__.logGenesysEvent)(1, 'Cometd Channel Message', payload);
}
/**
 * Publish cometd channel subscription
 * @param {object} payload - cometd channel subscription payload
 */
function publishCometdChannelSubscription(payload) {
    TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.COMETD_CHANNEL_SUBSCRIPTION, payload);
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__.logGenesysEvent)(1, 'Cometd Channel Subscription', payload);
}
/**
 * Comet D request channel*
 * @param {string} eventName - name of event
 * @param {string} requestChannel - Channel being requested
 * @param {string} requestChatData - cometd request channel
 * @example
 TealiumPubSub.publish(COMETD_REQUEST_CHANNEL, {
  requestChannel: '/service/chatV2/digital-poc',
  requestChatData: {
      operation: "requestChat",
      firstName: "Joan",
      lastName: "Smith",
      subject: "Savings Account",
      userData: {
          key1: "value1",
          key2: "value2"
      },
      auth: {
          username: "user1",
          password: "pass1"
      }
  }
});
 */
function cometdRequestChannel(eventName, _a) {
    var requestChannel = _a.requestChannel, requestChatData = _a.requestChatData;
    try {
        var refIDCookie = (0,_site_utilities_cookie_storage_get__WEBPACK_IMPORTED_MODULE_3__["default"])('mockRefID');
        var chatRefID = refIDCookie === null || refIDCookie === void 0 ? void 0 : refIDCookie.mockRefID;
        if (chatRefID && window.bactm_envSelector === 'notprod')
            requestChatData.userData.CHAT_REF_ID = chatRefID;
        var dataToSend_1 = requestChatData.userData;
        if (dataToSend_1.MLD_OAO_ACCOUNTNUMBER)
            delete dataToSend_1.MLD_OAO_ACCOUNTNUMBER;
        Object.keys(dataToSend_1).forEach(function (key) {
            var value = dataToSend_1[key];
            if (typeof value === 'undefined' || value === null) {
                delete dataToSend_1[key];
            }
            else if (Array.isArray(value) && value.length === 0) {
                delete dataToSend_1[key];
            }
            else if (Array.isArray(value) && value.length) {
                var altValue = value.toString();
                dataToSend_1[key] = altValue;
            }
            else if (typeof value === 'object') {
                var altValue = JSON.stringify(value);
                dataToSend_1[key] = altValue;
            }
            else if (typeof value !== 'string' && value.toString()) {
                var altValue = value.toString();
                dataToSend_1[key] = altValue;
            }
            else {
                dataToSend_1[key] = value;
            }
        });
        // eslint-disable-next-line no-param-reassign
        requestChatData.userData = __assign({}, dataToSend_1);
        _vendor__WEBPACK_IMPORTED_MODULE_0__["default"].publish(requestChannel, requestChatData);
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__.logGenesysEvent)(1, 'Cometd Request Channel', { requestChannel: requestChannel, requestChatData: requestChatData });
        var isMonitoring = window.bactm.ddo.get('page.attributes.chat.monitoring');
        if (isMonitoring)
            (0,_post_messages__WEBPACK_IMPORTED_MODULE_4__.sendPostMessage)(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.CANCEL_HEARTBEAT);
    }
    catch (e) {
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__.logGenesysEvent)(3, 'Cometd Request Channel Error', e);
        if (bactm && bactm.plugins && bactm.plugins.pixelTag)
            bactm.plugins.pixelTag.firePixelTag("".concat(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.PIXEL_TAG_URL, "?error=").concat(e));
        TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.GENERIC_FAILURE, { event: 'cometdRequestChannel', error: e });
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__.increaseErrorCount)();
    }
}
/**
 * Comet D subscribe to channel
 * @param {string} eventName - name of event
 * @param {string} requestChannel - requested channel relative url
 */
function cometdSubscribeChannel(eventName, _a) {
    var requestChannel = _a.requestChannel;
    try {
        _vendor__WEBPACK_IMPORTED_MODULE_0__["default"].subscribe(requestChannel, publishCometdChannelMessages, publishCometdChannelSubscription);
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__.logGenesysEvent)(1, 'Cometd Subscribe Channel', { requestChannel: requestChannel });
    }
    catch (e) {
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__.logGenesysEvent)(3, 'Cometd Subscribe Channel Error', e);
        if (bactm && bactm.plugins && bactm.plugins.pixelTag)
            bactm.plugins.pixelTag.firePixelTag("".concat(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.PIXEL_TAG_URL, "?error=").concat(e));
        TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.GENERIC_FAILURE, { event: 'cometdSubscribeChannel', error: e });
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__.increaseErrorCount)();
    }
}
/**
   * Handles incoming message event from utag.
   *
   * @param {String} value - the messages string from user input
   * @returns {Boolean} true if allow whitelisted tags, false otherwise
  */
function isValidHTMLtag(value) {
    var checkHTMLallowedTags = false;
    var allowedTags = [
        '<body>',
        '</body>',
        '<ul>',
        '</ul>',
        '<ol>',
        '</ol>',
        '<li>',
        '</li>',
        '<span>',
        '</span>',
        '<br>',
        '</br>',
        '<b>',
        '</b>',
        '<u>',
        '</u>',
        '<em>',
        '</em>',
        '<i>',
        '</i>',
        '<sup>',
        '</sup>',
        '<strong>',
        '</strong>',
        '<small>',
        '</small>',
        '<p>',
        '</p>',
        '<br>',
        '</br>',
        '<h1>',
        '</h1>',
        '<h2>',
        '</h2>',
        '<h3>',
        '</h3>',
        '<div>',
        '</div>'
    ];
    var domEle = new DOMParser().parseFromString(value, "text/html");
    var link = domEle.querySelectorAll('a'); // locate your <a> tag
    if (link.length > 0) {
        link.forEach(function (tag) {
            return tag.href != "javascript:foo()" ? checkHTMLallowedTags = false : checkHTMLallowedTags = true;
        });
    }
    else {
        var tagsInArray = domEle.body.outerHTML.match(/\<.*?\>/g);
        var jsonArray = [];
        jsonArray = tagsInArray === null || tagsInArray === void 0 ? void 0 : tagsInArray.map(function (i) {
            return allowedTags.includes(i);
        });
        for (var i = 0; i <= (jsonArray === null || jsonArray === void 0 ? void 0 : jsonArray.length); i++) {
            if (jsonArray[i] == false) {
                checkHTMLallowedTags = true;
                return checkHTMLallowedTags;
            }
            else {
                checkHTMLallowedTags = false;
            }
        }
    }
    return checkHTMLallowedTags;
}
/**
 * Comet D send message
 * @param {string} eventName - name of event
 * @param {string} requestChannel - requested channel relative url
 * @param {string} data - user's send message information
 * @example
 TealiumPubSub.publish(COMETD_REQUEST_SEND_MESSAGE, {
  requestChannel: '/service/chatV2/digital-poc',
  data: {
      secureKey: "***********",
      operation: 'sendMessage',
      message: 'Hello, ...'
  }
});
 */
function cometdSendMessage(eventName, _a) {
    var requestChannel = _a.requestChannel, data = _a.data;
    try {
        // filter for malicious inputs
        var value = data === null || data === void 0 ? void 0 : data.message;
        var scriptExp = /(<[A-Za-z0-9_\s]+)[A-Za-z0-9_\/]*(on\S+)(\s+)?=(\s+)?["']?/ig;
        var scriptTag = /<[^>]*script|(?:<[^>]+\s)(on\S+)(\s+)?=(\s+)?["']?/ig;
        var scriptOther = /(<[A-Za-z0-9_\s\S]+)[A-Za-z0-9_\/]*(on\S+)(\s+)?=(\s+)?["']?/ig;
        var iFrameTag = /<[^>]*iframe/ig;
        // Adding condition for cross site scripting issue
        var allHtmlTags = /<\/?[a-z][\s\S]*>/i.test(value);
        if (allHtmlTags && isValidHTMLtag(value))
            return;
        if (value.match(scriptExp) || value.match(scriptTag) || value.match(iFrameTag || value.match(scriptOther)))
            throw new Error('Invalid Input Received');
        _vendor__WEBPACK_IMPORTED_MODULE_0__["default"].publish(requestChannel, data);
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__.logGenesysEvent)(1, 'Cometd Send Message', { requestChannel: requestChannel, data: data });
    }
    catch (e) {
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__.logGenesysEvent)(3, 'Cometd Send Message Error', e);
        if (bactm && bactm.plugins && bactm.plugins.pixelTag)
            bactm.plugins.pixelTag.firePixelTag("".concat(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.PIXEL_TAG_URL, "?error=").concat(e));
        TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.GENERIC_FAILURE, { event: 'cometdSendMessage', error: e });
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__.increaseErrorCount)();
    }
}


/***/ }),

/***/ "./src/site/messaging/disconnect.ts":
/*!******************************************!*\
  !*** ./src/site/messaging/disconnect.ts ***!
  \******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* export default binding */ __WEBPACK_DEFAULT_EXPORT__; }
/* harmony export */ });
/* harmony import */ var _vendor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./vendor */ "./src/site/messaging/vendor.ts");
/* harmony import */ var _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../site-pub-sub/site-globals */ "./src/site/site-pub-sub/site-globals.ts");
/* harmony import */ var _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../site-utilities/utilities */ "./src/site/site-utilities/utilities.ts");
// @ts-nocheck
/* eslint-disable no-undef */
/* eslint-disable camelcase */
/** @module web-socket/disconnect */



/**
 * disconnect from chat
 * @example
 cometd.disconnect();
 */
/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(eventName) {
    try {
        // TODO follow cometd's types
        _vendor__WEBPACK_IMPORTED_MODULE_0__["default"].disconnect(function () { });
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__.logGenesysEvent)(1, 'Cometd Disconnect', eventName);
    }
    catch (e) {
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__.logGenesysEvent)(3, 'Cometd Disconnect Error', e);
        if (bactm && bactm.plugins && bactm.plugins.pixelTag)
            bactm.plugins.pixelTag.firePixelTag("".concat(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.PIXEL_TAG_URL, "?error=").concat(e));
        TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.GENERIC_FAILURE, { event: 'cometdDisconnet', error: e });
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__.increaseErrorCount)();
    }
}


/***/ }),

/***/ "./src/site/messaging/handlers/channel-message.ts":
/*!********************************************************!*\
  !*** ./src/site/messaging/handlers/channel-message.ts ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ handleChannelMessage; },
/* harmony export */   isValidHTMLtag: function() { return /* binding */ isValidHTMLtag; }
/* harmony export */ });
/* harmony import */ var _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../site-pub-sub/site-globals */ "./src/site/site-pub-sub/site-globals.ts");
/* harmony import */ var _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../site-utilities/utilities */ "./src/site/site-utilities/utilities.ts");
/* harmony import */ var _site_utilities_cookie_storage_set__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../site-utilities/cookie-storage/set */ "./src/site/site-utilities/cookie-storage/set.ts");
// @ts-nocheck
/* eslint-disable max-len */
/* eslint-disable camelcase */
/* eslint-disable no-undef */
/* eslint-disable consistent-return */
/** @module messaging/handlers/channelMessage */



/**
   * Handles incoming message event from utag.
   *
   * @param {String} value - the messages string from user input
   * @returns {Boolean} true if allow whitelisted tags, false otherwise
  */
function isValidHTMLtag(value) {
    var checkHTMLallowedTags = false;
    var allowedTags = [
        '<body>',
        '</body>',
        '<ul>',
        '</ul>',
        '<ol>',
        '</ol>',
        '<li>',
        '</li>',
        '<span>',
        '</span>',
        '<br>',
        '</br>',
        '<b>',
        '</b>',
        '<u>',
        '</u>',
        '<em>',
        '</em>',
        '<i>',
        '</i>',
        '<sup>',
        '</sup>',
        '<strong>',
        '</strong>',
        '<small>',
        '</small>',
        '<p>',
        '</p>',
        '<br>',
        '</br>',
        '<h1>',
        '</h1>',
        '<h2>',
        '</h2>',
        '<h3>',
        '</h3>',
        '<div>',
        '</div>'
    ];
    var domEle = new DOMParser().parseFromString(value, "text/html");
    var link = domEle.querySelectorAll('a'); // locate your <a> tag
    if (link.length > 0) {
        link.forEach(function (tag) {
            return tag.href != "javascript:foo()" ? checkHTMLallowedTags = false : checkHTMLallowedTags = true;
        });
    }
    else {
        var tagsInArray = domEle.body.outerHTML.match(/\<.*?\>/g);
        var jsonArray = [];
        jsonArray = tagsInArray === null || tagsInArray === void 0 ? void 0 : tagsInArray.map(function (i) {
            return allowedTags.includes(i);
        });
        for (var i = 0; i <= jsonArray.length; i++) {
            if (jsonArray[i] == false) {
                checkHTMLallowedTags = true;
                return checkHTMLallowedTags;
            }
            else {
                checkHTMLallowedTags = false;
            }
        }
    }
    return checkHTMLallowedTags;
}
/**
 * Subscribe Tealium and Sparta widget loader events
 * @param {string} eventName - name of event
 * @param {object} payload - Cometd channel message payload
 * @returns {boolean}
 */
function handleChannelMessage(eventName, payload) {
    try {
        var _a = payload.data, secureKey = _a.secureKey, messages = _a.messages;
        var scriptExp_1 = /(<[A-Za-z0-9_\s]+)[A-Za-z0-9_\/]*(on\S+)(\s+)?=(\s+)?["']?/ig;
        var scriptTag_1 = /<[^>]*script|(?:<[^>]+\s)(on\S+)(\s+)?=(\s+)?["']?/ig;
        var scriptOther_1 = /(<[A-Za-z0-9_\s\S]+)[A-Za-z0-9_\/]*(on\S+)(\s+)?=(\s+)?["']?/ig;
        var iFrameTag_1 = /<[^>]*iframe/ig;
        if (secureKey && messages[0]) {
            var index = messages[0].index;
            (0,_site_utilities_cookie_storage_set__WEBPACK_IMPORTED_MODULE_2__["default"])({ secureKey: secureKey, index: index });
        }
        else {
            (0,_site_utilities_cookie_storage_set__WEBPACK_IMPORTED_MODULE_2__["default"])({ secureKey: secureKey });
        }
        payload.data.messages.forEach(function (message, index) {
            if (!message.text)
                return;
            var value = message.text;
            // Adding condition for cross site scripting issue
            var allHtmlTags = /<\/?[a-z][\s\S]*>/i.test(value);
            if (allHtmlTags && isValidHTMLtag(value)) {
                payload.data.messages[index].text = '<script />';
            }
            // returning <script /> for failed messages since it will be blocked by chat-site code. Cannot delete the whole object as it causes problems.
            if (value.match(scriptExp_1) || value.match(scriptTag_1) || value.match(iFrameTag_1 || value.match(scriptOther_1))) {
                payload.data.messages[index].text = '<script />';
            }
        });
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishWindow)(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_CHANNEL_MESSAGES, payload);
        return false;
    }
    catch (e) {
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(3, 'Cometd Handle Channel Message Error', e);
        if (bactm && bactm.plugins && bactm.plugins.pixelTag) {
            bactm.plugins.pixelTag.firePixelTag("".concat(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.PIXEL_TAG_URL, "?error=").concat(e));
        }
        TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_FAILURE, {
            event: 'handleChannelMessage',
            error: e,
        });
    }
}


/***/ }),

/***/ "./src/site/messaging/handlers/request-channel.ts":
/*!********************************************************!*\
  !*** ./src/site/messaging/handlers/request-channel.ts ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ handleRequestChannel; }
/* harmony export */ });
/* harmony import */ var _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../site-pub-sub/site-globals */ "./src/site/site-pub-sub/site-globals.ts");
/* harmony import */ var _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../site-utilities/utilities */ "./src/site/site-utilities/utilities.ts");
// @ts-nocheck
/* eslint-disable camelcase */
/* eslint-disable no-undef */
/** @module messaging/handlers/request-channel */


/**
 * Request chat channel
 * @param {object} payload - Cometd channel request payload
 * @returns {boolean}
 */
function handleRequestChannel(payload) {
    var requestChannelPayload = { requestChannel: payload.detail.requestChannel,
        requestChatData: payload.detail.requestChatData };
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishTealium)(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_REQUEST_CHANNEL, requestChannelPayload);
    return false;
}


/***/ }),

/***/ "./src/site/messaging/handlers/request-handshake.ts":
/*!**********************************************************!*\
  !*** ./src/site/messaging/handlers/request-handshake.ts ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ handleRequestHandshake; }
/* harmony export */ });
/* harmony import */ var _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../site-pub-sub/site-globals */ "./src/site/site-pub-sub/site-globals.ts");
/* harmony import */ var _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../site-utilities/utilities */ "./src/site/site-utilities/utilities.ts");
// @ts-nocheck
/** @module messaging/handlers/request-handshake */


/**
 * Request chat handshake
 * @returns {boolean}
 */
function handleRequestHandshake() {
    var _a, _b, _c;
    var currentTLD = (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.getCurrentDomain)();
    var payload = {
        widget: (_c = (_b = (_a = spaParams === null || spaParams === void 0 ? void 0 : spaParams.siteParams) === null || _a === void 0 ? void 0 : _a.domains) === null || _b === void 0 ? void 0 : _b[currentTLD]) === null || _c === void 0 ? void 0 : _c.widgetAPIEndpoint,
        genesys: spaParams.siteParams.domains[currentTLD].genesys,
    };
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishTealium)(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_REQUEST_HANDSHAKE, payload);
    return false;
}


/***/ }),

/***/ "./src/site/messaging/handshake.ts":
/*!*****************************************!*\
  !*** ./src/site/messaging/handshake.ts ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* export default binding */ __WEBPACK_DEFAULT_EXPORT__; }
/* harmony export */ });
/* harmony import */ var _vendor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./vendor */ "./src/site/messaging/vendor.ts");
/* harmony import */ var _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../site-pub-sub/site-globals */ "./src/site/site-pub-sub/site-globals.ts");
/* harmony import */ var _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../site-utilities/utilities */ "./src/site/site-utilities/utilities.ts");
// @ts-nocheck
/* eslint-disable no-undef */
/* eslint-disable camelcase */
/** @module web-socket/handshake */



/**
 * Make handshake w/ cometd websocket
 * @param {string} eventName - name of event
 * @param {string} genesys - Environment variable from Sparta. needs to be LLE specific
 * @example
 cometd.configure({ url: `${genesys}cometd` });
 cometd.handshake();
 */
/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(eventName, _a) {
    var genesys = _a.genesys;
    var configuration = {
        url: "".concat(genesys, "cometd"),
    };
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__.logGenesysEvent)(1, 'Cometd Handshake', configuration);
    try {
        _vendor__WEBPACK_IMPORTED_MODULE_0__["default"].configure(configuration);
        // TODO follow cometd's types
        _vendor__WEBPACK_IMPORTED_MODULE_0__["default"].handshake(function () { });
    }
    catch (e) {
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__.logGenesysEvent)(3, 'Cometd Handshake Error', e);
        if (bactm && bactm.plugins && bactm.plugins.pixelTag)
            bactm.plugins.pixelTag.firePixelTag("".concat(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.PIXEL_TAG_URL, "?error=").concat(e));
        TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.GENERIC_FAILURE, { event: 'cometdHandshake', error: e });
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__.increaseErrorCount)();
    }
}


/***/ }),

/***/ "./src/site/messaging/meta.ts":
/*!************************************!*\
  !*** ./src/site/messaging/meta.ts ***!
  \************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* export default binding */ __WEBPACK_DEFAULT_EXPORT__; },
/* harmony export */   publishEvent: function() { return /* binding */ publishEvent; }
/* harmony export */ });
/* harmony import */ var _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../site-pub-sub/site-globals */ "./src/site/site-pub-sub/site-globals.ts");
/* harmony import */ var _vendor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./vendor */ "./src/site/messaging/vendor.ts");
/* harmony import */ var _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../site-utilities/utilities */ "./src/site/site-utilities/utilities.ts");
// @ts-nocheck
/* eslint-disable camelcase */
/* eslint-disable no-undef */
/** @module messaging/meta */



/**
 * Publish cometD meta channel event
 * @param {object} payload - cometd request response data
 * @example
 cometd.addListener('/meta/handshake', () => {}));
 cometd.addListener('/meta/connect', () => {}));
 cometd.addListener('/meta/disconnect', () => {}));
 cometd.addListener('/meta/subscribe', () => {}));
 cometd.addListener('/meta/unsubscribe', () => {}));
 cometd.addListener('/meta/publish', () => {}));
 cometd.addListener('/meta/unsuccessful', () => {}));
 */
// eslint-disable-next-line consistent-return
function publishEvent(payload) {
    if (payload.successful) {
        switch (payload.channel) {
            case '/meta/handshake':
                TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_META_HANDSHAKE, payload);
                break;
            case '/meta/connect':
                TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_META_CONNECT, payload);
                break;
            case '/meta/disconnect':
                TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_META_DISCONNECT, payload);
                break;
            case '/meta/subscribe':
                TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_META_SUBSCRIBE, payload);
                break;
            case '/meta/unsubscribe':
                TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_META_UNSUBSCRIBE, payload);
                break;
            case '/meta/publish':
                TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_META_PUBLISH, payload);
                break;
            case '/meta/unsuccessful':
                TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_META_UNSUCCESSFUL, payload);
                break;
            default:
                return false;
        }
    }
}
/**
 * Add cometd listeners
 * come back in meta listeners
 * @example
 cometd.addListener('/meta/*', () => {}));
 */
/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__() {
    _vendor__WEBPACK_IMPORTED_MODULE_1__["default"].addListener('/meta/*', publishEvent);
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__.logGenesysEvent)(1, 'Cometd Meta Listeners', 'Adding listeners for handshake, connect, disconnect, subscribe, unsubscribe, publish, and unsuccessful');
    return false;
}


/***/ }),

/***/ "./src/site/messaging/nickname-update.ts":
/*!***********************************************!*\
  !*** ./src/site/messaging/nickname-update.ts ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* export default binding */ __WEBPACK_DEFAULT_EXPORT__; }
/* harmony export */ });
/* harmony import */ var _vendor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./vendor */ "./src/site/messaging/vendor.ts");
/* harmony import */ var _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../site-pub-sub/site-globals */ "./src/site/site-pub-sub/site-globals.ts");
/* harmony import */ var _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../site-utilities/utilities */ "./src/site/site-utilities/utilities.ts");
// @ts-nocheck
/* eslint-disable no-undef */
/* eslint-disable camelcase */
/* eslint-disable no-param-reassign */
/* eslint-disable guard-for-in */
/* eslint-disable no-restricted-syntax */
/** @module messaging/notification */



/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(eventName, cometdUpdateNicknamePayload) {
    try {
        var requestChannel = cometdUpdateNicknamePayload.requestChannel, nickname = cometdUpdateNicknamePayload.nickname, secureKey = cometdUpdateNicknamePayload.secureKey, operation = cometdUpdateNicknamePayload.operation;
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__.logGenesysEvent)(1, 'Cometd Update Nickname Data', cometdUpdateNicknamePayload);
        _vendor__WEBPACK_IMPORTED_MODULE_0__["default"].publish(requestChannel, {
            nickname: nickname,
            secureKey: secureKey,
            operation: operation,
        });
        TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.COMETD_UPDATE_SUCCESS, {});
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__.logGenesysEvent)(1, _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.COMETD_UPDATE_SUCCESS);
    }
    catch (e) {
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__.logGenesysEvent)(3, 'Cometd Update Nickname Error', e);
        if (bactm && bactm.plugins && bactm.plugins.pixelTag)
            bactm.plugins.pixelTag.firePixelTag("".concat(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.PIXEL_TAG_URL, "?error=").concat(e));
        TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.COMETD_UPDATE_FAILURE, e);
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__.increaseErrorCount)();
    }
}


/***/ }),

/***/ "./src/site/messaging/notification.ts":
/*!********************************************!*\
  !*** ./src/site/messaging/notification.ts ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* export default binding */ __WEBPACK_DEFAULT_EXPORT__; }
/* harmony export */ });
/* harmony import */ var _vendor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./vendor */ "./src/site/messaging/vendor.ts");
/* harmony import */ var _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../site-pub-sub/site-globals */ "./src/site/site-pub-sub/site-globals.ts");
/* harmony import */ var _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../site-utilities/utilities */ "./src/site/site-utilities/utilities.ts");
// @ts-nocheck
/* eslint-disable camelcase */
/* eslint-disable no-undef */
/** @module messaging/notification */



/**
 * Comet D request notification
 * @param {string} eventName - name of event
 * @param {string} cometdNotificationPayload - Channel being requested
 * @example
 window.sparta.chat.widgetLoader.pub('COMETD_REQUEST_NOTIFICATION', {
    requestChannel: '/service/chatV2/testing',
    transcriptPosition: 0,
    secureKey:'...',
    operation: 'requestNotifications'
});
 */
/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(eventName, cometdNotificationPayload) {
    try {
        _vendor__WEBPACK_IMPORTED_MODULE_0__["default"].publish(cometdNotificationPayload.requestChannel, cometdNotificationPayload);
        var agentLTS = bactm.Store('chat', { type: 'cookie' });
        var agentID = agentLTS.get('secureAgentID');
        digitalData.page.attributes.chat.agent_id = agentID;
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__.logGenesysEvent)(1, 'Cometd Request Notifications', cometdNotificationPayload);
    }
    catch (e) {
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__.logGenesysEvent)(3, 'Cometd Request Notifications Error', e);
        if (bactm && bactm.plugins && bactm.plugins.pixelTag)
            bactm.plugins.pixelTag.firePixelTag("".concat(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.PIXEL_TAG_URL, "?error=").concat(e));
        TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.GENERIC_FAILURE, { event: 'cometdRequestNotifications', error: e });
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__.increaseErrorCount)();
    }
}


/***/ }),

/***/ "./src/site/messaging/post-messages.ts":
/*!*********************************************!*\
  !*** ./src/site/messaging/post-messages.ts ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* export default binding */ __WEBPACK_DEFAULT_EXPORT__; },
/* harmony export */   postToCancelSubsOnWidget: function() { return /* binding */ postToCancelSubsOnWidget; },
/* harmony export */   sendPostMessage: function() { return /* binding */ sendPostMessage; }
/* harmony export */ });
/* harmony import */ var _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../site-pub-sub/site-globals */ "./src/site/site-pub-sub/site-globals.ts");
/* harmony import */ var _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../site-utilities/utilities */ "./src/site/site-utilities/utilities.ts");
/* harmony import */ var _sales_sale_event__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../sales/sale-event */ "./src/site/sales/sale-event.ts");
/* harmony import */ var _site_utilities_cookie_storage_get__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../site-utilities/cookie-storage/get */ "./src/site/site-utilities/cookie-storage/get.ts");
/* harmony import */ var _site_api_handlers_request_preconnect__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../site-api/handlers/request-preconnect */ "./src/site/site-api/handlers/request-preconnect.ts");
/* harmony import */ var _site_utilities_utilities_getParentInfo__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../site-utilities/utilities/getParentInfo */ "./src/site/site-utilities/utilities/getParentInfo.ts");
// @ts-nocheck
/**
 * PostMessages
 * The following script provides the post message scripts that provide communication back
 * and forth with the widget. All of the messages will be kept in this file and not set
 * as a function so the counters will be remembered and stored.
 *
 */






var win = window.opener;
var chatOrigin = '';
if (window !== window.top) {
    win = window.parent;
}
function terminateGenesysChat() {
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(1, 'Canceling All Site Subscriptions', 'Disconnecting Cometd and all subscriptions');
    TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_REQUEST_DISCONNECT);
    TealiumPubSub.clearAllSubscriptions();
}
/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__() {
    // window.spaParams is needed to pass chat configs back to the widget, ensuring that is defined before publishing utagInit;
    if (win && window.spaParams) {
        win.postMessage({ utagInit: true }, '*');
    }
    else {
        var checkForSpaParams_1 = setInterval(function () {
            if (!window.spaParams)
                return;
            clearInterval(checkForSpaParams_1);
            return window.postMessage({ utagInit: true }, '*');
        }, 100);
        setTimeout(function () {
            clearInterval(checkForSpaParams_1);
        }, 5000);
    }
    function handlePostMessage(event) {
        if (event.data.ddo && event.data.href)
            (0,_site_utilities_utilities_getParentInfo__WEBPACK_IMPORTED_MODULE_5__.setParentInfo)(event.data);
        if (event.data.utagInit) {
            chatOrigin = event.data.utagInit.postMessageOrigin;
            if (event.data.utagInit.showDebugConsole)
                window.showChatDebugConsole = true;
            if (event.data.utagInit.postMessageOrigin)
                (0,_site_utilities_utilities_getParentInfo__WEBPACK_IMPORTED_MODULE_5__.setOrigin)(event.data.utagInit.postMessageOrigin);
            sendPostMessage(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.CHECK_FOR_SALE);
        }
        if (event.data.vtimData) {
            var data = event.data.vtimData;
            switch (data.message) {
                case _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.SEND_PROXY_DATA:
                    processProxyMessage(data);
                    break;
                case _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.SET_MONITORING_STATUS:
                    bactm.ddo.set('page.attributes.chat.monitoring', data.monitoringStatus);
                    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(1, 'Monitoring Status Post Message', { status: data.monitoringStatus });
                    break;
                case _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_REQUEST_NATIVE_CHAT:
                    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishTealium)(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_REQUEST_NATIVE_CHAT, event.data.vtimData.dataToSend);
                    break;
                case _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_SET_AGENT_ID:
                    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishTealium)(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_SET_AGENT_ID, event.data.vtimData.dataToSend);
                    break;
                default:
                    break;
            }
            ;
        }
        if (typeof event.data === 'string') {
            if (event.origin !== chatOrigin) {
                (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(2, 'Post Message Bad Origin', { origin: event.origin });
                return;
            }
            switch (event.data) {
                case _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.CANCEL_SITE_SUBS:
                    terminateGenesysChat();
                    break;
                case _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.CHECK_AH_TOKEN:
                    var findAhToken = (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.getAhToken)();
                    if (!(0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.isEmptyObj)(findAhToken)) {
                        sendPostMessage(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.GRAB_HEARTBEAT_DATA);
                    }
                    else {
                        TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_VALIDATE_IP_ADDRESS, {
                            ogwUrl: _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.OGW_URL,
                        });
                    }
                    break;
                default:
                    break;
            }
        }
    }
    function processProxyMessage(data) {
        if (!data.genesysData[data.key])
            data.genesysData[data.key] = data.newValue;
        if (data.key === 'site_id') {
            var preConnectParams = (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.getParams)();
            var occtChat = (0,_site_utilities_cookie_storage_get__WEBPACK_IMPORTED_MODULE_3__["default"])();
            if (!occtChat.secureKey) {
                preConnectParams._page_id = data.newValue;
                bactm.ddo.set('page.attributes.chat.site_id', data.newValue);
                bactm.ddo.set('page.attributes.chat.altered_site_id', true);
                (0,_site_api_handlers_request_preconnect__WEBPACK_IMPORTED_MODULE_4__["default"])({ detail: preConnectParams });
            }
            ;
        }
        else if (_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.SALE_INDICATORS.indexOf(data.key) > -1) {
            (0,_sales_sale_event__WEBPACK_IMPORTED_MODULE_2__["default"])(data.genesysData, data.key);
        }
        ;
    }
    window.removeEventListener("message", handlePostMessage.bind(window), false);
    window.addEventListener('message', handlePostMessage.bind(window), false);
}
function sendPostMessage(data) {
    try {
        win.postMessage(data, chatOrigin);
    }
    catch (err) {
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(3, 'Post Message Error', err);
    }
}
function postToCancelSubsOnWidget() {
    terminateGenesysChat();
    sendPostMessage(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.CANCEL_WIDGET_SUBS);
}


/***/ }),

/***/ "./src/site/messaging/typing.ts":
/*!**************************************!*\
  !*** ./src/site/messaging/typing.ts ***!
  \**************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* export default binding */ __WEBPACK_DEFAULT_EXPORT__; }
/* harmony export */ });
/* harmony import */ var _vendor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./vendor */ "./src/site/messaging/vendor.ts");
/* harmony import */ var _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../site-pub-sub/site-globals */ "./src/site/site-pub-sub/site-globals.ts");
/* harmony import */ var _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../site-utilities/utilities */ "./src/site/site-utilities/utilities.ts");
// @ts-nocheck
/* eslint-disable no-undef */
/* eslint-disable camelcase */
/** @module messaging/typing */



/**
 * Comet D typing
 * @param {string} eventName - name of event publishing
 * @param {string} requestChannel - chat request channel
 * @param {string} payload - cometd request payload
 * @example
TealiumPubSub.publish('COMETD_NOTIFY_START_TYPING', {
    requestChannel: '/service/chatV2/digital-poc',
    data: {
        secureKey: "***********",
        operation: 'startTyping',
        message: 'User is Typing'
    }
});

TealiumPubSub.publish('COMETD_NOTIFY_READ_RECEIPT', {
    requestChannel: '/service/chatV2/digital-poc',
    data: {
        secureKey: "***********",
        operation: 'readReceipt',
        transcriptPosition: 1
    }
});

TealiumPubSub.publish(COMETD_REQUEST_SEND_MESSAGE, {
    requestChannel: '/service/chatV2/digital-poc',
    data: {
        secureKey: "***********",
        operation: 'sendMessage',
        message: 'Hello, ...'
    }
});
 */
/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(eventName, _a) {
    var requestChannel = _a.requestChannel, payload = _a.payload;
    try {
        _vendor__WEBPACK_IMPORTED_MODULE_0__["default"].publish(requestChannel, payload);
    }
    catch (e) {
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__.logGenesysEvent)(3, 'Cometd Typing Error', e);
        if (bactm && bactm.plugins && bactm.plugins.pixelTag)
            bactm.plugins.pixelTag.firePixelTag("".concat(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.PIXEL_TAG_URL, "?error=").concat(e));
        TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.GENERIC_FAILURE, { event: 'cometdTypingNotification', error: e });
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__.increaseErrorCount)();
    }
}


/***/ }),

/***/ "./src/site/messaging/update.ts":
/*!**************************************!*\
  !*** ./src/site/messaging/update.ts ***!
  \**************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* export default binding */ __WEBPACK_DEFAULT_EXPORT__; }
/* harmony export */ });
/* harmony import */ var _vendor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./vendor */ "./src/site/messaging/vendor.ts");
/* harmony import */ var _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../site-pub-sub/site-globals */ "./src/site/site-pub-sub/site-globals.ts");
/* harmony import */ var _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../site-utilities/utilities */ "./src/site/site-utilities/utilities.ts");
// @ts-nocheck
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
/* eslint-disable no-undef */
/* eslint-disable camelcase */
/* eslint-disable no-param-reassign */
/* eslint-disable guard-for-in */
/* eslint-disable no-restricted-syntax */
/** @module messaging/notification */



/**
 * Comet D request notification
 * @param {string} eventName - name of event
 * @param {string} cometdUpdatePayload - Channel info, Customer Info, Data being sent
 * @example
 window.sparta.chat.widgetLoader.pub('COMETD_REQUEST_NOTIFICATION', {
    requestChannel: '/service/chatV2/customer-support',
    userData: { key1: value1, key2: value2, etc...}
    secureKey:'...',
    operation: 'updateData'
});
 */
/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(eventName, cometdUpdatePayload) {
    try {
        var dataToSend_1 = cometdUpdatePayload.userData;
        if (dataToSend_1.MLD_OAO_ACCOUNTNUMBER)
            delete dataToSend_1.MLD_OAO_ACCOUNTNUMBER;
        Object.keys(dataToSend_1).forEach(function (key) {
            var value = dataToSend_1[key];
            if (typeof value === 'undefined' || value === null) {
                delete dataToSend_1[key];
            }
            else if (Array.isArray(value) && value.length === 0) {
                delete dataToSend_1[key];
            }
            else if (Array.isArray(value) && value.length) {
                var altValue = value.toString();
                dataToSend_1[key] = altValue;
            }
            else if (typeof value === 'object') {
                var altValue = JSON.stringify(value);
                dataToSend_1[key] = altValue;
            }
            else if (typeof value !== 'string' && value.toString()) {
                var altValue = value.toString();
                dataToSend_1[key] = altValue;
            }
            else {
                dataToSend_1[key] = value;
            }
        });
        // eslint-disable-next-line no-param-reassign
        cometdUpdatePayload.userData = __assign({}, dataToSend_1);
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__.logGenesysEvent)(1, 'Cometd Update Data', cometdUpdatePayload);
        _vendor__WEBPACK_IMPORTED_MODULE_0__["default"].publish(cometdUpdatePayload.requestChannel, cometdUpdatePayload);
        TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.COMETD_UPDATE_SUCCESS, {});
    }
    catch (e) {
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__.logGenesysEvent)(3, 'Cometd Update Data Error', e);
        if (bactm && bactm.plugins && bactm.plugins.pixelTag)
            bactm.plugins.pixelTag.firePixelTag("".concat(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.PIXEL_TAG_URL, "?error=").concat(e));
        TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.COMETD_UPDATE_FAILURE, e);
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_2__.increaseErrorCount)();
    }
}


/***/ }),

/***/ "./src/site/messaging/vendor.ts":
/*!**************************************!*\
  !*** ./src/site/messaging/vendor.ts ***!
  \**************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var cometd__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cometd */ "./node_modules/cometd/cometd.js");
/* harmony import */ var cometd__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(cometd__WEBPACK_IMPORTED_MODULE_0__);
// @ts-nocheck
/** @module messaging/cometd */

/**
 * Integrate cometd
 */
/* harmony default export */ __webpack_exports__["default"] = (new (cometd__WEBPACK_IMPORTED_MODULE_0___default().CometD)());


/***/ }),

/***/ "./src/site/sales/sale-event.ts":
/*!**************************************!*\
  !*** ./src/site/sales/sale-event.ts ***!
  \**************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* export default binding */ __WEBPACK_DEFAULT_EXPORT__; },
/* harmony export */   errorSaleEvent: function() { return /* binding */ errorSaleEvent; },
/* harmony export */   successSaleEvent: function() { return /* binding */ successSaleEvent; }
/* harmony export */ });
/* harmony import */ var _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../site-pub-sub/site-globals */ "./src/site/site-pub-sub/site-globals.ts");
/* harmony import */ var _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../site-utilities/utilities */ "./src/site/site-utilities/utilities.ts");
/* harmony import */ var _site_utilities_cookie_storage_get__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../site-utilities/cookie-storage/get */ "./src/site/site-utilities/cookie-storage/get.ts");
/* harmony import */ var _site_utilities_cookie_storage_set__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../site-utilities/cookie-storage/set */ "./src/site/site-utilities/cookie-storage/set.ts");
// @ts-nocheck
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
/* eslint-disable guard-for-in */
/* eslint-disable no-param-reassign */
/* eslint-disable camelcase */
/* eslint-disable no-undef */
/* eslint-disable no-restricted-syntax */
/** @module sales/notification */




/**
 * Error Sale Event
 * @param {object} response - Error response
 * @returns {boolean}
 */
function errorSaleEvent(response) {
    TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_SALES_OCCURRED_FAILURE, response);
    if (bactm && bactm.plugins && bactm.plugins.pixelTag)
        bactm.plugins.pixelTag.firePixelTag("".concat(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.PIXEL_TAG_URL, "?error=").concat(response));
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(3, 'Cometd Sales Occurred Failure', response);
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.increaseErrorCount)();
    return false;
}
/**
 * Success Sale Event
 * @param {object} response - Success Response
 * @example
// success response

 * @returns {boolean}
 */
function successSaleEvent(response) {
    TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_SALES_OCCURRED_SUCCESS, response);
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(1, 'Cometd Sales Occurred Success', response);
    return false;
}
/**
 * Sale Occurred Event
 * @param {string} eventName - name of event
 * @param {string} cometdSalesOccurredPayload - Channel info, Interaction ID, Data being sent
 * @example
 TealiumPubSub.publish('COMETD_REQUEST_SALE_OCCURRED', {
    requestChannel: '/service/chatV2/customer-support',
    userData: { key1: value1, key2: value2, etc...},
    interaction_id: ID,
});
 */
/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(data, key) {
    try {
        if (typeof bactm === 'undefined')
            throw new Error('Bactm Not Defined, Sale Cannot Process');
        var genesysData_1 = __assign({}, data);
        var inqClientOrderNum = genesysData_1.inqClientOrderNum || data[key];
        if (!inqClientOrderNum)
            return;
        var cookieInfo = (0,_site_utilities_cookie_storage_get__WEBPACK_IMPORTED_MODULE_2__["default"])(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.COOKIE_LTS.NAME);
        var agent_id = cookieInfo.secureAgentID;
        var interaction_id = cookieInfo.ix_id;
        var previousOrderNums = cookieInfo.inqClientOrderNum || null;
        if (previousOrderNums)
            previousOrderNums = previousOrderNums.toString();
        var orderNumArray = previousOrderNums && previousOrderNums.split(',') || null;
        if (inqClientOrderNum && agent_id) {
            if (orderNumArray && orderNumArray.indexOf(inqClientOrderNum.toString()) > -1) {
                return;
            }
        }
        if (previousOrderNums) {
            var newOrderNum = "".concat(previousOrderNums, ",").concat(inqClientOrderNum);
            genesysData_1.inqClientOrderNum = newOrderNum;
            cookieInfo.inqClientOrderNum = newOrderNum;
            (0,_site_utilities_cookie_storage_set__WEBPACK_IMPORTED_MODULE_3__["default"])(cookieInfo, _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.COOKIE_LTS);
        }
        else {
            genesysData_1.inqClientOrderNum = inqClientOrderNum;
            cookieInfo.inqClientOrderNum = inqClientOrderNum;
            (0,_site_utilities_cookie_storage_set__WEBPACK_IMPORTED_MODULE_3__["default"])(cookieInfo, _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.COOKIE_LTS);
        }
        if (agent_id && interaction_id) {
            var dataToSend_1 = __assign(__assign({}, genesysData_1), { agent_id: agent_id });
            if (dataToSend_1.MLD_OAO_ACCOUNTNUMBER)
                delete dataToSend_1.MLD_OAO_ACCOUNTNUMBER;
            Object.keys(dataToSend_1).forEach(function (key) {
                var value = dataToSend_1[key];
                if (typeof value === 'undefined' || value === null) {
                    delete dataToSend_1[key];
                }
                else if (Array.isArray(value) && value.length === 0) {
                    delete dataToSend_1[key];
                }
                else if (Array.isArray(value) && value.length) {
                    var altValue = value.toString();
                    dataToSend_1[key] = altValue;
                }
                else if (typeof value === 'object') {
                    var altValue = JSON.stringify(value);
                    dataToSend_1[key] = altValue;
                }
                else if (typeof value !== 'string' && value.toString()) {
                    var altValue = value.toString();
                    dataToSend_1[key] = altValue;
                }
                else {
                    dataToSend_1[key] = value;
                }
            });
            (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(1, 'Cometd Sales Occurred Data', dataToSend_1);
            var currentTLD = (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.getCurrentDomain)();
            var domain = spaParams.siteParams.domains[currentTLD].genesys;
            var jsonUserData = JSON.stringify(dataToSend_1);
            var genesysSaleEventURL = "".concat(domain).concat(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_UPDATE_CHAT_DATA_ENDPOINT);
            var genesysSaleEventParams = "_userdata=".concat(jsonUserData, "&_interaction_id=").concat(interaction_id);
            fetch(genesysSaleEventURL, {
                method: 'POST',
                body: genesysSaleEventParams,
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                credentials: 'include',
            })
                .then(function (resp) { return resp.json(); })
                .then(successSaleEvent)
                .catch(errorSaleEvent);
            if (window.dataCollector) {
                window.dataCollector.push({
                    event: _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_SALES_OCCURRED_SUCCESS,
                    data: {
                        inqClientOrderNum: dataToSend_1.inqClientOrderNum,
                    },
                });
            }
        }
    }
    catch (e) {
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(3, 'Cometd Sales Occurred Error', e);
        errorSaleEvent(e);
    }
}


/***/ }),

/***/ "./src/site/site-api/co-browse.ts":
/*!****************************************!*\
  !*** ./src/site/site-api/co-browse.ts ***!
  \****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* export default binding */ __WEBPACK_DEFAULT_EXPORT__; }
/* harmony export */ });
/* harmony import */ var _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../site-pub-sub/site-globals */ "./src/site/site-pub-sub/site-globals.ts");
/* harmony import */ var _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../site-utilities/utilities */ "./src/site/site-utilities/utilities.ts");
/* eslint-disable func-names */
/* eslint-disable no-underscore-dangle */
/* eslint-disable prefer-const */
/* eslint-disable no-undef */
/* eslint-disable camelcase */
/** @module site-api/coBrowse */


/**
 * Co browse
 * @param {string} eventName - name of event
 * @param {object} configuration
 * TODO http://localhost:4000/sparta-demo/chat-widget-demo/undefinedjs/gcb.min.js undefined is envCobrowseURL
 * TODO Cobrowse configuration incorrect
 */
/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(eventName, configuration) {
    try {
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(1, 'Genesys Cobrowse Configuration', configuration);
        (function (d, s, id, o) {
            var _a;
            var fs = d.getElementsByTagName(s)[0];
            var e;
            if (d.getElementById(id))
                return;
            e = d.createElement(s);
            e.id = id;
            e.src = o.src;
            e.setAttribute('data-gcb-url', o.cbUrl);
            (_a = fs.parentNode) === null || _a === void 0 ? void 0 : _a.insertBefore(e, fs);
        }(document, 'script', 'genesys-js', {
            src: "".concat(configuration.envCobrowseURL, "js/gcb.min.js"),
            cbUrl: configuration.envCobrowseURL,
        }));
        window._genesys = configuration;
        TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_COBROWSE_CONFIGURED, configuration);
    }
    catch (e) {
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(3, 'Genesys Cobrowse Error', e);
        if (bactm && bactm.plugins && bactm.plugins.pixelTag)
            bactm.plugins.pixelTag.firePixelTag("".concat(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.PIXEL_TAG_URL, "?error=").concat(e));
        TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENERIC_FAILURE, { event: 'requestCoBrowse', error: e });
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.increaseErrorCount)();
    }
}


/***/ }),

/***/ "./src/site/site-api/handlers/configure-cobrowse.ts":
/*!**********************************************************!*\
  !*** ./src/site/site-api/handlers/configure-cobrowse.ts ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ handleConfigureCobrowse; }
/* harmony export */ });
/* harmony import */ var _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../site-utilities/utilities */ "./src/site/site-utilities/utilities.ts");
/* harmony import */ var _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../site-pub-sub/site-globals */ "./src/site/site-pub-sub/site-globals.ts");
// @ts-nocheck
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
/* eslint-disable prefer-object-spread */
/* eslint-disable no-undef */
/** @module site-api/handlers/configure-cobrowse */


/**
 * Handle cobrowse
 * @param {object} payload
 * @returns {boolean}
 */
function handleConfigureCobrowse(payload) {
    var _a, _b, _c;
    var currentTLD = (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_0__.getCurrentDomain)();
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_0__.publishTealium)(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.GENESYS_COBROWSE_CONFIGURATION, __assign(__assign({}, payload.detail), { envCobrowseURL: (_c = (_b = (_a = spaParams === null || spaParams === void 0 ? void 0 : spaParams.siteParams) === null || _a === void 0 ? void 0 : _a.domains) === null || _b === void 0 ? void 0 : _b[currentTLD]) === null || _c === void 0 ? void 0 : _c.cobrowse }));
    return false;
}


/***/ }),

/***/ "./src/site/site-api/handlers/request-polling.ts":
/*!*******************************************************!*\
  !*** ./src/site/site-api/handlers/request-polling.ts ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ handleRequestPolling; }
/* harmony export */ });
/* harmony import */ var _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../site-utilities/utilities */ "./src/site/site-utilities/utilities.ts");
/* harmony import */ var _site_utilities_utilities_getParentInfo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../site-utilities/utilities/getParentInfo */ "./src/site/site-utilities/utilities/getParentInfo.ts");
/* harmony import */ var _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../site-pub-sub/site-globals */ "./src/site/site-pub-sub/site-globals.ts");
/* harmony import */ var _site_utilities_isMobileChat__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../site-utilities/isMobileChat */ "./src/site/site-utilities/isMobileChat.js");
/* eslint-disable camelcase */
/** @module genesys/handlers/requestPreConnect */




/**
 * Request genesys pre connect
 * @returns {boolean}
 */
function handleRequestPolling(_a) {
    var _b = _a.detail, _language_code = _b._language_code, _customer_lob = _b._customer_lob, _site_id = _b._site_id, _unit = _b._unit, _programtrait = _b._programtrait, _run_id = _b._run_id, _route_param = _b._route_param, _account_type = _b._account_type, _channel = _b._channel, _page_id = _b._page_id, nativeChat = _b.nativeChat, UAID = _b.UAID;
    try {
        var parentHref = (0,_site_utilities_utilities_getParentInfo__WEBPACK_IMPORTED_MODULE_1__.getParentInfo)().parentHref;
    }
    catch (error) {
        bactm.reportError(error);
    }
    var handleLOB = function (lob) {
        if (parentHref) {
            if (parentHref.includes('/secure-offers/customizedSbOffers'))
                return "sbob";
        }
        return lob;
    };
    var pageId = null;
    var currentTLD = (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_0__.getCurrentDomain)();
    // <--------------------------------------------------------------------------->
    var configuration = {
        languageCode: _language_code,
        pollingUrl: _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_2__.GENESYS_CHAT_SERVICE_ENDPOINT,
        domain: spaParams.siteParams.domains[currentTLD].genesys,
        customerLob: handleLOB(_customer_lob) || '',
        siteID: _site_id || '',
        unit: _unit || '',
        programTrait: _programtrait || '',
        runID: _run_id || '',
        routeParam: _route_param || '',
        accountType: _account_type || '',
        channel: _channel || null,
        mobileIndicator: (0,_site_utilities_isMobileChat__WEBPACK_IMPORTED_MODULE_3__.nativeAndRefIDDefined)() ? 'Y' : 'N',
        UAID: UAID // new parameter per Collaborators
    };
    // <--------------------------------------------------------------------------->
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_0__.logGenesysEvent)(1, 'Genesys Request Polling Config', configuration);
    try {
        var alteredSiteID = bactm.ddo.get('page.attributes.chat.altered_site_id');
        pageId = alteredSiteID ? bactm.ddo.get('page.attributes.chat.site_id') : _page_id;
        Object.assign(configuration, {
            pageId: pageId,
        });
    }
    catch (e) {
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_0__.logGenesysEvent)(3, 'Genesys Request Polling Error', e);
        if (bactm && bactm.plugins && bactm.plugins.pixelTag)
            bactm.plugins.pixelTag.firePixelTag("".concat(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_2__.PIXEL_TAG_URL, "?error=").concat(e));
        TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_2__.GENERIC_FAILURE, { event: 'handleRequestPolling', error: e });
    }
    var pollingTimer = setInterval(function () {
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_0__.waitForAHToken)(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_2__.GENESYS_REQUEST_POLLING, configuration);
    }, 30000);
    function clearPollingInterval() {
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_0__.logGenesysEvent)(1, 'Genesys Suspend Polling', 'Clearing polling timer');
        clearInterval(pollingTimer);
        TealiumPubSub.unsubscribe(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_2__.GENESYS_SUSPEND_POLLING);
    }
    TealiumPubSub.subscribe(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_2__.GENESYS_SUSPEND_POLLING, clearPollingInterval);
}


/***/ }),

/***/ "./src/site/site-api/handlers/request-preconnect.ts":
/*!**********************************************************!*\
  !*** ./src/site/site-api/handlers/request-preconnect.ts ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ handleRequestPreConnect; }
/* harmony export */ });
/* harmony import */ var _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../site-utilities/utilities */ "./src/site/site-utilities/utilities.ts");
/* harmony import */ var _site_utilities_utilities_getParentInfo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../site-utilities/utilities/getParentInfo */ "./src/site/site-utilities/utilities/getParentInfo.ts");
/* harmony import */ var _site_utilities_isMobileChat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../site-utilities/isMobileChat */ "./src/site/site-utilities/isMobileChat.js");
/* harmony import */ var _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../site-pub-sub/site-globals */ "./src/site/site-pub-sub/site-globals.ts");
/* eslint-disable camelcase */
/** @module genesys/handlers/requestPreConnect */




/**
 * Request genesys pre connect
 * @returns {boolean}
 */
function handleRequestPreConnect(_a) {
    var _b, _c, _d;
    var _e = _a.detail, _language_code = _e._language_code, _customer_lob = _e._customer_lob, _site_id = _e._site_id, _unit = _e._unit, _programtrait = _e._programtrait, _run_id = _e._run_id, _route_param = _e._route_param, _account_type = _e._account_type, _channel = _e._channel, _page_id = _e._page_id, chatID = _e.chatID, nativeChat = _e.nativeChat, UAID = _e.UAID;
    try {
        var _f = (0,_site_utilities_utilities_getParentInfo__WEBPACK_IMPORTED_MODULE_1__.getParentInfo)(), parentDDO = _f.parentDDO, parentTitle = _f.parentTitle, parentHref = _f.parentHref;
        var currentWebPage = parentTitle || '';
        var bactmCookies = new bactm.Cookies();
        // may not be needed anymore
        var ddoMobileIndicator = (_d = (_c = (_b = parentDDO === null || parentDDO === void 0 ? void 0 : parentDDO.page) === null || _b === void 0 ? void 0 : _b.attributes) === null || _c === void 0 ? void 0 : _c.chat) === null || _d === void 0 ? void 0 : _d.mobileIndicator;
        // change to LTS cookie
        var cookieExists = bactmCookies.get('occtChat');
        var occtChatCookie = cookieExists ? JSON.parse(cookieExists) : '';
        var chatIDChecker = occtChatCookie.chatRefID ? occtChatCookie.chatRefID : '';
        var nativeChatChecker = occtChatCookie.nativeChat ? occtChatCookie.nativeChat : '';
    }
    catch (error) {
        bactm.reportError(error);
    }
    var ensureNativeChat = nativeChat || nativeChatChecker;
    var pageId = null;
    var currentTLD = (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_0__.getCurrentDomain)();
    // Add object destructing
    var nativeChatConfig = {
        currentWebPage: currentWebPage,
        chatID: chatID || chatIDChecker,
    };
    if (ensureNativeChat) {
        // only log this when necessary
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_0__.logGenesysEvent)(1, 'Genesys Request Native Chat Config', nativeChatConfig);
    }
    var handleLOB = function (lob) {
        if (parentHref) {
            if (parentHref.includes('/secure-offers/customizedSbOffers'))
                return "sbob";
        }
        return lob;
    };
    // <--------------------------------------------------------------------------->
    var configuration = {
        languageCode: _language_code,
        pageId: pageId,
        customerLob: handleLOB(_customer_lob) || '',
        accountType: _account_type || '',
        channel: _channel || null,
        preConnectUrl: _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_3__.GENESYS_CHAT_SERVICE_ENDPOINT,
        domain: spaParams.siteParams.domains[currentTLD].genesys,
        siteID: _site_id || '',
        unit: _unit || '',
        programTrait: _programtrait || '',
        runID: _run_id || '',
        routeParam: _route_param || '',
        mobileIndicator: (0,_site_utilities_isMobileChat__WEBPACK_IMPORTED_MODULE_2__.nativeAndRefIDDefined)() ? 'Y' : 'N',
        UAID: UAID,
    };
    // <--------------------------------------------------------------------------->
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_0__.logGenesysEvent)(1, 'Genesys Request Preconnect Config', configuration);
    try {
        pageId = _page_id;
        Object.assign(configuration, { pageId: pageId });
        nativeChatConfig.pageId = pageId;
    }
    catch (e) {
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_0__.logGenesysEvent)(3, 'Genesys Request Preconnect Error', e);
        if (bactm && bactm.plugins && bactm.plugins.pixelTag) {
            bactm.plugins.pixelTag.firePixelTag("".concat(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_3__.PIXEL_TAG_URL, "?error=").concat(e));
        }
        TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_3__.GENERIC_FAILURE, {
            event: 'handleRequestPreConnect',
            error: e,
        });
    }
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_0__.publishTealium)(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_3__.GENESYS_REQUEST_PRE_CONNECT, configuration);
    return false;
}


/***/ }),

/***/ "./src/site/site-api/handlers/survey-get-response.ts":
/*!***********************************************************!*\
  !*** ./src/site/site-api/handlers/survey-get-response.ts ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ surveyGetResponse; }
/* harmony export */ });
/* harmony import */ var _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../site-utilities/utilities */ "./src/site/site-utilities/utilities.ts");
/* harmony import */ var _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../site-pub-sub/site-globals */ "./src/site/site-pub-sub/site-globals.ts");
/** @module site-api/handlers/surveyGetResponse */
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};


/**
 * Handle survey get response
 * @param {object} payload
 * @returns {boolean}
 */
function surveyGetResponse(payload, isPrechat) {
    var _a, _b, _c, _d, _e, _f;
    if (isPrechat === void 0) { isPrechat = false; }
    var tempObj = {
        payload: payload.detail,
    };
    var currentTLD = (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_0__.getCurrentDomain)();
    var surveyDetails = __assign(__assign({}, tempObj), { envSurveyURL: ((_c = (_b = (_a = spaParams === null || spaParams === void 0 ? void 0 : spaParams.siteParams) === null || _a === void 0 ? void 0 : _a.domains) === null || _b === void 0 ? void 0 : _b[currentTLD]) === null || _c === void 0 ? void 0 : _c.survey) ||
            ((_f = (_e = (_d = spaParams === null || spaParams === void 0 ? void 0 : spaParams.siteParams) === null || _d === void 0 ? void 0 : _d.domains) === null || _e === void 0 ? void 0 : _e[currentTLD]) === null || _f === void 0 ? void 0 : _f.genesys), chatSurveyEndpoint: _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.GENESYS_CHAT_SURVEY_ENDPOINT });
    if (isPrechat)
        Object.assign(surveyDetails, { isPrechat: isPrechat });
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_0__.waitForAHToken)(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.SURVEY_GET_RESPONSE, surveyDetails);
    return false;
}


/***/ }),

/***/ "./src/site/site-api/native-chat-update.ts":
/*!*************************************************!*\
  !*** ./src/site/site-api/native-chat-update.ts ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* export default binding */ __WEBPACK_DEFAULT_EXPORT__; },
/* harmony export */   errorUpdateEvent: function() { return /* binding */ errorUpdateEvent; },
/* harmony export */   successUpdateEvent: function() { return /* binding */ successUpdateEvent; }
/* harmony export */ });
/* harmony import */ var _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../site-pub-sub/site-globals */ "./src/site/site-pub-sub/site-globals.ts");
/* harmony import */ var _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../site-utilities/utilities */ "./src/site/site-utilities/utilities.ts");
/* harmony import */ var _site_utilities_utilities_logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../site-utilities/utilities/logger */ "./src/site/site-utilities/utilities/logger.js");
/** @module site-api/nativeChatUpdate */



/**
 * Error nativeChatUpdate Event
 * @param {object} response - Error response
 * @returns {boolean}
 */
function errorUpdateEvent(response) {
    TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_REQUEST_NATIVE_CHAT_FAILURE, response);
    if (bactm && bactm.plugins && bactm.plugins.pixelTag) {
        bactm.plugins.pixelTag.firePixelTag("".concat(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.PIXEL_TAG_URL, "?error=").concat(response));
    }
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(3, ' Native Chat Request Failure', response);
    (0,_site_utilities_utilities_logger__WEBPACK_IMPORTED_MODULE_2__["default"])('updateChatData', response);
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.increaseErrorCount)();
    return false;
}
/**
 * Success nativeChatUpdate Event
 * @param {object} response - Success response
 * @returns {boolean}
 *
 * success response
 * {
 *   Id: "6H98FMGB7T7EP9E3VF6QVEDG3S0000DF",
 *   Reason: "SUCCESSFULLY UPDATED"
 *  }
 */
function successUpdateEvent(response) {
    // TODO: add in a thing to the response to keep the session going no matter what.
    // Just for testing 12 / 13 / 2022 Kevin Conway
    TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_REQUEST_NATIVE_CHAT_SUCCESS, /* response */ response);
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(1, 'Genesys Request Native Chat Success', /* response */ response);
    return false;
}
/**
 * Makes nativeChat=active request to genesys
 * @param {string} eventName - name of event
 * @param {object} configuration - payload
 */
/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(event, _a) {
    var CHAT_ID = _a.CHAT_ID, currentWebPage = _a.currentWebPage;
    try {
        if (typeof bactm === 'undefined') {
            throw new Error('Native Chat Request unable to process');
        }
        var genesysData_1 = {
            CURRENT_PAGE: currentWebPage,
        };
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(1, 'Genesys Native Chat Pageview Params', genesysData_1);
        // TODO: remove requirement to check for chat_id kpc.
        if (CHAT_ID) {
            // While confusing, currently, this is how its setup. Chat ID and Interaction ID are not the same.
            var interactionID = CHAT_ID;
            var currentTLD = (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.getCurrentDomain)();
            var GSID = (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.getGSID)();
            var domain = spaParams.siteParams.domains[currentTLD].genesys;
            var jsonUserData = JSON.stringify(genesysData_1);
            var genesysPreConnectParams = {
                _interaction_id: interactionID,
                _userdata: jsonUserData,
                _GSID: GSID,
                _updateForActiveChatOnly: 'Y',
            };
            (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(1, 'Genesys Native Chat Request Params', genesysPreConnectParams);
            var genesysNativeChatEndPoint = "".concat(domain).concat(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_UPDATE_CHAT_DATA_ENDPOINT);
            fetch(genesysNativeChatEndPoint, {
                method: 'POST',
                body: JSON.stringify(genesysPreConnectParams),
                headers: {
                    'Content-Type': 'application/json',
                },
                credentials: 'include',
            }).then(function (resp) { return resp.json(); }).then(successUpdateEvent).catch(errorUpdateEvent);
        }
        else {
            (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(3, 'Chat Id undefined', CHAT_ID);
        }
    }
    catch (e) {
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(3, 'Genesys Native Chat Error occurred', e);
        errorUpdateEvent(e);
    }
}


/***/ }),

/***/ "./src/site/site-api/polling.ts":
/*!**************************************!*\
  !*** ./src/site/site-api/polling.ts ***!
  \**************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* export default binding */ __WEBPACK_DEFAULT_EXPORT__; },
/* harmony export */   errorPolling: function() { return /* binding */ errorPolling; },
/* harmony export */   successPolling: function() { return /* binding */ successPolling; }
/* harmony export */ });
/* harmony import */ var _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../site-pub-sub/site-globals */ "./src/site/site-pub-sub/site-globals.ts");
/* harmony import */ var _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../site-utilities/utilities */ "./src/site/site-utilities/utilities.ts");
/* harmony import */ var _messaging_post_messages__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../messaging/post-messages */ "./src/site/messaging/post-messages.ts");
/* eslint-disable camelcase */
/** @module genesys/polling */



/**
* Error polling
* @param {object} response - Error response
* @returns {boolean}
*/
function errorPolling(response) {
    TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_REQUEST_POLLING_FAILURE, response);
    if (bactm && bactm.plugins && bactm.plugins.pixelTag)
        bactm.plugins.pixelTag.firePixelTag("".concat(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.PIXEL_TAG_URL, "?error=").concat(response));
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(3, 'Genesys Request Polling Failure', response);
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.increaseErrorCount)();
    return false;
}
/**
* Success polling
* @param {object} response - polling response
* @example
// success response
{
"Availability": "false",
"Reason": "Out of Office Hours",
"EWT": 0,
"AgentAvailable": 3,
"Id": "GL7R2K4DJP6JN7FFTRK5A1B5CC0000TJ",
"SplashMessage": "Chat Splash Message"
}
* @returns {boolean}
*/
function successPolling(response) {
    TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_REQUEST_POLLING_SUCCESS, response);
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(1, 'Genesys Polling Response', response);
    var Availability = response.Availability;
    var isMonitoring = window.digitalData.page.attributes.chat.monitoring;
    // eslint-disable-next-line no-unused-vars
    var isInPage = (window.top === window.self);
    if (!Availability && isMonitoring) {
        (0,_messaging_post_messages__WEBPACK_IMPORTED_MODULE_2__.sendPostMessage)(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.CANCEL_HEARTBEAT);
    }
    return false;
}
/**
* Making polling request to genesys
* @param {string} eventName - name of event
* @param {object} configuration
*/
// <--------------------------------------------------------------------------->
/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(eventName, configuration) {
    try {
        var customerLob = configuration.customerLob, domain = configuration.domain, languageCode = configuration.languageCode, pageId = configuration.pageId, pollingUrl = configuration.pollingUrl, siteID = configuration.siteID, unit = configuration.unit, programTrait = configuration.programTrait, runID = configuration.runID, routeParam = configuration.routeParam, accountType = configuration.accountType, channel = configuration.channel, // only used in OLB
        mobileIndicator = configuration.mobileIndicator, _a = configuration.UAID, UAID = _a === void 0 ? '' : _a;
        // eslint-disable-next-line prefer-const
        var genesysPollingEndpoint = "".concat(domain).concat(pollingUrl);
        var GSID = (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.getGSID)();
        // add new parameter to all 3 of these use cases below.
        var uaIDDefined = UAID.length > 0 ? "&_UAID=".concat(UAID) : "";
        var genesysPollingParams = "_language_code=".concat(languageCode, "&_page_id=").concat(pageId, "&_customer_lob=").concat(customerLob, "&_account_type=").concat(accountType, "&_channel=").concat(channel, "&_mobile_indicator=").concat(mobileIndicator, "&_GSID=").concat(GSID).concat(uaIDDefined);
        if (siteID !== '') {
            genesysPollingParams = "_site_id=".concat(siteID, "&_unit=").concat(unit, "&_programtrait=").concat(programTrait, "&_pagemarker=").concat(runID).concat(uaIDDefined);
        }
        else if (routeParam !== '') {
            genesysPollingParams = "_route_param=".concat(routeParam, "&_language_code=").concat(languageCode, "&_customer_lob=").concat(customerLob).concat(uaIDDefined);
        }
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(1, 'Genesys Polling Availability', genesysPollingParams);
        fetch(genesysPollingEndpoint, {
            method: 'POST',
            body: genesysPollingParams,
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
            },
            credentials: 'include',
        })
            .then(function (resp) { return resp.json(); })
            .then(successPolling)
            .catch(errorPolling);
    }
    catch (e) {
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(3, 'Genesys Polling Error', e);
        errorPolling(e);
    }
}


/***/ }),

/***/ "./src/site/site-api/pre-connect.ts":
/*!******************************************!*\
  !*** ./src/site/site-api/pre-connect.ts ***!
  \******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* export default binding */ __WEBPACK_DEFAULT_EXPORT__; },
/* harmony export */   errorCheckPreConnect: function() { return /* binding */ errorCheckPreConnect; },
/* harmony export */   successCheckPreConnect: function() { return /* binding */ successCheckPreConnect; }
/* harmony export */ });
/* harmony import */ var _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../site-pub-sub/site-globals */ "./src/site/site-pub-sub/site-globals.ts");
/* harmony import */ var _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../site-utilities/utilities */ "./src/site/site-utilities/utilities.ts");
/* harmony import */ var _messaging_post_messages__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../messaging/post-messages */ "./src/site/messaging/post-messages.ts");
/** @module genesys/preConnect */



/**
 * Error check pre connect errorCheckPreConnect
 * @param {object} response - Error response
 * @returns {boolean}
 */
function errorCheckPreConnect(response) {
    TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_REQUEST_PRE_CONNECT_FAILURE, response);
    if (bactm && bactm.plugins && bactm.plugins.pixelTag)
        bactm.plugins.pixelTag.firePixelTag("".concat(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.PIXEL_TAG_URL, "?error=").concat(response));
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(3, 'Genesys Preconnect Failure', response);
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.increaseErrorCount)();
    return false;
}
/**
 * Success check pre connect
 * @param {object} response - pre connect response
 * @example
// success response
{
  "Availability": "false",
  "Reason": "Out of Office Hours",
  "EWT": 0,
  "AgentAvailable": 3,
  "Id": "GL7R2K4DJP6JN7FFTRK5A1B5CC0000TJ",
  "SplashMessage": "Chat Splash Message"
}
 * @returns {boolean}
 */
function successCheckPreConnect(response) {
    TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_REQUEST_PRE_CONNECT_SUCCESS, response);
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(1, 'Genesys Preconnect Success', response);
    // this sets bactm_lts cookie with a chatService object and RLD property
    var chatService = bactm.Store('chatService', { type: 'cookie' });
    chatService.set('RLD', response === null || response === void 0 ? void 0 : response.RLD);
    chatService.save();
    if (response && response.IP && bactm && bactm.ddo) {
        bactm.ddo.set('page.attributes.chat.IP_ADDRESS', response.IP);
    }
    var Availability = response.Availability;
    var isMonitoring = window.digitalData.page.attributes.chat.monitoring;
    if (!Availability && isMonitoring) {
        (0,_messaging_post_messages__WEBPACK_IMPORTED_MODULE_2__.sendPostMessage)(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.CANCEL_HEARTBEAT);
    }
    return false;
}
/**
 * Making pre connects request to genesys
 * @param {string} eventName - name of event
 * @param {object} configuration
 */
// <--------------------------------------------------------------------------->
/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(eventName, configuration) {
    try {
        var domain = configuration.domain, languageCode = configuration.languageCode, pageId = configuration.pageId, preConnectUrl = configuration.preConnectUrl, customerLob = configuration.customerLob, siteID = configuration.siteID, unit = configuration.unit, programTrait = configuration.programTrait, runID = configuration.runID, routeParam = configuration.routeParam, accountType = configuration.accountType, channel = configuration.channel, // only used in OLB
        mobileIndicator = configuration.mobileIndicator, _a = configuration.UAID, UAID = _a === void 0 ? '' : _a;
        // eslint-disable-next-line prefer-const
        var genesysPreConnectEndpoint = "".concat(domain).concat(preConnectUrl);
        var GSID = (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.getGSID)();
        // add new parameter to all 3 of these use cases below.
        var uaIDDefined = UAID.length > 0 ? "&_UAID=".concat(UAID) : "";
        var genesysPreConnectParams = "_language_code=".concat(languageCode, "&_page_id=").concat(pageId, "&_customer_lob=").concat(customerLob, "&_account_type=").concat(accountType, "&_channel=").concat(channel, "&_mobile_indicator=").concat(mobileIndicator, "&_GSID=").concat(GSID).concat(uaIDDefined);
        if (siteID !== '') {
            genesysPreConnectParams = "_site_id=".concat(siteID, "&_unit=").concat(unit, "&_programtrait=").concat(programTrait, "&_pagemarker=").concat(runID).concat(uaIDDefined);
        }
        else if (routeParam !== '') {
            genesysPreConnectParams = "_route_param=".concat(routeParam, "&_language_code=").concat(languageCode, "&_customer_lob=").concat(customerLob).concat(uaIDDefined);
        }
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(1, 'Genesys Preconnect Params', genesysPreConnectParams);
        fetch(genesysPreConnectEndpoint, {
            method: 'POST',
            body: genesysPreConnectParams,
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
            },
            credentials: 'include',
        })
            .then(function (resp) { return resp.json(); })
            .then(successCheckPreConnect)
            .catch(errorCheckPreConnect);
    }
    catch (error) {
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(3, 'Genesys Preconnect Error', error);
        errorCheckPreConnect(error);
    }
}


/***/ }),

/***/ "./src/site/site-api/request-tc-update.ts":
/*!************************************************!*\
  !*** ./src/site/site-api/request-tc-update.ts ***!
  \************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* export default binding */ __WEBPACK_DEFAULT_EXPORT__; },
/* harmony export */   errorTCUpdateEvent: function() { return /* binding */ errorTCUpdateEvent; },
/* harmony export */   successTCUpdateEvent: function() { return /* binding */ successTCUpdateEvent; }
/* harmony export */ });
/* harmony import */ var _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../site-pub-sub/site-globals */ "./src/site/site-pub-sub/site-globals.ts");
/* harmony import */ var _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../site-utilities/utilities */ "./src/site/site-utilities/utilities.ts");


/**
 * Error tc-update Event
 * @param {object} response - Error response
 * @returns {boolean}
 */
function errorTCUpdateEvent(response) {
    TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_REQUEST_TC_UPDATE_FAILURE, response);
    if (bactm && bactm.plugins && bactm.plugins.pixelTag) {
        bactm.plugins.pixelTag.firePixelTag("".concat(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.PIXEL_TAG_URL, "?error=").concat(response));
    }
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(3, 'TC-Update Request Failure', response);
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.increaseErrorCount)();
    return false;
}
/**
 * Success tc-update Event
 * @param {object} response - Success Response
 * @returns {boolean}
 *
 * success response
 * {
 *  "Reason": "Successfully Updated",
 *  "Id": "TBKKO53JJH26P227A9KCB8BNHG000UCA",
 *  "IsChatActive": "N"
 *    }
 */
function successTCUpdateEvent(response) {
    TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_REQUEST_TC_UPDATE_SUCCESS, response);
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(1, 'GENESYS REQUEST TC UPDATE SUCCESS', response);
    return false;
}
/**
 * Makes terms and conditions update
 * @param {string} eventName - name of event
 * @param {object} payload - name of event
 * payload example
 * "{\"OFFER_MGMT\":[{\"currentUrl\":\"https://www.bankofamerica.com/credit-cards/products/cash-back-credit-card/?campaign=4063778~EK~en_US\",\"referrer\":\"https://www.bankofamerica.com/credit-cards/\",\"productName\":\"Bank of America Customized Cash Rewards Credit Card\",\"tcLink\":\"https://www.bankofamerica.com/credit-cards/terms-and-conditions/?campaignid=4063778&productoffercode=EK&locale=en_US\",\"timeStamp\":\"1:37:31 PM\",\"pageType\":\"research\"},{\"currentUrl\":\"https://www.bankofamerica.com/credit-cards/products/unlimited-cash-back-student-credit-card/\",\"referrer\":\"https://www.bankofamerica.com/credit-cards/student-credit-cards/\",\"productName\":\"Bank of America Unlimited Cash Rewards Credit Card for Students\",\"tcLink\":\"https://www.bankofamerica.com/credit-cards/terms-and-conditions/?campaignid=4063922&productoffercode=S7&locale=en_US\",\"timeStamp\":\"1:48:08 PM\",\"pageType\":\"research\"}]}"

 */
/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(event, _a) {
    var chatID = _a.chatID, OFFER_MGMT = _a.OFFER_MGMT;
    try {
        if (typeof bactm === 'undefined') {
            throw new Error('GENESYS REQUEST TC UPDATE REQUEST unable to process');
        }
        var genesysData_1 = {
            OFFER_MGMT: OFFER_MGMT
        };
        if (chatID && OFFER_MGMT) {
            var interactionID = chatID;
            var currentTLD = (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.getCurrentDomain)();
            var GSID = (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.getGSID)();
            var domain = spaParams.siteParams.domains[currentTLD].genesys;
            var jsonUserData = JSON.stringify(genesysData_1);
            var genesysTCUpdateParams = {
                _interaction_id: interactionID,
                _userdata: jsonUserData,
                _GSID: GSID,
                _updateForActiveChatOnly: 'Y'
            };
            (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(1, 'GENESYS TERMS AND CONDITIONS UPDATE PARAMS', genesysTCUpdateParams);
            var genesysNativeChatEndpoint = "".concat(domain).concat(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_UPDATE_CHAT_DATA_ENDPOINT);
            fetch(genesysNativeChatEndpoint, {
                method: 'POST',
                body: JSON.stringify(genesysTCUpdateParams),
                headers: {
                    'Content-Type': 'application/json'
                },
                credentials: 'include'
            }).then(function (resp) { return resp.json(); }).then(successTCUpdateEvent).catch(errorTCUpdateEvent);
        }
        else {
            (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(3, 'Chat ID undefined', chatID);
        }
    }
    catch (e) {
        errorTCUpdateEvent(e);
    }
}


/***/ }),

/***/ "./src/site/site-api/send-survey.ts":
/*!******************************************!*\
  !*** ./src/site/site-api/send-survey.ts ***!
  \******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* export default binding */ __WEBPACK_DEFAULT_EXPORT__; },
/* harmony export */   errorSendSurvey: function() { return /* binding */ errorSendSurvey; },
/* harmony export */   successSendSurvey: function() { return /* binding */ successSendSurvey; }
/* harmony export */ });
/* harmony import */ var _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../site-pub-sub/site-globals */ "./src/site/site-pub-sub/site-globals.ts");
/* harmony import */ var _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../site-utilities/utilities */ "./src/site/site-utilities/utilities.ts");
/* harmony import */ var _site_utilities_cookie_storage_get__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../site-utilities/cookie-storage/get */ "./src/site/site-utilities/cookie-storage/get.ts");
/* eslint-disable camelcase */



/**
 * Error Send Survey
 * @param {object} response - Error response
 * @returns {boolean}
 */
function errorSendSurvey(response) {
    TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_SEND_SURVEY_FAILURE, response);
    if (bactm && bactm.plugins && bactm.plugins.pixelTag)
        bactm.plugins.pixelTag.firePixelTag("".concat(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.PIXEL_TAG_URL, "?error=").concat(response));
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(3, 'Genesys Send Survey Failure', response);
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.increaseErrorCount)();
    return false;
}
/**
 * Success Send Survey
 * @param {object} response - Success response
 * @example
// success response

 * @returns {boolean}
 */
function successSendSurvey(response) {
    TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_SEND_SURVEY_SUCCESS, response);
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(1, 'Genesys Send Survey Success', response);
    return false;
}
/**
 * Genesys Send Survey Request
 * @param {string} eventName - name of event
 * @param {string} genesysSendSurveyPayload - User information
 * @example
 */
/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(eventName, genesysSendSurveyPayload) {
    try {
        var dataToSend = {};
        dataToSend._userdata = JSON.stringify(genesysSendSurveyPayload);
        // const agentLTS = bactm.Store('chat', { type: 'cookie' });
        var agentLTS = (0,_site_utilities_cookie_storage_get__WEBPACK_IMPORTED_MODULE_2__["default"])(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.COOKIE_LTS.NAME);
        var interaction_id = agentLTS.ix_id;
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(1, 'Cometd Send Survey Data', dataToSend);
        var currentTLD = (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.getCurrentDomain)();
        var domain = spaParams.siteParams.domains[currentTLD].genesys;
        var sendSurveyEndpoint = _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_UPDATE_CHAT_DATA_ENDPOINT;
        var genesysSendSurveyURL = "".concat(domain).concat(sendSurveyEndpoint);
        var genesysSurveyParams = "_userdata=".concat(dataToSend._userdata, "&_interaction_id=").concat(interaction_id);
        fetch(genesysSendSurveyURL, {
            method: 'POST',
            body: genesysSurveyParams,
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
            },
            credentials: 'include',
        })
            .then(function (resp) { return resp.json(); })
            .then(successSendSurvey)
            .catch(errorSendSurvey);
        TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_SEND_SURVEY_SUCCESS, {});
    }
    catch (e) {
        if (bactm && bactm.plugins && bactm.plugins.pixelTag)
            bactm.plugins.pixelTag.firePixelTag("".concat(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.PIXEL_TAG_URL, "?error=").concat(e));
        errorSendSurvey(e);
    }
}


/***/ }),

/***/ "./src/site/site-api/set-agent-id.ts":
/*!*******************************************!*\
  !*** ./src/site/site-api/set-agent-id.ts ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ genesysSetAgentID; }
/* harmony export */ });
/* harmony import */ var _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../site-pub-sub/site-globals */ "./src/site/site-pub-sub/site-globals.ts");
/* harmony import */ var _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../site-utilities/utilities */ "./src/site/site-utilities/utilities.ts");
/* harmony import */ var _site_utilities_cookie_storage_set__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../site-utilities/cookie-storage/set */ "./src/site/site-utilities/cookie-storage/set.ts");
/* harmony import */ var _site_utilities_cookie_storage_remove__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../site-utilities/cookie-storage/remove */ "./src/site/site-utilities/cookie-storage/remove.ts");
/* eslint-disable no-undef */
/* eslint-disable camelcase */
/** @module genesys/agentIncentive */




var setQualifiedLead = function (agentID, interactionID) {
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(1, 'Qualified Lead: Set Agent ID', { agentID: agentID });
    try {
        (0,_site_utilities_cookie_storage_remove__WEBPACK_IMPORTED_MODULE_3__["default"])(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.COOKIE_LTS.NAME); // removing cookie just in case
        (0,_site_utilities_cookie_storage_set__WEBPACK_IMPORTED_MODULE_2__["default"])({
            secureAgentID: agentID,
            ix_id: interactionID,
            inqClientOrderNum: '',
            expiration: new Date(Date.now() + (_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.COOKIE_LTS.EXPIRATION * 60 * 1000)),
        }, _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.COOKIE_LTS);
    }
    catch (e) {
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(3, 'Set Agent ID Error', e);
        if (bactm && bactm.plugins && bactm.plugins.pixelTag)
            bactm.plugins.pixelTag.firePixelTag("".concat(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.PIXEL_TAG_URL, "?error=").concat(e));
        TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENERIC_FAILURE, { event: 'genesysSetAgentID', error: e });
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.increaseErrorCount)();
    }
};
/**
 * Genesys Qualified Lead
 * @param {string} agentID - encrypted NBKID for the agent
 * @description - Genesys sends an encrypted NBKID once the chat has made a qualified lead.
 * This function stores the encrypted ID as a cookie so it can be collected by ABPA once a sale
 * has occurred
 *
 */
function genesysSetAgentID(eventName, agentDetails) {
    var agentID = agentDetails.agentID;
    // in acs workflow it will come as uid not agentID (thats bau)
    if (!agentID) {
        setQualifiedLead(agentDetails.UID, agentDetails.IXNID);
    }
    else {
        setQualifiedLead(agentID.UID, agentID.IXNID);
    }
}


/***/ }),

/***/ "./src/site/site-api/survey.ts":
/*!*************************************!*\
  !*** ./src/site/site-api/survey.ts ***!
  \*************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* export default binding */ __WEBPACK_DEFAULT_EXPORT__; },
/* harmony export */   failureSurveyGetResponse: function() { return /* binding */ failureSurveyGetResponse; },
/* harmony export */   successSurveyGetResponse: function() { return /* binding */ successSurveyGetResponse; }
/* harmony export */ });
/* harmony import */ var _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../site-pub-sub/site-globals */ "./src/site/site-pub-sub/site-globals.ts");
/* harmony import */ var _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../site-utilities/utilities */ "./src/site/site-utilities/utilities.ts");
/* eslint-disable camelcase */
/* eslint-disable no-undef */
/** @module site-api/survey */


/**
 * Survey Get Response - Success
 * @desc Upon success, function delivers a Pub/Sub event to send survey information back to UI
 * @returns {undefined}
 */
function successSurveyGetResponse(surveyResponse, isPrechat) {
    var eventName = isPrechat ? _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.PRECHAT_SURVEY_GET_RESPONSE_SUCCESS : _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.SURVEY_GET_RESPONSE_SUCCESS;
    TealiumPubSub.publish(eventName, surveyResponse);
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(1, 'Genesys Survey Response Success', surveyResponse);
    return false;
}
/**
 * Survey Get Response - Failure
 * @desc Upon failure, function delivers a Pub/Sub event to send error information back to UI
 * @returns {undefined}
 */
function failureSurveyGetResponse(surveyResponse, isPrechat) {
    var eventName = isPrechat ? _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.PRECHAT_SURVEY_GET_RESPONSE_FAILURE : _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.SURVEY_GET_RESPONSE_FAILURE;
    TealiumPubSub.publish(eventName, surveyResponse);
    if (bactm && bactm.plugins && bactm.plugins.pixelTag)
        bactm.plugins.pixelTag.firePixelTag("".concat(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.PIXEL_TAG_URL, "?error=").concat(surveyResponse));
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(3, 'Survey Response Failure', { eventName: eventName, surveyResponse: surveyResponse });
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.increaseErrorCount)();
    return false;
}
/**
 * Survey Get Response
 * @param {string} eventName
 * @param {object} configuration
 * @desc The following method will grab the survey information sent from
 * UI and deliver the response form back to the UI
 * @returns {undefined}
 */
/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(eventName, configuration) {
    try {
        var payload = configuration.payload, envSurveyURL = configuration.envSurveyURL, chatSurveyEndpoint = configuration.chatSurveyEndpoint, isPrechat_1 = configuration.isPrechat;
        var genesysSurveyDetails = JSON.stringify(payload);
        var genesysSurveyEndpoint = "".concat(envSurveyURL).concat(chatSurveyEndpoint);
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(1, 'Genesys Survey Configuration', configuration);
        fetch(genesysSurveyEndpoint, {
            method: 'POST',
            body: genesysSurveyDetails,
            headers: {
                'Content-Type': 'application/json',
            },
            credentials: 'include',
        })
            .then(function (resp) { return resp.json(); })
            .then(function (resp) { return successSurveyGetResponse(resp, isPrechat_1); })
            .catch(function (resp) { return failureSurveyGetResponse(resp, isPrechat_1); });
    }
    catch (error) {
        failureSurveyGetResponse(error);
    }
}


/***/ }),

/***/ "./src/site/site-api/validate-ip-address.ts":
/*!**************************************************!*\
  !*** ./src/site/site-api/validate-ip-address.ts ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* export default binding */ __WEBPACK_DEFAULT_EXPORT__; },
/* harmony export */   errorValidateIPAddress: function() { return /* binding */ errorValidateIPAddress; },
/* harmony export */   successValidateIPAddress: function() { return /* binding */ successValidateIPAddress; }
/* harmony export */ });
/* harmony import */ var _messaging_post_messages__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../messaging/post-messages */ "./src/site/messaging/post-messages.ts");
/* harmony import */ var _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../site-pub-sub/site-globals */ "./src/site/site-pub-sub/site-globals.ts");
/* harmony import */ var _site_utilities_isMobileChat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../site-utilities/isMobileChat */ "./src/site/site-utilities/isMobileChat.js");
/* harmony import */ var _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../site-utilities/utilities */ "./src/site/site-utilities/utilities.ts");
/* harmony import */ var _site_utilities_utilities_logger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../site-utilities/utilities/logger */ "./src/site/site-utilities/utilities/logger.js");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
/* eslint-disable camelcase */
/* eslint-disable no-undef */
/** @module api-requests/validateIpAddress */





function setAhCookie(value) {
    var isLocal = window.sparta.env === "local";
    var expiry = "; expires=".concat(new Date(Date.now() + 30 * 60 * 1000).toUTCString());
    var domain = isLocal ? "" : "; domain=".concat((0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_3__.getCurrentDomain)());
    var secure = _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.COOKIE.SECURE && !isLocal ? "; secure" : "";
    var sameSite = _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.COOKIE.SECURE && !isLocal ? "; sameSite=none" : "";
    var cookie = "ah_token=".concat(value).concat(expiry, "; path=").concat(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.COOKIE.PATH).concat(domain).concat(secure).concat(sameSite);
    window.document.cookie = cookie;
    (0,_messaging_post_messages__WEBPACK_IMPORTED_MODULE_0__.sendPostMessage)(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.AH_COOKIE_SET);
}
/**
 * Error errorValidateIPAddress
 * @param {object} response - Error response
 * @returns {boolean}
 */
function errorValidateIPAddress(response) {
    var acsFlow = (0,_site_utilities_isMobileChat__WEBPACK_IMPORTED_MODULE_2__.isMobileChat)();
    TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.GENESYS_VALIDATE_IP_ADDRESS_FAILURE, response);
    if (bactm && bactm.plugins && bactm.plugins.pixelTag)
        bactm.plugins.pixelTag.firePixelTag("".concat(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.PIXEL_TAG_URL, "?error=").concat(response));
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_3__.logGenesysEvent)(3, "Genesys Validate IP Address Failure", response);
    if (acsFlow) {
        (0,_site_utilities_utilities_logger__WEBPACK_IMPORTED_MODULE_4__["default"])("validateIpAddress", response);
    }
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_3__.increaseErrorCount)();
    return false;
}
/**
 * Success calling validateIpAddress endpoint
 * Will maybe have to do some manipulation if jwt token comes via payload
 * @param {object} response - pre connect response
 * @example
// success response
{
    status: "SUCCESS",
    ah_token: "someJWTTokenValue"
}
 * @returns {boolean}
 */
function successValidateIPAddress(_a) {
    var response = _a.response, nextFunc = _a.nextFunc;
    var segments = response.c_loc ? response.c_loc.split(":") : true;
    var chat_loc = segments && segments[1] ? segments[1].toLowerCase() === "us" : true;
    if (bactm &&
        bactm.ddo &&
        _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.ML_SITE_IDS.includes(bactm.ddo.get("page.attributes.chat.SITE_ID")) &&
        chat_loc === false) {
        TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.CANCEL_WIDGET_SUBS);
    }
    else {
        TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.GENESYS_VALIDATE_IP_ADDRESS_SUCCESS, response);
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_3__.logGenesysEvent)(1, "Genesys Validate IP Address Success", response);
        // Set the ah_token cookie
        setAhCookie(response.ah_token);
        if (nextFunc)
            (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_3__.publishTealium)(nextFunc.eventName, nextFunc.payload);
    }
    return false;
}
/**
 * Making pre connects request to genesys
 * @param {string} eventName - name of event
 * @param {object} configuration
 */
/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(eventName, configuration, nextFunc) {
    try {
        var ogwUrl = configuration.ogwUrl;
        var currentTLD = (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_3__.getCurrentDomain)();
        var domain = spaParams.siteParams.domains[currentTLD].ogwEndpoint;
        // if (window.bactm_envSelector !== "prod") {
        //   console.log(
        //     "Received validateIPAddress Endpoint from chat site config: ",
        //     domain
        //   );
        // }
        var genesysOGWUrl = "".concat(domain).concat(ogwUrl);
        var ogwPayload = {
            useCase: "default",
            processRules: [
                {
                    name: "AuthenticationContext",
                    value: "LocationLookUp",
                },
            ],
        };
        var fetch_with_retry_1 = function (url, options, n) {
            return fetch(url, options).catch(function (error) {
                if (n > 1) {
                    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_3__.logGenesysEvent)(3, "Genesys Validate IP Address Fetch Failed", "Clearing Cookie & Trying Again");
                    setAhCookie("");
                }
                if (n === 1)
                    throw error;
                return fetch_with_retry_1(url, options, n - 1);
            });
        };
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_3__.logGenesysEvent)(1, "Genesys Validate IP Address Configuration", __assign(__assign({}, configuration), { domain: domain }));
        fetch_with_retry_1(genesysOGWUrl, {
            method: "POST",
            body: JSON.stringify(ogwPayload),
            headers: {
                "Content-Type": "application/json",
            },
            credentials: "include",
        }, _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_1__.MAX_ATTEMPTS)
            .then(function (resp) { return resp.json(); })
            .then(function (resp) {
            return successValidateIPAddress({ response: resp, nextFunc: nextFunc });
        })
            .catch(function (error) {
            errorValidateIPAddress(error);
        });
    }
    catch (error) {
        errorValidateIPAddress(error);
    }
}


/***/ }),

/***/ "./src/site/site-pub-sub/add-pub-sub.ts":
/*!**********************************************!*\
  !*** ./src/site/site-pub-sub/add-pub-sub.ts ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* export default binding */ __WEBPACK_DEFAULT_EXPORT__; }
/* harmony export */ });
/* harmony import */ var _pub_sub__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./pub-sub */ "./src/site/site-pub-sub/pub-sub.ts");
/* harmony import */ var _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../site-utilities/utilities */ "./src/site/site-utilities/utilities.ts");
/** @module document/addPubSub */


/**
 * In Borneo we need to add the pub script first
 * Will append newly created div to document
 * @returns {boolean}
 */
/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__() {
    (0,_pub_sub__WEBPACK_IMPORTED_MODULE_0__["default"])();
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.logGenesysEvent)(1, 'PubSub', 'adding TealiumPubSub');
    return false;
}


/***/ }),

/***/ "./src/site/site-pub-sub/events.ts":
/*!*****************************************!*\
  !*** ./src/site/site-pub-sub/events.ts ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* export default binding */ __WEBPACK_DEFAULT_EXPORT__; }
/* harmony export */ });
/* harmony import */ var _site_globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./site-globals */ "./src/site/site-pub-sub/site-globals.ts");
/* harmony import */ var _messaging_update__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../messaging/update */ "./src/site/messaging/update.ts");
/* harmony import */ var _messaging_typing__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../messaging/typing */ "./src/site/messaging/typing.ts");
/* harmony import */ var _messaging_handshake__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../messaging/handshake */ "./src/site/messaging/handshake.ts");
/* harmony import */ var _messaging_disconnect__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../messaging/disconnect */ "./src/site/messaging/disconnect.ts");
/* harmony import */ var _messaging_nickname_update__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../messaging/nickname-update */ "./src/site/messaging/nickname-update.ts");
/* harmony import */ var _messaging_notification__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../messaging/notification */ "./src/site/messaging/notification.ts");
/* harmony import */ var _sales_sale_event__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../sales/sale-event */ "./src/site/sales/sale-event.ts");
/* harmony import */ var _messaging_channel__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../messaging/channel */ "./src/site/messaging/channel.ts");
/* harmony import */ var _site_api_set_agent_id__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../site-api/set-agent-id */ "./src/site/site-api/set-agent-id.ts");
/* harmony import */ var _site_api_send_survey__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../site-api/send-survey */ "./src/site/site-api/send-survey.ts");
/* harmony import */ var _site_api_survey__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../site-api/survey */ "./src/site/site-api/survey.ts");
/* harmony import */ var _site_api_co_browse__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../site-api/co-browse */ "./src/site/site-api/co-browse.ts");
/* harmony import */ var _site_api_pre_connect__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../site-api/pre-connect */ "./src/site/site-api/pre-connect.ts");
/* harmony import */ var _site_api_polling__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../site-api/polling */ "./src/site/site-api/polling.ts");
/* harmony import */ var _site_api_validate_ip_address__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../site-api/validate-ip-address */ "./src/site/site-api/validate-ip-address.ts");
/* harmony import */ var _site_api_native_chat_update__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../site-api/native-chat-update */ "./src/site/site-api/native-chat-update.ts");
/* harmony import */ var _messaging_post_messages__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../messaging/post-messages */ "./src/site/messaging/post-messages.ts");
/* harmony import */ var _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../site-utilities/utilities */ "./src/site/site-utilities/utilities.ts");
/* eslint-disable no-undef */
/** @module pub-sub/events */



















/**
 * Initializing subscriptions
 * @desc Initialize subscriptions. These subscriptions will wait on publishes from the widget
 * @example
 TealiumPubSub.subscribe(COMETD_REQUEST_HANDSHAKE, cometdHandshake);
 TealiumPubSub.subscribe(COMETD_REQUEST_DISCONNECT, cometdDisconnect);

 TealiumPubSub.subscribe(COMETD_NOTIFY_STOP_TYPING, cometdTyping);
 TealiumPubSub.subscribe(COMETD_NOTIFY_START_TYPING, cometdTyping);
 TealiumPubSub.subscribe(COMETD_NOTIFY_READ_RECEIPT, cometdTyping);

 TealiumPubSub.subscribe(COMETD_REQUEST_CHANNEL, cometdRequestChannel);
 TealiumPubSub.subscribe(COMETD_REQUEST_SEND_MESSAGE, cometdSendMessage);
 TealiumPubSub.subscribe(COMETD_REQUEST_CHANNEL_SUBSCRIPTION, cometdSubscribeChannel);
 */
/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__() {
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_REQUEST_NATIVE_CHAT, function (title, data) {
        (0,_site_api_native_chat_update__WEBPACK_IMPORTED_MODULE_16__["default"])(title, data);
    });
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_REQUEST_UPDATE, _messaging_update__WEBPACK_IMPORTED_MODULE_1__["default"]);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_REQUEST_NICKNAME_UPDATE, _messaging_nickname_update__WEBPACK_IMPORTED_MODULE_5__["default"]);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_NOTIFY_STOP_TYPING, _messaging_typing__WEBPACK_IMPORTED_MODULE_2__["default"]);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_NOTIFY_START_TYPING, _messaging_typing__WEBPACK_IMPORTED_MODULE_2__["default"]);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_NOTIFY_READ_RECEIPT, _messaging_typing__WEBPACK_IMPORTED_MODULE_2__["default"]);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_REQUEST_HANDSHAKE, _messaging_handshake__WEBPACK_IMPORTED_MODULE_3__["default"]);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_REQUEST_DISCONNECT, _messaging_disconnect__WEBPACK_IMPORTED_MODULE_4__["default"]);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_REQUEST_CHANNEL, _messaging_channel__WEBPACK_IMPORTED_MODULE_8__.cometdRequestChannel);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_REQUEST_SEND_MESSAGE, _messaging_channel__WEBPACK_IMPORTED_MODULE_8__.cometdSendMessage);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_REQUEST_NOTIFICATION, _messaging_notification__WEBPACK_IMPORTED_MODULE_6__["default"]);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_REQUEST_CHANNEL_SUBSCRIPTION, _messaging_channel__WEBPACK_IMPORTED_MODULE_8__.cometdSubscribeChannel);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_REQUEST_SALE_OCCURRED, _sales_sale_event__WEBPACK_IMPORTED_MODULE_7__["default"]);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_REQUEST_POLLING, _site_api_polling__WEBPACK_IMPORTED_MODULE_14__["default"]);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_SET_AGENT_ID, _site_api_set_agent_id__WEBPACK_IMPORTED_MODULE_9__["default"]);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.SURVEY_GET_RESPONSE, _site_api_survey__WEBPACK_IMPORTED_MODULE_11__["default"]);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_COBROWSE_CONFIGURATION, _site_api_co_browse__WEBPACK_IMPORTED_MODULE_12__["default"]);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_REQUEST_PRE_CONNECT, _site_api_pre_connect__WEBPACK_IMPORTED_MODULE_13__["default"]);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_SEND_SURVEY, _site_api_send_survey__WEBPACK_IMPORTED_MODULE_10__["default"]);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_VALIDATE_IP_ADDRESS, _site_api_validate_ip_address__WEBPACK_IMPORTED_MODULE_15__["default"]);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.CANCEL_WIDGET_SUBS, _messaging_post_messages__WEBPACK_IMPORTED_MODULE_17__.postToCancelSubsOnWidget);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.PRE_CHAT_SURVEY, function (title, data) { return (0,_messaging_post_messages__WEBPACK_IMPORTED_MODULE_17__.sendPostMessage)(data); });
    (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_18__.logGenesysEvent)(1, 'TealiumPubSub Subscribing', 'Subscribing All Tealium Events');
    return false;
}


/***/ }),

/***/ "./src/site/site-pub-sub/pub-sub.ts":
/*!******************************************!*\
  !*** ./src/site/site-pub-sub/pub-sub.ts ***!
  \******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* export default binding */ __WEBPACK_DEFAULT_EXPORT__; }
/* harmony export */ });
/* eslint-disable */
/**
 * Copyright (c) 2010,2011,2012,2013,2014 Morgan Roderick http://roderick.dk
 * License: MIT - http://mrgnrdrck.mit-license.org
 *
 * https://github.com/mroderick/PubSubJS
 */
/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__() {
    var PubSub = {};
    var messages = {}, lastUid = -1;
    function hasKeys(obj) {
        var key;
        for (key in obj) {
            if (obj.hasOwnProperty(key)) {
                return true;
            }
        }
        return false;
    }
    /**
     * Returns a function that throws the passed exception, for use as argument for setTimeout
     * @alias throwException
     * @function
     * @param { Object } ex An Error object
     */
    function throwException(ex) {
        return function reThrowException() {
            throw ex;
        };
    }
    function callSubscriberWithDelayedExceptions(subscriber, message, data) {
        try {
            subscriber(message, data);
        }
        catch (ex) {
            setTimeout(throwException(ex), 0);
        }
    }
    function callSubscriberWithImmediateExceptions(subscriber, message, data) {
        subscriber(message, data);
    }
    function deliverMessage(originalMessage, matchedMessage, data, immediateExceptions) {
        var subscribers = messages[matchedMessage], callSubscriber = immediateExceptions ? callSubscriberWithImmediateExceptions : callSubscriberWithDelayedExceptions, s;
        if (!messages.hasOwnProperty(matchedMessage)) {
            return;
        }
        for (s in subscribers) {
            if (subscribers.hasOwnProperty(s)) {
                callSubscriber(subscribers[s], originalMessage, data);
            }
        }
    }
    function createDeliveryFunction(message, data, immediateExceptions) {
        return function deliverNamespaced() {
            var topic = String(message), position = topic.lastIndexOf('.');
            // deliver the message as it is now
            deliverMessage(message, message, data, immediateExceptions);
            // trim the hierarchy and deliver message to each level
            while (position !== -1) {
                topic = topic.substr(0, position);
                position = topic.lastIndexOf('.');
                deliverMessage(message, topic, data, immediateExceptions);
            }
        };
    }
    function messageHasSubscribers(message) {
        var topic = String(message), found = messages.hasOwnProperty(topic) && hasKeys(messages[topic]), position = topic.lastIndexOf('.');
        while (!found && position !== -1) {
            topic = topic.substr(0, position);
            position = topic.lastIndexOf('.');
            found = messages.hasOwnProperty(topic) && hasKeys(messages[topic]);
        }
        return found;
    }
    function publish(message, data, sync, immediateExceptions) {
        message = (typeof message === 'symbol') ? message.toString() : message;
        var deliver = createDeliveryFunction(message, data, immediateExceptions), hasSubscribers = messageHasSubscribers(message);
        if (!hasSubscribers) {
            return false;
        }
        if (sync === true) {
            deliver();
        }
        else {
            setTimeout(deliver, 0);
        }
        return true;
    }
    /**
     * Publishes the message, passing the data to it's subscribers
     * @function
     * @alias publish
     * @param { String } message The message to publish
     * @param {} data The data to pass to subscribers
     * @return { Boolean }
     */
    PubSub.publish = function (message, data) {
        return publish(message, data, false, PubSub.immediateExceptions);
    };
    /**
     * Publishes the the message synchronously, passing the data to it's subscribers
     * @function
     * @alias publishSync
     * @param { String } message The message to publish
     * @param {} data The data to pass to subscribers
     * @return { Boolean }
     */
    PubSub.publishSync = function (message, data) {
        return publish(message, data, true, PubSub.immediateExceptions);
    };
    /**
     * Subscribes the passed function to the passed message. Every returned token is unique and should be stored if you need to unsubscribe
     * @function
     * @alias subscribe
     * @param { String } message The message to subscribe to
     * @param { Function } func The function to call when a new message is published
     * @return { String }
     */
    PubSub.subscribe = function (message, func) {
        if (typeof func !== 'function') {
            return false;
        }
        message = (typeof message === 'symbol') ? message.toString() : message;
        // message is not registered yet
        if (!messages.hasOwnProperty(message)) {
            messages[message] = {};
        }
        // forcing token as String, to allow for future expansions without breaking usage
        // and allow for easy use as key names for the 'messages' object
        var token = 'uid_' + String(++lastUid);
        messages[message][token] = func;
        // return token for unsubscribing
        return token;
    };
    /**
     * Subscribes the passed function to the passed message once
     * @function
     * @alias subscribeOnce
     * @param { String } message The message to subscribe to
     * @param { Function } func The function to call when a new message is published
     * @return { PubSub }
     */
    PubSub.subscribeOnce = function (message, func) {
        var token = PubSub.subscribe(message, function () {
            // before func apply, unsubscribe message
            PubSub.unsubscribe(token);
            func.apply(this, arguments);
        });
        return PubSub;
    };
    /**
     * Clears all subscriptions
     * @function
     * @public
     * @alias clearAllSubscriptions
     */
    PubSub.clearAllSubscriptions = function clearAllSubscriptions() {
        messages = {};
    };
    /**
     * Clear subscriptions by the topic
     * @function
     * @public
     * @alias clearAllSubscriptions
     */
    PubSub.clearSubscriptions = function clearSubscriptions(topic) {
        var m;
        for (m in messages) {
            if (messages.hasOwnProperty(m) && m.indexOf(topic) === 0) {
                delete messages[m];
            }
        }
    };
    /**
     * Removes subscriptions
     *
     * - When passed a token, removes a specific subscription.
     *
     * - When passed a function, removes all subscriptions for that function
     *
     * - When passed a topic, removes all subscriptions for that topic (hierarchy)
     * @function
     * @public
     * @alias subscribeOnce
     * @param { String | Function } value A token, function or topic to unsubscribe from
     * @example // Unsubscribing with a token
     * var token = PubSub.subscribe('mytopic', myFunc);
     * PubSub.unsubscribe(token);
     * @example // Unsubscribing with a function
     * PubSub.unsubscribe(myFunc);
     * @example // Unsubscribing from a topic
     * PubSub.unsubscribe('mytopic');
     */
    PubSub.unsubscribe = function (value) {
        var descendantTopicExists = function (topic) {
            var m;
            for (m in messages) {
                if (messages.hasOwnProperty(m) && m.indexOf(topic) === 0) {
                    // a descendant of the topic exists:
                    return true;
                }
            }
            return false;
        }, isTopic = typeof value === 'string' && (messages.hasOwnProperty(value) || descendantTopicExists(value)), isToken = !isTopic && typeof value === 'string', isFunction = typeof value === 'function', result = false, m, message, t;
        if (isTopic) {
            PubSub.clearSubscriptions(value);
            return;
        }
        for (m in messages) {
            if (messages.hasOwnProperty(m)) {
                message = messages[m];
                if (isToken && message[value]) {
                    delete message[value];
                    result = value;
                    // tokens are unique, so we can just stop here
                    break;
                }
                if (isFunction) {
                    for (t in message) {
                        if (message.hasOwnProperty(t) && message[t] === value) {
                            delete message[t];
                            result = true;
                        }
                    }
                }
            }
        }
        return result;
    };
    window.TealiumPubSub = PubSub;
}


/***/ }),

/***/ "./src/site/site-pub-sub/site-globals.ts":
/*!***********************************************!*\
  !*** ./src/site/site-pub-sub/site-globals.ts ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ACS_LOGGER_PUBLIC_URL: function() { return /* binding */ ACS_LOGGER_PUBLIC_URL; },
/* harmony export */   ACS_LOGGER_URL: function() { return /* binding */ ACS_LOGGER_URL; },
/* harmony export */   AH_COOKIE_SET: function() { return /* binding */ AH_COOKIE_SET; },
/* harmony export */   CANCEL_HEARTBEAT: function() { return /* binding */ CANCEL_HEARTBEAT; },
/* harmony export */   CANCEL_SITE_SUBS: function() { return /* binding */ CANCEL_SITE_SUBS; },
/* harmony export */   CANCEL_WIDGET_SUBS: function() { return /* binding */ CANCEL_WIDGET_SUBS; },
/* harmony export */   CHAT_INITIALIZATION: function() { return /* binding */ CHAT_INITIALIZATION; },
/* harmony export */   CHECK_AH_TOKEN: function() { return /* binding */ CHECK_AH_TOKEN; },
/* harmony export */   CHECK_FOR_SALE: function() { return /* binding */ CHECK_FOR_SALE; },
/* harmony export */   COMETD_CHANNEL_MESSAGES: function() { return /* binding */ COMETD_CHANNEL_MESSAGES; },
/* harmony export */   COMETD_CHANNEL_SUBSCRIPTION: function() { return /* binding */ COMETD_CHANNEL_SUBSCRIPTION; },
/* harmony export */   COMETD_FAILURE: function() { return /* binding */ COMETD_FAILURE; },
/* harmony export */   COMETD_META_CONNECT: function() { return /* binding */ COMETD_META_CONNECT; },
/* harmony export */   COMETD_META_DISCONNECT: function() { return /* binding */ COMETD_META_DISCONNECT; },
/* harmony export */   COMETD_META_HANDSHAKE: function() { return /* binding */ COMETD_META_HANDSHAKE; },
/* harmony export */   COMETD_META_PUBLISH: function() { return /* binding */ COMETD_META_PUBLISH; },
/* harmony export */   COMETD_META_SUBSCRIBE: function() { return /* binding */ COMETD_META_SUBSCRIBE; },
/* harmony export */   COMETD_META_UNSUBSCRIBE: function() { return /* binding */ COMETD_META_UNSUBSCRIBE; },
/* harmony export */   COMETD_META_UNSUCCESSFUL: function() { return /* binding */ COMETD_META_UNSUCCESSFUL; },
/* harmony export */   COMETD_NOTIFICATION_FAILURE: function() { return /* binding */ COMETD_NOTIFICATION_FAILURE; },
/* harmony export */   COMETD_NOTIFICATION_SUCCESS: function() { return /* binding */ COMETD_NOTIFICATION_SUCCESS; },
/* harmony export */   COMETD_NOTIFY_READ_RECEIPT: function() { return /* binding */ COMETD_NOTIFY_READ_RECEIPT; },
/* harmony export */   COMETD_NOTIFY_START_TYPING: function() { return /* binding */ COMETD_NOTIFY_START_TYPING; },
/* harmony export */   COMETD_NOTIFY_STOP_TYPING: function() { return /* binding */ COMETD_NOTIFY_STOP_TYPING; },
/* harmony export */   COMETD_REQUEST_CHANNEL: function() { return /* binding */ COMETD_REQUEST_CHANNEL; },
/* harmony export */   COMETD_REQUEST_CHANNEL_SUBSCRIPTION: function() { return /* binding */ COMETD_REQUEST_CHANNEL_SUBSCRIPTION; },
/* harmony export */   COMETD_REQUEST_CHAT: function() { return /* binding */ COMETD_REQUEST_CHAT; },
/* harmony export */   COMETD_REQUEST_DISCONNECT: function() { return /* binding */ COMETD_REQUEST_DISCONNECT; },
/* harmony export */   COMETD_REQUEST_HANDSHAKE: function() { return /* binding */ COMETD_REQUEST_HANDSHAKE; },
/* harmony export */   COMETD_REQUEST_NOTIFICATION: function() { return /* binding */ COMETD_REQUEST_NOTIFICATION; },
/* harmony export */   COMETD_REQUEST_SALE_OCCURRED: function() { return /* binding */ COMETD_REQUEST_SALE_OCCURRED; },
/* harmony export */   COMETD_REQUEST_SEND_MESSAGE: function() { return /* binding */ COMETD_REQUEST_SEND_MESSAGE; },
/* harmony export */   COMETD_REQUEST_UPDATE: function() { return /* binding */ COMETD_REQUEST_UPDATE; },
/* harmony export */   COMETD_SALES_OCCURRED_FAILURE: function() { return /* binding */ COMETD_SALES_OCCURRED_FAILURE; },
/* harmony export */   COMETD_SALES_OCCURRED_SUCCESS: function() { return /* binding */ COMETD_SALES_OCCURRED_SUCCESS; },
/* harmony export */   COMETD_UPDATE_FAILURE: function() { return /* binding */ COMETD_UPDATE_FAILURE; },
/* harmony export */   COMETD_UPDATE_SUCCESS: function() { return /* binding */ COMETD_UPDATE_SUCCESS; },
/* harmony export */   COOKIE: function() { return /* binding */ COOKIE; },
/* harmony export */   COOKIE_GSID: function() { return /* binding */ COOKIE_GSID; },
/* harmony export */   COOKIE_LTS: function() { return /* binding */ COOKIE_LTS; },
/* harmony export */   GENERIC_FAILURE: function() { return /* binding */ GENERIC_FAILURE; },
/* harmony export */   GENESYS_CHAT_SERVICE_ENDPOINT: function() { return /* binding */ GENESYS_CHAT_SERVICE_ENDPOINT; },
/* harmony export */   GENESYS_CHAT_SURVEY_ENDPOINT: function() { return /* binding */ GENESYS_CHAT_SURVEY_ENDPOINT; },
/* harmony export */   GENESYS_COBROWSE_CONFIGURATION: function() { return /* binding */ GENESYS_COBROWSE_CONFIGURATION; },
/* harmony export */   GENESYS_COBROWSE_CONFIGURED: function() { return /* binding */ GENESYS_COBROWSE_CONFIGURED; },
/* harmony export */   GENESYS_FETCH_SESSION_ENDPOINT: function() { return /* binding */ GENESYS_FETCH_SESSION_ENDPOINT; },
/* harmony export */   GENESYS_REQUEST_NATIVE_CHAT: function() { return /* binding */ GENESYS_REQUEST_NATIVE_CHAT; },
/* harmony export */   GENESYS_REQUEST_NATIVE_CHAT_FAILURE: function() { return /* binding */ GENESYS_REQUEST_NATIVE_CHAT_FAILURE; },
/* harmony export */   GENESYS_REQUEST_NATIVE_CHAT_SUCCESS: function() { return /* binding */ GENESYS_REQUEST_NATIVE_CHAT_SUCCESS; },
/* harmony export */   GENESYS_REQUEST_NICKNAME_UPDATE: function() { return /* binding */ GENESYS_REQUEST_NICKNAME_UPDATE; },
/* harmony export */   GENESYS_REQUEST_POLLING: function() { return /* binding */ GENESYS_REQUEST_POLLING; },
/* harmony export */   GENESYS_REQUEST_POLLING_FAILURE: function() { return /* binding */ GENESYS_REQUEST_POLLING_FAILURE; },
/* harmony export */   GENESYS_REQUEST_POLLING_SUCCESS: function() { return /* binding */ GENESYS_REQUEST_POLLING_SUCCESS; },
/* harmony export */   GENESYS_REQUEST_PRE_CONNECT: function() { return /* binding */ GENESYS_REQUEST_PRE_CONNECT; },
/* harmony export */   GENESYS_REQUEST_PRE_CONNECT_FAILURE: function() { return /* binding */ GENESYS_REQUEST_PRE_CONNECT_FAILURE; },
/* harmony export */   GENESYS_REQUEST_PRE_CONNECT_SUCCESS: function() { return /* binding */ GENESYS_REQUEST_PRE_CONNECT_SUCCESS; },
/* harmony export */   GENESYS_REQUEST_TC_UPDATE: function() { return /* binding */ GENESYS_REQUEST_TC_UPDATE; },
/* harmony export */   GENESYS_REQUEST_TC_UPDATE_FAILURE: function() { return /* binding */ GENESYS_REQUEST_TC_UPDATE_FAILURE; },
/* harmony export */   GENESYS_REQUEST_TC_UPDATE_SUCCESS: function() { return /* binding */ GENESYS_REQUEST_TC_UPDATE_SUCCESS; },
/* harmony export */   GENESYS_SEND_SURVEY: function() { return /* binding */ GENESYS_SEND_SURVEY; },
/* harmony export */   GENESYS_SEND_SURVEY_FAILURE: function() { return /* binding */ GENESYS_SEND_SURVEY_FAILURE; },
/* harmony export */   GENESYS_SEND_SURVEY_SUCCESS: function() { return /* binding */ GENESYS_SEND_SURVEY_SUCCESS; },
/* harmony export */   GENESYS_SET_AGENT_ID: function() { return /* binding */ GENESYS_SET_AGENT_ID; },
/* harmony export */   GENESYS_SUSPEND_POLLING: function() { return /* binding */ GENESYS_SUSPEND_POLLING; },
/* harmony export */   GENESYS_UPDATE_CHAT_DATA_ENDPOINT: function() { return /* binding */ GENESYS_UPDATE_CHAT_DATA_ENDPOINT; },
/* harmony export */   GENESYS_VALIDATE_IP_ADDRESS: function() { return /* binding */ GENESYS_VALIDATE_IP_ADDRESS; },
/* harmony export */   GENESYS_VALIDATE_IP_ADDRESS_FAILURE: function() { return /* binding */ GENESYS_VALIDATE_IP_ADDRESS_FAILURE; },
/* harmony export */   GENESYS_VALIDATE_IP_ADDRESS_SUCCESS: function() { return /* binding */ GENESYS_VALIDATE_IP_ADDRESS_SUCCESS; },
/* harmony export */   GRAB_HEARTBEAT_DATA: function() { return /* binding */ GRAB_HEARTBEAT_DATA; },
/* harmony export */   GWE_SEND_DISPOSITION_CODE: function() { return /* binding */ GWE_SEND_DISPOSITION_CODE; },
/* harmony export */   GWE_SEND_DISPOSITION_CODE_FAILURE: function() { return /* binding */ GWE_SEND_DISPOSITION_CODE_FAILURE; },
/* harmony export */   GWE_SEND_DISPOSITION_CODE_SUCCESS: function() { return /* binding */ GWE_SEND_DISPOSITION_CODE_SUCCESS; },
/* harmony export */   MAX_ATTEMPTS: function() { return /* binding */ MAX_ATTEMPTS; },
/* harmony export */   MAX_ERR_RETRIES: function() { return /* binding */ MAX_ERR_RETRIES; },
/* harmony export */   ML_SITE_IDS: function() { return /* binding */ ML_SITE_IDS; },
/* harmony export */   MONITORINGJS_HEARTBEAT: function() { return /* binding */ MONITORINGJS_HEARTBEAT; },
/* harmony export */   MONITORINGJS_HEARTBEAT_FAILURE: function() { return /* binding */ MONITORINGJS_HEARTBEAT_FAILURE; },
/* harmony export */   MONITORINGJS_REQUEST: function() { return /* binding */ MONITORINGJS_REQUEST; },
/* harmony export */   MONITORINGJS_RESPONSE: function() { return /* binding */ MONITORINGJS_RESPONSE; },
/* harmony export */   MONITORINGJS_RESPONSE_FAILURE: function() { return /* binding */ MONITORINGJS_RESPONSE_FAILURE; },
/* harmony export */   MONITORING_ID_RESPONSE: function() { return /* binding */ MONITORING_ID_RESPONSE; },
/* harmony export */   OGW_URL: function() { return /* binding */ OGW_URL; },
/* harmony export */   PIXEL_TAG_URL: function() { return /* binding */ PIXEL_TAG_URL; },
/* harmony export */   PRECHAT_SURVEY_GET_RESPONSE: function() { return /* binding */ PRECHAT_SURVEY_GET_RESPONSE; },
/* harmony export */   PRECHAT_SURVEY_GET_RESPONSE_FAILURE: function() { return /* binding */ PRECHAT_SURVEY_GET_RESPONSE_FAILURE; },
/* harmony export */   PRECHAT_SURVEY_GET_RESPONSE_SUCCESS: function() { return /* binding */ PRECHAT_SURVEY_GET_RESPONSE_SUCCESS; },
/* harmony export */   PRE_CHAT_SURVEY: function() { return /* binding */ PRE_CHAT_SURVEY; },
/* harmony export */   SALE_INDICATORS: function() { return /* binding */ SALE_INDICATORS; },
/* harmony export */   SEND_PROXY_DATA: function() { return /* binding */ SEND_PROXY_DATA; },
/* harmony export */   SET_MONITORING_STATUS: function() { return /* binding */ SET_MONITORING_STATUS; },
/* harmony export */   SPARTA_WIDGET_READY: function() { return /* binding */ SPARTA_WIDGET_READY; },
/* harmony export */   SURVEY_GET_RESPONSE: function() { return /* binding */ SURVEY_GET_RESPONSE; },
/* harmony export */   SURVEY_GET_RESPONSE_FAILURE: function() { return /* binding */ SURVEY_GET_RESPONSE_FAILURE; },
/* harmony export */   SURVEY_GET_RESPONSE_SUCCESS: function() { return /* binding */ SURVEY_GET_RESPONSE_SUCCESS; },
/* harmony export */   WIDGET_REQUEST_CONFIGURATION: function() { return /* binding */ WIDGET_REQUEST_CONFIGURATION; },
/* harmony export */   WIDGET_REQUEST_CONFIGURATION_ERROR: function() { return /* binding */ WIDGET_REQUEST_CONFIGURATION_ERROR; },
/* harmony export */   WIDGET_REQUEST_CONFIGURATION_SUCCESSFUL: function() { return /* binding */ WIDGET_REQUEST_CONFIGURATION_SUCCESSFUL; },
/* harmony export */   errorLoadingWidget: function() { return /* binding */ errorLoadingWidget; },
/* harmony export */   spartaLoaderLoaded: function() { return /* binding */ spartaLoaderLoaded; }
/* harmony export */ });
/** @module base/constants */
/**
 * cometd meta constants
 * @type {string}
 */
var COMETD_META_CONNECT = 'COMETD_META_CONNECT';
var COMETD_META_PUBLISH = 'COMETD_META_PUBLISH';
var COMETD_META_SUBSCRIBE = 'COMETD_META_SUBSCRIBE';
var COMETD_META_HANDSHAKE = 'COMETD_META_HANDSHAKE';
var COMETD_META_DISCONNECT = 'COMETD_META_DISCONNECT';
var COMETD_META_UNSUBSCRIBE = 'COMETD_META_UNSUBSCRIBE';
var COMETD_META_UNSUCCESSFUL = 'COMETD_META_UNSUCCESSFUL';
/**
 * genesys native chat event
 * @type {string}
 */
var GENESYS_REQUEST_NATIVE_CHAT = 'GENESYS_REQUEST_NATIVE_CHAT';
var GENESYS_REQUEST_NATIVE_CHAT_SUCCESS = 'GENESYS_REQUEST_NATIVE_CHAT_SUCCESS';
var GENESYS_REQUEST_NATIVE_CHAT_FAILURE = 'GENESYS_REQUEST_NATIVE_CHAT_FAILURE';
/**
 * genesys request terms and conditions update event
 * @type {string}
 */
var GENESYS_REQUEST_TC_UPDATE = 'GENESYS_REQUEST_TC_UPDATE';
var GENESYS_REQUEST_TC_UPDATE_SUCCESS = 'GENESYS_REQUEST_TC_UPDATE_SUCCESS';
var GENESYS_REQUEST_TC_UPDATE_FAILURE = 'GENESYS_REQUEST_TC_UPDATE_FAILURE';
/**
 * cometd request constants
 * @type {string}
 */
var COMETD_REQUEST_UPDATE = 'COMETD_REQUEST_UPDATE';
var COMETD_REQUEST_CHANNEL = 'COMETD_REQUEST_CHANNEL';
var COMETD_REQUEST_HANDSHAKE = 'COMETD_REQUEST_HANDSHAKE';
var COMETD_REQUEST_DISCONNECT = 'COMETD_REQUEST_DISCONNECT';
var COMETD_REQUEST_SEND_MESSAGE = 'COMETD_REQUEST_SEND_MESSAGE';
var COMETD_REQUEST_NOTIFICATION = 'COMETD_REQUEST_NOTIFICATION';
var COMETD_REQUEST_SALE_OCCURRED = 'COMETD_REQUEST_SALE_OCCURRED';
var COMETD_FAILURE = 'COMETD_FAILURE';
/**
 * genesys request constants
 * @type {string}
 */
var GENESYS_REQUEST_PRE_CONNECT = 'GENESYS_REQUEST_PRE_CONNECT';
var GENESYS_REQUEST_POLLING = 'GENESYS_REQUEST_POLLING';
var GENESYS_SUSPEND_POLLING = 'GENESYS_SUSPEND_POLLING';
var GENESYS_REQUEST_NICKNAME_UPDATE = 'GENESYS_REQUEST_NICKNAME_UPDATE';
/**
 * genesys send survey constants
 * @type {string}
 */
var GENESYS_SEND_SURVEY = 'GENESYS_SEND_SURVEY';
var GENESYS_SEND_SURVEY_SUCCESS = 'GENESYS_SEND_SURVEY_SUCCESS';
var GENESYS_SEND_SURVEY_FAILURE = 'GENESYS_SEND_SURVEY_FAILURE';
/**
 * Genesys Set Agent ID
 * @type {string}
*/
var GENESYS_SET_AGENT_ID = 'GENESYS_SET_AGENT_ID';
/**
 * genesys validate IP address
 * @type {string}
*/
var GENESYS_VALIDATE_IP_ADDRESS = 'GENESYS_VALIDATE_IP_ADDRESS';
/**
 * Cometd notifications constants
 * @type {string}
 */
var COMETD_NOTIFY_STOP_TYPING = 'COMETD_NOTIFY_STOP_TYPING';
var COMETD_NOTIFY_READ_RECEIPT = 'COMETD_NOTIFY_READ_RECEIPT';
var COMETD_NOTIFY_START_TYPING = 'COMETD_NOTIFY_START_TYPING';
var COMETD_REQUEST_CHAT = 'COMETD_REQUEST_CHAT';
/**
 * Cometd subscriptions constants
 * @type {string}
*/
var COMETD_CHANNEL_MESSAGES = 'COMETD_CHANNEL_MESSAGES';
var COMETD_CHANNEL_SUBSCRIPTION = 'COMETD_CHANNEL_SUBSCRIPTION';
var COMETD_REQUEST_CHANNEL_SUBSCRIPTION = 'COMETD_REQUEST_CHANNEL_SUBSCRIPTION';
/**
 * MonitoringJS constants
 * @type {string}
*/
var MONITORINGJS_REQUEST = 'MONITORINGJS_REQUEST';
var MONITORINGJS_HEARTBEAT = 'MONITORINGJS_HEARTBEAT';
/**
 * Genesys configurations & request constants
 * @type {string}
 */
var GENESYS_COBROWSE_CONFIGURED = 'GENESYS_COBROWSE_CONFIGURED';
var GENESYS_COBROWSE_CONFIGURATION = 'GENESYS_COBROWSE_CONFIGURATION';
/**
 * GWE send disposition request, success, & failure constants
 * @type {string}
 */
var GWE_SEND_DISPOSITION_CODE = 'GWE_SEND_DISPOSITION_CODE';
var GWE_SEND_DISPOSITION_CODE_SUCCESS = 'GWE_SEND_DISPOSITION_CODE_SUCCESS';
var GWE_SEND_DISPOSITION_CODE_FAILURE = 'GWE_SEND_DISPOSITION_CODE_FAILURE';
/**
 * Post Message Constants
 * @type {string}
 */
var CANCEL_HEARTBEAT = 'CANCEL_HEARTBEAT';
var CANCEL_WIDGET_SUBS = 'CANCEL_WIDGET_SUBS';
var CANCEL_SITE_SUBS = 'CANCEL_SITE_SUBS';
var CHECK_AH_TOKEN = 'CHECK_AH_TOKEN';
var CHECK_FOR_SALE = 'CHECK_FOR_SALE';
var GRAB_HEARTBEAT_DATA = 'GRAB_HEARTBEAT_DATA';
var SET_MONITORING_STATUS = 'SET_MONITORING_STATUS';
var SEND_PROXY_DATA = 'SEND_PROXY_DATA';
var MAX_ERR_RETRIES = 3;
/**
 * response failures constants
 * @type {string}
 */
var GENERIC_FAILURE = 'GENERIC_FAILURE';
var COMETD_NOTIFICATION_FAILURE = 'COMETD_NOTIFICATION_FAILURE';
var COMETD_SALES_OCCURRED_FAILURE = 'COMETD_SALES_OCCURRED_FAILURE';
var COMETD_UPDATE_FAILURE = 'COMETD_UPDATE_FAILURE';
var GENESYS_REQUEST_POLLING_FAILURE = 'GENESYS_REQUEST_POLLING_FAILURE';
var GENESYS_REQUEST_PRE_CONNECT_FAILURE = 'GENESYS_REQUEST_PRE_CONNECT_FAILURE';
var GENESYS_VALIDATE_IP_ADDRESS_FAILURE = 'GENESYS_VALIDATE_IP_ADDRESS_FAILURE';
var MONITORINGJS_HEARTBEAT_FAILURE = 'MONITORINGJS_HEARTBEAT_FAILURE';
var MONITORINGJS_RESPONSE_FAILURE = 'MONITORINGJS_RESPONSE_FAILURE';
var PRECHAT_SURVEY_GET_RESPONSE_FAILURE = 'PRECHAT_SURVEY_GET_RESPONSE_FAILURE';
var SURVEY_GET_RESPONSE_FAILURE = 'SURVEY_GET_RESPONSE_FAILURE';
/**
 * response success constants
 * @type {string}
 */
var COMETD_NOTIFICATION_SUCCESS = 'COMETD_NOTIFICATION_SUCCESS';
var COMETD_SALES_OCCURRED_SUCCESS = 'COMETD_SALES_OCCURRED_SUCCESS';
var COMETD_UPDATE_SUCCESS = 'COMETD_UPDATE_SUCCESS';
var GENESYS_REQUEST_POLLING_SUCCESS = 'GENESYS_REQUEST_POLLING_SUCCESS';
var GENESYS_REQUEST_PRE_CONNECT_SUCCESS = 'GENESYS_REQUEST_PRE_CONNECT_SUCCESS';
var GENESYS_VALIDATE_IP_ADDRESS_SUCCESS = 'GENESYS_VALIDATE_IP_ADDRESS_SUCCESS';
var MONITORINGJS_RESPONSE = 'MONITORINGJS_RESPONSE';
var MONITORING_ID_RESPONSE = 'MONITORING_ID_RESPONSE';
var PRECHAT_SURVEY_GET_RESPONSE = 'PRECHAT_SURVEY_GET_RESPONSE';
var PRECHAT_SURVEY_GET_RESPONSE_SUCCESS = 'PRECHAT_SURVEY_GET_RESPONSE_SUCCESS';
var SURVEY_GET_RESPONSE = 'SURVEY_GET_RESPONSE';
var SURVEY_GET_RESPONSE_SUCCESS = 'SURVEY_GET_RESPONSE_SUCCESS';
/**
 * chat & widget constants
 * @type {string}
 */
var AH_COOKIE_SET = 'AH_COOKIE_SET';
var spartaLoaderLoaded = 'spartaLoaderLoaded';
var errorLoadingWidget = 'errorLoadingWidget';
var CHAT_INITIALIZATION = 'CHAT_INITIALIZATION';
var WIDGET_REQUEST_CONFIGURATION = 'WIDGET_REQUEST_CONFIGURATION';
var SPARTA_WIDGET_READY = 'SPARTA_WIDGET_READY.spartaWidgetUtility';
var WIDGET_REQUEST_CONFIGURATION_ERROR = 'WIDGET_REQUEST_CONFIGURATION_ERROR';
var WIDGET_REQUEST_CONFIGURATION_SUCCESSFUL = 'WIDGET_REQUEST_CONFIGURATION_SUCCESSFUL';
var PRE_CHAT_SURVEY = 'PRE_CHAT_SURVEY';
/**
 * ML Site IDs
 * @type {array}
 */
var ML_SITE_IDS = ['OSE', 'MLD', 'MLDOA'];
/**
 * chat cookie constants
 * @type {string}
 */
var COOKIE = {
    NAME: 'occtChat',
    EXPIRATION: 10,
    DOMAIN: '.bankofamerica.com',
    SECURE: true,
    PATH: '/',
};
/**
 * chat lts cookie constants
 * @type {string}
 */
var COOKIE_LTS = {
    NAME: 'occtChat_lts',
    EXPIRATION: 60 * 24 * 30,
    DOMAIN: '.bankofamerica.com',
    SECURE: true,
    PATH: '/',
};
/**
 * GSID Cookie
 */
var COOKIE_GSID = {
    NAME: 'GSID',
    DOMAIN: '.bankofamerica.com',
    SECURE: true,
    PATH: '/',
};
/**
 * Maximum number of attempts for validateIpAddress call.
 */
var MAX_ATTEMPTS = 2;
/**
 * URLS
 * @type {string}
 */
var PIXEL_TAG_URL = 'https://www.bankofamerica.com/pa/global-assets/1.0/graphic/clr.gif';
var OGW_URL = '/ogateway/public/login/rest/sas/v1/validateIpAddress';
/**
 * Genesys Endpoints and temporary Dev Chat domain.
 * @type {string}
 */
var GENESYS_UPDATE_CHAT_DATA_ENDPOINT = '1/service/UpdateChatData';
var GENESYS_FETCH_SESSION_ENDPOINT = '1/service/GetRefIDInfo/';
var GENESYS_CHAT_SERVICE_ENDPOINT = '1/service/ChatService/'; // add new endpoint here
var GENESYS_CHAT_SURVEY_ENDPOINT = '1/service/ChatSurvey/';
/**
 * Sale Indicators Constants Array
 * @type {array}
 */
var SALE_INDICATORS = [
    'inqClientOrderNum',
    'MLD_OAO_CONFIRMATIONNUMBER',
    'MLD_OAO_ACCOUNTNUMBER',
];
/**
 * Mobile ACS Logger Service
 * @type {string}
 */
var ACS_LOGGER_URL = '/mgateway/v1/clientLogger/log';
var ACS_LOGGER_PUBLIC_URL = '/mgateway/public/v1/clientLogger/log';


/***/ }),

/***/ "./src/site/site-pub-sub/subscriptions.ts":
/*!************************************************!*\
  !*** ./src/site/site-pub-sub/subscriptions.ts ***!
  \************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* export default binding */ __WEBPACK_DEFAULT_EXPORT__; }
/* harmony export */ });
/* harmony import */ var _site_globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./site-globals */ "./src/site/site-pub-sub/site-globals.ts");
/* harmony import */ var _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../site-utilities/utilities */ "./src/site/site-utilities/utilities.ts");
/* harmony import */ var _messaging_handlers_request_channel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../messaging/handlers/request-channel */ "./src/site/messaging/handlers/request-channel.ts");
/* harmony import */ var _messaging_handlers_channel_message__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../messaging/handlers/channel-message */ "./src/site/messaging/handlers/channel-message.ts");
/* harmony import */ var _messaging_handlers_request_handshake__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../messaging/handlers/request-handshake */ "./src/site/messaging/handlers/request-handshake.ts");
/* harmony import */ var _site_api_handlers_configure_cobrowse__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../site-api/handlers/configure-cobrowse */ "./src/site/site-api/handlers/configure-cobrowse.ts");
/* harmony import */ var _site_api_handlers_survey_get_response__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../site-api/handlers/survey-get-response */ "./src/site/site-api/handlers/survey-get-response.ts");
/* harmony import */ var _site_api_handlers_request_polling__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../site-api/handlers/request-polling */ "./src/site/site-api/handlers/request-polling.ts");
/* harmony import */ var _site_api_handlers_request_preconnect__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../site-api/handlers/request-preconnect */ "./src/site/site-api/handlers/request-preconnect.ts");
/* harmony import */ var _site_api_native_chat_update__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../site-api/native-chat-update */ "./src/site/site-api/native-chat-update.ts");
/* harmony import */ var _site_api_request_tc_update__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../site-api/request-tc-update */ "./src/site/site-api/request-tc-update.ts");
// @ts-nocheck
/* eslint-disable max-len */
/* eslint-disable no-undef */
/** @module site-pub-sub/subscriptions */











/**
 * Subscribe Tealium and Sparta widget loader events
 * @returns {boolean}
 */
/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__() {
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENERIC_FAILURE, _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishWindow);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_META_CONNECT, _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishWindow);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_META_PUBLISH, _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishWindow);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_META_SUBSCRIBE, _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishWindow);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_META_HANDSHAKE, _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishWindow);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_META_DISCONNECT, _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishWindow);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_META_UNSUBSCRIBE, _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishWindow);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_META_UNSUCCESSFUL, _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishWindow);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_CHANNEL_SUBSCRIPTION, _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishWindow);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_REQUEST_NATIVE_CHAT_FAILURE, _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishWindow);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_REQUEST_NATIVE_CHAT_SUCCESS, _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishWindow);
    // TealiumPubSub.subscribe(GENESYS_REQUEST_TC_UPDATE_FAILURE, publishWindow);
    // TealiumPubSub.subscribe(GENESYS_REQUEST_TC_UPDATE_SUCCESS, publishWindow);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_REQUEST_PRE_CONNECT_FAILURE, _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishWindow);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_REQUEST_PRE_CONNECT_SUCCESS, _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishWindow);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.SURVEY_GET_RESPONSE_SUCCESS, _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishWindow);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.SURVEY_GET_RESPONSE_FAILURE, _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishWindow);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.PRECHAT_SURVEY_GET_RESPONSE_SUCCESS, _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishWindow);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.PRECHAT_SURVEY_GET_RESPONSE_FAILURE, _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishWindow);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_UPDATE_SUCCESS, _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishWindow);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_UPDATE_FAILURE, _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishWindow);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_REQUEST_POLLING_SUCCESS, _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishWindow);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_REQUEST_POLLING_FAILURE, _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishWindow);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_VALIDATE_IP_ADDRESS_SUCCESS, _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishWindow);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_SEND_SURVEY_SUCCESS, _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishWindow);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_SEND_SURVEY_FAILURE, _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishWindow);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_REQUEST_NATIVE_CHAT_FAILURE, _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishWindow);
    TealiumPubSub.subscribe(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_CHANNEL_MESSAGES, _messaging_handlers_channel_message__WEBPACK_IMPORTED_MODULE_3__["default"]);
    var $body = document.querySelector("body");
    $body === null || $body === void 0 ? void 0 : $body.addEventListener(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_REQUEST_CHANNEL, _messaging_handlers_request_channel__WEBPACK_IMPORTED_MODULE_2__["default"]);
    $body === null || $body === void 0 ? void 0 : $body.addEventListener(_site_globals__WEBPACK_IMPORTED_MODULE_0__.PRECHAT_SURVEY_GET_RESPONSE, function (payload) { return (0,_site_api_handlers_survey_get_response__WEBPACK_IMPORTED_MODULE_6__["default"])(payload, true); });
    $body === null || $body === void 0 ? void 0 : $body.addEventListener(_site_globals__WEBPACK_IMPORTED_MODULE_0__.SURVEY_GET_RESPONSE, _site_api_handlers_survey_get_response__WEBPACK_IMPORTED_MODULE_6__["default"]);
    $body === null || $body === void 0 ? void 0 : $body.addEventListener(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_REQUEST_HANDSHAKE, _messaging_handlers_request_handshake__WEBPACK_IMPORTED_MODULE_4__["default"]);
    $body === null || $body === void 0 ? void 0 : $body.addEventListener(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_COBROWSE_CONFIGURATION, _site_api_handlers_configure_cobrowse__WEBPACK_IMPORTED_MODULE_5__["default"]);
    $body === null || $body === void 0 ? void 0 : $body.addEventListener(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_REQUEST_NATIVE_CHAT, _site_api_native_chat_update__WEBPACK_IMPORTED_MODULE_9__["default"]);
    $body === null || $body === void 0 ? void 0 : $body.addEventListener(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_REQUEST_TC_UPDATE, _site_api_request_tc_update__WEBPACK_IMPORTED_MODULE_10__["default"]);
    $body === null || $body === void 0 ? void 0 : $body.addEventListener(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_REQUEST_PRE_CONNECT, _site_api_handlers_request_preconnect__WEBPACK_IMPORTED_MODULE_8__["default"]);
    $body === null || $body === void 0 ? void 0 : $body.addEventListener(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_REQUEST_POLLING, _site_api_handlers_request_polling__WEBPACK_IMPORTED_MODULE_7__["default"]);
    $body === null || $body === void 0 ? void 0 : $body.addEventListener(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_REQUEST_NICKNAME_UPDATE, function (_a) {
        var detail = _a.detail;
        return (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishTealium)(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_REQUEST_NICKNAME_UPDATE, detail);
    });
    $body === null || $body === void 0 ? void 0 : $body.addEventListener(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_SET_AGENT_ID, function (_a) {
        var detail = _a.detail;
        return (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishTealium)(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_SET_AGENT_ID, detail);
    });
    $body === null || $body === void 0 ? void 0 : $body.addEventListener(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_SEND_SURVEY, function (_a) {
        var detail = _a.detail;
        return (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishTealium)(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_SEND_SURVEY, detail);
    });
    $body === null || $body === void 0 ? void 0 : $body.addEventListener(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_SUSPEND_POLLING, function () { return (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishTealium)(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_SUSPEND_POLLING, {}); });
    $body === null || $body === void 0 ? void 0 : $body.addEventListener(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_REQUEST_DISCONNECT, function () { return (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishTealium)(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_REQUEST_DISCONNECT, {}); });
    $body === null || $body === void 0 ? void 0 : $body.addEventListener(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_NOTIFY_STOP_TYPING, function (_a) {
        var detail = _a.detail;
        return (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishTealium)(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_NOTIFY_STOP_TYPING, detail);
    });
    $body === null || $body === void 0 ? void 0 : $body.addEventListener(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_NOTIFY_START_TYPING, function (_a) {
        var detail = _a.detail;
        return (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishTealium)(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_NOTIFY_START_TYPING, detail);
    });
    $body === null || $body === void 0 ? void 0 : $body.addEventListener(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_NOTIFY_READ_RECEIPT, function (_a) {
        var detail = _a.detail;
        return (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishTealium)(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_NOTIFY_READ_RECEIPT, detail);
    });
    $body === null || $body === void 0 ? void 0 : $body.addEventListener(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_REQUEST_CHANNEL_SUBSCRIPTION, function (_a) {
        var detail = _a.detail;
        return (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishTealium)(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_REQUEST_CHANNEL_SUBSCRIPTION, detail);
    });
    $body === null || $body === void 0 ? void 0 : $body.addEventListener(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_REQUEST_SEND_MESSAGE, function (_a) {
        var detail = _a.detail;
        return (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishTealium)(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_REQUEST_SEND_MESSAGE, detail);
    });
    $body === null || $body === void 0 ? void 0 : $body.addEventListener(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_REQUEST_NOTIFICATION, function (_a) {
        var detail = _a.detail;
        return (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishTealium)(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_REQUEST_NOTIFICATION, detail);
    });
    $body === null || $body === void 0 ? void 0 : $body.addEventListener(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_REQUEST_SALE_OCCURRED, function (_a) {
        var detail = _a.detail;
        return (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishTealium)(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_REQUEST_SALE_OCCURRED, detail);
    });
    $body === null || $body === void 0 ? void 0 : $body.addEventListener(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GWE_SEND_DISPOSITION_CODE, function (_a) {
        var detail = _a.detail;
        return (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishTealium)(_site_globals__WEBPACK_IMPORTED_MODULE_0__.GWE_SEND_DISPOSITION_CODE, detail);
    });
    $body === null || $body === void 0 ? void 0 : $body.addEventListener(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_REQUEST_UPDATE, function (_a) {
        var detail = _a.detail;
        return (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_1__.publishTealium)(_site_globals__WEBPACK_IMPORTED_MODULE_0__.COMETD_REQUEST_UPDATE, detail);
    });
    return false;
}


/***/ }),

/***/ "./src/site/site-utilities/cookie-storage/get.ts":
/*!*******************************************************!*\
  !*** ./src/site/site-utilities/cookie-storage/get.ts ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ getCookieStorage; }
/* harmony export */ });
/* harmony import */ var _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../site-pub-sub/site-globals */ "./src/site/site-pub-sub/site-globals.ts");
/** @module cookie-storage/get */

function getCookieStorage(name) {
    if (name === void 0) { name = _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.COOKIE.NAME; }
    var lookup = "".concat(name, "=");
    var decodedCookie = decodeURIComponent(document.cookie);
    var cookieArr = decodedCookie.split(';');
    for (var i = 0; i < cookieArr.length; i += 1) {
        var cookie = cookieArr[i];
        while (cookie.charAt(0) === ' ') {
            cookie = cookie.substring(1);
        }
        if (cookie.indexOf(lookup) === 0) {
            return JSON.parse(cookie.substring(lookup.length, cookie.length));
        }
    }
    return {};
}


/***/ }),

/***/ "./src/site/site-utilities/cookie-storage/remove.ts":
/*!**********************************************************!*\
  !*** ./src/site/site-utilities/cookie-storage/remove.ts ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ removeCookie; }
/* harmony export */ });
/* harmony import */ var _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../site-pub-sub/site-globals */ "./src/site/site-pub-sub/site-globals.ts");
/* harmony import */ var _get__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./get */ "./src/site/site-utilities/cookie-storage/get.ts");
/** @module cookie-storage/remove */


function removeCookie(name) {
    if (name === void 0) { name = _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.COOKIE.NAME; }
    if ((0,_get__WEBPACK_IMPORTED_MODULE_1__["default"])(name)) {
        var isLocal = window.sparta.env === 'local';
        var expiry = '; expires=Thu, 01 Jan 1970 00:00:01 GMT';
        var domain = isLocal ? '' : "; domain=".concat(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.COOKIE.DOMAIN);
        var secure = (_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.COOKIE.SECURE && !isLocal) ? '; secure' : '';
        var cookie = "".concat(name, "=").concat(expiry, "; path=").concat(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.COOKIE.PATH).concat(domain).concat(secure);
        window.document.cookie = cookie;
    }
}


/***/ }),

/***/ "./src/site/site-utilities/cookie-storage/set.ts":
/*!*******************************************************!*\
  !*** ./src/site/site-utilities/cookie-storage/set.ts ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ setCookieStorage; }
/* harmony export */ });
/* harmony import */ var _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../site-pub-sub/site-globals */ "./src/site/site-pub-sub/site-globals.ts");
/* harmony import */ var _get__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./get */ "./src/site/site-utilities/cookie-storage/get.ts");
/* harmony import */ var _utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utilities */ "./src/site/site-utilities/utilities.ts");
/** @module cookie-storage/set */



function setCookieStorage(payload, cookie) {
    if (cookie === void 0) { cookie = _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.COOKIE; }
    var stringifiedValue = JSON.stringify(Object.assign((0,_get__WEBPACK_IMPORTED_MODULE_1__["default"])(cookie.NAME), payload));
    var isLocal = window.sparta.env === 'local';
    var expiry = "; expires=".concat((new Date(Date.now() + (cookie.EXPIRATION * 60 * 1000))).toUTCString());
    var domain = isLocal ? '' : "; domain=".concat((0,_utilities__WEBPACK_IMPORTED_MODULE_2__.getCurrentDomain)());
    var secure = (cookie.SECURE && !isLocal) ? '; secure' : '';
    var sameSite = (cookie.SECURE && !isLocal) ? '; sameSite=none' : '';
    var cookieInfo = "".concat(cookie.NAME, "=").concat(stringifiedValue).concat(expiry, "; path=").concat(cookie.PATH).concat(domain).concat(secure).concat(sameSite);
    window.document.cookie = cookieInfo;
}


/***/ }),

/***/ "./src/site/site-utilities/utilities.ts":
/*!**********************************************!*\
  !*** ./src/site/site-utilities/utilities.ts ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getAhToken: function() { return /* binding */ getAhToken; },
/* harmony export */   getCurrentDomain: function() { return /* binding */ getCurrentDomain; },
/* harmony export */   getDomain: function() { return /* binding */ getDomain; },
/* harmony export */   getGSID: function() { return /* binding */ getGSID; },
/* harmony export */   getHostName: function() { return /* binding */ getHostName; },
/* harmony export */   getParams: function() { return /* binding */ getParams; },
/* harmony export */   increaseErrorCount: function() { return /* binding */ increaseErrorCount; },
/* harmony export */   isEmptyArr: function() { return /* binding */ isEmptyArr; },
/* harmony export */   isEmptyObj: function() { return /* binding */ isEmptyObj; },
/* harmony export */   isLocal: function() { return /* binding */ isLocal; },
/* harmony export */   isSalePresent: function() { return /* binding */ isSalePresent; },
/* harmony export */   isSpanish: function() { return /* binding */ isSpanish; },
/* harmony export */   logGenesysEvent: function() { return /* binding */ logGenesysEvent; },
/* harmony export */   publishTealium: function() { return /* binding */ publishTealium; },
/* harmony export */   publishWindow: function() { return /* binding */ publishWindow; },
/* harmony export */   queryStringParse: function() { return /* binding */ queryStringParse; },
/* harmony export */   waitForAHToken: function() { return /* binding */ waitForAHToken; }
/* harmony export */ });
/* harmony import */ var _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../site-pub-sub/site-globals */ "./src/site/site-pub-sub/site-globals.ts");
/* harmony import */ var _cookie_storage_get__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./cookie-storage/get */ "./src/site/site-utilities/cookie-storage/get.ts");
/* harmony import */ var _site_api_validate_ip_address__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../site-api/validate-ip-address */ "./src/site/site-api/validate-ip-address.ts");
// @ts-nocheck
/* eslint-disable no-undef */
/* eslint-disable max-len */
/** @module utilities/utilities */



/**
 * We have two different language versions of chat. A Spanish version and an English version. We will load the corresponding
 * version that relates to language value of the page.
 * @returns {string}
 */
function isSpanish() {
    return genesysData.LANGUAGE === "es-us" ? "es" : "en";
}
/**
 * getParams
 * Returns all query string params in an object
 * @returns {object}
 */
function getParams() {
    var obj = {};
    window.location.search
        .substr(1)
        .split("&")
        .forEach(function (param) {
        var _a = param.split("="), name = _a[0], value = _a[1];
        obj[name] = value;
    });
    return obj;
}
/**
 * When localhost set to localhost, if not we'll use hostname. Will fail if it's relative, widget
 * accepts hostname
 * @returns {string}
 */
function isLocal() {
    if (window.location.href.indexOf("localhost") > -1) {
        return "http://localhost:3005";
    }
    return "https://" + window.location.hostname;
}
/**
 * isEmptyObj
 * Function designed to check if an object is empty (returns true) or contains key/value pairs (returns false)
 * @returns {boolean}
 */
function isEmptyObj(obj) {
    for (var key in obj) {
        if (obj.hasOwnProperty(key))
            return false;
    }
    return true;
}
/**
 * isEmptyArr
 * Function designed to check if an array is empty (returns true) or contains items (returns false)
 * @param {array} arr
 * @returns {boolean}
 */
function isEmptyArr(arr) {
    return Array.isArray(arr) && arr.length === 0;
}
/**
 * isSalePresent
 * Function designed to check through the digitalData object for the presence of all the possible sale indicators
 * @param {object} ddo - the digitalData object on the window
 * @returns {string} - if defined
 * @returns {null} - if undefined
 */
function isSalePresent(ddo) {
    for (var i = 0; i < _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.SALE_INDICATORS.length; i++) {
        if (ddo[_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.SALE_INDICATORS[i]] &&
            ddo[_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.SALE_INDICATORS[i]] !== null &&
            ddo[_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.SALE_INDICATORS[i]] !== "") {
            return ddo[_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.SALE_INDICATORS[i]];
        }
    }
    return null;
}
/**
 * increaseErrorCount
 * Function designed to count every time that an error occurs. Once 3 errors occur,
 * publish will occur to shutdown chat on widget and site
 */
function increaseErrorCount() {
    if (bactm && bactm.ddo) {
        var errorCount = bactm.ddo.get("page.attributes.chat.genesys_error_count") || 0;
        errorCount++;
        bactm.ddo.set("page.attributes.chat.genesys_error_count", errorCount);
        if (errorCount === _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.MAX_ERR_RETRIES)
            TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.CANCEL_WIDGET_SUBS);
    }
}
/**
 * getAhToken
 * Checks to see if the AhToken Cookie is still present
 * @param {string} name - Optional as it should always be 'ah_token'
 * @returns {object}
 */
function getAhToken(name) {
    if (name === void 0) { name = "ah_token"; }
    var lookup = "".concat(name, "=");
    var decodedCookie = decodeURIComponent(document.cookie);
    var cookieArr = decodedCookie.split(";");
    for (var i = 0; i < cookieArr.length; i += 1) {
        var cookie = cookieArr[i];
        while (cookie.charAt(0) === " ") {
            cookie = cookie.substring(1);
        }
        if (cookie.indexOf(lookup) === 0) {
            return { ah_token: cookie.substring(lookup.length, cookie.length) };
        }
    }
    return {};
}
/**
 * waitForAHToken
 * async function that will confirm the AH token and if it is present then proceed; if not,
 * await the validateIPAddress function
 * @param {string} eventName
 * @param {object} payload
 * @returns {boolean}
 */
function waitForAHToken(eventName, payload) {
    var isAhToken = getAhToken();
    if (isEmptyObj(isAhToken)) {
        (0,_site_api_validate_ip_address__WEBPACK_IMPORTED_MODULE_2__["default"])(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.GENESYS_VALIDATE_IP_ADDRESS, { ogwUrl: _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.OGW_URL }, { eventName: eventName, payload: payload });
    }
    else {
        publishTealium(eventName, payload);
    }
}
/**
 * getHostName
 * Extracts hostname from URL String
 * @param {string} url to extract hostname
 * @returns {string} hostname
 */
function getHostName(url) {
    var match = url.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);
    if (match != null &&
        match.length > 2 &&
        typeof match[2] === "string" &&
        match[2].length > 0) {
        return match[2];
    }
    return null;
}
/**
 * getDomain
 * Extract TLD from URL string
 * @param {string} url to extract tld
 * @returns {string} top level domain
 */
function getDomain(url) {
    var hostName = getHostName(url);
    var domain = hostName;
    if (hostName != null) {
        var parts = hostName.split(".").reverse();
        if (parts != null && parts.length > 1) {
            domain = "".concat(parts[1], ".").concat(parts[0]);
        }
    }
    if (document.referrer.includes("fssit1.ml.com") || window.location.hostname.includes('fssit1.ml.com'))
        return "fssit1.ml.com";
    if (document.referrer.includes("fssit2.ml.com") || window.location.hostname.includes('fssit2.ml.com'))
        return "fssit2.ml.com";
    if (document.referrer.includes("benefitssit1") || window.location.hostname.includes('benefitssit1'))
        return "benefitssit1.ml.com";
    if (document.referrer.includes("benefitssit2") || window.location.hostname.includes('benefitssit2'))
        return "benefitssit2.ml.com";
    return domain;
}
/**
 * getCurrentDomain
 * Obtains the current TLD domain from current window.location.href
 * @returns {string} Current TLD
 */
function getCurrentDomain() {
    return getDomain(window.location.origin);
}
/**
 * Publish to window
 * @param {string} eventName - name on event
 * @param {object} payload - Events payload
 * @returns {boolean}
 */
function publishWindow(eventName, payload) {
    var eventToBePublished = new CustomEvent(eventName, { detail: payload });
    var $body = document.querySelector("body");
    $body.dispatchEvent(eventToBePublished);
}
/**
 * Publish to Tealium
 * @param {string} eventName - name on event
 * @param {object} payload - Events payload
 * @returns {boolean}
 */
function publishTealium(eventName, payload) {
    TealiumPubSub.publish(eventName, payload);
    return false;
}
/**
 * queryStringParse
 * Used to parse out query string values to provide a modified chat experience in LLEs
 * @param {string} name - name for query string to parse
 * @returns {string}
 */
function queryStringParse(name) {
    var url = window.location.href;
    var regex = new RegExp("[?&]".concat(name, "(=([^&#]*)|&|#|$)"));
    var results = regex.exec(url);
    if (results && results[2])
        return decodeURIComponent(results[2]);
    return "";
}
/**
 * Log Genesys Event
 * @param {eventName} - Name of the genesys event
 * @param {info} -  Other information that needs to be collected
 * @returns {void}
 */
function logGenesysEvent(levelNum, eventName, data) {
    var ddoEnvProd = window.digitalData &&
        digitalData.environmentVariables &&
        digitalData.environmentVariables.env.indexOf("notprod") > -1
        ? false
        : true;
    if (window.bactm_envSelector === "prod" || ddoEnvProd)
        return;
    if (!window.bactm) {
        window.bactm = {};
        window.bactm.chat_dataCollector = [];
    }
    var levelNumEvents = {
        1: "info",
        2: "warn",
        3: "error",
    };
    var level = levelNumEvents[levelNum];
    var newEvent = {
        eventName: eventName,
        data: data,
    };
    if (window.showChatDebugConsole) {
        console.groupCollapsed("Bactm Genesys Chat - ".concat(eventName));
        console.log({ data: data, level: level });
        console.groupEnd();
    }
    window.bactm.chat_dataCollector.push({ level: level, newEvent: newEvent });
}
/**
 * getGSID
 * @returns null || string
 */
function getGSID() {
    var gsid = (0,_cookie_storage_get__WEBPACK_IMPORTED_MODULE_1__["default"])(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_0__.COOKIE_GSID);
    if (isEmptyObj(gsid)) {
        return "";
    }
    return gsid;
}


/***/ }),

/***/ "./src/site/site-utilities/utilities/getParentInfo.ts":
/*!************************************************************!*\
  !*** ./src/site/site-utilities/utilities/getParentInfo.ts ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getParentInfo: function() { return /* binding */ getParentInfo; },
/* harmony export */   setOrigin: function() { return /* binding */ setOrigin; },
/* harmony export */   setParentInfo: function() { return /* binding */ setParentInfo; }
/* harmony export */ });
var parentDDO = {};
var parentOrigin = "";
var parentHref = "";
var parentTitle = "";
function setOrigin(url) {
    parentOrigin = url;
    // console.log('inside setOrigin, parent url is: ', parentOrigin);
    getQueryStringsAndDDO();
}
;
function getQueryStringsAndDDO() {
    window.parent.postMessage("GET_QS_DDO", parentOrigin);
}
;
function setParentInfo(data) {
    var href = data.href, ddo = data.ddo, title = data.title;
    parentHref = href;
    parentDDO = ddo;
    parentTitle = title;
    // These need to be removed before Sept release
    // console.log('inside setParentDDO, ddo is: ', parentDDO);
    // console.log('inside setParentDDO, href is: ', parentHref);
}
function getParentInfo() {
    return {
        parentDDO: parentDDO,
        parentHref: parentHref,
        parentTitle: parentTitle,
    };
}


/***/ }),

/***/ "./node_modules/whatwg-fetch/fetch.js":
/*!********************************************!*\
  !*** ./node_modules/whatwg-fetch/fetch.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DOMException: function() { return /* binding */ DOMException; },
/* harmony export */   Headers: function() { return /* binding */ Headers; },
/* harmony export */   Request: function() { return /* binding */ Request; },
/* harmony export */   Response: function() { return /* binding */ Response; },
/* harmony export */   fetch: function() { return /* binding */ fetch; }
/* harmony export */ });
/* eslint-disable no-prototype-builtins */
var g =
  (typeof globalThis !== 'undefined' && globalThis) ||
  (typeof self !== 'undefined' && self) ||
  // eslint-disable-next-line no-undef
  (typeof __webpack_require__.g !== 'undefined' && __webpack_require__.g) ||
  {}

var support = {
  searchParams: 'URLSearchParams' in g,
  iterable: 'Symbol' in g && 'iterator' in Symbol,
  blob:
    'FileReader' in g &&
    'Blob' in g &&
    (function() {
      try {
        new Blob()
        return true
      } catch (e) {
        return false
      }
    })(),
  formData: 'FormData' in g,
  arrayBuffer: 'ArrayBuffer' in g
}

function isDataView(obj) {
  return obj && DataView.prototype.isPrototypeOf(obj)
}

if (support.arrayBuffer) {
  var viewClasses = [
    '[object Int8Array]',
    '[object Uint8Array]',
    '[object Uint8ClampedArray]',
    '[object Int16Array]',
    '[object Uint16Array]',
    '[object Int32Array]',
    '[object Uint32Array]',
    '[object Float32Array]',
    '[object Float64Array]'
  ]

  var isArrayBufferView =
    ArrayBuffer.isView ||
    function(obj) {
      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1
    }
}

function normalizeName(name) {
  if (typeof name !== 'string') {
    name = String(name)
  }
  if (/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(name) || name === '') {
    throw new TypeError('Invalid character in header field name: "' + name + '"')
  }
  return name.toLowerCase()
}

function normalizeValue(value) {
  if (typeof value !== 'string') {
    value = String(value)
  }
  return value
}

// Build a destructive iterator for the value list
function iteratorFor(items) {
  var iterator = {
    next: function() {
      var value = items.shift()
      return {done: value === undefined, value: value}
    }
  }

  if (support.iterable) {
    iterator[Symbol.iterator] = function() {
      return iterator
    }
  }

  return iterator
}

function Headers(headers) {
  this.map = {}

  if (headers instanceof Headers) {
    headers.forEach(function(value, name) {
      this.append(name, value)
    }, this)
  } else if (Array.isArray(headers)) {
    headers.forEach(function(header) {
      if (header.length != 2) {
        throw new TypeError('Headers constructor: expected name/value pair to be length 2, found' + header.length)
      }
      this.append(header[0], header[1])
    }, this)
  } else if (headers) {
    Object.getOwnPropertyNames(headers).forEach(function(name) {
      this.append(name, headers[name])
    }, this)
  }
}

Headers.prototype.append = function(name, value) {
  name = normalizeName(name)
  value = normalizeValue(value)
  var oldValue = this.map[name]
  this.map[name] = oldValue ? oldValue + ', ' + value : value
}

Headers.prototype['delete'] = function(name) {
  delete this.map[normalizeName(name)]
}

Headers.prototype.get = function(name) {
  name = normalizeName(name)
  return this.has(name) ? this.map[name] : null
}

Headers.prototype.has = function(name) {
  return this.map.hasOwnProperty(normalizeName(name))
}

Headers.prototype.set = function(name, value) {
  this.map[normalizeName(name)] = normalizeValue(value)
}

Headers.prototype.forEach = function(callback, thisArg) {
  for (var name in this.map) {
    if (this.map.hasOwnProperty(name)) {
      callback.call(thisArg, this.map[name], name, this)
    }
  }
}

Headers.prototype.keys = function() {
  var items = []
  this.forEach(function(value, name) {
    items.push(name)
  })
  return iteratorFor(items)
}

Headers.prototype.values = function() {
  var items = []
  this.forEach(function(value) {
    items.push(value)
  })
  return iteratorFor(items)
}

Headers.prototype.entries = function() {
  var items = []
  this.forEach(function(value, name) {
    items.push([name, value])
  })
  return iteratorFor(items)
}

if (support.iterable) {
  Headers.prototype[Symbol.iterator] = Headers.prototype.entries
}

function consumed(body) {
  if (body._noBody) return
  if (body.bodyUsed) {
    return Promise.reject(new TypeError('Already read'))
  }
  body.bodyUsed = true
}

function fileReaderReady(reader) {
  return new Promise(function(resolve, reject) {
    reader.onload = function() {
      resolve(reader.result)
    }
    reader.onerror = function() {
      reject(reader.error)
    }
  })
}

function readBlobAsArrayBuffer(blob) {
  var reader = new FileReader()
  var promise = fileReaderReady(reader)
  reader.readAsArrayBuffer(blob)
  return promise
}

function readBlobAsText(blob) {
  var reader = new FileReader()
  var promise = fileReaderReady(reader)
  var match = /charset=([A-Za-z0-9_-]+)/.exec(blob.type)
  var encoding = match ? match[1] : 'utf-8'
  reader.readAsText(blob, encoding)
  return promise
}

function readArrayBufferAsText(buf) {
  var view = new Uint8Array(buf)
  var chars = new Array(view.length)

  for (var i = 0; i < view.length; i++) {
    chars[i] = String.fromCharCode(view[i])
  }
  return chars.join('')
}

function bufferClone(buf) {
  if (buf.slice) {
    return buf.slice(0)
  } else {
    var view = new Uint8Array(buf.byteLength)
    view.set(new Uint8Array(buf))
    return view.buffer
  }
}

function Body() {
  this.bodyUsed = false

  this._initBody = function(body) {
    /*
      fetch-mock wraps the Response object in an ES6 Proxy to
      provide useful test harness features such as flush. However, on
      ES5 browsers without fetch or Proxy support pollyfills must be used;
      the proxy-pollyfill is unable to proxy an attribute unless it exists
      on the object before the Proxy is created. This change ensures
      Response.bodyUsed exists on the instance, while maintaining the
      semantic of setting Request.bodyUsed in the constructor before
      _initBody is called.
    */
    // eslint-disable-next-line no-self-assign
    this.bodyUsed = this.bodyUsed
    this._bodyInit = body
    if (!body) {
      this._noBody = true;
      this._bodyText = ''
    } else if (typeof body === 'string') {
      this._bodyText = body
    } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {
      this._bodyBlob = body
    } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {
      this._bodyFormData = body
    } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {
      this._bodyText = body.toString()
    } else if (support.arrayBuffer && support.blob && isDataView(body)) {
      this._bodyArrayBuffer = bufferClone(body.buffer)
      // IE 10-11 can't handle a DataView body.
      this._bodyInit = new Blob([this._bodyArrayBuffer])
    } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {
      this._bodyArrayBuffer = bufferClone(body)
    } else {
      this._bodyText = body = Object.prototype.toString.call(body)
    }

    if (!this.headers.get('content-type')) {
      if (typeof body === 'string') {
        this.headers.set('content-type', 'text/plain;charset=UTF-8')
      } else if (this._bodyBlob && this._bodyBlob.type) {
        this.headers.set('content-type', this._bodyBlob.type)
      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {
        this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')
      }
    }
  }

  if (support.blob) {
    this.blob = function() {
      var rejected = consumed(this)
      if (rejected) {
        return rejected
      }

      if (this._bodyBlob) {
        return Promise.resolve(this._bodyBlob)
      } else if (this._bodyArrayBuffer) {
        return Promise.resolve(new Blob([this._bodyArrayBuffer]))
      } else if (this._bodyFormData) {
        throw new Error('could not read FormData body as blob')
      } else {
        return Promise.resolve(new Blob([this._bodyText]))
      }
    }
  }

  this.arrayBuffer = function() {
    if (this._bodyArrayBuffer) {
      var isConsumed = consumed(this)
      if (isConsumed) {
        return isConsumed
      } else if (ArrayBuffer.isView(this._bodyArrayBuffer)) {
        return Promise.resolve(
          this._bodyArrayBuffer.buffer.slice(
            this._bodyArrayBuffer.byteOffset,
            this._bodyArrayBuffer.byteOffset + this._bodyArrayBuffer.byteLength
          )
        )
      } else {
        return Promise.resolve(this._bodyArrayBuffer)
      }
    } else if (support.blob) {
      return this.blob().then(readBlobAsArrayBuffer)
    } else {
      throw new Error('could not read as ArrayBuffer')
    }
  }

  this.text = function() {
    var rejected = consumed(this)
    if (rejected) {
      return rejected
    }

    if (this._bodyBlob) {
      return readBlobAsText(this._bodyBlob)
    } else if (this._bodyArrayBuffer) {
      return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))
    } else if (this._bodyFormData) {
      throw new Error('could not read FormData body as text')
    } else {
      return Promise.resolve(this._bodyText)
    }
  }

  if (support.formData) {
    this.formData = function() {
      return this.text().then(decode)
    }
  }

  this.json = function() {
    return this.text().then(JSON.parse)
  }

  return this
}

// HTTP methods whose capitalization should be normalized
var methods = ['CONNECT', 'DELETE', 'GET', 'HEAD', 'OPTIONS', 'PATCH', 'POST', 'PUT', 'TRACE']

function normalizeMethod(method) {
  var upcased = method.toUpperCase()
  return methods.indexOf(upcased) > -1 ? upcased : method
}

function Request(input, options) {
  if (!(this instanceof Request)) {
    throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.')
  }

  options = options || {}
  var body = options.body

  if (input instanceof Request) {
    if (input.bodyUsed) {
      throw new TypeError('Already read')
    }
    this.url = input.url
    this.credentials = input.credentials
    if (!options.headers) {
      this.headers = new Headers(input.headers)
    }
    this.method = input.method
    this.mode = input.mode
    this.signal = input.signal
    if (!body && input._bodyInit != null) {
      body = input._bodyInit
      input.bodyUsed = true
    }
  } else {
    this.url = String(input)
  }

  this.credentials = options.credentials || this.credentials || 'same-origin'
  if (options.headers || !this.headers) {
    this.headers = new Headers(options.headers)
  }
  this.method = normalizeMethod(options.method || this.method || 'GET')
  this.mode = options.mode || this.mode || null
  this.signal = options.signal || this.signal || (function () {
    if ('AbortController' in g) {
      var ctrl = new AbortController();
      return ctrl.signal;
    }
  }());
  this.referrer = null

  if ((this.method === 'GET' || this.method === 'HEAD') && body) {
    throw new TypeError('Body not allowed for GET or HEAD requests')
  }
  this._initBody(body)

  if (this.method === 'GET' || this.method === 'HEAD') {
    if (options.cache === 'no-store' || options.cache === 'no-cache') {
      // Search for a '_' parameter in the query string
      var reParamSearch = /([?&])_=[^&]*/
      if (reParamSearch.test(this.url)) {
        // If it already exists then set the value with the current time
        this.url = this.url.replace(reParamSearch, '$1_=' + new Date().getTime())
      } else {
        // Otherwise add a new '_' parameter to the end with the current time
        var reQueryString = /\?/
        this.url += (reQueryString.test(this.url) ? '&' : '?') + '_=' + new Date().getTime()
      }
    }
  }
}

Request.prototype.clone = function() {
  return new Request(this, {body: this._bodyInit})
}

function decode(body) {
  var form = new FormData()
  body
    .trim()
    .split('&')
    .forEach(function(bytes) {
      if (bytes) {
        var split = bytes.split('=')
        var name = split.shift().replace(/\+/g, ' ')
        var value = split.join('=').replace(/\+/g, ' ')
        form.append(decodeURIComponent(name), decodeURIComponent(value))
      }
    })
  return form
}

function parseHeaders(rawHeaders) {
  var headers = new Headers()
  // Replace instances of \r\n and \n followed by at least one space or horizontal tab with a space
  // https://tools.ietf.org/html/rfc7230#section-3.2
  var preProcessedHeaders = rawHeaders.replace(/\r?\n[\t ]+/g, ' ')
  // Avoiding split via regex to work around a common IE11 bug with the core-js 3.6.0 regex polyfill
  // https://github.com/github/fetch/issues/748
  // https://github.com/zloirock/core-js/issues/751
  preProcessedHeaders
    .split('\r')
    .map(function(header) {
      return header.indexOf('\n') === 0 ? header.substr(1, header.length) : header
    })
    .forEach(function(line) {
      var parts = line.split(':')
      var key = parts.shift().trim()
      if (key) {
        var value = parts.join(':').trim()
        try {
          headers.append(key, value)
        } catch (error) {
          console.warn('Response ' + error.message)
        }
      }
    })
  return headers
}

Body.call(Request.prototype)

function Response(bodyInit, options) {
  if (!(this instanceof Response)) {
    throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.')
  }
  if (!options) {
    options = {}
  }

  this.type = 'default'
  this.status = options.status === undefined ? 200 : options.status
  if (this.status < 200 || this.status > 599) {
    throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].")
  }
  this.ok = this.status >= 200 && this.status < 300
  this.statusText = options.statusText === undefined ? '' : '' + options.statusText
  this.headers = new Headers(options.headers)
  this.url = options.url || ''
  this._initBody(bodyInit)
}

Body.call(Response.prototype)

Response.prototype.clone = function() {
  return new Response(this._bodyInit, {
    status: this.status,
    statusText: this.statusText,
    headers: new Headers(this.headers),
    url: this.url
  })
}

Response.error = function() {
  var response = new Response(null, {status: 200, statusText: ''})
  response.ok = false
  response.status = 0
  response.type = 'error'
  return response
}

var redirectStatuses = [301, 302, 303, 307, 308]

Response.redirect = function(url, status) {
  if (redirectStatuses.indexOf(status) === -1) {
    throw new RangeError('Invalid status code')
  }

  return new Response(null, {status: status, headers: {location: url}})
}

var DOMException = g.DOMException
try {
  new DOMException()
} catch (err) {
  DOMException = function(message, name) {
    this.message = message
    this.name = name
    var error = Error(message)
    this.stack = error.stack
  }
  DOMException.prototype = Object.create(Error.prototype)
  DOMException.prototype.constructor = DOMException
}

function fetch(input, init) {
  return new Promise(function(resolve, reject) {
    var request = new Request(input, init)

    if (request.signal && request.signal.aborted) {
      return reject(new DOMException('Aborted', 'AbortError'))
    }

    var xhr = new XMLHttpRequest()

    function abortXhr() {
      xhr.abort()
    }

    xhr.onload = function() {
      var options = {
        statusText: xhr.statusText,
        headers: parseHeaders(xhr.getAllResponseHeaders() || '')
      }
      // This check if specifically for when a user fetches a file locally from the file system
      // Only if the status is out of a normal range
      if (request.url.indexOf('file://') === 0 && (xhr.status < 200 || xhr.status > 599)) {
        options.status = 200;
      } else {
        options.status = xhr.status;
      }
      options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')
      var body = 'response' in xhr ? xhr.response : xhr.responseText
      setTimeout(function() {
        resolve(new Response(body, options))
      }, 0)
    }

    xhr.onerror = function() {
      setTimeout(function() {
        reject(new TypeError('Network request failed'))
      }, 0)
    }

    xhr.ontimeout = function() {
      setTimeout(function() {
        reject(new TypeError('Network request timed out'))
      }, 0)
    }

    xhr.onabort = function() {
      setTimeout(function() {
        reject(new DOMException('Aborted', 'AbortError'))
      }, 0)
    }

    function fixUrl(url) {
      try {
        return url === '' && g.location.href ? g.location.href : url
      } catch (e) {
        return url
      }
    }

    xhr.open(request.method, fixUrl(request.url), true)

    if (request.credentials === 'include') {
      xhr.withCredentials = true
    } else if (request.credentials === 'omit') {
      xhr.withCredentials = false
    }

    if ('responseType' in xhr) {
      if (support.blob) {
        xhr.responseType = 'blob'
      } else if (
        support.arrayBuffer
      ) {
        xhr.responseType = 'arraybuffer'
      }
    }

    if (init && typeof init.headers === 'object' && !(init.headers instanceof Headers || (g.Headers && init.headers instanceof g.Headers))) {
      var names = [];
      Object.getOwnPropertyNames(init.headers).forEach(function(name) {
        names.push(normalizeName(name))
        xhr.setRequestHeader(name, normalizeValue(init.headers[name]))
      })
      request.headers.forEach(function(value, name) {
        if (names.indexOf(name) === -1) {
          xhr.setRequestHeader(name, value)
        }
      })
    } else {
      request.headers.forEach(function(value, name) {
        xhr.setRequestHeader(name, value)
      })
    }

    if (request.signal) {
      request.signal.addEventListener('abort', abortXhr)

      xhr.onreadystatechange = function() {
        // DONE (success or failure)
        if (xhr.readyState === 4) {
          request.signal.removeEventListener('abort', abortXhr)
        }
      }
    }

    xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)
  })
}

fetch.polyfill = true

if (!g.fetch) {
  g.fetch = fetch
  g.Headers = Headers
  g.Request = Request
  g.Response = Response
}


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	!function() {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = function(module) {
/******/ 			var getter = module && module.__esModule ?
/******/ 				function() { return module['default']; } :
/******/ 				function() { return module; };
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	!function() {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = function(exports, definition) {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	!function() {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	!function() {
/******/ 		__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	!function() {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = function(exports) {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	}();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
!function() {
"use strict";
/*!***************************!*\
  !*** ./src/site/index.ts ***!
  \***************************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var whatwg_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! whatwg-fetch */ "./node_modules/whatwg-fetch/fetch.js");
/* harmony import */ var _messaging_post_messages__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./messaging/post-messages */ "./src/site/messaging/post-messages.ts");
/* harmony import */ var _site_pub_sub_add_pub_sub__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./site-pub-sub/add-pub-sub */ "./src/site/site-pub-sub/add-pub-sub.ts");
/* harmony import */ var _site_pub_sub_subscriptions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./site-pub-sub/subscriptions */ "./src/site/site-pub-sub/subscriptions.ts");
/* harmony import */ var _site_pub_sub_events__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./site-pub-sub/events */ "./src/site/site-pub-sub/events.ts");
/* harmony import */ var _messaging_meta__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./messaging/meta */ "./src/site/messaging/meta.ts");
/* harmony import */ var _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./site-pub-sub/site-globals */ "./src/site/site-pub-sub/site-globals.ts");
/* harmony import */ var _site_utilities_utilities__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./site-utilities/utilities */ "./src/site/site-utilities/utilities.ts");
// @ts-nocheck
/**
 * @file Bactm.genesys
 */








var initChat = function () {
    var _a, _b;
    (0,_site_pub_sub_add_pub_sub__WEBPACK_IMPORTED_MODULE_2__["default"])();
    (0,_messaging_post_messages__WEBPACK_IMPORTED_MODULE_1__["default"])();
    (0,_site_pub_sub_events__WEBPACK_IMPORTED_MODULE_4__["default"])();
    (0,_site_pub_sub_subscriptions__WEBPACK_IMPORTED_MODULE_3__["default"])();
    (0,_messaging_meta__WEBPACK_IMPORTED_MODULE_5__["default"])();
    bactm.on("afterPageview", function (data) {
        (0,_site_utilities_utilities__WEBPACK_IMPORTED_MODULE_7__.publishWindow)(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_6__.COMETD_REQUEST_CHAT, data);
    });
    if ((_b = (_a = window === null || window === void 0 ? void 0 : window.sparta) === null || _a === void 0 ? void 0 : _a.chat) === null || _b === void 0 ? void 0 : _b.siteModuleLoaded) {
        TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_6__.GENESYS_VALIDATE_IP_ADDRESS, { ogwUrl: _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_6__.OGW_URL });
    }
    else {
        var $body = document.querySelector("body");
        $body === null || $body === void 0 ? void 0 : $body.addEventListener("gt-chat-site-moulde.loaded", function () {
            TealiumPubSub.publish(_site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_6__.GENESYS_VALIDATE_IP_ADDRESS, { ogwUrl: _site_pub_sub_site_globals__WEBPACK_IMPORTED_MODULE_6__.OGW_URL });
        });
    }
};
if (window.location.href.indexOf("/chat/") > -1 ||
    window.location.href.indexOf("/gt-chat/") > -1) {
    initChat();
}

}();
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFFLEdBQUcsRUFBRSxHQUFHLEVBQ2hELEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFDaEQsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUNoRCxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQ2hELEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQzFCO0VBQ0QsSUFBSUMsZUFBZSxHQUFHLENBQ2xCLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQzlDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQzlDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQzlDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQzlDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQzlDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQzlDLElBQUksRUFB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UUFDVCxVQUFVO1FBQ1YsV0FBVztLQUNkO0FBQ0wsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMvQkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUscUJBQU0sb0JBQW9CLHFCQUFNO0FBQzFDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFTztBQUNQOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsa0JBQWtCLGlCQUFpQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHFEQUFxRDtBQUNyRCxRQUFRO0FBQ1I7QUFDQSxRQUFRO0FBQ1IsNEVBQTRFO0FBQzVFO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLFFBQVE7QUFDUjtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDRCQUE0QixxQkFBcUI7QUFDakQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0EscUNBQXFDLDRCQUE0QjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDZCQUE2QiwwQkFBMEIsZUFBZTtBQUN0RTs7QUFFTztBQUNQO0FBQ0E7QUFDQSxFQUFF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QUM7SUFDM0MsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUM5QztJQUNBLFFBQVEsRUFBRSxDQUFDO0NBQ1oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGF0Ly4vbm9kZV9tb2R1bGVzL2NvbWV0ZC9jb21ldGQuanMiLCJ3ZWJwYWNrOi8vY2hhdC8uL3NyYy9zaXRlL3NpdGUtdXRpbGl0aWVzL2lzTW9iaWxlQ2hhdC5qcyIsIndlYnBhY2s6Ly9jaGF0Ly4vc3JjL3NpdGUvc2l0ZS11dGlsaXRpZXMvdXRpbGl0aWVzL2xvZ2dlci5qcyIsIndlYnBhY2s6Ly9jaGF0Ly4vc3JjL3NpdGUvbWVzc2FnaW5nL2NoYW5uZWwudHMiLCJ3ZWJwYWNrOi8vY2hhdC8uL3NyYy9zaXRlL21lc3NhZ2luZy9kaXNjb25uZWN0LnRzIiwid2VicGFjazovL2NoYXQvLi9zcmMvc2l0ZS9tZXNzYWdpbmcvaGFuZGxlcnMvY2hhbm5lbC1tZXNzYWdlLnRzIiwid2VicGFjazovL2NoYXQvLi9zcmMvc2l0ZS9tZXNzYWdpbmcvaGFuZGxlcnMvcmVxdWVzdC1jaGFubmVsLnRzIiwid2VicGFjazovL2NoYXQvLi9zcmMvc2l0ZS9tZXNzYWdpbmcvaGFuZGxlcnMvcmVxdWVzdC1oYW5kc2hha2UudHMiLCJ3ZWJwYWNrOi8vY2hhdC8uL3NyYy9zaXRlL21lc3NhZ2luZy9oYW5kc2hha2UudHMiLCJ3ZWJwYWNrOi8vY2hhdC8uL3NyYy9zaXRlL21lc3NhZ2luZy9tZXRhLnRzIiwid2VicGFjazovL2NoYXQvLi9zcmMvc2l0ZS9tZXNzYWdpbmcvbmlja25hbWUtdXBkYXRlLnRzIiwid2VicGFjazovL2NoYXQvLi9zcmMvc2l0ZS9tZXNzYWdpbmcvbm90aWZpY2F0aW9uLnRzIiwid2VicGFjazovL2NoYXQvLi9zcmMvc2l0ZS9tZXNzYWdpbmcvcG9zdC1tZXNzYWdlcy50cyIsIndlYnBhY2s6Ly9jaGF0Ly4vc3JjL3NpdGUvbWVzc2FnaW5nL3R5cGluZy50cyIsIndlYnBhY2s6Ly9jaGF0Ly4vc3JjL3NpdGUvbWVzc2FnaW5nL3VwZGF0ZS50cyIsIndlYnBhY2s6Ly9jaGF0Ly4vc3JjL3NpdGUvbWVzc2FnaW5nL3ZlbmRvci50cyIsIndlYnBhY2s6Ly9jaGF0Ly4vc3JjL3NpdGUvc2FsZXMvc2FsZS1ldmVudC50cyIsIndlYnBhY2s6Ly9jaGF0Ly4vc3JjL3NpdGUvc2l0ZS1hcGkvY28tYnJvd3NlLnRzIiwid2VicGFjazovL2NoYXQvLi9zcmMvc2l0ZS9zaXRlLWFwaS9oYW5kbGVycy9jb25maWd1cmUtY29icm93c2UudHMiLCJ3ZWJwYWNrOi8vY2hhdC8uL3NyYy9zaXRlL3NpdGUtYXBpL2hhbmRsZXJzL3JlcXVlc3QtcG9sbGluZy50cyIsIndlYnBhY2s6Ly9jaGF0Ly4vc3JjL3NpdGUvc2l0ZS1hcGkvaGFuZGxlcnMvcmVxdWVzdC1wcmVjb25uZWN0LnRzIiwid2VicGFjazovL2NoYXQvLi9zcmMvc2l0ZS9zaXRlLWFwaS9oYW5kbGVycy9zdXJ2ZXktZ2V0LXJlc3BvbnNlLnRzIiwid2VicGFjazovL2NoYXQvLi9zcmMvc2l0ZS9zaXRlLWFwaS9uYXRpdmUtY2hhdC11cGRhdGUudHMiLCJ3ZWJwYWNrOi8vY2hhdC8uL3NyYy9zaXRlL3NpdGUtYXBpL3BvbGxpbmcudHMiLCJ3ZWJwYWNrOi8vY2hhdC8uL3NyYy9zaXRlL3NpdGUtYXBpL3ByZS1jb25uZWN0LnRzIiwid2VicGFjazovL2NoYXQvLi9zcmMvc2l0ZS9zaXRlLWFwaS9yZXF1ZXN0LXRjLXVwZGF0ZS50cyIsIndlYnBhY2s6Ly9jaGF0Ly4vc3JjL3NpdGUvc2l0ZS1hcGkvc2VuZC1zdXJ2ZXkudHMiLCJ3ZWJwYWNrOi8vY2hhdC8uL3NyYy9zaXRlL3NpdGUtYXBpL3NldC1hZ2VudC1pZC50cyIsIndlYnBhY2s6Ly9jaGF0Ly4vc3JjL3NpdGUvc2l0ZS1hcGkvc3VydmV5LnRzIiwid2VicGFjazovL2NoYXQvLi9zcmMvc2l0ZS9zaXRlLWFwaS92YWxpZGF0ZS1pcC1hZGRyZXNzLnRzIiwid2VicGFjazovL2NoYXQvLi9zcmMvc2l0ZS9zaXRlLXB1Yi1zdWIvYWRkLXB1Yi1zdWIudHMiLCJ3ZWJwYWNrOi8vY2hhdC8uL3NyYy9zaXRlL3NpdGUtcHViLXN1Yi9ldmVudHMudHMiLCJ3ZWJwYWNrOi8vY2hhdC8uL3NyYy9zaXRlL3NpdGUtcHViLXN1Yi9wdWItc3ViLnRzIiwid2VicGFjazovL2NoYXQvLi9zcmMvc2l0ZS9zaXRlLXB1Yi1zdWIvc2l0ZS1nbG9iYWxzLnRzIiwid2VicGFjazovL2NoYXQvLi9zcmMvc2l0ZS9zaXRlLXB1Yi1zdWIvc3Vic2NyaXB0aW9ucy50cyIsIndlYnBhY2s6Ly9jaGF0Ly4vc3JjL3NpdGUvc2l0ZS11dGlsaXRpZXMvY29va2llLXN0b3JhZ2UvZ2V0LnRzIiwid2VicGFjazovL2NoYXQvLi9zcmMvc2l0ZS9zaXRlLXV0aWxpdGllcy9jb29raWUtc3RvcmFnZS9yZW1vdmUudHMiLCJ3ZWJwYWNrOi8vY2hhdC8uL3NyYy9zaXRlL3NpdGUtdXRpbGl0aWVzL2Nvb2tpZS1zdG9yYWdlL3NldC50cyIsIndlYnBhY2s6Ly9jaGF0Ly4vc3JjL3NpdGUvc2l0ZS11dGlsaXRpZXMvdXRpbGl0aWVzLnRzIiwid2VicGFjazovL2NoYXQvLi9zcmMvc2l0ZS9zaXRlLXV0aWxpdGllcy91dGlsaXRpZXMvZ2V0UGFyZW50SW5mby50cyIsIndlYnBhY2s6Ly9jaGF0Ly4vbm9kZV9tb2R1bGVzL3doYXR3Zy1mZXRjaC9mZXRjaC5qcyIsIndlYnBhY2s6Ly9jaGF0L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2NoYXQvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vY2hhdC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vY2hhdC93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL2NoYXQvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9jaGF0L3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vY2hhdC8uL3NyYy9zaXRlL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBDb3B5cmlnaHQgKGMpIDIwMDgtMjAyMCB0aGUgb3JpZ2luYWwgYXV0aG9yIG9yIGF1dGhvcnMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qIENvbWV0RCBWZXJzaW9uIDQuMC45ICovXG5cbihmdW5jdGlvbihyb290LCBmYWN0b3J5KSB7XG4gICAgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuICAgICAgICAvLyBDb21tb25KUy5cbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgLy8gQU1ELlxuICAgICAgICBkZWZpbmUoW10sIGZhY3RvcnkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEdsb2JhbHMuXG4gICAgICAgIHJvb3Qub3JnID0gcm9vdC5vcmcgfHwge307XG4gICAgICAgIHJvb3Qub3JnLmNvbWV0ZCA9IGZhY3RvcnkoKTtcbiAgICB9XG59KHRoaXMsIGZ1bmN0aW9uKCkge1xuICAgIC8qKlxuICAgICAqIEJyb3dzZXJzIG1heSB0aHJvdHRsZSB0aGUgV2luZG93IHNjaGVkdWxlcixcbiAgICAgKiBzbyB3ZSBtYXkgcmVwbGFjZSBpdCB3aXRoIGEgV29ya2VyIHNjaGVkdWxlci5cbiAgICAgKi9cbiAgICB2YXIgU2NoZWR1bGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBfaWRzID0gMDtcbiAgICAgICAgdmFyIF90YXNrcyA9IHt9O1xuICAgICAgICB0aGlzLnJlZ2lzdGVyID0gZnVuY3Rpb24oZnVua3Rpb24pIHtcbiAgICAgICAgICAgIHZhciBpZCA9ICsrX2lkcztcbiAgICAgICAgICAgIF90YXNrc1tpZF0gPSBmdW5rdGlvbjtcbiAgICAgICAgICAgIHJldHVybiBpZDtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51bnJlZ2lzdGVyID0gZnVuY3Rpb24oaWQpIHtcbiAgICAgICAgICAgIHZhciBmdW5rdGlvbiA9IF90YXNrc1tpZF07XG4gICAgICAgICAgICBkZWxldGUgX3Rhc2tzW2lkXTtcbiAgICAgICAgICAgIHJldHVybiBmdW5rdGlvbjtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZXRUaW1lb3V0ID0gZnVuY3Rpb24oZnVua3Rpb24sIGRlbGF5KSB7XG4gICAgICAgICAgICByZXR1cm4gd2luZG93LnNldFRpbWVvdXQoZnVua3Rpb24sIGRlbGF5KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jbGVhclRpbWVvdXQgPSBmdW5jdGlvbihpZCkge1xuICAgICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dChpZCk7XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBzY2hlZHVsZXIgY29kZSB0aGF0IHdpbGwgcnVuIGluIHRoZSBXb3JrZXIuXG4gICAgICogV29ya2VycyBoYXZlIGEgYnVpbHQtaW4gYHNlbGZgIHZhcmlhYmxlIHNpbWlsYXIgdG8gYHdpbmRvd2AuXG4gICAgICovXG4gICAgZnVuY3Rpb24gV29ya2VyU2NoZWR1bGVyKCkge1xuICAgICAgICB2YXIgX3Rhc2tzID0ge307XG4gICAgICAgIHNlbGYub25tZXNzYWdlID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdmFyIGNtZCA9IGUuZGF0YTtcbiAgICAgICAgICAgIHZhciBpZCA9IF90YXNrc1tjbWQuaWRdO1xuICAgICAgICAgICAgc3dpdGNoIChjbWQudHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NldFRpbWVvdXQnOlxuICAgICAgICAgICAgICAgICAgICBfdGFza3NbY21kLmlkXSA9IHNlbGYuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBfdGFza3NbY21kLmlkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBjbWQuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9LCBjbWQuZGVsYXkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjbGVhclRpbWVvdXQnOlxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgX3Rhc2tzW2NtZC5pZF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jbGVhclRpbWVvdXQoaWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93ICdVbmtub3duIGNvbW1hbmQgJyArIGNtZC50eXBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogVXRpbGl0eSBmdW5jdGlvbnMuXG4gICAgICovXG4gICAgdmFyIFV0aWxzID0ge1xuICAgICAgICBpc1N0cmluZzogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHwgdmFsdWUgaW5zdGFuY2VvZiBTdHJpbmc7XG4gICAgICAgIH0sXG4gICAgICAgIGlzQXJyYXk6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIEFycmF5O1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBnaXZlbiBlbGVtZW50IGlzIGNvbnRhaW5lZCBpbnRvIHRoZSBnaXZlbiBhcnJheS5cbiAgICAgICAgICogQHBhcmFtIGVsZW1lbnQgdGhlIGVsZW1lbnQgdG8gY2hlY2sgcHJlc2VuY2UgZm9yXG4gICAgICAgICAqIEBwYXJhbSBhcnJheSB0aGUgYXJyYXkgdG8gY2hlY2sgZm9yIHRoZSBlbGVtZW50IHByZXNlbmNlXG4gICAgICAgICAqIEByZXR1cm4gdGhlIGluZGV4IG9mIHRoZSBlbGVtZW50LCBpZiBwcmVzZW50LCBvciBhIG5lZ2F0aXZlIGluZGV4IGlmIHRoZSBlbGVtZW50IGlzIG5vdCBwcmVzZW50XG4gICAgICAgICAqL1xuICAgICAgICBpbkFycmF5OiBmdW5jdGlvbihlbGVtZW50LCBhcnJheSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50ID09PSBhcnJheVtpXSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICB9O1xuXG5cbiAgICAvKipcbiAgICAgKiBBIHJlZ2lzdHJ5IGZvciB0cmFuc3BvcnRzIHVzZWQgYnkgdGhlIENvbWV0RCBvYmplY3QuXG4gICAgICovXG4gICAgdmFyIFRyYW5zcG9ydFJlZ2lzdHJ5ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBfdHlwZXMgPSBbXTtcbiAgICAgICAgdmFyIF90cmFuc3BvcnRzID0ge307XG5cbiAgICAgICAgdGhpcy5nZXRUcmFuc3BvcnRUeXBlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90eXBlcy5zbGljZSgwKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmZpbmRUcmFuc3BvcnRUeXBlcyA9IGZ1bmN0aW9uKHZlcnNpb24sIGNyb3NzRG9tYWluLCB1cmwpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX3R5cGVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHR5cGUgPSBfdHlwZXNbaV07XG4gICAgICAgICAgICAgICAgaWYgKF90cmFuc3BvcnRzW3R5cGVdLmFjY2VwdCh2ZXJzaW9uLCBjcm9zc0RvbWFpbiwgdXJsKSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh0eXBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubmVnb3RpYXRlVHJhbnNwb3J0ID0gZnVuY3Rpb24odHlwZXMsIHZlcnNpb24sIGNyb3NzRG9tYWluLCB1cmwpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX3R5cGVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHR5cGUgPSBfdHlwZXNbaV07XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0eXBlcy5sZW5ndGg7ICsraikge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gdHlwZXNbal0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmFuc3BvcnQgPSBfdHJhbnNwb3J0c1t0eXBlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmFuc3BvcnQuYWNjZXB0KHZlcnNpb24sIGNyb3NzRG9tYWluLCB1cmwpID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zcG9ydDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuYWRkID0gZnVuY3Rpb24odHlwZSwgdHJhbnNwb3J0LCBpbmRleCkge1xuICAgICAgICAgICAgdmFyIGV4aXN0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IF90eXBlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIGlmIChfdHlwZXNbaV0gPT09IHR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghZXhpc3RpbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGluZGV4ICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICBfdHlwZXMucHVzaCh0eXBlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfdHlwZXMuc3BsaWNlKGluZGV4LCAwLCB0eXBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RyYW5zcG9ydHNbdHlwZV0gPSB0cmFuc3BvcnQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiAhZXhpc3Rpbmc7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5maW5kID0gZnVuY3Rpb24odHlwZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfdHlwZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICBpZiAoX3R5cGVzW2ldID09PSB0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdHJhbnNwb3J0c1t0eXBlXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnJlbW92ZSA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX3R5cGVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgaWYgKF90eXBlc1tpXSA9PT0gdHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBfdHlwZXMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHJhbnNwb3J0ID0gX3RyYW5zcG9ydHNbdHlwZV07XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBfdHJhbnNwb3J0c1t0eXBlXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zcG9ydDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmNsZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBfdHlwZXMgPSBbXTtcbiAgICAgICAgICAgIF90cmFuc3BvcnRzID0ge307XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5yZXNldCA9IGZ1bmN0aW9uKGluaXQpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX3R5cGVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgX3RyYW5zcG9ydHNbX3R5cGVzW2ldXS5yZXNldChpbml0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9O1xuXG5cbiAgICAvKipcbiAgICAgKiBCYXNlIG9iamVjdCB3aXRoIHRoZSBjb21tb24gZnVuY3Rpb25hbGl0eSBmb3IgdHJhbnNwb3J0cy5cbiAgICAgKi9cbiAgICB2YXIgVHJhbnNwb3J0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBfdHlwZTtcbiAgICAgICAgdmFyIF9jb21ldGQ7XG4gICAgICAgIHZhciBfdXJsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGdW5jdGlvbiBpbnZva2VkIGp1c3QgYWZ0ZXIgYSB0cmFuc3BvcnQgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IHJlZ2lzdGVyZWQuXG4gICAgICAgICAqIEBwYXJhbSB0eXBlIHRoZSB0eXBlIG9mIHRyYW5zcG9ydCAoZm9yIGV4YW1wbGUgJ2xvbmctcG9sbGluZycpXG4gICAgICAgICAqIEBwYXJhbSBjb21ldGQgdGhlIGNvbWV0ZCBvYmplY3QgdGhpcyB0cmFuc3BvcnQgaGFzIGJlZW4gcmVnaXN0ZXJlZCB0b1xuICAgICAgICAgKiBAc2VlICN1bnJlZ2lzdGVyZWQoKVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZWdpc3RlcmVkID0gZnVuY3Rpb24odHlwZSwgY29tZXRkKSB7XG4gICAgICAgICAgICBfdHlwZSA9IHR5cGU7XG4gICAgICAgICAgICBfY29tZXRkID0gY29tZXRkO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGdW5jdGlvbiBpbnZva2VkIGp1c3QgYWZ0ZXIgYSB0cmFuc3BvcnQgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IHVucmVnaXN0ZXJlZC5cbiAgICAgICAgICogQHNlZSAjcmVnaXN0ZXJlZCh0eXBlLCBjb21ldGQpXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnVucmVnaXN0ZXJlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgX3R5cGUgPSBudWxsO1xuICAgICAgICAgICAgX2NvbWV0ZCA9IG51bGw7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5fZGVidWcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIF9jb21ldGQuX2RlYnVnLmFwcGx5KF9jb21ldGQsIGFyZ3VtZW50cyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5fbWl4aW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBfY29tZXRkLl9taXhpbi5hcHBseShfY29tZXRkLCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZ2V0Q29uZmlndXJhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9jb21ldGQuZ2V0Q29uZmlndXJhdGlvbigpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZ2V0QWR2aWNlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gX2NvbWV0ZC5nZXRBZHZpY2UoKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnNldFRpbWVvdXQgPSBmdW5jdGlvbihmdW5rdGlvbiwgZGVsYXkpIHtcbiAgICAgICAgICAgIHJldHVybiBfY29tZXRkLnNldFRpbWVvdXQoZnVua3Rpb24sIGRlbGF5KTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmNsZWFyVGltZW91dCA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgICAgICAgICBfY29tZXRkLmNsZWFyVGltZW91dChpZCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnZlcnRzIHRoZSBnaXZlbiByZXNwb25zZSBpbnRvIGFuIGFycmF5IG9mIGJheWV1eCBtZXNzYWdlc1xuICAgICAgICAgKiBAcGFyYW0gcmVzcG9uc2UgdGhlIHJlc3BvbnNlIHRvIGNvbnZlcnRcbiAgICAgICAgICogQHJldHVybiBhbiBhcnJheSBvZiBiYXlldXggbWVzc2FnZXMgb2J0YWluZWQgYnkgY29udmVydGluZyB0aGUgcmVzcG9uc2VcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY29udmVydFRvTWVzc2FnZXMgPSBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKFV0aWxzLmlzU3RyaW5nKHJlc3BvbnNlKSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoICh4KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2RlYnVnKCdDb3VsZCBub3QgY29udmVydCB0byBKU09OIHRoZSBmb2xsb3dpbmcgc3RyaW5nJywgJ1wiJyArIHJlc3BvbnNlICsgJ1wiJyk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IHg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKFV0aWxzLmlzQXJyYXkocmVzcG9uc2UpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlID09PSB1bmRlZmluZWQgfHwgcmVzcG9uc2UgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UgaW5zdGFuY2VvZiBPYmplY3QpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW3Jlc3BvbnNlXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93ICdDb252ZXJzaW9uIEVycm9yICcgKyByZXNwb25zZSArICcsIHR5cGVvZiAnICsgKHR5cGVvZiByZXNwb25zZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgd2hldGhlciB0aGlzIHRyYW5zcG9ydCBjYW4gd29yayBmb3IgdGhlIGdpdmVuIHZlcnNpb24gYW5kIGNyb3NzIGRvbWFpbiBjb21tdW5pY2F0aW9uIGNhc2UuXG4gICAgICAgICAqIEBwYXJhbSB2ZXJzaW9uIGEgc3RyaW5nIGluZGljYXRpbmcgdGhlIHRyYW5zcG9ydCB2ZXJzaW9uXG4gICAgICAgICAqIEBwYXJhbSBjcm9zc0RvbWFpbiBhIGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBjb21tdW5pY2F0aW9uIGlzIGNyb3NzIGRvbWFpblxuICAgICAgICAgKiBAcGFyYW0gdXJsIHRoZSBVUkwgdG8gY29ubmVjdCB0b1xuICAgICAgICAgKiBAcmV0dXJuIHRydWUgaWYgdGhpcyB0cmFuc3BvcnQgY2FuIHdvcmsgZm9yIHRoZSBnaXZlbiB2ZXJzaW9uIGFuZCBjcm9zcyBkb21haW4gY29tbXVuaWNhdGlvbiBjYXNlLFxuICAgICAgICAgKiBmYWxzZSBvdGhlcndpc2VcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYWNjZXB0ID0gZnVuY3Rpb24odmVyc2lvbiwgY3Jvc3NEb21haW4sIHVybCkge1xuICAgICAgICAgICAgdGhyb3cgJ0Fic3RyYWN0JztcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0aGUgdHlwZSBvZiB0aGlzIHRyYW5zcG9ydC5cbiAgICAgICAgICogQHNlZSAjcmVnaXN0ZXJlZCh0eXBlLCBjb21ldGQpXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdldFR5cGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBfdHlwZTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmdldFVSTCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIF91cmw7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5zZXRVUkwgPSBmdW5jdGlvbih1cmwpIHtcbiAgICAgICAgICAgIF91cmwgPSB1cmw7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5zZW5kID0gZnVuY3Rpb24oZW52ZWxvcGUsIG1ldGFDb25uZWN0KSB7XG4gICAgICAgICAgICB0aHJvdyAnQWJzdHJhY3QnO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucmVzZXQgPSBmdW5jdGlvbihpbml0KSB7XG4gICAgICAgICAgICB0aGlzLl9kZWJ1ZygnVHJhbnNwb3J0JywgX3R5cGUsICdyZXNldCcsIGluaXQgPyAnaW5pdGlhbCcgOiAncmV0cnknKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmFib3J0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLl9kZWJ1ZygnVHJhbnNwb3J0JywgX3R5cGUsICdhYm9ydGVkJyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VHlwZSgpO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBUcmFuc3BvcnQuZGVyaXZlID0gZnVuY3Rpb24oYmFzZU9iamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBGKCkge1xuICAgICAgICB9XG5cbiAgICAgICAgRi5wcm90b3R5cGUgPSBiYXNlT2JqZWN0O1xuICAgICAgICByZXR1cm4gbmV3IEYoKTtcbiAgICB9O1xuXG5cbiAgICAvKipcbiAgICAgKiBCYXNlIG9iamVjdCB3aXRoIHRoZSBjb21tb24gZnVuY3Rpb25hbGl0eSBmb3IgdHJhbnNwb3J0cyBiYXNlZCBvbiByZXF1ZXN0cy5cbiAgICAgKiBUaGUga2V5IHJlc3BvbnNpYmlsaXR5IGlzIHRvIGFsbG93IGF0IG1vc3QgMiBvdXRzdGFuZGluZyByZXF1ZXN0cyB0byB0aGUgc2VydmVyLFxuICAgICAqIHRvIGF2b2lkIHRoYXQgcmVxdWVzdHMgYXJlIHNlbnQgYmVoaW5kIGEgbG9uZyBwb2xsLlxuICAgICAqIFRvIGFjaGlldmUgdGhpcywgd2UgaGF2ZSBvbmUgcmVzZXJ2ZWQgcmVxdWVzdCBmb3IgdGhlIGxvbmcgcG9sbCwgYW5kIGFsbCBvdGhlclxuICAgICAqIHJlcXVlc3RzIGFyZSBzZXJpYWxpemVkIG9uZSBhZnRlciB0aGUgb3RoZXIuXG4gICAgICovXG4gICAgdmFyIFJlcXVlc3RUcmFuc3BvcnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIF9zdXBlciA9IG5ldyBUcmFuc3BvcnQoKTtcbiAgICAgICAgdmFyIF9zZWxmID0gVHJhbnNwb3J0LmRlcml2ZShfc3VwZXIpO1xuICAgICAgICB2YXIgX3JlcXVlc3RJZHMgPSAwO1xuICAgICAgICB2YXIgX21ldGFDb25uZWN0UmVxdWVzdCA9IG51bGw7XG4gICAgICAgIHZhciBfcmVxdWVzdHMgPSBbXTtcbiAgICAgICAgdmFyIF9lbnZlbG9wZXMgPSBbXTtcblxuICAgICAgICBmdW5jdGlvbiBfY29hbGVzY2VFbnZlbG9wZXMoZW52ZWxvcGUpIHtcbiAgICAgICAgICAgIHdoaWxlIChfZW52ZWxvcGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgZW52ZWxvcGVBbmRSZXF1ZXN0ID0gX2VudmVsb3Blc1swXTtcbiAgICAgICAgICAgICAgICB2YXIgbmV3RW52ZWxvcGUgPSBlbnZlbG9wZUFuZFJlcXVlc3RbMF07XG4gICAgICAgICAgICAgICAgdmFyIG5ld1JlcXVlc3QgPSBlbnZlbG9wZUFuZFJlcXVlc3RbMV07XG4gICAgICAgICAgICAgICAgaWYgKG5ld0VudmVsb3BlLnVybCA9PT0gZW52ZWxvcGUudXJsICYmXG4gICAgICAgICAgICAgICAgICAgIG5ld0VudmVsb3BlLnN5bmMgPT09IGVudmVsb3BlLnN5bmMpIHtcbiAgICAgICAgICAgICAgICAgICAgX2VudmVsb3Blcy5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICBlbnZlbG9wZS5tZXNzYWdlcyA9IGVudmVsb3BlLm1lc3NhZ2VzLmNvbmNhdChuZXdFbnZlbG9wZS5tZXNzYWdlcyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2RlYnVnKCdDb2FsZXNjZWQnLCBuZXdFbnZlbG9wZS5tZXNzYWdlcy5sZW5ndGgsICdtZXNzYWdlcyBmcm9tIHJlcXVlc3QnLCBuZXdSZXF1ZXN0LmlkKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gX3RyYW5zcG9ydFNlbmQoZW52ZWxvcGUsIHJlcXVlc3QpIHtcbiAgICAgICAgICAgIHRoaXMudHJhbnNwb3J0U2VuZChlbnZlbG9wZSwgcmVxdWVzdCk7XG4gICAgICAgICAgICByZXF1ZXN0LmV4cGlyZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgaWYgKCFlbnZlbG9wZS5zeW5jKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1heERlbGF5ID0gdGhpcy5nZXRDb25maWd1cmF0aW9uKCkubWF4TmV0d29ya0RlbGF5O1xuICAgICAgICAgICAgICAgIHZhciBkZWxheSA9IG1heERlbGF5O1xuICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0Lm1ldGFDb25uZWN0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGF5ICs9IHRoaXMuZ2V0QWR2aWNlKCkudGltZW91dDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLl9kZWJ1ZygnVHJhbnNwb3J0JywgdGhpcy5nZXRUeXBlKCksICd3YWl0aW5nIGF0IG1vc3QnLCBkZWxheSwgJ21zIGZvciB0aGUgcmVzcG9uc2UsIG1heE5ldHdvcmtEZWxheScsIG1heERlbGF5KTtcblxuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgICAgICByZXF1ZXN0LnRpbWVvdXQgPSB0aGlzLnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3QuZXhwaXJlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSAnUmVxdWVzdCAnICsgcmVxdWVzdC5pZCArICcgb2YgdHJhbnNwb3J0ICcgKyBzZWxmLmdldFR5cGUoKSArICcgZXhjZWVkZWQgJyArIGRlbGF5ICsgJyBtcyBtYXggbmV0d29yayBkZWxheSc7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmYWlsdXJlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uOiBlcnJvck1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHhociA9IHJlcXVlc3QueGhyO1xuICAgICAgICAgICAgICAgICAgICBmYWlsdXJlLmh0dHBDb2RlID0gc2VsZi54aHJTdGF0dXMoeGhyKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5hYm9ydFhIUih4aHIpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLl9kZWJ1ZyhlcnJvck1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbXBsZXRlKHJlcXVlc3QsIGZhbHNlLCByZXF1ZXN0Lm1ldGFDb25uZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgZW52ZWxvcGUub25GYWlsdXJlKHhociwgZW52ZWxvcGUubWVzc2FnZXMsIGZhaWx1cmUpO1xuICAgICAgICAgICAgICAgIH0sIGRlbGF5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIF9xdWV1ZVNlbmQoZW52ZWxvcGUpIHtcbiAgICAgICAgICAgIHZhciByZXF1ZXN0SWQgPSArK19yZXF1ZXN0SWRzO1xuICAgICAgICAgICAgdmFyIHJlcXVlc3QgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IHJlcXVlc3RJZCxcbiAgICAgICAgICAgICAgICBtZXRhQ29ubmVjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgZW52ZWxvcGU6IGVudmVsb3BlXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBDb25zaWRlciB0aGUgL21ldGEvY29ubmVjdCByZXF1ZXN0cyB3aGljaCBzaG91bGQgYWx3YXlzIGJlIHByZXNlbnQuXG4gICAgICAgICAgICBpZiAoX3JlcXVlc3RzLmxlbmd0aCA8IHRoaXMuZ2V0Q29uZmlndXJhdGlvbigpLm1heENvbm5lY3Rpb25zIC0gMSkge1xuICAgICAgICAgICAgICAgIF9yZXF1ZXN0cy5wdXNoKHJlcXVlc3QpO1xuICAgICAgICAgICAgICAgIF90cmFuc3BvcnRTZW5kLmNhbGwodGhpcywgZW52ZWxvcGUsIHJlcXVlc3QpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9kZWJ1ZygnVHJhbnNwb3J0JywgdGhpcy5nZXRUeXBlKCksICdxdWV1ZWluZyByZXF1ZXN0JywgcmVxdWVzdElkLCAnZW52ZWxvcGUnLCBlbnZlbG9wZSk7XG4gICAgICAgICAgICAgICAgX2VudmVsb3Blcy5wdXNoKFtlbnZlbG9wZSwgcmVxdWVzdF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gX21ldGFDb25uZWN0Q29tcGxldGUocmVxdWVzdCkge1xuICAgICAgICAgICAgdmFyIHJlcXVlc3RJZCA9IHJlcXVlc3QuaWQ7XG4gICAgICAgICAgICB0aGlzLl9kZWJ1ZygnVHJhbnNwb3J0JywgdGhpcy5nZXRUeXBlKCksICcvbWV0YS9jb25uZWN0IGNvbXBsZXRlLCByZXF1ZXN0JywgcmVxdWVzdElkKTtcbiAgICAgICAgICAgIGlmIChfbWV0YUNvbm5lY3RSZXF1ZXN0ICE9PSBudWxsICYmIF9tZXRhQ29ubmVjdFJlcXVlc3QuaWQgIT09IHJlcXVlc3RJZCkge1xuICAgICAgICAgICAgICAgIHRocm93ICcvbWV0YS9jb25uZWN0IHJlcXVlc3QgbWlzbWF0Y2gsIGNvbXBsZXRpbmcgcmVxdWVzdCAnICsgcmVxdWVzdElkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX21ldGFDb25uZWN0UmVxdWVzdCA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBfY29tcGxldGUocmVxdWVzdCwgc3VjY2Vzcykge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gVXRpbHMuaW5BcnJheShyZXF1ZXN0LCBfcmVxdWVzdHMpO1xuICAgICAgICAgICAgLy8gVGhlIGluZGV4IGNhbiBiZSBuZWdhdGl2ZSBpZiB0aGUgcmVxdWVzdCBoYXMgYmVlbiBhYm9ydGVkXG4gICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgIF9yZXF1ZXN0cy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoX2VudmVsb3Blcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVudmVsb3BlQW5kUmVxdWVzdCA9IF9lbnZlbG9wZXMuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICB2YXIgbmV4dEVudmVsb3BlID0gZW52ZWxvcGVBbmRSZXF1ZXN0WzBdO1xuICAgICAgICAgICAgICAgIHZhciBuZXh0UmVxdWVzdCA9IGVudmVsb3BlQW5kUmVxdWVzdFsxXTtcbiAgICAgICAgICAgICAgICB0aGlzLl9kZWJ1ZygnVHJhbnNwb3J0IGRlcXVldWVkIHJlcXVlc3QnLCBuZXh0UmVxdWVzdC5pZCk7XG4gICAgICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2V0Q29uZmlndXJhdGlvbigpLmF1dG9CYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NvYWxlc2NlRW52ZWxvcGVzLmNhbGwodGhpcywgbmV4dEVudmVsb3BlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBfcXVldWVTZW5kLmNhbGwodGhpcywgbmV4dEVudmVsb3BlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGVidWcoJ1RyYW5zcG9ydCBjb21wbGV0ZWQgcmVxdWVzdCcsIHJlcXVlc3QuaWQsIG5leHRFbnZlbG9wZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gS2VlcCB0aGUgc2VtYW50aWMgb2YgY2FsbGluZyByZXNwb25zZSBjYWxsYmFja3MgYXN5bmNocm9ub3VzbHkgYWZ0ZXIgdGhlIHJlcXVlc3RcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbXBsZXRlKG5leHRSZXF1ZXN0LCBmYWxzZSwgbmV4dFJlcXVlc3QubWV0YUNvbm5lY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZhaWx1cmUgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uOiAnUHJldmlvdXMgcmVxdWVzdCBmYWlsZWQnXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHhociA9IG5leHRSZXF1ZXN0LnhocjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhaWx1cmUuaHR0cENvZGUgPSBzZWxmLnhoclN0YXR1cyh4aHIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEVudmVsb3BlLm9uRmFpbHVyZSh4aHIsIG5leHRFbnZlbG9wZS5tZXNzYWdlcywgZmFpbHVyZSk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIF9zZWxmLmNvbXBsZXRlID0gZnVuY3Rpb24ocmVxdWVzdCwgc3VjY2VzcywgbWV0YUNvbm5lY3QpIHtcbiAgICAgICAgICAgIGlmIChtZXRhQ29ubmVjdCkge1xuICAgICAgICAgICAgICAgIF9tZXRhQ29ubmVjdENvbXBsZXRlLmNhbGwodGhpcywgcmVxdWVzdCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIF9jb21wbGV0ZS5jYWxsKHRoaXMsIHJlcXVlc3QsIHN1Y2Nlc3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQZXJmb3JtcyB0aGUgYWN0dWFsIHNlbmQgZGVwZW5kaW5nIG9uIHRoZSB0cmFuc3BvcnQgdHlwZSBkZXRhaWxzLlxuICAgICAgICAgKiBAcGFyYW0gZW52ZWxvcGUgdGhlIGVudmVsb3BlIHRvIHNlbmRcbiAgICAgICAgICogQHBhcmFtIHJlcXVlc3QgdGhlIHJlcXVlc3QgaW5mb3JtYXRpb25cbiAgICAgICAgICovXG4gICAgICAgIF9zZWxmLnRyYW5zcG9ydFNlbmQgPSBmdW5jdGlvbihlbnZlbG9wZSwgcmVxdWVzdCkge1xuICAgICAgICAgICAgdGhyb3cgJ0Fic3RyYWN0JztcbiAgICAgICAgfTtcblxuICAgICAgICBfc2VsZi50cmFuc3BvcnRTdWNjZXNzID0gZnVuY3Rpb24oZW52ZWxvcGUsIHJlcXVlc3QsIHJlc3BvbnNlcykge1xuICAgICAgICAgICAgaWYgKCFyZXF1ZXN0LmV4cGlyZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyVGltZW91dChyZXF1ZXN0LnRpbWVvdXQpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29tcGxldGUocmVxdWVzdCwgdHJ1ZSwgcmVxdWVzdC5tZXRhQ29ubmVjdCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlcyAmJiByZXNwb25zZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBlbnZlbG9wZS5vblN1Y2Nlc3MocmVzcG9uc2VzKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlbnZlbG9wZS5vbkZhaWx1cmUocmVxdWVzdC54aHIsIGVudmVsb3BlLm1lc3NhZ2VzLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBodHRwQ29kZTogMjA0XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBfc2VsZi50cmFuc3BvcnRGYWlsdXJlID0gZnVuY3Rpb24oZW52ZWxvcGUsIHJlcXVlc3QsIGZhaWx1cmUpIHtcbiAgICAgICAgICAgIGlmICghcmVxdWVzdC5leHBpcmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhclRpbWVvdXQocmVxdWVzdC50aW1lb3V0KTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBsZXRlKHJlcXVlc3QsIGZhbHNlLCByZXF1ZXN0Lm1ldGFDb25uZWN0KTtcbiAgICAgICAgICAgICAgICBlbnZlbG9wZS5vbkZhaWx1cmUocmVxdWVzdC54aHIsIGVudmVsb3BlLm1lc3NhZ2VzLCBmYWlsdXJlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBfbWV0YUNvbm5lY3RTZW5kKGVudmVsb3BlKSB7XG4gICAgICAgICAgICBpZiAoX21ldGFDb25uZWN0UmVxdWVzdCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRocm93ICdDb25jdXJyZW50IC9tZXRhL2Nvbm5lY3QgcmVxdWVzdHMgbm90IGFsbG93ZWQsIHJlcXVlc3QgaWQ9JyArIF9tZXRhQ29ubmVjdFJlcXVlc3QuaWQgKyAnIG5vdCB5ZXQgY29tcGxldGVkJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHJlcXVlc3RJZCA9ICsrX3JlcXVlc3RJZHM7XG4gICAgICAgICAgICB0aGlzLl9kZWJ1ZygnVHJhbnNwb3J0JywgdGhpcy5nZXRUeXBlKCksICcvbWV0YS9jb25uZWN0IHNlbmQsIHJlcXVlc3QnLCByZXF1ZXN0SWQsICdlbnZlbG9wZScsIGVudmVsb3BlKTtcbiAgICAgICAgICAgIHZhciByZXF1ZXN0ID0ge1xuICAgICAgICAgICAgICAgIGlkOiByZXF1ZXN0SWQsXG4gICAgICAgICAgICAgICAgbWV0YUNvbm5lY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgZW52ZWxvcGU6IGVudmVsb3BlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgX3RyYW5zcG9ydFNlbmQuY2FsbCh0aGlzLCBlbnZlbG9wZSwgcmVxdWVzdCk7XG4gICAgICAgICAgICBfbWV0YUNvbm5lY3RSZXF1ZXN0ID0gcmVxdWVzdDtcbiAgICAgICAgfVxuXG4gICAgICAgIF9zZWxmLnNlbmQgPSBmdW5jdGlvbihlbnZlbG9wZSwgbWV0YUNvbm5lY3QpIHtcbiAgICAgICAgICAgIGlmIChtZXRhQ29ubmVjdCkge1xuICAgICAgICAgICAgICAgIF9tZXRhQ29ubmVjdFNlbmQuY2FsbCh0aGlzLCBlbnZlbG9wZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIF9xdWV1ZVNlbmQuY2FsbCh0aGlzLCBlbnZlbG9wZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgX3NlbGYuYWJvcnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIF9zdXBlci5hYm9ydCgpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfcmVxdWVzdHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVxdWVzdCA9IF9yZXF1ZXN0c1tpXTtcbiAgICAgICAgICAgICAgICBpZiAocmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9kZWJ1ZygnQWJvcnRpbmcgcmVxdWVzdCcsIHJlcXVlc3QpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuYWJvcnRYSFIocmVxdWVzdC54aHIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zcG9ydEZhaWx1cmUocmVxdWVzdC5lbnZlbG9wZSwgcmVxdWVzdCwge3JlYXNvbjogJ2Fib3J0J30pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG1ldGFDb25uZWN0UmVxdWVzdCA9IF9tZXRhQ29ubmVjdFJlcXVlc3Q7XG4gICAgICAgICAgICBpZiAobWV0YUNvbm5lY3RSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZGVidWcoJ0Fib3J0aW5nIC9tZXRhL2Nvbm5lY3QgcmVxdWVzdCcsIG1ldGFDb25uZWN0UmVxdWVzdCk7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmFib3J0WEhSKG1ldGFDb25uZWN0UmVxdWVzdC54aHIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNwb3J0RmFpbHVyZShtZXRhQ29ubmVjdFJlcXVlc3QuZW52ZWxvcGUsIG1ldGFDb25uZWN0UmVxdWVzdCwge3JlYXNvbjogJ2Fib3J0J30pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVzZXQodHJ1ZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgX3NlbGYucmVzZXQgPSBmdW5jdGlvbihpbml0KSB7XG4gICAgICAgICAgICBfc3VwZXIucmVzZXQoaW5pdCk7XG4gICAgICAgICAgICBfbWV0YUNvbm5lY3RSZXF1ZXN0ID0gbnVsbDtcbiAgICAgICAgICAgIF9yZXF1ZXN0cyA9IFtdO1xuICAgICAgICAgICAgX2VudmVsb3BlcyA9IFtdO1xuICAgICAgICB9O1xuXG4gICAgICAgIF9zZWxmLmFib3J0WEhSID0gZnVuY3Rpb24oeGhyKSB7XG4gICAgICAgICAgICBpZiAoeGhyKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXRlID0geGhyLnJlYWR5U3RhdGU7XG4gICAgICAgICAgICAgICAgICAgIHhoci5hYm9ydCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RhdGUgIT09IHdpbmRvdy5YTUxIdHRwUmVxdWVzdC5VTlNFTlQ7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoeCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9kZWJ1Zyh4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgX3NlbGYueGhyU3RhdHVzID0gZnVuY3Rpb24oeGhyKSB7XG4gICAgICAgICAgICBpZiAoeGhyKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHhoci5zdGF0dXM7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoeCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9kZWJ1Zyh4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIF9zZWxmO1xuICAgIH07XG5cblxuICAgIHZhciBMb25nUG9sbGluZ1RyYW5zcG9ydCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgX3N1cGVyID0gbmV3IFJlcXVlc3RUcmFuc3BvcnQoKTtcbiAgICAgICAgdmFyIF9zZWxmID0gVHJhbnNwb3J0LmRlcml2ZShfc3VwZXIpO1xuICAgICAgICAvLyBCeSBkZWZhdWx0LCBzdXBwb3J0IGNyb3NzIGRvbWFpblxuICAgICAgICB2YXIgX3N1cHBvcnRzQ3Jvc3NEb21haW4gPSB0cnVlO1xuXG4gICAgICAgIF9zZWxmLmFjY2VwdCA9IGZ1bmN0aW9uKHZlcnNpb24sIGNyb3NzRG9tYWluLCB1cmwpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwcG9ydHNDcm9zc0RvbWFpbiB8fCAhY3Jvc3NEb21haW47XG4gICAgICAgIH07XG5cbiAgICAgICAgX3NlbGYubmV3WE1MSHR0cFJlcXVlc3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgd2luZG93LlhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gX2NvcHlDb250ZXh0KHhocikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBDb3B5IGV4dGVybmFsIGNvbnRleHQsIHRvIGJlIHVzZWQgaW4gb3RoZXIgZW52aXJvbm1lbnRzLlxuICAgICAgICAgICAgICAgIHhoci5jb250ZXh0ID0gX3NlbGYuY29udGV4dDtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAvLyBNYXkgaGFwcGVuIGlmIFhIUiBpcyB3cmFwcGVkIGJ5IE9iamVjdC5zZWFsKCksXG4gICAgICAgICAgICAgICAgLy8gT2JqZWN0LmZyZWV6ZSgpLCBvciBPYmplY3QucHJldmVudEV4dGVuc2lvbnMoKS5cbiAgICAgICAgICAgICAgICB0aGlzLl9kZWJ1ZygnQ291bGQgbm90IGNvcHkgdHJhbnNwb3J0IGNvbnRleHQgaW50byBYSFInLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIF9zZWxmLnhoclNlbmQgPSBmdW5jdGlvbihwYWNrZXQpIHtcbiAgICAgICAgICAgIHZhciB4aHIgPSBfc2VsZi5uZXdYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgX2NvcHlDb250ZXh0KHhocik7XG4gICAgICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgICAgICAgICAgIHhoci5vcGVuKCdQT1NUJywgcGFja2V0LnVybCwgcGFja2V0LnN5bmMgIT09IHRydWUpO1xuICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSBwYWNrZXQuaGVhZGVycztcbiAgICAgICAgICAgIGlmIChoZWFkZXJzKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaGVhZGVyTmFtZSBpbiBoZWFkZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoZWFkZXJzLmhhc093blByb3BlcnR5KGhlYWRlck5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihoZWFkZXJOYW1lLCBoZWFkZXJzW2hlYWRlck5hbWVdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04Jyk7XG4gICAgICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYgKHhoci5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICBwYWNrZXQub25TdWNjZXNzKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBhY2tldC5vbkVycm9yKHhoci5zdGF0dXNUZXh0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgeGhyLm9uYWJvcnQgPSB4aHIub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHBhY2tldC5vbkVycm9yKHhoci5zdGF0dXNUZXh0KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB4aHIuc2VuZChwYWNrZXQuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4geGhyO1xuICAgICAgICB9O1xuXG4gICAgICAgIF9zZWxmLnRyYW5zcG9ydFNlbmQgPSBmdW5jdGlvbihlbnZlbG9wZSwgcmVxdWVzdCkge1xuICAgICAgICAgICAgdGhpcy5fZGVidWcoJ1RyYW5zcG9ydCcsIHRoaXMuZ2V0VHlwZSgpLCAnc2VuZGluZyByZXF1ZXN0JywgcmVxdWVzdC5pZCwgJ2VudmVsb3BlJywgZW52ZWxvcGUpO1xuXG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciBzYW1lU3RhY2sgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJlcXVlc3QueGhyID0gdGhpcy54aHJTZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNwb3J0OiB0aGlzLFxuICAgICAgICAgICAgICAgICAgICB1cmw6IGVudmVsb3BlLnVybCxcbiAgICAgICAgICAgICAgICAgICAgc3luYzogZW52ZWxvcGUuc3luYyxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5nZXRDb25maWd1cmF0aW9uKCkucmVxdWVzdEhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGVudmVsb3BlLm1lc3NhZ2VzKSxcbiAgICAgICAgICAgICAgICAgICAgb25TdWNjZXNzOiBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fZGVidWcoJ1RyYW5zcG9ydCcsIHNlbGYuZ2V0VHlwZSgpLCAncmVjZWl2ZWQgcmVzcG9uc2UnLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3VjY2VzcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVjZWl2ZWQgPSBzZWxmLmNvbnZlcnRUb01lc3NhZ2VzKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVjZWl2ZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zdXBwb3J0c0Nyb3NzRG9tYWluID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudHJhbnNwb3J0RmFpbHVyZShlbnZlbG9wZSwgcmVxdWVzdCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHR0cENvZGU6IDIwNFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50cmFuc3BvcnRTdWNjZXNzKGVudmVsb3BlLCByZXF1ZXN0LCByZWNlaXZlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RlYnVnKHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc3VwcG9ydHNDcm9zc0RvbWFpbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmFpbHVyZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdGlvbjogeFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWlsdXJlLmh0dHBDb2RlID0gc2VsZi54aHJTdGF0dXMocmVxdWVzdC54aHIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRyYW5zcG9ydEZhaWx1cmUoZW52ZWxvcGUsIHJlcXVlc3QsIGZhaWx1cmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgb25FcnJvcjogZnVuY3Rpb24ocmVhc29uLCBleGNlcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RlYnVnKCdUcmFuc3BvcnQnLCBzZWxmLmdldFR5cGUoKSwgJ3JlY2VpdmVkIGVycm9yJywgcmVhc29uLCBleGNlcHRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3N1cHBvcnRzQ3Jvc3NEb21haW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmYWlsdXJlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbjogcmVhc29uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdGlvbjogZXhjZXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgZmFpbHVyZS5odHRwQ29kZSA9IHNlbGYueGhyU3RhdHVzKHJlcXVlc3QueGhyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzYW1lU3RhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBLZWVwIHRoZSBzZW1hbnRpYyBvZiBjYWxsaW5nIHJlc3BvbnNlIGNhbGxiYWNrcyBhc3luY2hyb25vdXNseSBhZnRlciB0aGUgcmVxdWVzdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50cmFuc3BvcnRGYWlsdXJlKGVudmVsb3BlLCByZXF1ZXN0LCBmYWlsdXJlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50cmFuc3BvcnRGYWlsdXJlKGVudmVsb3BlLCByZXF1ZXN0LCBmYWlsdXJlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHNhbWVTdGFjayA9IGZhbHNlO1xuICAgICAgICAgICAgfSBjYXRjaCAoeCkge1xuICAgICAgICAgICAgICAgIF9zdXBwb3J0c0Nyb3NzRG9tYWluID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgLy8gS2VlcCB0aGUgc2VtYW50aWMgb2YgY2FsbGluZyByZXNwb25zZSBjYWxsYmFja3MgYXN5bmNocm9ub3VzbHkgYWZ0ZXIgdGhlIHJlcXVlc3RcbiAgICAgICAgICAgICAgICB0aGlzLnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYudHJhbnNwb3J0RmFpbHVyZShlbnZlbG9wZSwgcmVxdWVzdCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0aW9uOiB4XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIF9zZWxmLnJlc2V0ID0gZnVuY3Rpb24oaW5pdCkge1xuICAgICAgICAgICAgX3N1cGVyLnJlc2V0KGluaXQpO1xuICAgICAgICAgICAgX3N1cHBvcnRzQ3Jvc3NEb21haW4gPSB0cnVlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBfc2VsZjtcbiAgICB9O1xuXG5cbiAgICB2YXIgQ2FsbGJhY2tQb2xsaW5nVHJhbnNwb3J0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBfc3VwZXIgPSBuZXcgUmVxdWVzdFRyYW5zcG9ydCgpO1xuICAgICAgICB2YXIgX3NlbGYgPSBUcmFuc3BvcnQuZGVyaXZlKF9zdXBlcik7XG4gICAgICAgIHZhciBqc29ucCA9IDA7XG5cbiAgICAgICAgX3NlbGYuYWNjZXB0ID0gZnVuY3Rpb24odmVyc2lvbiwgY3Jvc3NEb21haW4sIHVybCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH07XG5cbiAgICAgICAgX3NlbGYuanNvbnBTZW5kID0gZnVuY3Rpb24ocGFja2V0KSB7XG4gICAgICAgICAgICB2YXIgaGVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07XG4gICAgICAgICAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG5cbiAgICAgICAgICAgIHZhciBjYWxsYmFja05hbWUgPSAnX2NvbWV0ZF9qc29ucF8nICsganNvbnArKztcbiAgICAgICAgICAgIHdpbmRvd1tjYWxsYmFja05hbWVdID0gZnVuY3Rpb24ocmVzcG9uc2VUZXh0KSB7XG4gICAgICAgICAgICAgICAgaGVhZC5yZW1vdmVDaGlsZChzY3JpcHQpO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB3aW5kb3dbY2FsbGJhY2tOYW1lXTtcbiAgICAgICAgICAgICAgICBwYWNrZXQub25TdWNjZXNzKHJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgdXJsID0gcGFja2V0LnVybDtcbiAgICAgICAgICAgIHVybCArPSB1cmwuaW5kZXhPZignPycpIDwgMCA/ICc/JyA6ICcmJztcbiAgICAgICAgICAgIHVybCArPSAnanNvbnA9JyArIGNhbGxiYWNrTmFtZTtcbiAgICAgICAgICAgIHVybCArPSAnJm1lc3NhZ2U9JyArIGVuY29kZVVSSUNvbXBvbmVudChwYWNrZXQuYm9keSk7XG4gICAgICAgICAgICBzY3JpcHQuc3JjID0gdXJsO1xuICAgICAgICAgICAgc2NyaXB0LmFzeW5jID0gcGFja2V0LnN5bmMgIT09IHRydWU7XG4gICAgICAgICAgICBzY3JpcHQudHlwZSA9ICdhcHBsaWNhdGlvbi9qYXZhc2NyaXB0JztcbiAgICAgICAgICAgIHNjcmlwdC5vbmVycm9yID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIHBhY2tldC5vbkVycm9yKCdqc29ucCAnICsgZS50eXBlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBoZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gX2ZhaWxUcmFuc3BvcnRGbihlbnZlbG9wZSwgcmVxdWVzdCwgeCkge1xuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHNlbGYudHJhbnNwb3J0RmFpbHVyZShlbnZlbG9wZSwgcmVxdWVzdCwgJ2Vycm9yJywgeCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgX3NlbGYudHJhbnNwb3J0U2VuZCA9IGZ1bmN0aW9uKGVudmVsb3BlLCByZXF1ZXN0KSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgIC8vIE1pY3Jvc29mdCBJbnRlcm5ldCBFeHBsb3JlciBoYXMgYSAyMDgzIFVSTCBtYXggbGVuZ3RoXG4gICAgICAgICAgICAvLyBXZSBtdXN0IGVuc3VyZSB0aGF0IHdlIHN0YXkgd2l0aGluIHRoYXQgbGVuZ3RoXG4gICAgICAgICAgICB2YXIgc3RhcnQgPSAwO1xuICAgICAgICAgICAgdmFyIGxlbmd0aCA9IGVudmVsb3BlLm1lc3NhZ2VzLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBsZW5ndGhzID0gW107XG4gICAgICAgICAgICB3aGlsZSAobGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIC8vIEVuY29kZSB0aGUgbWVzc2FnZXMgYmVjYXVzZSBhbGwgYnJhY2tldHMsIHF1b3RlcywgY29tbWFzLCBjb2xvbnMsIGV0Y1xuICAgICAgICAgICAgICAgIC8vIHByZXNlbnQgaW4gdGhlIEpTT04gd2lsbCBiZSBVUkwgZW5jb2RlZCwgdGFraW5nIG1hbnkgbW9yZSBjaGFyYWN0ZXJzXG4gICAgICAgICAgICAgICAgdmFyIGpzb24gPSBKU09OLnN0cmluZ2lmeShlbnZlbG9wZS5tZXNzYWdlcy5zbGljZShzdGFydCwgc3RhcnQgKyBsZW5ndGgpKTtcbiAgICAgICAgICAgICAgICB2YXIgdXJsTGVuZ3RoID0gZW52ZWxvcGUudXJsLmxlbmd0aCArIGVuY29kZVVSSShqc29uKS5sZW5ndGg7XG5cbiAgICAgICAgICAgICAgICB2YXIgbWF4TGVuZ3RoID0gdGhpcy5nZXRDb25maWd1cmF0aW9uKCkubWF4VVJJTGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmICh1cmxMZW5ndGggPiBtYXhMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHggPSAnQmF5ZXV4IG1lc3NhZ2UgdG9vIGJpZyAoJyArIHVybExlbmd0aCArICcgYnl0ZXMsIG1heCBpcyAnICsgbWF4TGVuZ3RoICsgJykgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2ZvciB0cmFuc3BvcnQgJyArIHRoaXMuZ2V0VHlwZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gS2VlcCB0aGUgc2VtYW50aWMgb2YgY2FsbGluZyByZXNwb25zZSBjYWxsYmFja3MgYXN5bmNocm9ub3VzbHkgYWZ0ZXIgdGhlIHJlcXVlc3RcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VGltZW91dChfZmFpbFRyYW5zcG9ydEZuLmNhbGwodGhpcywgZW52ZWxvcGUsIHJlcXVlc3QsIHgpLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC0tbGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsZW5ndGhzLnB1c2gobGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBzdGFydCArPSBsZW5ndGg7XG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gZW52ZWxvcGUubWVzc2FnZXMubGVuZ3RoIC0gc3RhcnQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEhlcmUgd2UgYXJlIHN1cmUgdGhhdCB0aGUgbWVzc2FnZXMgY2FuIGJlIHNlbnQgd2l0aGluIHRoZSBVUkwgbGltaXRcblxuICAgICAgICAgICAgdmFyIGVudmVsb3BlVG9TZW5kID0gZW52ZWxvcGU7XG4gICAgICAgICAgICBpZiAobGVuZ3Rocy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJlZ2luID0gMDtcbiAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3Roc1swXTtcbiAgICAgICAgICAgICAgICB0aGlzLl9kZWJ1ZygnVHJhbnNwb3J0JywgdGhpcy5nZXRUeXBlKCksICdzcGxpdCcsIGVudmVsb3BlLm1lc3NhZ2VzLmxlbmd0aCwgJ21lc3NhZ2VzIGludG8nLCBsZW5ndGhzLmpvaW4oJyArICcpKTtcbiAgICAgICAgICAgICAgICBlbnZlbG9wZVRvU2VuZCA9IHRoaXMuX21peGluKGZhbHNlLCB7fSwgZW52ZWxvcGUpO1xuICAgICAgICAgICAgICAgIGVudmVsb3BlVG9TZW5kLm1lc3NhZ2VzID0gZW52ZWxvcGUubWVzc2FnZXMuc2xpY2UoYmVnaW4sIGVuZCk7XG4gICAgICAgICAgICAgICAgZW52ZWxvcGVUb1NlbmQub25TdWNjZXNzID0gZW52ZWxvcGUub25TdWNjZXNzO1xuICAgICAgICAgICAgICAgIGVudmVsb3BlVG9TZW5kLm9uRmFpbHVyZSA9IGVudmVsb3BlLm9uRmFpbHVyZTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgbGVuZ3Rocy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV4dEVudmVsb3BlID0gdGhpcy5fbWl4aW4oZmFsc2UsIHt9LCBlbnZlbG9wZSk7XG4gICAgICAgICAgICAgICAgICAgIGJlZ2luID0gZW5kO1xuICAgICAgICAgICAgICAgICAgICBlbmQgKz0gbGVuZ3Roc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgbmV4dEVudmVsb3BlLm1lc3NhZ2VzID0gZW52ZWxvcGUubWVzc2FnZXMuc2xpY2UoYmVnaW4sIGVuZCk7XG4gICAgICAgICAgICAgICAgICAgIG5leHRFbnZlbG9wZS5vblN1Y2Nlc3MgPSBlbnZlbG9wZS5vblN1Y2Nlc3M7XG4gICAgICAgICAgICAgICAgICAgIG5leHRFbnZlbG9wZS5vbkZhaWx1cmUgPSBlbnZlbG9wZS5vbkZhaWx1cmU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZChuZXh0RW52ZWxvcGUsIHJlcXVlc3QubWV0YUNvbm5lY3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5fZGVidWcoJ1RyYW5zcG9ydCcsIHRoaXMuZ2V0VHlwZSgpLCAnc2VuZGluZyByZXF1ZXN0JywgcmVxdWVzdC5pZCwgJ2VudmVsb3BlJywgZW52ZWxvcGVUb1NlbmQpO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciBzYW1lU3RhY2sgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuanNvbnBTZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNwb3J0OiB0aGlzLFxuICAgICAgICAgICAgICAgICAgICB1cmw6IGVudmVsb3BlVG9TZW5kLnVybCxcbiAgICAgICAgICAgICAgICAgICAgc3luYzogZW52ZWxvcGVUb1NlbmQuc3luYyxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5nZXRDb25maWd1cmF0aW9uKCkucmVxdWVzdEhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGVudmVsb3BlVG9TZW5kLm1lc3NhZ2VzKSxcbiAgICAgICAgICAgICAgICAgICAgb25TdWNjZXNzOiBmdW5jdGlvbihyZXNwb25zZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWNjZXNzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWNlaXZlZCA9IHNlbGYuY29udmVydFRvTWVzc2FnZXMocmVzcG9uc2VzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVjZWl2ZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudHJhbnNwb3J0RmFpbHVyZShlbnZlbG9wZVRvU2VuZCwgcmVxdWVzdCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHR0cENvZGU6IDIwNFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50cmFuc3BvcnRTdWNjZXNzKGVudmVsb3BlVG9TZW5kLCByZXF1ZXN0LCByZWNlaXZlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RlYnVnKHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRyYW5zcG9ydEZhaWx1cmUoZW52ZWxvcGVUb1NlbmQsIHJlcXVlc3QsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdGlvbjogeFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG9uRXJyb3I6IGZ1bmN0aW9uKHJlYXNvbiwgZXhjZXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmFpbHVyZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb246IHJlYXNvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGNlcHRpb246IGV4Y2VwdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzYW1lU3RhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBLZWVwIHRoZSBzZW1hbnRpYyBvZiBjYWxsaW5nIHJlc3BvbnNlIGNhbGxiYWNrcyBhc3luY2hyb25vdXNseSBhZnRlciB0aGUgcmVxdWVzdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50cmFuc3BvcnRGYWlsdXJlKGVudmVsb3BlVG9TZW5kLCByZXF1ZXN0LCBmYWlsdXJlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50cmFuc3BvcnRGYWlsdXJlKGVudmVsb3BlVG9TZW5kLCByZXF1ZXN0LCBmYWlsdXJlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHNhbWVTdGFjayA9IGZhbHNlO1xuICAgICAgICAgICAgfSBjYXRjaCAoeHgpIHtcbiAgICAgICAgICAgICAgICAvLyBLZWVwIHRoZSBzZW1hbnRpYyBvZiBjYWxsaW5nIHJlc3BvbnNlIGNhbGxiYWNrcyBhc3luY2hyb25vdXNseSBhZnRlciB0aGUgcmVxdWVzdFxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi50cmFuc3BvcnRGYWlsdXJlKGVudmVsb3BlVG9TZW5kLCByZXF1ZXN0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleGNlcHRpb246IHh4XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBfc2VsZjtcbiAgICB9O1xuXG5cbiAgICB2YXIgV2ViU29ja2V0VHJhbnNwb3J0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBfc3VwZXIgPSBuZXcgVHJhbnNwb3J0KCk7XG4gICAgICAgIHZhciBfc2VsZiA9IFRyYW5zcG9ydC5kZXJpdmUoX3N1cGVyKTtcbiAgICAgICAgdmFyIF9jb21ldGQ7XG4gICAgICAgIC8vIEJ5IGRlZmF1bHQgV2ViU29ja2V0IGlzIHN1cHBvcnRlZFxuICAgICAgICB2YXIgX3dlYlNvY2tldFN1cHBvcnRlZCA9IHRydWU7XG4gICAgICAgIC8vIFdoZXRoZXIgd2Ugd2VyZSBhYmxlIHRvIGVzdGFibGlzaCBhIFdlYlNvY2tldCBjb25uZWN0aW9uXG4gICAgICAgIHZhciBfd2ViU29ja2V0Q29ubmVjdGVkID0gZmFsc2U7XG4gICAgICAgIHZhciBfc3RpY2t5UmVjb25uZWN0ID0gdHJ1ZTtcbiAgICAgICAgLy8gVGhlIGNvbnRleHQgY29udGFpbnMgdGhlIGVudmVsb3BlcyB0aGF0IGhhdmUgYmVlbiBzZW50XG4gICAgICAgIC8vIGFuZCB0aGUgdGltZW91dHMgZm9yIHRoZSBtZXNzYWdlcyB0aGF0IGhhdmUgYmVlbiBzZW50LlxuICAgICAgICB2YXIgX2NvbnRleHQgPSBudWxsO1xuICAgICAgICB2YXIgX2Nvbm5lY3RpbmcgPSBudWxsO1xuICAgICAgICB2YXIgX2Nvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgICB2YXIgX3N1Y2Nlc3NDYWxsYmFjayA9IG51bGw7XG5cbiAgICAgICAgX3NlbGYucmVzZXQgPSBmdW5jdGlvbihpbml0KSB7XG4gICAgICAgICAgICBfc3VwZXIucmVzZXQoaW5pdCk7XG4gICAgICAgICAgICBfd2ViU29ja2V0U3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChpbml0KSB7XG4gICAgICAgICAgICAgICAgX3dlYlNvY2tldENvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3N0aWNreVJlY29ubmVjdCA9IHRydWU7XG4gICAgICAgICAgICBfY29udGV4dCA9IG51bGw7XG4gICAgICAgICAgICBfY29ubmVjdGluZyA9IG51bGw7XG4gICAgICAgICAgICBfY29ubmVjdGVkID0gZmFsc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gX2ZvcmNlQ2xvc2UoY29udGV4dCwgZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChjb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy53ZWJTb2NrZXRDbG9zZShjb250ZXh0LCBldmVudC5jb2RlLCBldmVudC5yZWFzb24pO1xuICAgICAgICAgICAgICAgIC8vIEZvcmNlIGltbWVkaWF0ZSBmYWlsdXJlIG9mIHBlbmRpbmcgbWVzc2FnZXMgdG8gdHJpZ2dlciByZWNvbm5lY3QuXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBuZWVkZWQgYmVjYXVzZSB0aGUgc2VydmVyIG1heSBub3QgcmVwbHkgdG8gb3VyIGNsb3NlKClcbiAgICAgICAgICAgICAgICAvLyBhbmQgdGhlcmVmb3JlIHRoZSBvbmNsb3NlIGZ1bmN0aW9uIGlzIG5ldmVyIGNhbGxlZC5cbiAgICAgICAgICAgICAgICB0aGlzLm9uQ2xvc2UoY29udGV4dCwgZXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gX3NhbWVDb250ZXh0KGNvbnRleHQpIHtcbiAgICAgICAgICAgIHJldHVybiBjb250ZXh0ID09PSBfY29ubmVjdGluZyB8fCBjb250ZXh0ID09PSBfY29udGV4dDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIF9zdG9yZUVudmVsb3BlKGNvbnRleHQsIGVudmVsb3BlLCBtZXRhQ29ubmVjdCkge1xuICAgICAgICAgICAgdmFyIG1lc3NhZ2VJZHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZW52ZWxvcGUubWVzc2FnZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IGVudmVsb3BlLm1lc3NhZ2VzW2ldO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VJZHMucHVzaChtZXNzYWdlLmlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250ZXh0LmVudmVsb3Blc1ttZXNzYWdlSWRzLmpvaW4oJywnKV0gPSBbZW52ZWxvcGUsIG1ldGFDb25uZWN0XTtcbiAgICAgICAgICAgIHRoaXMuX2RlYnVnKCdUcmFuc3BvcnQnLCB0aGlzLmdldFR5cGUoKSwgJ3N0b3JlZCBlbnZlbG9wZSwgZW52ZWxvcGVzJywgY29udGV4dC5lbnZlbG9wZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gX3dlYnNvY2tldENvbm5lY3QoY29udGV4dCkge1xuICAgICAgICAgICAgLy8gV2UgbWF5IGhhdmUgbXVsdGlwbGUgYXR0ZW1wdHMgdG8gb3BlbiBhIFdlYlNvY2tldFxuICAgICAgICAgICAgLy8gY29ubmVjdGlvbiwgZm9yIGV4YW1wbGUgYSAvbWV0YS9jb25uZWN0IHJlcXVlc3QgdGhhdFxuICAgICAgICAgICAgLy8gbWF5IHRha2UgdGltZSwgYWxvbmcgd2l0aCBhIHVzZXItdHJpZ2dlcmVkIHB1Ymxpc2guXG4gICAgICAgICAgICAvLyBFYXJseSByZXR1cm4gaWYgd2UgYXJlIGFscmVhZHkgY29ubmVjdGluZy5cbiAgICAgICAgICAgIGlmIChfY29ubmVjdGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gTWFuZ2xlIHRoZSBVUkwsIGNoYW5naW5nIHRoZSBzY2hlbWUgZnJvbSAnaHR0cCcgdG8gJ3dzJy5cbiAgICAgICAgICAgIHZhciB1cmwgPSBfY29tZXRkLmdldFVSTCgpLnJlcGxhY2UoL15odHRwLywgJ3dzJyk7XG4gICAgICAgICAgICB0aGlzLl9kZWJ1ZygnVHJhbnNwb3J0JywgdGhpcy5nZXRUeXBlKCksICdjb25uZWN0aW5nIHRvIFVSTCcsIHVybCk7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3RvY29sID0gX2NvbWV0ZC5nZXRDb25maWd1cmF0aW9uKCkucHJvdG9jb2w7XG4gICAgICAgICAgICAgICAgY29udGV4dC53ZWJTb2NrZXQgPSBwcm90b2NvbCA/IG5ldyB3aW5kb3cuV2ViU29ja2V0KHVybCwgcHJvdG9jb2wpIDogbmV3IHdpbmRvdy5XZWJTb2NrZXQodXJsKTtcbiAgICAgICAgICAgICAgICBfY29ubmVjdGluZyA9IGNvbnRleHQ7XG4gICAgICAgICAgICB9IGNhdGNoICh4KSB7XG4gICAgICAgICAgICAgICAgX3dlYlNvY2tldFN1cHBvcnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuX2RlYnVnKCdFeGNlcHRpb24gd2hpbGUgY3JlYXRpbmcgV2ViU29ja2V0IG9iamVjdCcsIHgpO1xuICAgICAgICAgICAgICAgIHRocm93IHg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEJ5IGRlZmF1bHQgdXNlIHN0aWNreSByZWNvbm5lY3RzLlxuICAgICAgICAgICAgX3N0aWNreVJlY29ubmVjdCA9IF9jb21ldGQuZ2V0Q29uZmlndXJhdGlvbigpLnN0aWNreVJlY29ubmVjdCAhPT0gZmFsc2U7XG5cbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIHZhciBjb25uZWN0VGltZW91dCA9IF9jb21ldGQuZ2V0Q29uZmlndXJhdGlvbigpLmNvbm5lY3RUaW1lb3V0O1xuICAgICAgICAgICAgaWYgKGNvbm5lY3RUaW1lb3V0ID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuY29ubmVjdFRpbWVyID0gdGhpcy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBfY29tZXRkLl9kZWJ1ZygnVHJhbnNwb3J0Jywgc2VsZi5nZXRUeXBlKCksICd0aW1lZCBvdXQgd2hpbGUgY29ubmVjdGluZyB0byBVUkwnLCB1cmwsICc6JywgY29ubmVjdFRpbWVvdXQsICdtcycpO1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgY29ubmVjdGlvbiB3YXMgbm90IG9wZW5lZCwgY2xvc2UgYW55d2F5LlxuICAgICAgICAgICAgICAgICAgICBfZm9yY2VDbG9zZS5jYWxsKHNlbGYsIGNvbnRleHQsIHtjb2RlOiAxMDAwLCByZWFzb246ICdDb25uZWN0IFRpbWVvdXQnfSk7XG4gICAgICAgICAgICAgICAgfSwgY29ubmVjdFRpbWVvdXQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgb25vcGVuID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX2NvbWV0ZC5fZGVidWcoJ1dlYlNvY2tldCBvbm9wZW4nLCBjb250ZXh0KTtcbiAgICAgICAgICAgICAgICBpZiAoY29udGV4dC5jb25uZWN0VGltZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jbGVhclRpbWVvdXQoY29udGV4dC5jb25uZWN0VGltZXIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChfc2FtZUNvbnRleHQoY29udGV4dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgX2Nvbm5lY3RpbmcgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBfY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgICAgICAgICAgICAgIF93ZWJTb2NrZXRDb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLm9uT3Blbihjb250ZXh0KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIGEgdmFsaWQgY29ubmVjdGlvbiBhbHJlYWR5LCBjbG9zZSB0aGlzIG9uZS5cbiAgICAgICAgICAgICAgICAgICAgX2NvbWV0ZC5fd2FybignQ2xvc2luZyBleHRyYSBXZWJTb2NrZXQgY29ubmVjdGlvbicsIHRoaXMsICdhY3RpdmUgY29ubmVjdGlvbicsIF9jb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgX2ZvcmNlQ2xvc2UuY2FsbChzZWxmLCBjb250ZXh0LCB7Y29kZTogMTAwMCwgcmVhc29uOiAnRXh0cmEgQ29ubmVjdGlvbid9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBUaGlzIGNhbGxiYWNrIGlzIGludm9rZWQgd2hlbiB0aGUgc2VydmVyIHNlbmRzIHRoZSBjbG9zZSBmcmFtZS5cbiAgICAgICAgICAgIC8vIFRoZSBjbG9zZSBmcmFtZSBmb3IgYSBjb25uZWN0aW9uIG1heSBhcnJpdmUgKmFmdGVyKiBhbm90aGVyXG4gICAgICAgICAgICAvLyBjb25uZWN0aW9uIGhhcyBiZWVuIG9wZW5lZCwgc28gd2UgbXVzdCBtYWtlIHN1cmUgdGhhdCBhY3Rpb25zXG4gICAgICAgICAgICAvLyBhcmUgcGVyZm9ybWVkIG9ubHkgaWYgaXQncyB0aGUgc2FtZSBjb25uZWN0aW9uLlxuICAgICAgICAgICAgdmFyIG9uY2xvc2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgIGV2ZW50ID0gZXZlbnQgfHwge2NvZGU6IDEwMDB9O1xuICAgICAgICAgICAgICAgIF9jb21ldGQuX2RlYnVnKCdXZWJTb2NrZXQgb25jbG9zZScsIGNvbnRleHQsIGV2ZW50LCAnY29ubmVjdGluZycsIF9jb25uZWN0aW5nLCAnY3VycmVudCcsIF9jb250ZXh0KTtcblxuICAgICAgICAgICAgICAgIGlmIChjb250ZXh0LmNvbm5lY3RUaW1lcikge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmNsZWFyVGltZW91dChjb250ZXh0LmNvbm5lY3RUaW1lcik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgc2VsZi5vbkNsb3NlKGNvbnRleHQsIGV2ZW50KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBvbm1lc3NhZ2UgPSBmdW5jdGlvbih3c01lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBfY29tZXRkLl9kZWJ1ZygnV2ViU29ja2V0IG9ubWVzc2FnZScsIHdzTWVzc2FnZSwgY29udGV4dCk7XG4gICAgICAgICAgICAgICAgc2VsZi5vbk1lc3NhZ2UoY29udGV4dCwgd3NNZXNzYWdlKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnRleHQud2ViU29ja2V0Lm9ub3BlbiA9IG9ub3BlbjtcbiAgICAgICAgICAgIGNvbnRleHQud2ViU29ja2V0Lm9uY2xvc2UgPSBvbmNsb3NlO1xuICAgICAgICAgICAgY29udGV4dC53ZWJTb2NrZXQub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIC8vIENsaWVudHMgc2hvdWxkIGNhbGwgb25jbG9zZSgpLCBidXQgaWYgdGhleSBkbyBub3Qgd2UgZG8gaXQgaGVyZSBmb3Igc2FmZXR5LlxuICAgICAgICAgICAgICAgIG9uY2xvc2Uoe2NvZGU6IDEwMDAsIHJlYXNvbjogJ0Vycm9yJ30pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnRleHQud2ViU29ja2V0Lm9ubWVzc2FnZSA9IG9ubWVzc2FnZTtcblxuICAgICAgICAgICAgdGhpcy5fZGVidWcoJ1RyYW5zcG9ydCcsIHRoaXMuZ2V0VHlwZSgpLCAnY29uZmlndXJlZCBjYWxsYmFja3Mgb24nLCBjb250ZXh0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIF93ZWJTb2NrZXRTZW5kKGNvbnRleHQsIGVudmVsb3BlLCBtZXRhQ29ubmVjdCkge1xuICAgICAgICAgICAgdmFyIGpzb24gPSBKU09OLnN0cmluZ2lmeShlbnZlbG9wZS5tZXNzYWdlcyk7XG4gICAgICAgICAgICBjb250ZXh0LndlYlNvY2tldC5zZW5kKGpzb24pO1xuICAgICAgICAgICAgdGhpcy5fZGVidWcoJ1RyYW5zcG9ydCcsIHRoaXMuZ2V0VHlwZSgpLCAnc2VudCcsIGVudmVsb3BlLCAnL21ldGEvY29ubmVjdCA9JywgbWV0YUNvbm5lY3QpO1xuXG4gICAgICAgICAgICAvLyBNYW5hZ2UgdGhlIHRpbWVvdXQgd2FpdGluZyBmb3IgdGhlIHJlc3BvbnNlLlxuICAgICAgICAgICAgdmFyIG1heERlbGF5ID0gdGhpcy5nZXRDb25maWd1cmF0aW9uKCkubWF4TmV0d29ya0RlbGF5O1xuICAgICAgICAgICAgdmFyIGRlbGF5ID0gbWF4RGVsYXk7XG4gICAgICAgICAgICBpZiAobWV0YUNvbm5lY3QpIHtcbiAgICAgICAgICAgICAgICBkZWxheSArPSB0aGlzLmdldEFkdmljZSgpLnRpbWVvdXQ7XG4gICAgICAgICAgICAgICAgX2Nvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIHZhciBtZXNzYWdlSWRzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVudmVsb3BlLm1lc3NhZ2VzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IGVudmVsb3BlLm1lc3NhZ2VzW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUlkcy5wdXNoKG1lc3NhZ2UuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC50aW1lb3V0c1ttZXNzYWdlLmlkXSA9IHNlbGYuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29tZXRkLl9kZWJ1ZygnVHJhbnNwb3J0Jywgc2VsZi5nZXRUeXBlKCksICd0aW1pbmcgb3V0IG1lc3NhZ2UnLCBtZXNzYWdlLmlkLCAnYWZ0ZXInLCBkZWxheSwgJ29uJywgY29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2ZvcmNlQ2xvc2UuY2FsbChzZWxmLCBjb250ZXh0LCB7Y29kZTogMTAwMCwgcmVhc29uOiAnTWVzc2FnZSBUaW1lb3V0J30pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgZGVsYXkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5fZGVidWcoJ1RyYW5zcG9ydCcsIHRoaXMuZ2V0VHlwZSgpLCAnd2FpdGluZyBhdCBtb3N0JywgZGVsYXksICdtcyBmb3IgbWVzc2FnZXMnLCBtZXNzYWdlSWRzLCAnbWF4TmV0d29ya0RlbGF5JywgbWF4RGVsYXksICcsIHRpbWVvdXRzOicsIGNvbnRleHQudGltZW91dHMpO1xuICAgICAgICB9XG5cbiAgICAgICAgX3NlbGYuX25vdGlmeVN1Y2Nlc3MgPSBmdW5jdGlvbihmbiwgbWVzc2FnZXMpIHtcbiAgICAgICAgICAgIGZuLmNhbGwodGhpcywgbWVzc2FnZXMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIF9zZWxmLl9ub3RpZnlGYWlsdXJlID0gZnVuY3Rpb24oZm4sIGNvbnRleHQsIG1lc3NhZ2VzLCBmYWlsdXJlKSB7XG4gICAgICAgICAgICBmbi5jYWxsKHRoaXMsIGNvbnRleHQsIG1lc3NhZ2VzLCBmYWlsdXJlKTtcbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBfc2VuZChjb250ZXh0LCBlbnZlbG9wZSwgbWV0YUNvbm5lY3QpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRleHQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dCA9IF9jb25uZWN0aW5nIHx8IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudmVsb3Blczoge30sXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0czoge31cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgX3N0b3JlRW52ZWxvcGUuY2FsbCh0aGlzLCBjb250ZXh0LCBlbnZlbG9wZSwgbWV0YUNvbm5lY3QpO1xuICAgICAgICAgICAgICAgICAgICBfd2Vic29ja2V0Q29ubmVjdC5jYWxsKHRoaXMsIGNvbnRleHQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIF9zdG9yZUVudmVsb3BlLmNhbGwodGhpcywgY29udGV4dCwgZW52ZWxvcGUsIG1ldGFDb25uZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgX3dlYlNvY2tldFNlbmQuY2FsbCh0aGlzLCBjb250ZXh0LCBlbnZlbG9wZSwgbWV0YUNvbm5lY3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKHgpIHtcbiAgICAgICAgICAgICAgICAvLyBLZWVwIHRoZSBzZW1hbnRpYyBvZiBjYWxsaW5nIHJlc3BvbnNlIGNhbGxiYWNrcyBhc3luY2hyb25vdXNseSBhZnRlciB0aGUgcmVxdWVzdC5cbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBfZm9yY2VDbG9zZS5jYWxsKHNlbGYsIGNvbnRleHQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IDEwMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFzb246ICdFeGNlcHRpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0aW9uOiB4XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgX3NlbGYub25PcGVuID0gZnVuY3Rpb24oY29udGV4dCkge1xuICAgICAgICAgICAgdmFyIGVudmVsb3BlcyA9IGNvbnRleHQuZW52ZWxvcGVzO1xuICAgICAgICAgICAgdGhpcy5fZGVidWcoJ1RyYW5zcG9ydCcsIHRoaXMuZ2V0VHlwZSgpLCAnb3BlbmVkJywgY29udGV4dCwgJ3BlbmRpbmcgbWVzc2FnZXMnLCBlbnZlbG9wZXMpO1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGVudmVsb3Blcykge1xuICAgICAgICAgICAgICAgIGlmIChlbnZlbG9wZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGVudmVsb3Blc1trZXldO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW52ZWxvcGUgPSBlbGVtZW50WzBdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWV0YUNvbm5lY3QgPSBlbGVtZW50WzFdO1xuICAgICAgICAgICAgICAgICAgICAvLyBTdG9yZSB0aGUgc3VjY2VzcyBjYWxsYmFjaywgd2hpY2ggaXMgaW5kZXBlbmRlbnQgZnJvbSB0aGUgZW52ZWxvcGUsXG4gICAgICAgICAgICAgICAgICAgIC8vIHNvIHRoYXQgaXQgY2FuIGJlIHVzZWQgdG8gbm90aWZ5IGFycml2YWwgb2YgbWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgICAgIF9zdWNjZXNzQ2FsbGJhY2sgPSBlbnZlbG9wZS5vblN1Y2Nlc3M7XG4gICAgICAgICAgICAgICAgICAgIF93ZWJTb2NrZXRTZW5kLmNhbGwodGhpcywgY29udGV4dCwgZW52ZWxvcGUsIG1ldGFDb25uZWN0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgX3NlbGYub25NZXNzYWdlID0gZnVuY3Rpb24oY29udGV4dCwgd3NNZXNzYWdlKSB7XG4gICAgICAgICAgICB0aGlzLl9kZWJ1ZygnVHJhbnNwb3J0JywgdGhpcy5nZXRUeXBlKCksICdyZWNlaXZlZCB3ZWJzb2NrZXQgbWVzc2FnZScsIHdzTWVzc2FnZSwgY29udGV4dCk7XG5cbiAgICAgICAgICAgIHZhciBjbG9zZSA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIG1lc3NhZ2VzID0gdGhpcy5jb252ZXJ0VG9NZXNzYWdlcyh3c01lc3NhZ2UuZGF0YSk7XG4gICAgICAgICAgICB2YXIgbWVzc2FnZUlkcyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gbWVzc2FnZXNbaV07XG5cbiAgICAgICAgICAgICAgICAvLyBEZXRlY3QgaWYgdGhlIG1lc3NhZ2UgaXMgYSByZXNwb25zZSB0byBhIHJlcXVlc3Qgd2UgbWFkZS5cbiAgICAgICAgICAgICAgICAvLyBJZiBpdCdzIGEgbWV0YSBtZXNzYWdlLCBmb3Igc3VyZSBpdCdzIGEgcmVzcG9uc2U7IG90aGVyd2lzZSBpdCdzXG4gICAgICAgICAgICAgICAgLy8gYSBwdWJsaXNoIG1lc3NhZ2UgYW5kIHB1Ymxpc2ggcmVzcG9uc2VzIGRvbid0IGhhdmUgdGhlIGRhdGEgZmllbGQuXG4gICAgICAgICAgICAgICAgaWYgKC9eXFwvbWV0YVxcLy8udGVzdChtZXNzYWdlLmNoYW5uZWwpIHx8IG1lc3NhZ2UuZGF0YSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlSWRzLnB1c2gobWVzc2FnZS5pZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0aW1lb3V0ID0gY29udGV4dC50aW1lb3V0c1ttZXNzYWdlLmlkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNvbnRleHQudGltZW91dHNbbWVzc2FnZS5pZF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGVidWcoJ1RyYW5zcG9ydCcsIHRoaXMuZ2V0VHlwZSgpLCAncmVtb3ZlZCB0aW1lb3V0IGZvciBtZXNzYWdlJywgbWVzc2FnZS5pZCwgJywgdGltZW91dHMnLCBjb250ZXh0LnRpbWVvdXRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICgnL21ldGEvY29ubmVjdCcgPT09IG1lc3NhZ2UuY2hhbm5lbCkge1xuICAgICAgICAgICAgICAgICAgICBfY29ubmVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgnL21ldGEvZGlzY29ubmVjdCcgPT09IG1lc3NhZ2UuY2hhbm5lbCAmJiAhX2Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICBjbG9zZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhlIGVudmVsb3BlIGNvcnJlc3BvbmRpbmcgdG8gdGhlIG1lc3NhZ2VzLlxuICAgICAgICAgICAgdmFyIHJlbW92ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBlbnZlbG9wZXMgPSBjb250ZXh0LmVudmVsb3BlcztcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbWVzc2FnZUlkcy5sZW5ndGg7ICsraikge1xuICAgICAgICAgICAgICAgIHZhciBpZCA9IG1lc3NhZ2VJZHNbal07XG4gICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGVudmVsb3Blcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW52ZWxvcGVzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHMgPSBrZXkuc3BsaXQoJywnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IFV0aWxzLmluQXJyYXkoaWQsIGlkcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbnZlbG9wZSA9IGVudmVsb3Blc1trZXldWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRhQ29ubmVjdCA9IGVudmVsb3Blc1trZXldWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBlbnZlbG9wZXNba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW52ZWxvcGVzW2lkcy5qb2luKCcsJyldID0gW2VudmVsb3BlLCBtZXRhQ29ubmVjdF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlbW92ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9kZWJ1ZygnVHJhbnNwb3J0JywgdGhpcy5nZXRUeXBlKCksICdyZW1vdmVkIGVudmVsb3BlLCBlbnZlbG9wZXMnLCBlbnZlbG9wZXMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9ub3RpZnlTdWNjZXNzKF9zdWNjZXNzQ2FsbGJhY2ssIG1lc3NhZ2VzKTtcblxuICAgICAgICAgICAgaWYgKGNsb3NlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy53ZWJTb2NrZXRDbG9zZShjb250ZXh0LCAxMDAwLCAnRGlzY29ubmVjdCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIF9zZWxmLm9uQ2xvc2UgPSBmdW5jdGlvbihjb250ZXh0LCBldmVudCkge1xuICAgICAgICAgICAgdGhpcy5fZGVidWcoJ1RyYW5zcG9ydCcsIHRoaXMuZ2V0VHlwZSgpLCAnY2xvc2VkJywgY29udGV4dCwgZXZlbnQpO1xuXG4gICAgICAgICAgICBpZiAoX3NhbWVDb250ZXh0KGNvbnRleHQpKSB7XG4gICAgICAgICAgICAgICAgLy8gUmVtZW1iZXIgaWYgd2Ugd2VyZSBhYmxlIHRvIGNvbm5lY3QuXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBjbG9zZSBldmVudCBjb3VsZCBiZSBkdWUgdG8gc2VydmVyIHNodXRkb3duLFxuICAgICAgICAgICAgICAgIC8vIGFuZCBpZiBpdCByZXN0YXJ0cyB3ZSB3YW50IHRvIHRyeSB3ZWJzb2NrZXQgYWdhaW4uXG4gICAgICAgICAgICAgICAgX3dlYlNvY2tldFN1cHBvcnRlZCA9IF9zdGlja3lSZWNvbm5lY3QgJiYgX3dlYlNvY2tldENvbm5lY3RlZDtcbiAgICAgICAgICAgICAgICBfY29ubmVjdGluZyA9IG51bGw7XG4gICAgICAgICAgICAgICAgX2NvbnRleHQgPSBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgdGltZW91dHMgPSBjb250ZXh0LnRpbWVvdXRzO1xuICAgICAgICAgICAgY29udGV4dC50aW1lb3V0cyA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgaWQgaW4gdGltZW91dHMpIHtcbiAgICAgICAgICAgICAgICBpZiAodGltZW91dHMuaGFzT3duUHJvcGVydHkoaWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJUaW1lb3V0KHRpbWVvdXRzW2lkXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgZW52ZWxvcGVzID0gY29udGV4dC5lbnZlbG9wZXM7XG4gICAgICAgICAgICBjb250ZXh0LmVudmVsb3BlcyA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGVudmVsb3Blcykge1xuICAgICAgICAgICAgICAgIGlmIChlbnZlbG9wZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW52ZWxvcGUgPSBlbnZlbG9wZXNba2V5XVswXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGFDb25uZWN0ID0gZW52ZWxvcGVzW2tleV1bMV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXRhQ29ubmVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2Nvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBmYWlsdXJlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2Vic29ja2V0Q29kZTogZXZlbnQuY29kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbjogZXZlbnQucmVhc29uXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5leGNlcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhaWx1cmUuZXhjZXB0aW9uID0gZXZlbnQuZXhjZXB0aW9uO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX25vdGlmeUZhaWx1cmUoZW52ZWxvcGUub25GYWlsdXJlLCBjb250ZXh0LCBlbnZlbG9wZS5tZXNzYWdlcywgZmFpbHVyZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIF9zZWxmLnJlZ2lzdGVyZWQgPSBmdW5jdGlvbih0eXBlLCBjb21ldGQpIHtcbiAgICAgICAgICAgIF9zdXBlci5yZWdpc3RlcmVkKHR5cGUsIGNvbWV0ZCk7XG4gICAgICAgICAgICBfY29tZXRkID0gY29tZXRkO1xuICAgICAgICB9O1xuXG4gICAgICAgIF9zZWxmLmFjY2VwdCA9IGZ1bmN0aW9uKHZlcnNpb24sIGNyb3NzRG9tYWluLCB1cmwpIHtcbiAgICAgICAgICAgIHRoaXMuX2RlYnVnKCdUcmFuc3BvcnQnLCB0aGlzLmdldFR5cGUoKSwgJ2FjY2VwdCwgc3VwcG9ydGVkOicsIF93ZWJTb2NrZXRTdXBwb3J0ZWQpO1xuICAgICAgICAgICAgLy8gVXNpbmcgISEgdG8gcmV0dXJuIGEgYm9vbGVhbiAoYW5kIG5vdCB0aGUgV2ViU29ja2V0IG9iamVjdCkuXG4gICAgICAgICAgICByZXR1cm4gX3dlYlNvY2tldFN1cHBvcnRlZCAmJiAhIXdpbmRvdy5XZWJTb2NrZXQgJiYgX2NvbWV0ZC53ZWJzb2NrZXRFbmFibGVkICE9PSBmYWxzZTtcbiAgICAgICAgfTtcblxuICAgICAgICBfc2VsZi5zZW5kID0gZnVuY3Rpb24oZW52ZWxvcGUsIG1ldGFDb25uZWN0KSB7XG4gICAgICAgICAgICB0aGlzLl9kZWJ1ZygnVHJhbnNwb3J0JywgdGhpcy5nZXRUeXBlKCksICdzZW5kaW5nJywgZW52ZWxvcGUsICcvbWV0YS9jb25uZWN0ID0nLCBtZXRhQ29ubmVjdCk7XG4gICAgICAgICAgICBfc2VuZC5jYWxsKHRoaXMsIF9jb250ZXh0LCBlbnZlbG9wZSwgbWV0YUNvbm5lY3QpO1xuICAgICAgICB9O1xuXG4gICAgICAgIF9zZWxmLndlYlNvY2tldENsb3NlID0gZnVuY3Rpb24oY29udGV4dCwgY29kZSwgcmVhc29uKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChjb250ZXh0LndlYlNvY2tldCkge1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LndlYlNvY2tldC5jbG9zZShjb2RlLCByZWFzb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKHgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9kZWJ1Zyh4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBfc2VsZi5hYm9ydCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgX3N1cGVyLmFib3J0KCk7XG4gICAgICAgICAgICBfZm9yY2VDbG9zZS5jYWxsKHRoaXMsIF9jb250ZXh0LCB7Y29kZTogMTAwMCwgcmVhc29uOiAnQWJvcnQnfSk7XG4gICAgICAgICAgICB0aGlzLnJlc2V0KHRydWUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBfc2VsZjtcbiAgICB9O1xuXG5cbiAgICAvKipcbiAgICAgKiBUaGUgY29uc3RydWN0b3IgZm9yIGEgQ29tZXREIG9iamVjdCwgaWRlbnRpZmllZCBieSBhbiBvcHRpb25hbCBuYW1lLlxuICAgICAqIFRoZSBkZWZhdWx0IG5hbWUgaXMgdGhlIHN0cmluZyAnZGVmYXVsdCcuXG4gICAgICogQHBhcmFtIG5hbWUgdGhlIG9wdGlvbmFsIG5hbWUgb2YgdGhpcyBjb21ldGQgb2JqZWN0XG4gICAgICovXG4gICAgdmFyIENvbWV0RCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgdmFyIF9zY2hlZHVsZXIgPSBuZXcgU2NoZWR1bGVyKCk7XG4gICAgICAgIHZhciBfY29tZXRkID0gdGhpcztcbiAgICAgICAgdmFyIF9uYW1lID0gbmFtZSB8fCAnZGVmYXVsdCc7XG4gICAgICAgIHZhciBfY3Jvc3NEb21haW4gPSBmYWxzZTtcbiAgICAgICAgdmFyIF90cmFuc3BvcnRzID0gbmV3IFRyYW5zcG9ydFJlZ2lzdHJ5KCk7XG4gICAgICAgIHZhciBfdHJhbnNwb3J0O1xuICAgICAgICB2YXIgX3N0YXR1cyA9ICdkaXNjb25uZWN0ZWQnO1xuICAgICAgICB2YXIgX21lc3NhZ2VJZCA9IDA7XG4gICAgICAgIHZhciBfY2xpZW50SWQgPSBudWxsO1xuICAgICAgICB2YXIgX2JhdGNoID0gMDtcbiAgICAgICAgdmFyIF9tZXNzYWdlUXVldWUgPSBbXTtcbiAgICAgICAgdmFyIF9pbnRlcm5hbEJhdGNoID0gZmFsc2U7XG4gICAgICAgIHZhciBfbGlzdGVuZXJJZCA9IDA7XG4gICAgICAgIHZhciBfbGlzdGVuZXJzID0ge307XG4gICAgICAgIHZhciBfYmFja29mZiA9IDA7XG4gICAgICAgIHZhciBfc2NoZWR1bGVkU2VuZCA9IG51bGw7XG4gICAgICAgIHZhciBfZXh0ZW5zaW9ucyA9IFtdO1xuICAgICAgICB2YXIgX2FkdmljZSA9IHt9O1xuICAgICAgICB2YXIgX2hhbmRzaGFrZVByb3BzO1xuICAgICAgICB2YXIgX2hhbmRzaGFrZUNhbGxiYWNrO1xuICAgICAgICB2YXIgX2NhbGxiYWNrcyA9IHt9O1xuICAgICAgICB2YXIgX3JlbW90ZUNhbGxzID0ge307XG4gICAgICAgIHZhciBfcmVlc3RhYmxpc2ggPSBmYWxzZTtcbiAgICAgICAgdmFyIF9jb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgdmFyIF91bmNvbm5lY3RUaW1lID0gMDtcbiAgICAgICAgdmFyIF9oYW5kc2hha2VNZXNzYWdlcyA9IDA7XG4gICAgICAgIHZhciBfbWV0YUNvbm5lY3QgPSBudWxsO1xuICAgICAgICB2YXIgX2NvbmZpZyA9IHtcbiAgICAgICAgICAgIHVzZVdvcmtlclNjaGVkdWxlcjogdHJ1ZSxcbiAgICAgICAgICAgIHByb3RvY29sOiBudWxsLFxuICAgICAgICAgICAgc3RpY2t5UmVjb25uZWN0OiB0cnVlLFxuICAgICAgICAgICAgY29ubmVjdFRpbWVvdXQ6IDAsXG4gICAgICAgICAgICBtYXhDb25uZWN0aW9uczogMixcbiAgICAgICAgICAgIGJhY2tvZmZJbmNyZW1lbnQ6IDEwMDAsXG4gICAgICAgICAgICBtYXhCYWNrb2ZmOiA2MDAwMCxcbiAgICAgICAgICAgIGxvZ0xldmVsOiAnaW5mbycsXG4gICAgICAgICAgICBtYXhOZXR3b3JrRGVsYXk6IDEwMDAwLFxuICAgICAgICAgICAgcmVxdWVzdEhlYWRlcnM6IHt9LFxuICAgICAgICAgICAgYXBwZW5kTWVzc2FnZVR5cGVUb1VSTDogdHJ1ZSxcbiAgICAgICAgICAgIGF1dG9CYXRjaDogZmFsc2UsXG4gICAgICAgICAgICB1cmxzOiB7fSxcbiAgICAgICAgICAgIG1heFVSSUxlbmd0aDogMjAwMCxcbiAgICAgICAgICAgIGFkdmljZToge1xuICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDYwMDAwLFxuICAgICAgICAgICAgICAgIGludGVydmFsOiAwLFxuICAgICAgICAgICAgICAgIHJlY29ubmVjdDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIG1heEludGVydmFsOiAwXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gX2ZpZWxkVmFsdWUob2JqZWN0LCBuYW1lKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3RbbmFtZV07XG4gICAgICAgICAgICB9IGNhdGNoICh4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNaXhlcyBpbiB0aGUgZ2l2ZW4gb2JqZWN0cyBpbnRvIHRoZSB0YXJnZXQgb2JqZWN0IGJ5IGNvcHlpbmcgdGhlIHByb3BlcnRpZXMuXG4gICAgICAgICAqIEBwYXJhbSBkZWVwIGlmIHRoZSBjb3B5IG11c3QgYmUgZGVlcFxuICAgICAgICAgKiBAcGFyYW0gdGFyZ2V0IHRoZSB0YXJnZXQgb2JqZWN0XG4gICAgICAgICAqIEBwYXJhbSBvYmplY3RzIHRoZSBvYmplY3RzIHdob3NlIHByb3BlcnRpZXMgYXJlIGNvcGllZCBpbnRvIHRoZSB0YXJnZXRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX21peGluID0gZnVuY3Rpb24oZGVlcCwgdGFyZ2V0LCBvYmplY3RzKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGFyZ2V0IHx8IHt9O1xuXG4gICAgICAgICAgICAvLyBTa2lwIGZpcnN0IDIgcGFyYW1ldGVycyAoZGVlcCBhbmQgdGFyZ2V0KSwgYW5kIGxvb3Agb3ZlciB0aGUgb3RoZXJzXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMjsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSBhcmd1bWVudHNbaV07XG5cbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0ID09PSB1bmRlZmluZWQgfHwgb2JqZWN0ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZvciAodmFyIHByb3BOYW1lIGluIG9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAob2JqZWN0Lmhhc093blByb3BlcnR5KHByb3BOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfZmllbGRWYWx1ZShvYmplY3QsIHByb3BOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnID0gX2ZpZWxkVmFsdWUocmVzdWx0LCBwcm9wTmFtZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEF2b2lkIGluZmluaXRlIGxvb3BzXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcCA9PT0gdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEbyBub3QgbWl4aW4gdW5kZWZpbmVkIHZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3AgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVlcCAmJiB0eXBlb2YgcHJvcCA9PT0gJ29iamVjdCcgJiYgcHJvcCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0W3Byb3BOYW1lXSA9IHRoaXMuX21peGluKGRlZXAsIHRhcmcgaW5zdGFuY2VvZiBBcnJheSA/IHRhcmcgOiBbXSwgcHJvcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZSA9IHR5cGVvZiB0YXJnID09PSAnb2JqZWN0JyAmJiAhKHRhcmcgaW5zdGFuY2VvZiBBcnJheSkgPyB0YXJnIDoge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtwcm9wTmFtZV0gPSB0aGlzLl9taXhpbihkZWVwLCBzb3VyY2UsIHByb3ApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0W3Byb3BOYW1lXSA9IHByb3A7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gX2lzU3RyaW5nKHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gVXRpbHMuaXNTdHJpbmcodmFsdWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gX2lzRnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJztcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIF96ZXJvUGFkKHZhbHVlLCBsZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSAnJztcbiAgICAgICAgICAgIHdoaWxlICgtLWxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPj0gTWF0aC5wb3coMTAsIGxlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnMCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXN1bHQgKz0gdmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gX2xvZyhsZXZlbCwgYXJncykge1xuICAgICAgICAgICAgaWYgKHdpbmRvdy5jb25zb2xlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxvZ2dlciA9IHdpbmRvdy5jb25zb2xlW2xldmVsXTtcbiAgICAgICAgICAgICAgICBpZiAoX2lzRnVuY3Rpb24obG9nZ2VyKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgW10uc3BsaWNlLmNhbGwoYXJncywgMCwgMCwgX3plcm9QYWQobm93LmdldEhvdXJzKCksIDIpICsgJzonICsgX3plcm9QYWQobm93LmdldE1pbnV0ZXMoKSwgMikgKyAnOicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgX3plcm9QYWQobm93LmdldFNlY29uZHMoKSwgMikgKyAnLicgKyBfemVyb1BhZChub3cuZ2V0TWlsbGlzZWNvbmRzKCksIDMpKTtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmFwcGx5KHdpbmRvdy5jb25zb2xlLCBhcmdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl93YXJuID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBfbG9nKCd3YXJuJywgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9pbmZvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoX2NvbmZpZy5sb2dMZXZlbCAhPT0gJ3dhcm4nKSB7XG4gICAgICAgICAgICAgICAgX2xvZygnaW5mbycsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5fZGVidWcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChfY29uZmlnLmxvZ0xldmVsID09PSAnZGVidWcnKSB7XG4gICAgICAgICAgICAgICAgX2xvZygnZGVidWcnLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIF9zcGxpdFVSTCh1cmwpIHtcbiAgICAgICAgICAgIC8vIFsxXSA9IHByb3RvY29sOi8vLFxuICAgICAgICAgICAgLy8gWzJdID0gaG9zdDpwb3J0LFxuICAgICAgICAgICAgLy8gWzNdID0gaG9zdCxcbiAgICAgICAgICAgIC8vIFs0XSA9IElQdjZfaG9zdCxcbiAgICAgICAgICAgIC8vIFs1XSA9IElQdjRfaG9zdCxcbiAgICAgICAgICAgIC8vIFs2XSA9IDpwb3J0LFxuICAgICAgICAgICAgLy8gWzddID0gcG9ydCxcbiAgICAgICAgICAgIC8vIFs4XSA9IHVyaSxcbiAgICAgICAgICAgIC8vIFs5XSA9IHJlc3QgKHF1ZXJ5IC8gZnJhZ21lbnQpXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cCgnKF5odHRwcz86Ly8pPygoKFxcXFxbW15cXFxcXV0rXSl8KFteOi8/I10rKSkoOihcXFxcZCspKT8pPyhbXj8jXSopKC4qKT8nKS5leGVjKHVybCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBnaXZlbiBob3N0QW5kUG9ydCBpcyBjcm9zcyBkb21haW4uXG4gICAgICAgICAqIFRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIGNoZWNrcyBhZ2FpbnN0IHdpbmRvdy5sb2NhdGlvbi5ob3N0XG4gICAgICAgICAqIGJ1dCB0aGlzIGZ1bmN0aW9uIGNhbiBiZSBvdmVycmlkZGVuIHRvIG1ha2UgaXQgd29yayBpbiBub24tYnJvd3NlclxuICAgICAgICAgKiBlbnZpcm9ubWVudHMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBob3N0QW5kUG9ydCB0aGUgaG9zdCBhbmQgcG9ydCBpbiBmb3JtYXQgaG9zdDpwb3J0XG4gICAgICAgICAqIEByZXR1cm4gd2hldGhlciB0aGUgZ2l2ZW4gaG9zdEFuZFBvcnQgaXMgY3Jvc3MgZG9tYWluXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9pc0Nyb3NzRG9tYWluID0gZnVuY3Rpb24oaG9zdEFuZFBvcnQpIHtcbiAgICAgICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24gJiYgd2luZG93LmxvY2F0aW9uLmhvc3QpIHtcbiAgICAgICAgICAgICAgICBpZiAoaG9zdEFuZFBvcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhvc3RBbmRQb3J0ICE9PSB3aW5kb3cubG9jYXRpb24uaG9zdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gX2NvbmZpZ3VyZShjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICBfY29tZXRkLl9kZWJ1ZygnQ29uZmlndXJpbmcgY29tZXRkIG9iamVjdCB3aXRoJywgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICAvLyBTdXBwb3J0IG9sZCBzdHlsZSBwYXJhbSwgd2hlcmUgb25seSB0aGUgQmF5ZXV4IHNlcnZlciBVUkwgd2FzIHBhc3NlZC5cbiAgICAgICAgICAgIGlmIChfaXNTdHJpbmcoY29uZmlndXJhdGlvbikpIHtcbiAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uID0ge1xuICAgICAgICAgICAgICAgICAgICB1cmw6IGNvbmZpZ3VyYXRpb25cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbiA9IHt9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBfY29uZmlnID0gX2NvbWV0ZC5fbWl4aW4oZmFsc2UsIF9jb25maWcsIGNvbmZpZ3VyYXRpb24pO1xuXG4gICAgICAgICAgICB2YXIgdXJsID0gX2NvbWV0ZC5nZXRVUkwoKTtcbiAgICAgICAgICAgIGlmICghdXJsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgJ01pc3NpbmcgcmVxdWlyZWQgY29uZmlndXJhdGlvbiBwYXJhbWV0ZXIgXFwndXJsXFwnIHNwZWNpZnlpbmcgdGhlIEJheWV1eCBzZXJ2ZXIgVVJMJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgd2UncmUgY3Jvc3MgZG9tYWluLlxuICAgICAgICAgICAgdmFyIHVybFBhcnRzID0gX3NwbGl0VVJMKHVybCk7XG4gICAgICAgICAgICB2YXIgaG9zdEFuZFBvcnQgPSB1cmxQYXJ0c1syXTtcbiAgICAgICAgICAgIHZhciB1cmkgPSB1cmxQYXJ0c1s4XTtcbiAgICAgICAgICAgIHZhciBhZnRlclVSSSA9IHVybFBhcnRzWzldO1xuICAgICAgICAgICAgX2Nyb3NzRG9tYWluID0gX2NvbWV0ZC5faXNDcm9zc0RvbWFpbihob3N0QW5kUG9ydCk7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGFwcGVuZGluZyBleHRyYSBwYXRoIGlzIHN1cHBvcnRlZC5cbiAgICAgICAgICAgIGlmIChfY29uZmlnLmFwcGVuZE1lc3NhZ2VUeXBlVG9VUkwpIHtcbiAgICAgICAgICAgICAgICBpZiAoYWZ0ZXJVUkkgIT09IHVuZGVmaW5lZCAmJiBhZnRlclVSSS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIF9jb21ldGQuX2luZm8oJ0FwcGVuZGluZyBtZXNzYWdlIHR5cGUgdG8gVVJJICcgKyB1cmkgKyBhZnRlclVSSSArICcgaXMgbm90IHN1cHBvcnRlZCwgZGlzYWJsaW5nIFxcJ2FwcGVuZE1lc3NhZ2VUeXBlVG9VUkxcXCcgY29uZmlndXJhdGlvbicpO1xuICAgICAgICAgICAgICAgICAgICBfY29uZmlnLmFwcGVuZE1lc3NhZ2VUeXBlVG9VUkwgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdXJpU2VnbWVudHMgPSB1cmkuc3BsaXQoJy8nKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxhc3RTZWdtZW50SW5kZXggPSB1cmlTZWdtZW50cy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgICAgICBpZiAodXJpLm1hdGNoKC9cXC8kLykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RTZWdtZW50SW5kZXggLT0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodXJpU2VnbWVudHNbbGFzdFNlZ21lbnRJbmRleF0uaW5kZXhPZignLicpID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcnkgbGlrZWx5IHRoZSBDb21ldEQgc2VydmxldCdzIFVSTCBwYXR0ZXJuIGlzIG1hcHBlZCB0byBhbiBleHRlbnNpb24sIHN1Y2ggYXMgKi5jb21ldGRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEl0IHdpbGwgYmUgZGlmZmljdWx0IHRvIGFkZCB0aGUgZXh0cmEgcGF0aCBpbiB0aGlzIGNhc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jb21ldGQuX2luZm8oJ0FwcGVuZGluZyBtZXNzYWdlIHR5cGUgdG8gVVJJICcgKyB1cmkgKyAnIGlzIG5vdCBzdXBwb3J0ZWQsIGRpc2FibGluZyBcXCdhcHBlbmRNZXNzYWdlVHlwZVRvVVJMXFwnIGNvbmZpZ3VyYXRpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jb25maWcuYXBwZW5kTWVzc2FnZVR5cGVUb1VSTCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAod2luZG93LldvcmtlciAmJiB3aW5kb3cuQmxvYiAmJiB3aW5kb3cuVVJMICYmIF9jb25maWcudXNlV29ya2VyU2NoZWR1bGVyKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvZGUgPSBXb3JrZXJTY2hlZHVsZXIudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdGhlIGZ1bmN0aW9uIGRlY2xhcmF0aW9uLCB0aGUgb3BlbmluZyBicmFjZSBhbmQgdGhlIGNsb3NpbmcgYnJhY2UuXG4gICAgICAgICAgICAgICAgY29kZSA9IGNvZGUuc3Vic3RyaW5nKGNvZGUuaW5kZXhPZigneycpICsgMSwgY29kZS5sYXN0SW5kZXhPZignfScpKTtcbiAgICAgICAgICAgICAgICB2YXIgYmxvYiA9IG5ldyB3aW5kb3cuQmxvYihbY29kZV0sIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdmFyIGJsb2JVUkwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgICAgICAgICAgICB2YXIgd29ya2VyID0gbmV3IHdpbmRvdy5Xb3JrZXIoYmxvYlVSTCk7XG4gICAgICAgICAgICAgICAgX3NjaGVkdWxlci5zZXRUaW1lb3V0ID0gZnVuY3Rpb24oZnVua3Rpb24sIGRlbGF5KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpZCA9IF9zY2hlZHVsZXIucmVnaXN0ZXIoZnVua3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3NldFRpbWVvdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsYXk6IGRlbGF5XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaWQ7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBfc2NoZWR1bGVyLmNsZWFyVGltZW91dCA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIF9zY2hlZHVsZXIudW5yZWdpc3RlcihpZCk7XG4gICAgICAgICAgICAgICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY2xlYXJUaW1lb3V0J1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHdvcmtlci5vbm1lc3NhZ2UgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpZCA9IGUuZGF0YS5pZDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZ1bmt0aW9uID0gX3NjaGVkdWxlci51bnJlZ2lzdGVyKGlkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZ1bmt0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5rdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIF9yZW1vdmVMaXN0ZW5lcihzdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9ucyA9IF9saXN0ZW5lcnNbc3Vic2NyaXB0aW9uLmNoYW5uZWxdO1xuICAgICAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb25zICYmIHN1YnNjcmlwdGlvbnNbc3Vic2NyaXB0aW9uLmlkXSkge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgc3Vic2NyaXB0aW9uc1tzdWJzY3JpcHRpb24uaWRdO1xuICAgICAgICAgICAgICAgICAgICBfY29tZXRkLl9kZWJ1ZygnUmVtb3ZlZCcsIHN1YnNjcmlwdGlvbi5saXN0ZW5lciA/ICdsaXN0ZW5lcicgOiAnc3Vic2NyaXB0aW9uJywgc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBfcmVtb3ZlU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbiAmJiAhc3Vic2NyaXB0aW9uLmxpc3RlbmVyKSB7XG4gICAgICAgICAgICAgICAgX3JlbW92ZUxpc3RlbmVyKHN1YnNjcmlwdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBfY2xlYXJTdWJzY3JpcHRpb25zKCkge1xuICAgICAgICAgICAgZm9yICh2YXIgY2hhbm5lbCBpbiBfbGlzdGVuZXJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKF9saXN0ZW5lcnMuaGFzT3duUHJvcGVydHkoY2hhbm5lbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbnMgPSBfbGlzdGVuZXJzW2NoYW5uZWxdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaWQgaW4gc3Vic2NyaXB0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb25zLmhhc093blByb3BlcnR5KGlkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVtb3ZlU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbnNbaWRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBfc2V0U3RhdHVzKG5ld1N0YXR1cykge1xuICAgICAgICAgICAgaWYgKF9zdGF0dXMgIT09IG5ld1N0YXR1cykge1xuICAgICAgICAgICAgICAgIF9jb21ldGQuX2RlYnVnKCdTdGF0dXMnLCBfc3RhdHVzLCAnLT4nLCBuZXdTdGF0dXMpO1xuICAgICAgICAgICAgICAgIF9zdGF0dXMgPSBuZXdTdGF0dXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBfaXNEaXNjb25uZWN0ZWQoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N0YXR1cyA9PT0gJ2Rpc2Nvbm5lY3RpbmcnIHx8IF9zdGF0dXMgPT09ICdkaXNjb25uZWN0ZWQnO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gX25leHRNZXNzYWdlSWQoKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gKytfbWVzc2FnZUlkO1xuICAgICAgICAgICAgcmV0dXJuICcnICsgcmVzdWx0O1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gX2FwcGx5RXh0ZW5zaW9uKHNjb3BlLCBjYWxsYmFjaywgbmFtZSwgbWVzc2FnZSwgb3V0Z29pbmcpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmNhbGwoc2NvcGUsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgfSBjYXRjaCAoeCkge1xuICAgICAgICAgICAgICAgIHZhciBoYW5kbGVyID0gX2NvbWV0ZC5vbkV4dGVuc2lvbkV4Y2VwdGlvbjtcbiAgICAgICAgICAgICAgICBpZiAoX2lzRnVuY3Rpb24oaGFuZGxlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgX2NvbWV0ZC5fZGVidWcoJ0ludm9raW5nIGV4dGVuc2lvbiBleGNlcHRpb24gaGFuZGxlcicsIG5hbWUsIHgpO1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlci5jYWxsKF9jb21ldGQsIHgsIG5hbWUsIG91dGdvaW5nLCBtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoeHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jb21ldGQuX2luZm8oJ0V4Y2VwdGlvbiBkdXJpbmcgZXhlY3V0aW9uIG9mIGV4dGVuc2lvbiBleGNlcHRpb24gaGFuZGxlcicsIG5hbWUsIHh4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIF9jb21ldGQuX2luZm8oJ0V4Y2VwdGlvbiBkdXJpbmcgZXhlY3V0aW9uIG9mIGV4dGVuc2lvbicsIG5hbWUsIHgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIF9hcHBseUluY29taW5nRXh0ZW5zaW9ucyhtZXNzYWdlKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IF9leHRlbnNpb25zLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UgPT09IHVuZGVmaW5lZCB8fCBtZXNzYWdlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBleHRlbnNpb24gPSBfZXh0ZW5zaW9uc1tpXTtcbiAgICAgICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSBleHRlbnNpb24uZXh0ZW5zaW9uLmluY29taW5nO1xuICAgICAgICAgICAgICAgIGlmIChfaXNGdW5jdGlvbihjYWxsYmFjaykpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IF9hcHBseUV4dGVuc2lvbihleHRlbnNpb24uZXh0ZW5zaW9uLCBjYWxsYmFjaywgZXh0ZW5zaW9uLm5hbWUsIG1lc3NhZ2UsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gbWVzc2FnZSA6IHJlc3VsdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIF9hcHBseU91dGdvaW5nRXh0ZW5zaW9ucyhtZXNzYWdlKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gX2V4dGVuc2lvbnMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZSA9PT0gdW5kZWZpbmVkIHx8IG1lc3NhZ2UgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGV4dGVuc2lvbiA9IF9leHRlbnNpb25zW2ldO1xuICAgICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IGV4dGVuc2lvbi5leHRlbnNpb24ub3V0Z29pbmc7XG4gICAgICAgICAgICAgICAgaWYgKF9pc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gX2FwcGx5RXh0ZW5zaW9uKGV4dGVuc2lvbi5leHRlbnNpb24sIGNhbGxiYWNrLCBleHRlbnNpb24ubmFtZSwgbWVzc2FnZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSByZXN1bHQgPT09IHVuZGVmaW5lZCA/IG1lc3NhZ2UgOiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBfbm90aWZ5KGNoYW5uZWwsIG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb25zID0gX2xpc3RlbmVyc1tjaGFubmVsXTtcbiAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaWQgaW4gc3Vic2NyaXB0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9ucy5oYXNPd25Qcm9wZXJ0eShpZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBzdWJzY3JpcHRpb25zW2lkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN1YnNjcmlwdGlvbnMgbWF5IGNvbWUgYW5kIGdvLCBzbyB0aGUgYXJyYXkgbWF5IGhhdmUgJ2hvbGVzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi5jYWxsYmFjay5jYWxsKHN1YnNjcmlwdGlvbi5zY29wZSwgbWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGFuZGxlciA9IF9jb21ldGQub25MaXN0ZW5lckV4Y2VwdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9pc0Z1bmN0aW9uKGhhbmRsZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29tZXRkLl9kZWJ1ZygnSW52b2tpbmcgbGlzdGVuZXIgZXhjZXB0aW9uIGhhbmRsZXInLCBzdWJzY3JpcHRpb24sIHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLmNhbGwoX2NvbWV0ZCwgeCwgc3Vic2NyaXB0aW9uLCBzdWJzY3JpcHRpb24ubGlzdGVuZXIsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoeHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29tZXRkLl9pbmZvKCdFeGNlcHRpb24gZHVyaW5nIGV4ZWN1dGlvbiBvZiBsaXN0ZW5lciBleGNlcHRpb24gaGFuZGxlcicsIHN1YnNjcmlwdGlvbiwgeHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbWV0ZC5faW5mbygnRXhjZXB0aW9uIGR1cmluZyBleGVjdXRpb24gb2YgbGlzdGVuZXInLCBzdWJzY3JpcHRpb24sIG1lc3NhZ2UsIHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gX25vdGlmeUxpc3RlbmVycyhjaGFubmVsLCBtZXNzYWdlKSB7XG4gICAgICAgICAgICAvLyBOb3RpZnkgZGlyZWN0IGxpc3RlbmVyc1xuICAgICAgICAgICAgX25vdGlmeShjaGFubmVsLCBtZXNzYWdlKTtcblxuICAgICAgICAgICAgLy8gTm90aWZ5IHRoZSBnbG9iYmluZyBsaXN0ZW5lcnNcbiAgICAgICAgICAgIHZhciBjaGFubmVsUGFydHMgPSBjaGFubmVsLnNwbGl0KCcvJyk7XG4gICAgICAgICAgICB2YXIgbGFzdCA9IGNoYW5uZWxQYXJ0cy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IGxhc3Q7IGkgPiAwOyAtLWkpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hhbm5lbFBhcnQgPSBjaGFubmVsUGFydHMuc2xpY2UoMCwgaSkuam9pbignLycpICsgJy8qJztcbiAgICAgICAgICAgICAgICAvLyBXZSBkb24ndCB3YW50IHRvIG5vdGlmeSAvZm9vLyogaWYgdGhlIGNoYW5uZWwgaXMgL2Zvby9iYXIvYmF6LFxuICAgICAgICAgICAgICAgIC8vIHNvIHdlIHN0b3AgYXQgdGhlIGZpcnN0IG5vbiByZWN1cnNpdmUgZ2xvYmJpbmdcbiAgICAgICAgICAgICAgICBpZiAoaSA9PT0gbGFzdCkge1xuICAgICAgICAgICAgICAgICAgICBfbm90aWZ5KGNoYW5uZWxQYXJ0LCBtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gQWRkIHRoZSByZWN1cnNpdmUgZ2xvYmJlciBhbmQgbm90aWZ5XG4gICAgICAgICAgICAgICAgY2hhbm5lbFBhcnQgKz0gJyonO1xuICAgICAgICAgICAgICAgIF9ub3RpZnkoY2hhbm5lbFBhcnQsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gX2NhbmNlbERlbGF5ZWRTZW5kKCkge1xuICAgICAgICAgICAgaWYgKF9zY2hlZHVsZWRTZW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgX2NvbWV0ZC5jbGVhclRpbWVvdXQoX3NjaGVkdWxlZFNlbmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3NjaGVkdWxlZFNlbmQgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gX2RlbGF5ZWRTZW5kKG9wZXJhdGlvbiwgZGVsYXkpIHtcbiAgICAgICAgICAgIF9jYW5jZWxEZWxheWVkU2VuZCgpO1xuICAgICAgICAgICAgdmFyIHRpbWUgPSBfYWR2aWNlLmludGVydmFsICsgZGVsYXk7XG4gICAgICAgICAgICBfY29tZXRkLl9kZWJ1ZygnRnVuY3Rpb24gc2NoZWR1bGVkIGluJywgdGltZSwgJ21zLCBpbnRlcnZhbCA9JywgX2FkdmljZS5pbnRlcnZhbCwgJ2JhY2tvZmYgPScsIF9iYWNrb2ZmLCBvcGVyYXRpb24pO1xuICAgICAgICAgICAgX3NjaGVkdWxlZFNlbmQgPSBfY29tZXRkLnNldFRpbWVvdXQob3BlcmF0aW9uLCB0aW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE5lZWRlZCB0byBicmVhayBjeWNsaWMgZGVwZW5kZW5jaWVzIGJldHdlZW4gZnVuY3Rpb24gZGVmaW5pdGlvbnNcbiAgICAgICAgdmFyIF9oYW5kbGVNZXNzYWdlcztcbiAgICAgICAgdmFyIF9oYW5kbGVGYWlsdXJlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWxpdmVycyB0aGUgbWVzc2FnZXMgdG8gdGhlIENvbWV0RCBzZXJ2ZXJcbiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2VzIHRoZSBhcnJheSBvZiBtZXNzYWdlcyB0byBzZW5kXG4gICAgICAgICAqIEBwYXJhbSBtZXRhQ29ubmVjdCB0cnVlIGlmIHRoaXMgc2VuZCBpcyBvbiAvbWV0YS9jb25uZWN0XG4gICAgICAgICAqIEBwYXJhbSBleHRyYVBhdGggYW4gZXh0cmEgcGF0aCB0byBhcHBlbmQgdG8gdGhlIEJheWV1eCBzZXJ2ZXIgVVJMXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBfc2VuZChtZXNzYWdlcywgbWV0YUNvbm5lY3QsIGV4dHJhUGF0aCkge1xuICAgICAgICAgICAgLy8gV2UgbXVzdCBiZSBzdXJlIHRoYXQgdGhlIG1lc3NhZ2VzIGhhdmUgYSBjbGllbnRJZC5cbiAgICAgICAgICAgIC8vIFRoaXMgaXMgbm90IGd1YXJhbnRlZWQgc2luY2UgdGhlIGhhbmRzaGFrZSBtYXkgdGFrZSB0aW1lIHRvIHJldHVyblxuICAgICAgICAgICAgLy8gKGFuZCBoZW5jZSB0aGUgY2xpZW50SWQgaXMgbm90IGtub3duIHlldCkgYW5kIHRoZSBhcHBsaWNhdGlvblxuICAgICAgICAgICAgLy8gbWF5IGNyZWF0ZSBvdGhlciBtZXNzYWdlcy5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IG1lc3NhZ2VzW2ldO1xuICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlSWQgPSBtZXNzYWdlLmlkO1xuXG4gICAgICAgICAgICAgICAgaWYgKF9jbGllbnRJZCkge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNsaWVudElkID0gX2NsaWVudElkO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBfYXBwbHlPdXRnb2luZ0V4dGVuc2lvbnMobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEV4dGVuc2lvbnMgbWF5IGhhdmUgbW9kaWZpZWQgdGhlIG1lc3NhZ2UgaWQsIGJ1dCB3ZSBuZWVkIHRvIG93biBpdC5cbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pZCA9IG1lc3NhZ2VJZDtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXNbaV0gPSBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBfY2FsbGJhY2tzW21lc3NhZ2VJZF07XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzLnNwbGljZShpLS0sIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG1ldGFDb25uZWN0KSB7XG4gICAgICAgICAgICAgICAgX21ldGFDb25uZWN0ID0gbWVzc2FnZXNbMF07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB1cmwgPSBfY29tZXRkLmdldFVSTCgpO1xuICAgICAgICAgICAgaWYgKF9jb25maWcuYXBwZW5kTWVzc2FnZVR5cGVUb1VSTCkge1xuICAgICAgICAgICAgICAgIC8vIElmIHVybCBkb2VzIG5vdCBlbmQgd2l0aCAnLycsIHRoZW4gYXBwZW5kIGl0XG4gICAgICAgICAgICAgICAgaWYgKCF1cmwubWF0Y2goL1xcLyQvKSkge1xuICAgICAgICAgICAgICAgICAgICB1cmwgPSB1cmwgKyAnLyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChleHRyYVBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsID0gdXJsICsgZXh0cmFQYXRoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGVudmVsb3BlID0ge1xuICAgICAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgICAgIHN5bmM6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiBtZXNzYWdlcyxcbiAgICAgICAgICAgICAgICBvblN1Y2Nlc3M6IGZ1bmN0aW9uKHJjdmRNZXNzYWdlcykge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2hhbmRsZU1lc3NhZ2VzLmNhbGwoX2NvbWV0ZCwgcmN2ZE1lc3NhZ2VzKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NvbWV0ZC5faW5mbygnRXhjZXB0aW9uIGR1cmluZyBoYW5kbGluZyBvZiBtZXNzYWdlcycsIHgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbkZhaWx1cmU6IGZ1bmN0aW9uKGNvbmR1aXQsIG1lc3NhZ2VzLCBmYWlsdXJlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHJhbnNwb3J0ID0gX2NvbWV0ZC5nZXRUcmFuc3BvcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhaWx1cmUuY29ubmVjdGlvblR5cGUgPSB0cmFuc3BvcnQgPyB0cmFuc3BvcnQuZ2V0VHlwZSgpIDogXCJ1bmtub3duXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaGFuZGxlRmFpbHVyZS5jYWxsKF9jb21ldGQsIGNvbmR1aXQsIG1lc3NhZ2VzLCBmYWlsdXJlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NvbWV0ZC5faW5mbygnRXhjZXB0aW9uIGR1cmluZyBoYW5kbGluZyBvZiBmYWlsdXJlJywgeCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgX2NvbWV0ZC5fZGVidWcoJ1NlbmQnLCBlbnZlbG9wZSk7XG4gICAgICAgICAgICBfdHJhbnNwb3J0LnNlbmQoZW52ZWxvcGUsIG1ldGFDb25uZWN0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIF9xdWV1ZVNlbmQobWVzc2FnZSkge1xuICAgICAgICAgICAgaWYgKF9iYXRjaCA+IDAgfHwgX2ludGVybmFsQmF0Y2ggPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBfbWVzc2FnZVF1ZXVlLnB1c2gobWVzc2FnZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIF9zZW5kKFttZXNzYWdlXSwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNlbmRzIGEgY29tcGxldGUgYmF5ZXV4IG1lc3NhZ2UuXG4gICAgICAgICAqIFRoaXMgbWV0aG9kIGlzIGV4cG9zZWQgYXMgYSBwdWJsaWMgc28gdGhhdCBleHRlbnNpb25zIG1heSB1c2UgaXRcbiAgICAgICAgICogdG8gc2VuZCBiYXlldXggbWVzc2FnZSBkaXJlY3RseSwgZm9yIGV4YW1wbGUgaW4gY2FzZSBvZiByZS1zZW5kaW5nXG4gICAgICAgICAqIG1lc3NhZ2VzIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gc2VudCBidXQgdGhhdCBmb3Igc29tZSByZWFzb24gbXVzdFxuICAgICAgICAgKiBiZSByZXNlbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNlbmQgPSBfcXVldWVTZW5kO1xuXG4gICAgICAgIGZ1bmN0aW9uIF9yZXNldEJhY2tvZmYoKSB7XG4gICAgICAgICAgICBfYmFja29mZiA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBfaW5jcmVhc2VCYWNrb2ZmKCkge1xuICAgICAgICAgICAgaWYgKF9iYWNrb2ZmIDwgX2NvbmZpZy5tYXhCYWNrb2ZmKSB7XG4gICAgICAgICAgICAgICAgX2JhY2tvZmYgKz0gX2NvbmZpZy5iYWNrb2ZmSW5jcmVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF9iYWNrb2ZmO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN0YXJ0cyBhIHRoZSBiYXRjaCBvZiBtZXNzYWdlcyB0byBiZSBzZW50IGluIGEgc2luZ2xlIHJlcXVlc3QuXG4gICAgICAgICAqIEBzZWUgI19lbmRCYXRjaChzZW5kTWVzc2FnZXMpXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBfc3RhcnRCYXRjaCgpIHtcbiAgICAgICAgICAgICsrX2JhdGNoO1xuICAgICAgICAgICAgX2NvbWV0ZC5fZGVidWcoJ1N0YXJ0aW5nIGJhdGNoLCBkZXB0aCcsIF9iYXRjaCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBfZmx1c2hCYXRjaCgpIHtcbiAgICAgICAgICAgIHZhciBtZXNzYWdlcyA9IF9tZXNzYWdlUXVldWU7XG4gICAgICAgICAgICBfbWVzc2FnZVF1ZXVlID0gW107XG4gICAgICAgICAgICBpZiAobWVzc2FnZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIF9zZW5kKG1lc3NhZ2VzLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5kcyB0aGUgYmF0Y2ggb2YgbWVzc2FnZXMgdG8gYmUgc2VudCBpbiBhIHNpbmdsZSByZXF1ZXN0LFxuICAgICAgICAgKiBvcHRpb25hbGx5IHNlbmRpbmcgbWVzc2FnZXMgcHJlc2VudCBpbiB0aGUgbWVzc2FnZSBxdWV1ZSBkZXBlbmRpbmdcbiAgICAgICAgICogb24gdGhlIGdpdmVuIGFyZ3VtZW50LlxuICAgICAgICAgKiBAc2VlICNfc3RhcnRCYXRjaCgpXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBfZW5kQmF0Y2goKSB7XG4gICAgICAgICAgICAtLV9iYXRjaDtcbiAgICAgICAgICAgIF9jb21ldGQuX2RlYnVnKCdFbmRpbmcgYmF0Y2gsIGRlcHRoJywgX2JhdGNoKTtcbiAgICAgICAgICAgIGlmIChfYmF0Y2ggPCAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgJ0NhbGxzIHRvIHN0YXJ0QmF0Y2goKSBhbmQgZW5kQmF0Y2goKSBhcmUgbm90IHBhaXJlZCc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChfYmF0Y2ggPT09IDAgJiYgIV9pc0Rpc2Nvbm5lY3RlZCgpICYmICFfaW50ZXJuYWxCYXRjaCkge1xuICAgICAgICAgICAgICAgIF9mbHVzaEJhdGNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU2VuZHMgdGhlIGNvbm5lY3QgbWVzc2FnZVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gX2Nvbm5lY3QoKSB7XG4gICAgICAgICAgICBpZiAoIV9pc0Rpc2Nvbm5lY3RlZCgpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJheWV1eE1lc3NhZ2UgPSB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBfbmV4dE1lc3NhZ2VJZCgpLFxuICAgICAgICAgICAgICAgICAgICBjaGFubmVsOiAnL21ldGEvY29ubmVjdCcsXG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25UeXBlOiBfdHJhbnNwb3J0LmdldFR5cGUoKVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvLyBJbiBjYXNlIG9mIHJlbG9hZCBvciB0ZW1wb3JhcnkgbG9zcyBvZiBjb25uZWN0aW9uXG4gICAgICAgICAgICAgICAgLy8gd2Ugd2FudCB0aGUgbmV4dCBzdWNjZXNzZnVsIGNvbm5lY3QgdG8gcmV0dXJuIGltbWVkaWF0ZWx5XG4gICAgICAgICAgICAgICAgLy8gaW5zdGVhZCBvZiBiZWluZyBoZWxkIGJ5IHRoZSBzZXJ2ZXIsIHNvIHRoYXQgY29ubmVjdCBsaXN0ZW5lcnNcbiAgICAgICAgICAgICAgICAvLyBjYW4gYmUgbm90aWZpZWQgdGhhdCB0aGUgY29ubmVjdGlvbiBoYXMgYmVlbiByZS1lc3RhYmxpc2hlZFxuICAgICAgICAgICAgICAgIGlmICghX2Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICBiYXlldXhNZXNzYWdlLmFkdmljZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDBcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBfc2V0U3RhdHVzKCdjb25uZWN0aW5nJyk7XG4gICAgICAgICAgICAgICAgX2NvbWV0ZC5fZGVidWcoJ0Nvbm5lY3Qgc2VudCcsIGJheWV1eE1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIF9zZW5kKFtiYXlldXhNZXNzYWdlXSwgdHJ1ZSwgJ2Nvbm5lY3QnKTtcbiAgICAgICAgICAgICAgICBfc2V0U3RhdHVzKCdjb25uZWN0ZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIF9kZWxheWVkQ29ubmVjdChkZWxheSkge1xuICAgICAgICAgICAgX3NldFN0YXR1cygnY29ubmVjdGluZycpO1xuICAgICAgICAgICAgX2RlbGF5ZWRTZW5kKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9jb25uZWN0KCk7XG4gICAgICAgICAgICB9LCBkZWxheSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBfdXBkYXRlQWR2aWNlKG5ld0FkdmljZSkge1xuICAgICAgICAgICAgaWYgKG5ld0FkdmljZSkge1xuICAgICAgICAgICAgICAgIF9hZHZpY2UgPSBfY29tZXRkLl9taXhpbihmYWxzZSwge30sIF9jb25maWcuYWR2aWNlLCBuZXdBZHZpY2UpO1xuICAgICAgICAgICAgICAgIF9jb21ldGQuX2RlYnVnKCdOZXcgYWR2aWNlJywgX2FkdmljZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBfZGlzY29ubmVjdChhYm9ydCkge1xuICAgICAgICAgICAgX2NhbmNlbERlbGF5ZWRTZW5kKCk7XG4gICAgICAgICAgICBpZiAoYWJvcnQgJiYgX3RyYW5zcG9ydCkge1xuICAgICAgICAgICAgICAgIF90cmFuc3BvcnQuYWJvcnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF9jcm9zc0RvbWFpbiA9IGZhbHNlO1xuICAgICAgICAgICAgX3RyYW5zcG9ydCA9IG51bGw7XG4gICAgICAgICAgICBfc2V0U3RhdHVzKCdkaXNjb25uZWN0ZWQnKTtcbiAgICAgICAgICAgIF9jbGllbnRJZCA9IG51bGw7XG4gICAgICAgICAgICBfYmF0Y2ggPSAwO1xuICAgICAgICAgICAgX3Jlc2V0QmFja29mZigpO1xuICAgICAgICAgICAgX3JlZXN0YWJsaXNoID0gZmFsc2U7XG4gICAgICAgICAgICBfY29ubmVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICBfdW5jb25uZWN0VGltZSA9IDA7XG4gICAgICAgICAgICBfbWV0YUNvbm5lY3QgPSBudWxsO1xuXG4gICAgICAgICAgICAvLyBGYWlsIGFueSBleGlzdGluZyBxdWV1ZWQgbWVzc2FnZVxuICAgICAgICAgICAgaWYgKF9tZXNzYWdlUXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlcyA9IF9tZXNzYWdlUXVldWU7XG4gICAgICAgICAgICAgICAgX21lc3NhZ2VRdWV1ZSA9IFtdO1xuICAgICAgICAgICAgICAgIF9oYW5kbGVGYWlsdXJlLmNhbGwoX2NvbWV0ZCwgdW5kZWZpbmVkLCBtZXNzYWdlcywge1xuICAgICAgICAgICAgICAgICAgICByZWFzb246ICdEaXNjb25uZWN0ZWQnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBfbm90aWZ5VHJhbnNwb3J0RXhjZXB0aW9uKG9sZFRyYW5zcG9ydCwgbmV3VHJhbnNwb3J0LCBmYWlsdXJlKSB7XG4gICAgICAgICAgICB2YXIgaGFuZGxlciA9IF9jb21ldGQub25UcmFuc3BvcnRFeGNlcHRpb247XG4gICAgICAgICAgICBpZiAoX2lzRnVuY3Rpb24oaGFuZGxlcikpIHtcbiAgICAgICAgICAgICAgICBfY29tZXRkLl9kZWJ1ZygnSW52b2tpbmcgdHJhbnNwb3J0IGV4Y2VwdGlvbiBoYW5kbGVyJywgb2xkVHJhbnNwb3J0LCBuZXdUcmFuc3BvcnQsIGZhaWx1cmUpO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXIuY2FsbChfY29tZXRkLCBmYWlsdXJlLCBvbGRUcmFuc3BvcnQsIG5ld1RyYW5zcG9ydCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoeCkge1xuICAgICAgICAgICAgICAgICAgICBfY29tZXRkLl9pbmZvKCdFeGNlcHRpb24gZHVyaW5nIGV4ZWN1dGlvbiBvZiB0cmFuc3BvcnQgZXhjZXB0aW9uIGhhbmRsZXInLCB4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU2VuZHMgdGhlIGluaXRpYWwgaGFuZHNoYWtlIG1lc3NhZ2VcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIF9oYW5kc2hha2UoaGFuZHNoYWtlUHJvcHMsIGhhbmRzaGFrZUNhbGxiYWNrKSB7XG4gICAgICAgICAgICBpZiAoX2lzRnVuY3Rpb24oaGFuZHNoYWtlUHJvcHMpKSB7XG4gICAgICAgICAgICAgICAgaGFuZHNoYWtlQ2FsbGJhY2sgPSBoYW5kc2hha2VQcm9wcztcbiAgICAgICAgICAgICAgICBoYW5kc2hha2VQcm9wcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgX2NsaWVudElkID0gbnVsbDtcblxuICAgICAgICAgICAgX2NsZWFyU3Vic2NyaXB0aW9ucygpO1xuXG4gICAgICAgICAgICAvLyBSZXNldCB0aGUgdHJhbnNwb3J0cyBpZiB3ZSdyZSBub3QgcmV0cnlpbmcgdGhlIGhhbmRzaGFrZVxuICAgICAgICAgICAgaWYgKF9pc0Rpc2Nvbm5lY3RlZCgpKSB7XG4gICAgICAgICAgICAgICAgX3RyYW5zcG9ydHMucmVzZXQodHJ1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFJlc2V0IHRoZSBhZHZpY2UuXG4gICAgICAgICAgICBfdXBkYXRlQWR2aWNlKHt9KTtcblxuICAgICAgICAgICAgX2JhdGNoID0gMDtcblxuICAgICAgICAgICAgLy8gTWFyayB0aGUgc3RhcnQgb2YgYW4gaW50ZXJuYWwgYmF0Y2guXG4gICAgICAgICAgICAvLyBUaGlzIGlzIG5lZWRlZCBiZWNhdXNlIGhhbmRzaGFrZSBhbmQgY29ubmVjdCBhcmUgYXN5bmMuXG4gICAgICAgICAgICAvLyBJdCBtYXkgaGFwcGVuIHRoYXQgdGhlIGFwcGxpY2F0aW9uIGNhbGxzIGluaXQoKSB0aGVuIHN1YnNjcmliZSgpXG4gICAgICAgICAgICAvLyBhbmQgdGhlIHN1YnNjcmliZSBtZXNzYWdlIGlzIHNlbnQgYmVmb3JlIHRoZSBjb25uZWN0IG1lc3NhZ2UsIGlmXG4gICAgICAgICAgICAvLyB0aGUgc3Vic2NyaWJlIG1lc3NhZ2UgaXMgbm90IGhlbGQgdW50aWwgdGhlIGNvbm5lY3QgbWVzc2FnZSBpcyBzZW50LlxuICAgICAgICAgICAgLy8gU28gaGVyZSB3ZSBzdGFydCBhIGJhdGNoIHRvIGhvbGQgdGVtcG9yYXJpbHkgYW55IG1lc3NhZ2UgdW50aWxcbiAgICAgICAgICAgIC8vIHRoZSBjb25uZWN0aW9uIGlzIGZ1bGx5IGVzdGFibGlzaGVkLlxuICAgICAgICAgICAgX2ludGVybmFsQmF0Y2ggPSB0cnVlO1xuXG4gICAgICAgICAgICAvLyBTYXZlIHRoZSBwcm9wZXJ0aWVzIHByb3ZpZGVkIGJ5IHRoZSB1c2VyLCBzbyB0aGF0XG4gICAgICAgICAgICAvLyB3ZSBjYW4gcmV1c2UgdGhlbSBkdXJpbmcgYXV0b21hdGljIHJlLWhhbmRzaGFrZVxuICAgICAgICAgICAgX2hhbmRzaGFrZVByb3BzID0gaGFuZHNoYWtlUHJvcHM7XG4gICAgICAgICAgICBfaGFuZHNoYWtlQ2FsbGJhY2sgPSBoYW5kc2hha2VDYWxsYmFjaztcblxuICAgICAgICAgICAgdmFyIHZlcnNpb24gPSAnMS4wJztcblxuICAgICAgICAgICAgLy8gRmlndXJlIG91dCB0aGUgdHJhbnNwb3J0cyB0byBzZW5kIHRvIHRoZSBzZXJ2ZXJcbiAgICAgICAgICAgIHZhciB1cmwgPSBfY29tZXRkLmdldFVSTCgpO1xuICAgICAgICAgICAgdmFyIHRyYW5zcG9ydFR5cGVzID0gX3RyYW5zcG9ydHMuZmluZFRyYW5zcG9ydFR5cGVzKHZlcnNpb24sIF9jcm9zc0RvbWFpbiwgdXJsKTtcblxuICAgICAgICAgICAgdmFyIGJheWV1eE1lc3NhZ2UgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IF9uZXh0TWVzc2FnZUlkKCksXG4gICAgICAgICAgICAgICAgdmVyc2lvbjogdmVyc2lvbixcbiAgICAgICAgICAgICAgICBtaW5pbXVtVmVyc2lvbjogdmVyc2lvbixcbiAgICAgICAgICAgICAgICBjaGFubmVsOiAnL21ldGEvaGFuZHNoYWtlJyxcbiAgICAgICAgICAgICAgICBzdXBwb3J0ZWRDb25uZWN0aW9uVHlwZXM6IHRyYW5zcG9ydFR5cGVzLFxuICAgICAgICAgICAgICAgIGFkdmljZToge1xuICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiBfYWR2aWNlLnRpbWVvdXQsXG4gICAgICAgICAgICAgICAgICAgIGludGVydmFsOiBfYWR2aWNlLmludGVydmFsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIERvIG5vdCBhbGxvdyB0aGUgdXNlciB0byBvdmVycmlkZSBpbXBvcnRhbnQgZmllbGRzLlxuICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBfY29tZXRkLl9taXhpbihmYWxzZSwge30sIF9oYW5kc2hha2VQcm9wcywgYmF5ZXV4TWVzc2FnZSk7XG5cbiAgICAgICAgICAgIC8vIFNhdmUgdGhlIGNhbGxiYWNrLlxuICAgICAgICAgICAgX2NvbWV0ZC5fcHV0Q2FsbGJhY2sobWVzc2FnZS5pZCwgaGFuZHNoYWtlQ2FsbGJhY2spO1xuXG4gICAgICAgICAgICAvLyBQaWNrIHVwIHRoZSBmaXJzdCBhdmFpbGFibGUgdHJhbnNwb3J0IGFzIGluaXRpYWwgdHJhbnNwb3J0XG4gICAgICAgICAgICAvLyBzaW5jZSB3ZSBkb24ndCBrbm93IGlmIHRoZSBzZXJ2ZXIgc3VwcG9ydHMgaXRcbiAgICAgICAgICAgIGlmICghX3RyYW5zcG9ydCkge1xuICAgICAgICAgICAgICAgIF90cmFuc3BvcnQgPSBfdHJhbnNwb3J0cy5uZWdvdGlhdGVUcmFuc3BvcnQodHJhbnNwb3J0VHlwZXMsIHZlcnNpb24sIF9jcm9zc0RvbWFpbiwgdXJsKTtcbiAgICAgICAgICAgICAgICBpZiAoIV90cmFuc3BvcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZhaWx1cmUgPSAnQ291bGQgbm90IGZpbmQgaW5pdGlhbCB0cmFuc3BvcnQgYW1vbmc6ICcgKyBfdHJhbnNwb3J0cy5nZXRUcmFuc3BvcnRUeXBlcygpO1xuICAgICAgICAgICAgICAgICAgICBfY29tZXRkLl93YXJuKGZhaWx1cmUpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBmYWlsdXJlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgX2NvbWV0ZC5fZGVidWcoJ0luaXRpYWwgdHJhbnNwb3J0IGlzJywgX3RyYW5zcG9ydC5nZXRUeXBlKCkpO1xuXG4gICAgICAgICAgICAvLyBXZSBzdGFydGVkIGEgYmF0Y2ggdG8gaG9sZCB0aGUgYXBwbGljYXRpb24gbWVzc2FnZXMsXG4gICAgICAgICAgICAvLyBzbyBoZXJlIHdlIG11c3QgYnlwYXNzIGl0IGFuZCBzZW5kIGltbWVkaWF0ZWx5LlxuICAgICAgICAgICAgX3NldFN0YXR1cygnaGFuZHNoYWtpbmcnKTtcbiAgICAgICAgICAgIF9jb21ldGQuX2RlYnVnKCdIYW5kc2hha2Ugc2VudCcsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgX3NlbmQoW21lc3NhZ2VdLCBmYWxzZSwgJ2hhbmRzaGFrZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gX2RlbGF5ZWRIYW5kc2hha2UoZGVsYXkpIHtcbiAgICAgICAgICAgIF9zZXRTdGF0dXMoJ2hhbmRzaGFraW5nJyk7XG5cbiAgICAgICAgICAgIC8vIFdlIHdpbGwgY2FsbCBfaGFuZHNoYWtlKCkgd2hpY2ggd2lsbCByZXNldCBfY2xpZW50SWQsIGJ1dCB3ZSB3YW50IHRvIGF2b2lkXG4gICAgICAgICAgICAvLyB0aGF0IGJldHdlZW4gdGhlIGVuZCBvZiB0aGlzIG1ldGhvZCBhbmQgdGhlIGNhbGwgdG8gX2hhbmRzaGFrZSgpIHNvbWVvbmUgbWF5XG4gICAgICAgICAgICAvLyBjYWxsIHB1Ymxpc2goKSAob3Igb3RoZXIgbWV0aG9kcyB0aGF0IGNhbGwgX3F1ZXVlU2VuZCgpKS5cbiAgICAgICAgICAgIF9pbnRlcm5hbEJhdGNoID0gdHJ1ZTtcblxuICAgICAgICAgICAgX2RlbGF5ZWRTZW5kKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9oYW5kc2hha2UoX2hhbmRzaGFrZVByb3BzLCBfaGFuZHNoYWtlQ2FsbGJhY2spO1xuICAgICAgICAgICAgfSwgZGVsYXkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gX25vdGlmeUNhbGxiYWNrKGNhbGxiYWNrLCBtZXNzYWdlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoX2NvbWV0ZCwgbWVzc2FnZSk7XG4gICAgICAgICAgICB9IGNhdGNoICh4KSB7XG4gICAgICAgICAgICAgICAgdmFyIGhhbmRsZXIgPSBfY29tZXRkLm9uQ2FsbGJhY2tFeGNlcHRpb247XG4gICAgICAgICAgICAgICAgaWYgKF9pc0Z1bmN0aW9uKGhhbmRsZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIF9jb21ldGQuX2RlYnVnKCdJbnZva2luZyBjYWxsYmFjayBleGNlcHRpb24gaGFuZGxlcicsIHgpO1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlci5jYWxsKF9jb21ldGQsIHgsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoICh4eCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NvbWV0ZC5faW5mbygnRXhjZXB0aW9uIGR1cmluZyBleGVjdXRpb24gb2YgY2FsbGJhY2sgZXhjZXB0aW9uIGhhbmRsZXInLCB4eCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfY29tZXRkLl9pbmZvKCdFeGNlcHRpb24gZHVyaW5nIGV4ZWN1dGlvbiBvZiBtZXNzYWdlIGNhbGxiYWNrJywgeCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fZ2V0Q2FsbGJhY2sgPSBmdW5jdGlvbihtZXNzYWdlSWQpIHtcbiAgICAgICAgICAgIHJldHVybiBfY2FsbGJhY2tzW21lc3NhZ2VJZF07XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5fcHV0Q2FsbGJhY2sgPSBmdW5jdGlvbihtZXNzYWdlSWQsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5fZ2V0Q2FsbGJhY2sobWVzc2FnZUlkKTtcbiAgICAgICAgICAgIGlmIChfaXNGdW5jdGlvbihjYWxsYmFjaykpIHtcbiAgICAgICAgICAgICAgICBfY2FsbGJhY2tzW21lc3NhZ2VJZF0gPSBjYWxsYmFjaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gX2hhbmRsZUNhbGxiYWNrKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IF9jb21ldGQuX2dldENhbGxiYWNrKFttZXNzYWdlLmlkXSk7XG4gICAgICAgICAgICBpZiAoX2lzRnVuY3Rpb24oY2FsbGJhY2spKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIF9jYWxsYmFja3NbbWVzc2FnZS5pZF07XG4gICAgICAgICAgICAgICAgX25vdGlmeUNhbGxiYWNrKGNhbGxiYWNrLCBtZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIF9oYW5kbGVSZW1vdGVDYWxsKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHZhciBjb250ZXh0ID0gX3JlbW90ZUNhbGxzW21lc3NhZ2UuaWRdO1xuICAgICAgICAgICAgZGVsZXRlIF9yZW1vdGVDYWxsc1ttZXNzYWdlLmlkXTtcbiAgICAgICAgICAgIGlmIChjb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgX2NvbWV0ZC5fZGVidWcoJ0hhbmRsaW5nIHJlbW90ZSBjYWxsIHJlc3BvbnNlIGZvcicsIG1lc3NhZ2UsICd3aXRoIGNvbnRleHQnLCBjb250ZXh0KTtcblxuICAgICAgICAgICAgICAgIC8vIENsZWFyIHRoZSB0aW1lb3V0LCBpZiBwcmVzZW50LlxuICAgICAgICAgICAgICAgIHZhciB0aW1lb3V0ID0gY29udGV4dC50aW1lb3V0O1xuICAgICAgICAgICAgICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICAgICAgICAgICAgICAgIF9jb21ldGQuY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IGNvbnRleHQuY2FsbGJhY2s7XG4gICAgICAgICAgICAgICAgaWYgKF9pc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xuICAgICAgICAgICAgICAgICAgICBfbm90aWZ5Q2FsbGJhY2soY2FsbGJhY2ssIG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm9uVHJhbnNwb3J0RmFpbHVyZSA9IGZ1bmN0aW9uKG1lc3NhZ2UsIGZhaWx1cmVJbmZvLCBmYWlsdXJlSGFuZGxlcikge1xuICAgICAgICAgICAgdGhpcy5fZGVidWcoJ1RyYW5zcG9ydCBmYWlsdXJlJywgZmFpbHVyZUluZm8sICdmb3InLCBtZXNzYWdlKTtcblxuICAgICAgICAgICAgdmFyIHRyYW5zcG9ydHMgPSB0aGlzLmdldFRyYW5zcG9ydFJlZ2lzdHJ5KCk7XG4gICAgICAgICAgICB2YXIgdXJsID0gdGhpcy5nZXRVUkwoKTtcbiAgICAgICAgICAgIHZhciBjcm9zc0RvbWFpbiA9IHRoaXMuX2lzQ3Jvc3NEb21haW4oX3NwbGl0VVJMKHVybClbMl0pO1xuICAgICAgICAgICAgdmFyIHZlcnNpb24gPSAnMS4wJztcbiAgICAgICAgICAgIHZhciB0cmFuc3BvcnRUeXBlcyA9IHRyYW5zcG9ydHMuZmluZFRyYW5zcG9ydFR5cGVzKHZlcnNpb24sIGNyb3NzRG9tYWluLCB1cmwpO1xuXG4gICAgICAgICAgICBpZiAoZmFpbHVyZUluZm8uYWN0aW9uID09PSAnbm9uZScpIHtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5jaGFubmVsID09PSAnL21ldGEvaGFuZHNoYWtlJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZhaWx1cmVJbmZvLnRyYW5zcG9ydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZhaWx1cmUgPSAnQ291bGQgbm90IG5lZ290aWF0ZSB0cmFuc3BvcnQsIGNsaWVudD1bJyArIHRyYW5zcG9ydFR5cGVzICsgJ10sIHNlcnZlcj1bJyArIG1lc3NhZ2Uuc3VwcG9ydGVkQ29ubmVjdGlvblR5cGVzICsgJ10nO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fd2FybihmYWlsdXJlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9ub3RpZnlUcmFuc3BvcnRFeGNlcHRpb24oX3RyYW5zcG9ydC5nZXRUeXBlKCksIG51bGwsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb246IGZhaWx1cmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvblR5cGU6IF90cmFuc3BvcnQuZ2V0VHlwZSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zcG9ydDogX3RyYW5zcG9ydFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZhaWx1cmVJbmZvLmRlbGF5ID0gdGhpcy5nZXRCYWNrb2ZmUGVyaW9kKCk7XG4gICAgICAgICAgICAgICAgLy8gRGlmZmVyZW50IGxvZ2ljIGRlcGVuZGluZyBvbiB3aGV0aGVyIHdlIGFyZSBoYW5kc2hha2luZyBvciBjb25uZWN0aW5nLlxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmNoYW5uZWwgPT09ICcvbWV0YS9oYW5kc2hha2UnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZmFpbHVyZUluZm8udHJhbnNwb3J0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgdHJhbnNwb3J0IGlzIGludmFsaWQsIHRyeSB0byBuZWdvdGlhdGUgYWdhaW4uXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2xkVHJhbnNwb3J0VHlwZSA9IF90cmFuc3BvcnQgPyBfdHJhbnNwb3J0LmdldFR5cGUoKSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3VHJhbnNwb3J0ID0gdHJhbnNwb3J0cy5uZWdvdGlhdGVUcmFuc3BvcnQodHJhbnNwb3J0VHlwZXMsIHZlcnNpb24sIGNyb3NzRG9tYWluLCB1cmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXdUcmFuc3BvcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl93YXJuKCdDb3VsZCBub3QgbmVnb3RpYXRlIHRyYW5zcG9ydCwgY2xpZW50PVsnICsgdHJhbnNwb3J0VHlwZXMgKyAnXScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9ub3RpZnlUcmFuc3BvcnRFeGNlcHRpb24ob2xkVHJhbnNwb3J0VHlwZSwgbnVsbCwgbWVzc2FnZS5mYWlsdXJlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWlsdXJlSW5mby5hY3Rpb24gPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdUcmFuc3BvcnRUeXBlID0gbmV3VHJhbnNwb3J0LmdldFR5cGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9kZWJ1ZygnVHJhbnNwb3J0Jywgb2xkVHJhbnNwb3J0VHlwZSwgJy0+JywgbmV3VHJhbnNwb3J0VHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX25vdGlmeVRyYW5zcG9ydEV4Y2VwdGlvbihvbGRUcmFuc3BvcnRUeXBlLCBuZXdUcmFuc3BvcnRUeXBlLCBtZXNzYWdlLmZhaWx1cmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhaWx1cmVJbmZvLmFjdGlvbiA9ICdoYW5kc2hha2UnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhaWx1cmVJbmZvLnRyYW5zcG9ydCA9IG5ld1RyYW5zcG9ydDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChmYWlsdXJlSW5mby5hY3Rpb24gIT09ICdub25lJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmNyZWFzZUJhY2tvZmZQZXJpb2QoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoX3VuY29ubmVjdFRpbWUgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF91bmNvbm5lY3RUaW1lID0gbm93O1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGZhaWx1cmVJbmZvLmFjdGlvbiA9PT0gJ3JldHJ5Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmFpbHVyZUluZm8uZGVsYXkgPSB0aGlzLmluY3JlYXNlQmFja29mZlBlcmlvZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgd2hldGhlciB3ZSBtYXkgc3dpdGNoIHRvIGhhbmRzaGFraW5nLlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1heEludGVydmFsID0gX2FkdmljZS5tYXhJbnRlcnZhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXhJbnRlcnZhbCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXhwaXJhdGlvbiA9IF9hZHZpY2UudGltZW91dCArIF9hZHZpY2UuaW50ZXJ2YWwgKyBtYXhJbnRlcnZhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdW5jb25uZWN0ZWQgPSBub3cgLSBfdW5jb25uZWN0VGltZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodW5jb25uZWN0ZWQgKyBfYmFja29mZiA+IGV4cGlyYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFpbHVyZUluZm8uYWN0aW9uID0gJ2hhbmRzaGFrZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGZhaWx1cmVJbmZvLmFjdGlvbiA9PT0gJ2hhbmRzaGFrZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhaWx1cmVJbmZvLmRlbGF5ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zcG9ydHMucmVzZXQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNldEJhY2tvZmZQZXJpb2QoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZmFpbHVyZUhhbmRsZXIuY2FsbChfY29tZXRkLCBmYWlsdXJlSW5mbyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gX2hhbmRsZVRyYW5zcG9ydEZhaWx1cmUoZmFpbHVyZUluZm8pIHtcbiAgICAgICAgICAgIF9jb21ldGQuX2RlYnVnKCdUcmFuc3BvcnQgZmFpbHVyZSBoYW5kbGluZycsIGZhaWx1cmVJbmZvKTtcblxuICAgICAgICAgICAgaWYgKGZhaWx1cmVJbmZvLnRyYW5zcG9ydCkge1xuICAgICAgICAgICAgICAgIF90cmFuc3BvcnQgPSBmYWlsdXJlSW5mby50cmFuc3BvcnQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChmYWlsdXJlSW5mby51cmwpIHtcbiAgICAgICAgICAgICAgICBfdHJhbnNwb3J0LnNldFVSTChmYWlsdXJlSW5mby51cmwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgYWN0aW9uID0gZmFpbHVyZUluZm8uYWN0aW9uO1xuICAgICAgICAgICAgdmFyIGRlbGF5ID0gZmFpbHVyZUluZm8uZGVsYXkgfHwgMDtcbiAgICAgICAgICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnaGFuZHNoYWtlJzpcbiAgICAgICAgICAgICAgICAgICAgX2RlbGF5ZWRIYW5kc2hha2UoZGVsYXkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdyZXRyeSc6XG4gICAgICAgICAgICAgICAgICAgIF9kZWxheWVkQ29ubmVjdChkZWxheSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ25vbmUnOlxuICAgICAgICAgICAgICAgICAgICBfZGlzY29ubmVjdCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgJ1Vua25vd24gYWN0aW9uICcgKyBhY3Rpb247XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBfZmFpbEhhbmRzaGFrZShtZXNzYWdlLCBmYWlsdXJlSW5mbykge1xuICAgICAgICAgICAgX2hhbmRsZUNhbGxiYWNrKG1lc3NhZ2UpO1xuICAgICAgICAgICAgX25vdGlmeUxpc3RlbmVycygnL21ldGEvaGFuZHNoYWtlJywgbWVzc2FnZSk7XG4gICAgICAgICAgICBfbm90aWZ5TGlzdGVuZXJzKCcvbWV0YS91bnN1Y2Nlc3NmdWwnLCBtZXNzYWdlKTtcblxuICAgICAgICAgICAgLy8gVGhlIGxpc3RlbmVycyBtYXkgaGF2ZSBkaXNjb25uZWN0ZWQuXG4gICAgICAgICAgICBpZiAoX2lzRGlzY29ubmVjdGVkKCkpIHtcbiAgICAgICAgICAgICAgICBmYWlsdXJlSW5mby5hY3Rpb24gPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIF9jb21ldGQub25UcmFuc3BvcnRGYWlsdXJlLmNhbGwoX2NvbWV0ZCwgbWVzc2FnZSwgZmFpbHVyZUluZm8sIF9oYW5kbGVUcmFuc3BvcnRGYWlsdXJlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIF9oYW5kc2hha2VSZXNwb25zZShtZXNzYWdlKSB7XG4gICAgICAgICAgICB2YXIgdXJsID0gX2NvbWV0ZC5nZXRVUkwoKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnN1Y2Nlc3NmdWwpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3Jvc3NEb21haW4gPSBfY29tZXRkLl9pc0Nyb3NzRG9tYWluKF9zcGxpdFVSTCh1cmwpWzJdKTtcbiAgICAgICAgICAgICAgICB2YXIgbmV3VHJhbnNwb3J0ID0gX3RyYW5zcG9ydHMubmVnb3RpYXRlVHJhbnNwb3J0KG1lc3NhZ2Uuc3VwcG9ydGVkQ29ubmVjdGlvblR5cGVzLCBtZXNzYWdlLnZlcnNpb24sIGNyb3NzRG9tYWluLCB1cmwpO1xuICAgICAgICAgICAgICAgIGlmIChuZXdUcmFuc3BvcnQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdWNjZXNzZnVsID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIF9mYWlsSGFuZHNoYWtlKG1lc3NhZ2UsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdXNlOiAnbmVnb3RpYXRpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnbm9uZScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc3BvcnQ6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF90cmFuc3BvcnQgIT09IG5ld1RyYW5zcG9ydCkge1xuICAgICAgICAgICAgICAgICAgICBfY29tZXRkLl9kZWJ1ZygnVHJhbnNwb3J0JywgX3RyYW5zcG9ydC5nZXRUeXBlKCksICctPicsIG5ld1RyYW5zcG9ydC5nZXRUeXBlKCkpO1xuICAgICAgICAgICAgICAgICAgICBfdHJhbnNwb3J0ID0gbmV3VHJhbnNwb3J0O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIF9jbGllbnRJZCA9IG1lc3NhZ2UuY2xpZW50SWQ7XG5cbiAgICAgICAgICAgICAgICAvLyBFbmQgdGhlIGludGVybmFsIGJhdGNoIGFuZCBhbGxvdyBoZWxkIG1lc3NhZ2VzIGZyb20gdGhlIGFwcGxpY2F0aW9uXG4gICAgICAgICAgICAgICAgLy8gdG8gZ28gdG8gdGhlIHNlcnZlciAoc2VlIF9oYW5kc2hha2UoKSB3aGVyZSB3ZSBzdGFydCB0aGUgaW50ZXJuYWwgYmF0Y2gpLlxuICAgICAgICAgICAgICAgIF9pbnRlcm5hbEJhdGNoID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgX2ZsdXNoQmF0Y2goKTtcblxuICAgICAgICAgICAgICAgIC8vIEhlcmUgdGhlIG5ldyB0cmFuc3BvcnQgaXMgaW4gcGxhY2UsIGFzIHdlbGwgYXMgdGhlIGNsaWVudElkLCBzb1xuICAgICAgICAgICAgICAgIC8vIHRoZSBsaXN0ZW5lcnMgY2FuIHBlcmZvcm0gYSBwdWJsaXNoKCkgaWYgdGhleSB3YW50LlxuICAgICAgICAgICAgICAgIC8vIE5vdGlmeSB0aGUgbGlzdGVuZXJzIGJlZm9yZSB0aGUgY29ubmVjdCBiZWxvdy5cbiAgICAgICAgICAgICAgICBtZXNzYWdlLnJlZXN0YWJsaXNoID0gX3JlZXN0YWJsaXNoO1xuICAgICAgICAgICAgICAgIF9yZWVzdGFibGlzaCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICBfaGFuZGxlQ2FsbGJhY2sobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgX25vdGlmeUxpc3RlbmVycygnL21ldGEvaGFuZHNoYWtlJywgbWVzc2FnZSk7XG5cbiAgICAgICAgICAgICAgICBfaGFuZHNoYWtlTWVzc2FnZXMgPSBtZXNzYWdlWyd4LW1lc3NhZ2VzJ10gfHwgMDtcblxuICAgICAgICAgICAgICAgIHZhciBhY3Rpb24gPSBfaXNEaXNjb25uZWN0ZWQoKSA/ICdub25lJyA6IF9hZHZpY2UucmVjb25uZWN0IHx8ICdyZXRyeSc7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncmV0cnknOlxuICAgICAgICAgICAgICAgICAgICAgICAgX3Jlc2V0QmFja29mZigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9oYW5kc2hha2VNZXNzYWdlcyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kZWxheWVkQ29ubmVjdCgwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbWV0ZC5fZGVidWcoJ1Byb2Nlc3NpbmcnLCBfaGFuZHNoYWtlTWVzc2FnZXMsICdoYW5kc2hha2UtZGVsaXZlcmVkIG1lc3NhZ2VzJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbm9uZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBfZGlzY29ubmVjdCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgJ1VucmVjb2duaXplZCBhZHZpY2UgYWN0aW9uICcgKyBhY3Rpb247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBfZmFpbEhhbmRzaGFrZShtZXNzYWdlLCB7XG4gICAgICAgICAgICAgICAgICAgIGNhdXNlOiAndW5zdWNjZXNzZnVsJyxcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBfYWR2aWNlLnJlY29ubmVjdCB8fCAnaGFuZHNoYWtlJyxcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNwb3J0OiBfdHJhbnNwb3J0XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBfaGFuZHNoYWtlRmFpbHVyZShtZXNzYWdlKSB7XG4gICAgICAgICAgICBfZmFpbEhhbmRzaGFrZShtZXNzYWdlLCB7XG4gICAgICAgICAgICAgICAgY2F1c2U6ICdmYWlsdXJlJyxcbiAgICAgICAgICAgICAgICBhY3Rpb246ICdoYW5kc2hha2UnLFxuICAgICAgICAgICAgICAgIHRyYW5zcG9ydDogbnVsbFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBfbWF0Y2hNZXRhQ29ubmVjdChjb25uZWN0KSB7XG4gICAgICAgICAgICBpZiAoX3N0YXR1cyA9PT0gJ2Rpc2Nvbm5lY3RlZCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChfbWV0YUNvbm5lY3QgJiYgX21ldGFDb25uZWN0LmlkID09PSBjb25uZWN0LmlkKSB7XG4gICAgICAgICAgICAgICAgX21ldGFDb25uZWN0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIF9mYWlsQ29ubmVjdChtZXNzYWdlLCBmYWlsdXJlSW5mbykge1xuICAgICAgICAgICAgLy8gTm90aWZ5IHRoZSBsaXN0ZW5lcnMgYWZ0ZXIgdGhlIHN0YXR1cyBjaGFuZ2UgYnV0IGJlZm9yZSB0aGUgbmV4dCBhY3Rpb24uXG4gICAgICAgICAgICBfbm90aWZ5TGlzdGVuZXJzKCcvbWV0YS9jb25uZWN0JywgbWVzc2FnZSk7XG4gICAgICAgICAgICBfbm90aWZ5TGlzdGVuZXJzKCcvbWV0YS91bnN1Y2Nlc3NmdWwnLCBtZXNzYWdlKTtcblxuICAgICAgICAgICAgLy8gVGhlIGxpc3RlbmVycyBtYXkgaGF2ZSBkaXNjb25uZWN0ZWQuXG4gICAgICAgICAgICBpZiAoX2lzRGlzY29ubmVjdGVkKCkpIHtcbiAgICAgICAgICAgICAgICBmYWlsdXJlSW5mby5hY3Rpb24gPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIF9jb21ldGQub25UcmFuc3BvcnRGYWlsdXJlLmNhbGwoX2NvbWV0ZCwgbWVzc2FnZSwgZmFpbHVyZUluZm8sIF9oYW5kbGVUcmFuc3BvcnRGYWlsdXJlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIF9jb25uZWN0UmVzcG9uc2UobWVzc2FnZSkge1xuICAgICAgICAgICAgaWYgKF9tYXRjaE1ldGFDb25uZWN0KG1lc3NhZ2UpKSB7XG4gICAgICAgICAgICAgICAgX2Nvbm5lY3RlZCA9IG1lc3NhZ2Uuc3VjY2Vzc2Z1bDtcbiAgICAgICAgICAgICAgICBpZiAoX2Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICBfbm90aWZ5TGlzdGVuZXJzKCcvbWV0YS9jb25uZWN0JywgbWVzc2FnZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gTm9ybWFsbHksIHRoZSBhZHZpY2Ugd2lsbCBzYXkgXCJyZWNvbm5lY3Q6ICdyZXRyeScsIGludGVydmFsOiAwXCJcbiAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRoZSBzZXJ2ZXIgd2lsbCBob2xkIHRoZSByZXF1ZXN0LCBzbyB3aGVuIGEgcmVzcG9uc2UgcmV0dXJuc1xuICAgICAgICAgICAgICAgICAgICAvLyB3ZSBpbW1lZGlhdGVseSBjYWxsIHRoZSBzZXJ2ZXIgYWdhaW4gKGxvbmcgcG9sbGluZykuXG4gICAgICAgICAgICAgICAgICAgIC8vIExpc3RlbmVycyBjYW4gY2FsbCBkaXNjb25uZWN0KCksIHNvIGNoZWNrIHRoZSBzdGF0ZSBhZnRlciB0aGV5IHJ1bi5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGlvbiA9IF9pc0Rpc2Nvbm5lY3RlZCgpID8gJ25vbmUnIDogX2FkdmljZS5yZWNvbm5lY3QgfHwgJ3JldHJ5JztcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JldHJ5JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVzZXRCYWNrb2ZmKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2RlbGF5ZWRDb25uZWN0KF9iYWNrb2ZmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ25vbmUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kaXNjb25uZWN0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgJ1VucmVjb2duaXplZCBhZHZpY2UgYWN0aW9uICcgKyBhY3Rpb247XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfZmFpbENvbm5lY3QobWVzc2FnZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2F1c2U6ICd1bnN1Y2Nlc3NmdWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBfYWR2aWNlLnJlY29ubmVjdCB8fCAncmV0cnknLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNwb3J0OiBfdHJhbnNwb3J0XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgX2NvbWV0ZC5fZGVidWcoJ01pc21hdGNoZWQgL21ldGEvY29ubmVjdCByZXBseScsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gX2Nvbm5lY3RGYWlsdXJlKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGlmIChfbWF0Y2hNZXRhQ29ubmVjdChtZXNzYWdlKSkge1xuICAgICAgICAgICAgICAgIF9jb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBfZmFpbENvbm5lY3QobWVzc2FnZSwge1xuICAgICAgICAgICAgICAgICAgICBjYXVzZTogJ2ZhaWx1cmUnLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICdyZXRyeScsXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zcG9ydDogbnVsbFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBfY29tZXRkLl9kZWJ1ZygnTWlzbWF0Y2hlZCAvbWV0YS9jb25uZWN0IGZhaWx1cmUnLCBtZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIF9mYWlsRGlzY29ubmVjdChtZXNzYWdlKSB7XG4gICAgICAgICAgICBfZGlzY29ubmVjdCh0cnVlKTtcbiAgICAgICAgICAgIF9oYW5kbGVDYWxsYmFjayhtZXNzYWdlKTtcbiAgICAgICAgICAgIF9ub3RpZnlMaXN0ZW5lcnMoJy9tZXRhL2Rpc2Nvbm5lY3QnLCBtZXNzYWdlKTtcbiAgICAgICAgICAgIF9ub3RpZnlMaXN0ZW5lcnMoJy9tZXRhL3Vuc3VjY2Vzc2Z1bCcsIG1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gX2Rpc2Nvbm5lY3RSZXNwb25zZShtZXNzYWdlKSB7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zdWNjZXNzZnVsKSB7XG4gICAgICAgICAgICAgICAgLy8gV2FpdCBmb3IgdGhlIC9tZXRhL2Nvbm5lY3QgdG8gYXJyaXZlLlxuICAgICAgICAgICAgICAgIF9kaXNjb25uZWN0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICBfaGFuZGxlQ2FsbGJhY2sobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgX25vdGlmeUxpc3RlbmVycygnL21ldGEvZGlzY29ubmVjdCcsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBfZmFpbERpc2Nvbm5lY3QobWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBfZGlzY29ubmVjdEZhaWx1cmUobWVzc2FnZSkge1xuICAgICAgICAgICAgX2ZhaWxEaXNjb25uZWN0KG1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gX2ZhaWxTdWJzY3JpYmUobWVzc2FnZSkge1xuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbnMgPSBfbGlzdGVuZXJzW21lc3NhZ2Uuc3Vic2NyaXB0aW9uXTtcbiAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaWQgaW4gc3Vic2NyaXB0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9ucy5oYXNPd25Qcm9wZXJ0eShpZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBzdWJzY3JpcHRpb25zW2lkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb24gJiYgIXN1YnNjcmlwdGlvbi5saXN0ZW5lcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBzdWJzY3JpcHRpb25zW2lkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29tZXRkLl9kZWJ1ZygnUmVtb3ZlZCBmYWlsZWQgc3Vic2NyaXB0aW9uJywgc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF9oYW5kbGVDYWxsYmFjayhtZXNzYWdlKTtcbiAgICAgICAgICAgIF9ub3RpZnlMaXN0ZW5lcnMoJy9tZXRhL3N1YnNjcmliZScsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgX25vdGlmeUxpc3RlbmVycygnL21ldGEvdW5zdWNjZXNzZnVsJywgbWVzc2FnZSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBfc3Vic2NyaWJlUmVzcG9uc2UobWVzc2FnZSkge1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3VjY2Vzc2Z1bCkge1xuICAgICAgICAgICAgICAgIF9oYW5kbGVDYWxsYmFjayhtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICBfbm90aWZ5TGlzdGVuZXJzKCcvbWV0YS9zdWJzY3JpYmUnLCBtZXNzYWdlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgX2ZhaWxTdWJzY3JpYmUobWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBfc3Vic2NyaWJlRmFpbHVyZShtZXNzYWdlKSB7XG4gICAgICAgICAgICBfZmFpbFN1YnNjcmliZShtZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIF9mYWlsVW5zdWJzY3JpYmUobWVzc2FnZSkge1xuICAgICAgICAgICAgX2hhbmRsZUNhbGxiYWNrKG1lc3NhZ2UpO1xuICAgICAgICAgICAgX25vdGlmeUxpc3RlbmVycygnL21ldGEvdW5zdWJzY3JpYmUnLCBtZXNzYWdlKTtcbiAgICAgICAgICAgIF9ub3RpZnlMaXN0ZW5lcnMoJy9tZXRhL3Vuc3VjY2Vzc2Z1bCcsIG1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gX3Vuc3Vic2NyaWJlUmVzcG9uc2UobWVzc2FnZSkge1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3VjY2Vzc2Z1bCkge1xuICAgICAgICAgICAgICAgIF9oYW5kbGVDYWxsYmFjayhtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICBfbm90aWZ5TGlzdGVuZXJzKCcvbWV0YS91bnN1YnNjcmliZScsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBfZmFpbFVuc3Vic2NyaWJlKG1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gX3Vuc3Vic2NyaWJlRmFpbHVyZShtZXNzYWdlKSB7XG4gICAgICAgICAgICBfZmFpbFVuc3Vic2NyaWJlKG1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gX2ZhaWxNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGlmICghX2hhbmRsZVJlbW90ZUNhbGwobWVzc2FnZSkpIHtcbiAgICAgICAgICAgICAgICBfaGFuZGxlQ2FsbGJhY2sobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgX25vdGlmeUxpc3RlbmVycygnL21ldGEvcHVibGlzaCcsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIF9ub3RpZnlMaXN0ZW5lcnMoJy9tZXRhL3Vuc3VjY2Vzc2Z1bCcsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gX21lc3NhZ2VSZXNwb25zZShtZXNzYWdlKSB7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5kYXRhICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIV9oYW5kbGVSZW1vdGVDYWxsKG1lc3NhZ2UpKSB7XG4gICAgICAgICAgICAgICAgICAgIF9ub3RpZnlMaXN0ZW5lcnMobWVzc2FnZS5jaGFubmVsLCBtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9oYW5kc2hha2VNZXNzYWdlcyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC0tX2hhbmRzaGFrZU1lc3NhZ2VzO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9oYW5kc2hha2VNZXNzYWdlcyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb21ldGQuX2RlYnVnKCdQcm9jZXNzZWQgbGFzdCBoYW5kc2hha2UtZGVsaXZlcmVkIG1lc3NhZ2UnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZGVsYXllZENvbm5lY3QoMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnN1Y2Nlc3NmdWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBfY29tZXRkLl93YXJuKCdVbmtub3duIEJheWV1eCBNZXNzYWdlJywgbWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3VjY2Vzc2Z1bCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2hhbmRsZUNhbGxiYWNrKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX25vdGlmeUxpc3RlbmVycygnL21ldGEvcHVibGlzaCcsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2ZhaWxNZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gX21lc3NhZ2VGYWlsdXJlKGZhaWx1cmUpIHtcbiAgICAgICAgICAgIF9mYWlsTWVzc2FnZShmYWlsdXJlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIF9yZWNlaXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIF91bmNvbm5lY3RUaW1lID0gMDtcblxuICAgICAgICAgICAgbWVzc2FnZSA9IF9hcHBseUluY29taW5nRXh0ZW5zaW9ucyhtZXNzYWdlKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlID09PSB1bmRlZmluZWQgfHwgbWVzc2FnZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgX3VwZGF0ZUFkdmljZShtZXNzYWdlLmFkdmljZSk7XG5cbiAgICAgICAgICAgIHZhciBjaGFubmVsID0gbWVzc2FnZS5jaGFubmVsO1xuICAgICAgICAgICAgc3dpdGNoIChjaGFubmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnL21ldGEvaGFuZHNoYWtlJzpcbiAgICAgICAgICAgICAgICAgICAgX2hhbmRzaGFrZVJlc3BvbnNlKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICcvbWV0YS9jb25uZWN0JzpcbiAgICAgICAgICAgICAgICAgICAgX2Nvbm5lY3RSZXNwb25zZShtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnL21ldGEvZGlzY29ubmVjdCc6XG4gICAgICAgICAgICAgICAgICAgIF9kaXNjb25uZWN0UmVzcG9uc2UobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJy9tZXRhL3N1YnNjcmliZSc6XG4gICAgICAgICAgICAgICAgICAgIF9zdWJzY3JpYmVSZXNwb25zZShtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnL21ldGEvdW5zdWJzY3JpYmUnOlxuICAgICAgICAgICAgICAgICAgICBfdW5zdWJzY3JpYmVSZXNwb25zZShtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgX21lc3NhZ2VSZXNwb25zZShtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVjZWl2ZXMgYSBtZXNzYWdlLlxuICAgICAgICAgKiBUaGlzIG1ldGhvZCBpcyBleHBvc2VkIGFzIGEgcHVibGljIHNvIHRoYXQgZXh0ZW5zaW9ucyBtYXkgaW5qZWN0XG4gICAgICAgICAqIG1lc3NhZ2VzIHNpbXVsYXRpbmcgdGhhdCB0aGV5IGhhZCBiZWVuIHJlY2VpdmVkLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZWNlaXZlID0gX3JlY2VpdmU7XG5cbiAgICAgICAgX2hhbmRsZU1lc3NhZ2VzID0gZnVuY3Rpb24ocmN2ZE1lc3NhZ2VzKSB7XG4gICAgICAgICAgICBfY29tZXRkLl9kZWJ1ZygnUmVjZWl2ZWQnLCByY3ZkTWVzc2FnZXMpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJjdmRNZXNzYWdlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gcmN2ZE1lc3NhZ2VzW2ldO1xuICAgICAgICAgICAgICAgIF9yZWNlaXZlKG1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIF9oYW5kbGVGYWlsdXJlID0gZnVuY3Rpb24oY29uZHVpdCwgbWVzc2FnZXMsIGZhaWx1cmUpIHtcbiAgICAgICAgICAgIF9jb21ldGQuX2RlYnVnKCdoYW5kbGVGYWlsdXJlJywgY29uZHVpdCwgbWVzc2FnZXMsIGZhaWx1cmUpO1xuXG4gICAgICAgICAgICBmYWlsdXJlLnRyYW5zcG9ydCA9IGNvbmR1aXQ7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lc3NhZ2VzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBtZXNzYWdlc1tpXTtcbiAgICAgICAgICAgICAgICB2YXIgZmFpbHVyZU1lc3NhZ2UgPSB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBtZXNzYWdlLmlkLFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzZnVsOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY2hhbm5lbDogbWVzc2FnZS5jaGFubmVsLFxuICAgICAgICAgICAgICAgICAgICBmYWlsdXJlOiBmYWlsdXJlXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBmYWlsdXJlLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAobWVzc2FnZS5jaGFubmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJy9tZXRhL2hhbmRzaGFrZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBfaGFuZHNoYWtlRmFpbHVyZShmYWlsdXJlTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnL21ldGEvY29ubmVjdCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBfY29ubmVjdEZhaWx1cmUoZmFpbHVyZU1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJy9tZXRhL2Rpc2Nvbm5lY3QnOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Rpc2Nvbm5lY3RGYWlsdXJlKGZhaWx1cmVNZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICcvbWV0YS9zdWJzY3JpYmUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgZmFpbHVyZU1lc3NhZ2Uuc3Vic2NyaXB0aW9uID0gbWVzc2FnZS5zdWJzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICBfc3Vic2NyaWJlRmFpbHVyZShmYWlsdXJlTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnL21ldGEvdW5zdWJzY3JpYmUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgZmFpbHVyZU1lc3NhZ2Uuc3Vic2NyaXB0aW9uID0gbWVzc2FnZS5zdWJzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICBfdW5zdWJzY3JpYmVGYWlsdXJlKGZhaWx1cmVNZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgX21lc3NhZ2VGYWlsdXJlKGZhaWx1cmVNZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBfaGFzU3Vic2NyaXB0aW9ucyhjaGFubmVsKSB7XG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9ucyA9IF9saXN0ZW5lcnNbY2hhbm5lbF07XG4gICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9ucykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGlkIGluIHN1YnNjcmlwdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbnMuaGFzT3duUHJvcGVydHkoaWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uc1tpZF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIF9yZXNvbHZlU2NvcGVkQ2FsbGJhY2soc2NvcGUsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICB2YXIgZGVsZWdhdGUgPSB7XG4gICAgICAgICAgICAgICAgc2NvcGU6IHNjb3BlLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogY2FsbGJhY2tcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoX2lzRnVuY3Rpb24oc2NvcGUpKSB7XG4gICAgICAgICAgICAgICAgZGVsZWdhdGUuc2NvcGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgZGVsZWdhdGUubWV0aG9kID0gc2NvcGU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChfaXNTdHJpbmcoY2FsbGJhY2spKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghc2NvcGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93ICdJbnZhbGlkIHNjb3BlICcgKyBzY29wZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkZWxlZ2F0ZS5tZXRob2QgPSBzY29wZVtjYWxsYmFja107XG4gICAgICAgICAgICAgICAgICAgIGlmICghX2lzRnVuY3Rpb24oZGVsZWdhdGUubWV0aG9kKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgJ0ludmFsaWQgY2FsbGJhY2sgJyArIGNhbGxiYWNrICsgJyBmb3Igc2NvcGUgJyArIHNjb3BlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghX2lzRnVuY3Rpb24oY2FsbGJhY2spKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93ICdJbnZhbGlkIGNhbGxiYWNrICcgKyBjYWxsYmFjaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZGVsZWdhdGU7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBfYWRkTGlzdGVuZXIoY2hhbm5lbCwgc2NvcGUsIGNhbGxiYWNrLCBpc0xpc3RlbmVyKSB7XG4gICAgICAgICAgICAvLyBUaGUgZGF0YSBzdHJ1Y3R1cmUgaXMgYSBtYXA8Y2hhbm5lbCwgc3Vic2NyaXB0aW9uW10+LCB3aGVyZSBlYWNoIHN1YnNjcmlwdGlvblxuICAgICAgICAgICAgLy8gaG9sZHMgdGhlIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCBhbmQgaXRzIHNjb3BlLlxuXG4gICAgICAgICAgICB2YXIgZGVsZWdhdGUgPSBfcmVzb2x2ZVNjb3BlZENhbGxiYWNrKHNjb3BlLCBjYWxsYmFjayk7XG4gICAgICAgICAgICBfY29tZXRkLl9kZWJ1ZygnQWRkaW5nJywgaXNMaXN0ZW5lciA/ICdsaXN0ZW5lcicgOiAnc3Vic2NyaXB0aW9uJywgJ29uJywgY2hhbm5lbCwgJ3dpdGggc2NvcGUnLCBkZWxlZ2F0ZS5zY29wZSwgJ2FuZCBjYWxsYmFjaycsIGRlbGVnYXRlLm1ldGhvZCk7XG5cbiAgICAgICAgICAgIHZhciBpZCA9ICsrX2xpc3RlbmVySWQ7XG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0ge1xuICAgICAgICAgICAgICAgIGlkOiBpZCxcbiAgICAgICAgICAgICAgICBjaGFubmVsOiBjaGFubmVsLFxuICAgICAgICAgICAgICAgIHNjb3BlOiBkZWxlZ2F0ZS5zY29wZSxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogZGVsZWdhdGUubWV0aG9kLFxuICAgICAgICAgICAgICAgIGxpc3RlbmVyOiBpc0xpc3RlbmVyXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9ucyA9IF9saXN0ZW5lcnNbY2hhbm5lbF07XG4gICAgICAgICAgICBpZiAoIXN1YnNjcmlwdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25zID0ge307XG4gICAgICAgICAgICAgICAgX2xpc3RlbmVyc1tjaGFubmVsXSA9IHN1YnNjcmlwdGlvbnM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbnNbaWRdID0gc3Vic2NyaXB0aW9uO1xuXG4gICAgICAgICAgICBfY29tZXRkLl9kZWJ1ZygnQWRkZWQnLCBpc0xpc3RlbmVyID8gJ2xpc3RlbmVyJyA6ICdzdWJzY3JpcHRpb24nLCBzdWJzY3JpcHRpb24pO1xuXG4gICAgICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gUFVCTElDIEFQSVxuICAgICAgICAvL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZWdpc3RlcnMgdGhlIGdpdmVuIHRyYW5zcG9ydCB1bmRlciB0aGUgZ2l2ZW4gdHJhbnNwb3J0IHR5cGUuXG4gICAgICAgICAqIFRoZSBvcHRpb25hbCBpbmRleCBwYXJhbWV0ZXIgc3BlY2lmaWVzIHRoZSBcInByaW9yaXR5XCIgYXQgd2hpY2ggdGhlXG4gICAgICAgICAqIHRyYW5zcG9ydCBpcyByZWdpc3RlcmVkICh3aGVyZSAwIGlzIHRoZSBtYXggcHJpb3JpdHkpLlxuICAgICAgICAgKiBJZiBhIHRyYW5zcG9ydCB3aXRoIHRoZSBzYW1lIHR5cGUgaXMgYWxyZWFkeSByZWdpc3RlcmVkLCB0aGlzIGZ1bmN0aW9uXG4gICAgICAgICAqIGRvZXMgbm90aGluZyBhbmQgcmV0dXJucyBmYWxzZS5cbiAgICAgICAgICogQHBhcmFtIHR5cGUgdGhlIHRyYW5zcG9ydCB0eXBlXG4gICAgICAgICAqIEBwYXJhbSB0cmFuc3BvcnQgdGhlIHRyYW5zcG9ydCBvYmplY3RcbiAgICAgICAgICogQHBhcmFtIGluZGV4IHRoZSBpbmRleCBhdCB3aGljaCB0aGlzIHRyYW5zcG9ydCBpcyB0byBiZSByZWdpc3RlcmVkXG4gICAgICAgICAqIEByZXR1cm4gdHJ1ZSBpZiB0aGUgdHJhbnNwb3J0IGhhcyBiZWVuIHJlZ2lzdGVyZWQsIGZhbHNlIG90aGVyd2lzZVxuICAgICAgICAgKiBAc2VlICN1bnJlZ2lzdGVyVHJhbnNwb3J0KHR5cGUpXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlZ2lzdGVyVHJhbnNwb3J0ID0gZnVuY3Rpb24odHlwZSwgdHJhbnNwb3J0LCBpbmRleCkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IF90cmFuc3BvcnRzLmFkZCh0eXBlLCB0cmFuc3BvcnQsIGluZGV4KTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9kZWJ1ZygnUmVnaXN0ZXJlZCB0cmFuc3BvcnQnLCB0eXBlKTtcblxuICAgICAgICAgICAgICAgIGlmIChfaXNGdW5jdGlvbih0cmFuc3BvcnQucmVnaXN0ZXJlZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNwb3J0LnJlZ2lzdGVyZWQodHlwZSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVW5yZWdpc3RlcnMgdGhlIHRyYW5zcG9ydCB3aXRoIHRoZSBnaXZlbiB0cmFuc3BvcnQgdHlwZS5cbiAgICAgICAgICogQHBhcmFtIHR5cGUgdGhlIHRyYW5zcG9ydCB0eXBlIHRvIHVucmVnaXN0ZXJcbiAgICAgICAgICogQHJldHVybiB0aGUgdHJhbnNwb3J0IHRoYXQgaGFzIGJlZW4gdW5yZWdpc3RlcmVkLFxuICAgICAgICAgKiBvciBudWxsIGlmIG5vIHRyYW5zcG9ydCB3YXMgcHJldmlvdXNseSByZWdpc3RlcmVkIHVuZGVyIHRoZSBnaXZlbiB0cmFuc3BvcnQgdHlwZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy51bnJlZ2lzdGVyVHJhbnNwb3J0ID0gZnVuY3Rpb24odHlwZSkge1xuICAgICAgICAgICAgdmFyIHRyYW5zcG9ydCA9IF90cmFuc3BvcnRzLnJlbW92ZSh0eXBlKTtcbiAgICAgICAgICAgIGlmICh0cmFuc3BvcnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9kZWJ1ZygnVW5yZWdpc3RlcmVkIHRyYW5zcG9ydCcsIHR5cGUpO1xuXG4gICAgICAgICAgICAgICAgaWYgKF9pc0Z1bmN0aW9uKHRyYW5zcG9ydC51bnJlZ2lzdGVyZWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zcG9ydC51bnJlZ2lzdGVyZWQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJhbnNwb3J0O1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMudW5yZWdpc3RlclRyYW5zcG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIF90cmFuc3BvcnRzLmNsZWFyKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEByZXR1cm4gYW4gYXJyYXkgb2YgYWxsIHJlZ2lzdGVyZWQgdHJhbnNwb3J0IHR5cGVzXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdldFRyYW5zcG9ydFR5cGVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RyYW5zcG9ydHMuZ2V0VHJhbnNwb3J0VHlwZXMoKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmZpbmRUcmFuc3BvcnQgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RyYW5zcG9ydHMuZmluZChuYW1lKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHJldHVybnMgdGhlIFRyYW5zcG9ydFJlZ2lzdHJ5IG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5nZXRUcmFuc3BvcnRSZWdpc3RyeSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90cmFuc3BvcnRzO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb25maWd1cmVzIHRoZSBpbml0aWFsIEJheWV1eCBjb21tdW5pY2F0aW9uIHdpdGggdGhlIEJheWV1eCBzZXJ2ZXIuXG4gICAgICAgICAqIENvbmZpZ3VyYXRpb24gaXMgcGFzc2VkIHZpYSBhbiBvYmplY3QgdGhhdCBtdXN0IGNvbnRhaW4gYSBtYW5kYXRvcnkgZmllbGQgPGNvZGU+dXJsPC9jb2RlPlxuICAgICAgICAgKiBvZiB0eXBlIHN0cmluZyBjb250YWluaW5nIHRoZSBVUkwgb2YgdGhlIEJheWV1eCBzZXJ2ZXIuXG4gICAgICAgICAqIEBwYXJhbSBjb25maWd1cmF0aW9uIHRoZSBjb25maWd1cmF0aW9uIG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jb25maWd1cmUgPSBmdW5jdGlvbihjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICBfY29uZmlndXJlLmNhbGwodGhpcywgY29uZmlndXJhdGlvbik7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbmZpZ3VyZXMgYW5kIGVzdGFibGlzaGVzIHRoZSBCYXlldXggY29tbXVuaWNhdGlvbiB3aXRoIHRoZSBCYXlldXggc2VydmVyXG4gICAgICAgICAqIHZpYSBhIGhhbmRzaGFrZSBhbmQgYSBzdWJzZXF1ZW50IGNvbm5lY3QuXG4gICAgICAgICAqIEBwYXJhbSBjb25maWd1cmF0aW9uIHRoZSBjb25maWd1cmF0aW9uIG9iamVjdFxuICAgICAgICAgKiBAcGFyYW0gaGFuZHNoYWtlUHJvcHMgYW4gb2JqZWN0IHRvIGJlIG1lcmdlZCB3aXRoIHRoZSBoYW5kc2hha2UgbWVzc2FnZVxuICAgICAgICAgKiBAc2VlICNjb25maWd1cmUoY29uZmlndXJhdGlvbilcbiAgICAgICAgICogQHNlZSAjaGFuZHNoYWtlKGhhbmRzaGFrZVByb3BzKVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pbml0ID0gZnVuY3Rpb24oY29uZmlndXJhdGlvbiwgaGFuZHNoYWtlUHJvcHMpIHtcbiAgICAgICAgICAgIHRoaXMuY29uZmlndXJlKGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgdGhpcy5oYW5kc2hha2UoaGFuZHNoYWtlUHJvcHMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFc3RhYmxpc2hlcyB0aGUgQmF5ZXV4IGNvbW11bmljYXRpb24gd2l0aCB0aGUgQmF5ZXV4IHNlcnZlclxuICAgICAgICAgKiB2aWEgYSBoYW5kc2hha2UgYW5kIGEgc3Vic2VxdWVudCBjb25uZWN0LlxuICAgICAgICAgKiBAcGFyYW0gaGFuZHNoYWtlUHJvcHMgYW4gb2JqZWN0IHRvIGJlIG1lcmdlZCB3aXRoIHRoZSBoYW5kc2hha2UgbWVzc2FnZVxuICAgICAgICAgKiBAcGFyYW0gaGFuZHNoYWtlQ2FsbGJhY2sgYSBmdW5jdGlvbiB0byBiZSBpbnZva2VkIHdoZW4gdGhlIGhhbmRzaGFrZSBpcyBhY2tub3dsZWRnZWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGFuZHNoYWtlID0gZnVuY3Rpb24oaGFuZHNoYWtlUHJvcHMsIGhhbmRzaGFrZUNhbGxiYWNrKSB7XG4gICAgICAgICAgICBpZiAoX3N0YXR1cyAhPT0gJ2Rpc2Nvbm5lY3RlZCcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAnSWxsZWdhbCBzdGF0ZTogaGFuZHNoYWtlbic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfaGFuZHNoYWtlKGhhbmRzaGFrZVByb3BzLCBoYW5kc2hha2VDYWxsYmFjayk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERpc2Nvbm5lY3RzIGZyb20gdGhlIEJheWV1eCBzZXJ2ZXIuXG4gICAgICAgICAqIEBwYXJhbSBkaXNjb25uZWN0UHJvcHMgYW4gb2JqZWN0IHRvIGJlIG1lcmdlZCB3aXRoIHRoZSBkaXNjb25uZWN0IG1lc3NhZ2VcbiAgICAgICAgICogQHBhcmFtIGRpc2Nvbm5lY3RDYWxsYmFjayBhIGZ1bmN0aW9uIHRvIGJlIGludm9rZWQgd2hlbiB0aGUgZGlzY29ubmVjdCBpcyBhY2tub3dsZWRnZWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGlzY29ubmVjdCA9IGZ1bmN0aW9uKGRpc2Nvbm5lY3RQcm9wcywgZGlzY29ubmVjdENhbGxiYWNrKSB7XG4gICAgICAgICAgICBpZiAoX2lzRGlzY29ubmVjdGVkKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChfaXNGdW5jdGlvbihkaXNjb25uZWN0UHJvcHMpKSB7XG4gICAgICAgICAgICAgICAgZGlzY29ubmVjdENhbGxiYWNrID0gZGlzY29ubmVjdFByb3BzO1xuICAgICAgICAgICAgICAgIGRpc2Nvbm5lY3RQcm9wcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGJheWV1eE1lc3NhZ2UgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IF9uZXh0TWVzc2FnZUlkKCksXG4gICAgICAgICAgICAgICAgY2hhbm5lbDogJy9tZXRhL2Rpc2Nvbm5lY3QnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gRG8gbm90IGFsbG93IHRoZSB1c2VyIHRvIG92ZXJyaWRlIGltcG9ydGFudCBmaWVsZHMuXG4gICAgICAgICAgICB2YXIgbWVzc2FnZSA9IHRoaXMuX21peGluKGZhbHNlLCB7fSwgZGlzY29ubmVjdFByb3BzLCBiYXlldXhNZXNzYWdlKTtcblxuICAgICAgICAgICAgLy8gU2F2ZSB0aGUgY2FsbGJhY2suXG4gICAgICAgICAgICBfY29tZXRkLl9wdXRDYWxsYmFjayhtZXNzYWdlLmlkLCBkaXNjb25uZWN0Q2FsbGJhY2spO1xuXG4gICAgICAgICAgICBfc2V0U3RhdHVzKCdkaXNjb25uZWN0aW5nJyk7XG4gICAgICAgICAgICBfc2VuZChbbWVzc2FnZV0sIGZhbHNlLCAnZGlzY29ubmVjdCcpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXJrcyB0aGUgc3RhcnQgb2YgYSBiYXRjaCBvZiBhcHBsaWNhdGlvbiBtZXNzYWdlcyB0byBiZSBzZW50IHRvIHRoZSBzZXJ2ZXJcbiAgICAgICAgICogaW4gYSBzaW5nbGUgcmVxdWVzdCwgb2J0YWluaW5nIGEgc2luZ2xlIHJlc3BvbnNlIGNvbnRhaW5pbmcgKHBvc3NpYmx5KSBtYW55XG4gICAgICAgICAqIGFwcGxpY2F0aW9uIHJlcGx5IG1lc3NhZ2VzLlxuICAgICAgICAgKiBNZXNzYWdlcyBhcmUgaGVsZCBpbiBhIHF1ZXVlIGFuZCBub3Qgc2VudCB1bnRpbCB7QGxpbmsgI2VuZEJhdGNoKCl9IGlzIGNhbGxlZC5cbiAgICAgICAgICogSWYgc3RhcnRCYXRjaCgpIGlzIGNhbGxlZCBtdWx0aXBsZSB0aW1lcywgdGhlbiBhbiBlcXVhbCBudW1iZXIgb2YgZW5kQmF0Y2goKVxuICAgICAgICAgKiBjYWxscyBtdXN0IGJlIG1hZGUgdG8gY2xvc2UgYW5kIHNlbmQgdGhlIGJhdGNoIG9mIG1lc3NhZ2VzLlxuICAgICAgICAgKiBAc2VlICNlbmRCYXRjaCgpXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnN0YXJ0QmF0Y2ggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIF9zdGFydEJhdGNoKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1hcmtzIHRoZSBlbmQgb2YgYSBiYXRjaCBvZiBhcHBsaWNhdGlvbiBtZXNzYWdlcyB0byBiZSBzZW50IHRvIHRoZSBzZXJ2ZXJcbiAgICAgICAgICogaW4gYSBzaW5nbGUgcmVxdWVzdC5cbiAgICAgICAgICogQHNlZSAjc3RhcnRCYXRjaCgpXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmVuZEJhdGNoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBfZW5kQmF0Y2goKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRXhlY3V0ZXMgdGhlIGdpdmVuIGNhbGxiYWNrIGluIHRoZSBnaXZlbiBzY29wZSwgc3Vycm91bmRlZCBieSBhIHtAbGluayAjc3RhcnRCYXRjaCgpfVxuICAgICAgICAgKiBhbmQge0BsaW5rICNlbmRCYXRjaCgpfSBjYWxscy5cbiAgICAgICAgICogQHBhcmFtIHNjb3BlIHRoZSBzY29wZSBvZiB0aGUgY2FsbGJhY2ssIG1heSBiZSBvbWl0dGVkXG4gICAgICAgICAqIEBwYXJhbSBjYWxsYmFjayB0aGUgY2FsbGJhY2sgdG8gYmUgZXhlY3V0ZWQgd2l0aGluIHtAbGluayAjc3RhcnRCYXRjaCgpfSBhbmQge0BsaW5rICNlbmRCYXRjaCgpfSBjYWxsc1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5iYXRjaCA9IGZ1bmN0aW9uKHNjb3BlLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgdmFyIGRlbGVnYXRlID0gX3Jlc29sdmVTY29wZWRDYWxsYmFjayhzY29wZSwgY2FsbGJhY2spO1xuICAgICAgICAgICAgdGhpcy5zdGFydEJhdGNoKCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGRlbGVnYXRlLm1ldGhvZC5jYWxsKGRlbGVnYXRlLnNjb3BlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZEJhdGNoKCk7XG4gICAgICAgICAgICB9IGNhdGNoICh4KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5faW5mbygnRXhjZXB0aW9uIGR1cmluZyBleGVjdXRpb24gb2YgYmF0Y2gnLCB4KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZEJhdGNoKCk7XG4gICAgICAgICAgICAgICAgdGhyb3cgeDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQWRkcyBhIGxpc3RlbmVyIGZvciBiYXlldXggbWVzc2FnZXMsIHBlcmZvcm1pbmcgdGhlIGdpdmVuIGNhbGxiYWNrIGluIHRoZSBnaXZlbiBzY29wZVxuICAgICAgICAgKiB3aGVuIGEgbWVzc2FnZSBmb3IgdGhlIGdpdmVuIGNoYW5uZWwgYXJyaXZlcy5cbiAgICAgICAgICogQHBhcmFtIGNoYW5uZWwgdGhlIGNoYW5uZWwgdGhlIGxpc3RlbmVyIGlzIGludGVyZXN0ZWQgdG9cbiAgICAgICAgICogQHBhcmFtIHNjb3BlIHRoZSBzY29wZSBvZiB0aGUgY2FsbGJhY2ssIG1heSBiZSBvbWl0dGVkXG4gICAgICAgICAqIEBwYXJhbSBjYWxsYmFjayB0aGUgY2FsbGJhY2sgdG8gY2FsbCB3aGVuIGEgbWVzc2FnZSBpcyBzZW50IHRvIHRoZSBjaGFubmVsXG4gICAgICAgICAqIEByZXR1cm5zIHRoZSBzdWJzY3JpcHRpb24gaGFuZGxlIHRvIGJlIHBhc3NlZCB0byB7QGxpbmsgI3JlbW92ZUxpc3RlbmVyKG9iamVjdCl9XG4gICAgICAgICAqIEBzZWUgI3JlbW92ZUxpc3RlbmVyKHN1YnNjcmlwdGlvbilcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbihjaGFubmVsLCBzY29wZSwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikge1xuICAgICAgICAgICAgICAgIHRocm93ICdJbGxlZ2FsIGFyZ3VtZW50cyBudW1iZXI6IHJlcXVpcmVkIDIsIGdvdCAnICsgYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghX2lzU3RyaW5nKGNoYW5uZWwpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgJ0lsbGVnYWwgYXJndW1lbnQgdHlwZTogY2hhbm5lbCBtdXN0IGJlIGEgc3RyaW5nJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIF9hZGRMaXN0ZW5lcihjaGFubmVsLCBzY29wZSwgY2FsbGJhY2ssIHRydWUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZW1vdmVzIHRoZSBzdWJzY3JpcHRpb24gb2J0YWluZWQgd2l0aCBhIGNhbGwgdG8ge0BsaW5rICNhZGRMaXN0ZW5lcihzdHJpbmcsIG9iamVjdCwgZnVuY3Rpb24pfS5cbiAgICAgICAgICogQHBhcmFtIHN1YnNjcmlwdGlvbiB0aGUgc3Vic2NyaXB0aW9uIHRvIHVuc3Vic2NyaWJlLlxuICAgICAgICAgKiBAc2VlICNhZGRMaXN0ZW5lcihjaGFubmVsLCBzY29wZSwgY2FsbGJhY2spXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24oc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAvLyBCZXdhcmUgb2Ygc3Vic2NyaXB0aW9uLmlkID09IDAsIHdoaWNoIGlzIGZhbHN5ID0+IGNhbm5vdCB1c2UgIXN1YnNjcmlwdGlvbi5pZFxuICAgICAgICAgICAgaWYgKCFzdWJzY3JpcHRpb24gfHwgIXN1YnNjcmlwdGlvbi5jaGFubmVsIHx8ICEoXCJpZFwiIGluIHN1YnNjcmlwdGlvbikpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAnSW52YWxpZCBhcmd1bWVudDogZXhwZWN0ZWQgc3Vic2NyaXB0aW9uLCBub3QgJyArIHN1YnNjcmlwdGlvbjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgX3JlbW92ZUxpc3RlbmVyKHN1YnNjcmlwdGlvbik7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlbW92ZXMgYWxsIGxpc3RlbmVycyByZWdpc3RlcmVkIHdpdGgge0BsaW5rICNhZGRMaXN0ZW5lcihjaGFubmVsLCBzY29wZSwgY2FsbGJhY2spfSBvclxuICAgICAgICAgKiB7QGxpbmsgI3N1YnNjcmliZShjaGFubmVsLCBzY29wZSwgY2FsbGJhY2spfS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2xlYXJMaXN0ZW5lcnMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIF9saXN0ZW5lcnMgPSB7fTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogU3Vic2NyaWJlcyB0byB0aGUgZ2l2ZW4gY2hhbm5lbCwgcGVyZm9ybWluZyB0aGUgZ2l2ZW4gY2FsbGJhY2sgaW4gdGhlIGdpdmVuIHNjb3BlXG4gICAgICAgICAqIHdoZW4gYSBtZXNzYWdlIGZvciB0aGUgY2hhbm5lbCBhcnJpdmVzLlxuICAgICAgICAgKiBAcGFyYW0gY2hhbm5lbCB0aGUgY2hhbm5lbCB0byBzdWJzY3JpYmUgdG9cbiAgICAgICAgICogQHBhcmFtIHNjb3BlIHRoZSBzY29wZSBvZiB0aGUgY2FsbGJhY2ssIG1heSBiZSBvbWl0dGVkXG4gICAgICAgICAqIEBwYXJhbSBjYWxsYmFjayB0aGUgY2FsbGJhY2sgdG8gY2FsbCB3aGVuIGEgbWVzc2FnZSBpcyBzZW50IHRvIHRoZSBjaGFubmVsXG4gICAgICAgICAqIEBwYXJhbSBzdWJzY3JpYmVQcm9wcyBhbiBvYmplY3QgdG8gYmUgbWVyZ2VkIHdpdGggdGhlIHN1YnNjcmliZSBtZXNzYWdlXG4gICAgICAgICAqIEBwYXJhbSBzdWJzY3JpYmVDYWxsYmFjayBhIGZ1bmN0aW9uIHRvIGJlIGludm9rZWQgd2hlbiB0aGUgc3Vic2NyaXB0aW9uIGlzIGFja25vd2xlZGdlZFxuICAgICAgICAgKiBAcmV0dXJuIHRoZSBzdWJzY3JpcHRpb24gaGFuZGxlIHRvIGJlIHBhc3NlZCB0byB7QGxpbmsgI3Vuc3Vic2NyaWJlKG9iamVjdCl9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnN1YnNjcmliZSA9IGZ1bmN0aW9uKGNoYW5uZWwsIHNjb3BlLCBjYWxsYmFjaywgc3Vic2NyaWJlUHJvcHMsIHN1YnNjcmliZUNhbGxiYWNrKSB7XG4gICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAnSWxsZWdhbCBhcmd1bWVudHMgbnVtYmVyOiByZXF1aXJlZCAyLCBnb3QgJyArIGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIV9pc1N0cmluZyhjaGFubmVsKSkge1xuICAgICAgICAgICAgICAgIHRocm93ICdJbGxlZ2FsIGFyZ3VtZW50IHR5cGU6IGNoYW5uZWwgbXVzdCBiZSBhIHN0cmluZyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoX2lzRGlzY29ubmVjdGVkKCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAnSWxsZWdhbCBzdGF0ZTogZGlzY29ubmVjdGVkJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gTm9ybWFsaXplIGFyZ3VtZW50c1xuICAgICAgICAgICAgaWYgKF9pc0Z1bmN0aW9uKHNjb3BlKSkge1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZUNhbGxiYWNrID0gc3Vic2NyaWJlUHJvcHM7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlUHJvcHMgPSBjYWxsYmFjaztcbiAgICAgICAgICAgICAgICBjYWxsYmFjayA9IHNjb3BlO1xuICAgICAgICAgICAgICAgIHNjb3BlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKF9pc0Z1bmN0aW9uKHN1YnNjcmliZVByb3BzKSkge1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZUNhbGxiYWNrID0gc3Vic2NyaWJlUHJvcHM7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlUHJvcHMgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIE9ubHkgc2VuZCB0aGUgbWVzc2FnZSB0byB0aGUgc2VydmVyIGlmIHRoaXMgY2xpZW50IGhhcyBub3QgeWV0IHN1YnNjcmliZWQgdG8gdGhlIGNoYW5uZWxcbiAgICAgICAgICAgIHZhciBzZW5kID0gIV9oYXNTdWJzY3JpcHRpb25zKGNoYW5uZWwpO1xuXG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gX2FkZExpc3RlbmVyKGNoYW5uZWwsIHNjb3BlLCBjYWxsYmFjaywgZmFsc2UpO1xuXG4gICAgICAgICAgICBpZiAoc2VuZCkge1xuICAgICAgICAgICAgICAgIC8vIFNlbmQgdGhlIHN1YnNjcmlwdGlvbiBtZXNzYWdlIGFmdGVyIHRoZSBzdWJzY3JpcHRpb24gcmVnaXN0cmF0aW9uIHRvIGF2b2lkXG4gICAgICAgICAgICAgICAgLy8gcmFjZXMgd2hlcmUgdGhlIHNlcnZlciB3b3VsZCBzZW5kIGEgbWVzc2FnZSB0byB0aGUgc3Vic2NyaWJlcnMsIGJ1dCBoZXJlXG4gICAgICAgICAgICAgICAgLy8gb24gdGhlIGNsaWVudCB0aGUgc3Vic2NyaXB0aW9uIGhhcyBub3QgYmVlbiBhZGRlZCB5ZXQgdG8gdGhlIGRhdGEgc3RydWN0dXJlc1xuICAgICAgICAgICAgICAgIHZhciBiYXlldXhNZXNzYWdlID0ge1xuICAgICAgICAgICAgICAgICAgICBpZDogX25leHRNZXNzYWdlSWQoKSxcbiAgICAgICAgICAgICAgICAgICAgY2hhbm5lbDogJy9tZXRhL3N1YnNjcmliZScsXG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbjogY2hhbm5lbFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy8gRG8gbm90IGFsbG93IHRoZSB1c2VyIHRvIG92ZXJyaWRlIGltcG9ydGFudCBmaWVsZHMuXG4gICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSB0aGlzLl9taXhpbihmYWxzZSwge30sIHN1YnNjcmliZVByb3BzLCBiYXlldXhNZXNzYWdlKTtcblxuICAgICAgICAgICAgICAgIC8vIFNhdmUgdGhlIGNhbGxiYWNrLlxuICAgICAgICAgICAgICAgIF9jb21ldGQuX3B1dENhbGxiYWNrKG1lc3NhZ2UuaWQsIHN1YnNjcmliZUNhbGxiYWNrKTtcblxuICAgICAgICAgICAgICAgIF9xdWV1ZVNlbmQobWVzc2FnZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVuc3Vic2NyaWJlcyB0aGUgc3Vic2NyaXB0aW9uIG9idGFpbmVkIHdpdGggYSBjYWxsIHRvIHtAbGluayAjc3Vic2NyaWJlKHN0cmluZywgb2JqZWN0LCBmdW5jdGlvbil9LlxuICAgICAgICAgKiBAcGFyYW0gc3Vic2NyaXB0aW9uIHRoZSBzdWJzY3JpcHRpb24gdG8gdW5zdWJzY3JpYmUuXG4gICAgICAgICAqIEBwYXJhbSB1bnN1YnNjcmliZVByb3BzIGFuIG9iamVjdCB0byBiZSBtZXJnZWQgd2l0aCB0aGUgdW5zdWJzY3JpYmUgbWVzc2FnZVxuICAgICAgICAgKiBAcGFyYW0gdW5zdWJzY3JpYmVDYWxsYmFjayBhIGZ1bmN0aW9uIHRvIGJlIGludm9rZWQgd2hlbiB0aGUgdW5zdWJzY3JpcHRpb24gaXMgYWNrbm93bGVkZ2VkXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24oc3Vic2NyaXB0aW9uLCB1bnN1YnNjcmliZVByb3BzLCB1bnN1YnNjcmliZUNhbGxiYWNrKSB7XG4gICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAnSWxsZWdhbCBhcmd1bWVudHMgbnVtYmVyOiByZXF1aXJlZCAxLCBnb3QgJyArIGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoX2lzRGlzY29ubmVjdGVkKCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAnSWxsZWdhbCBzdGF0ZTogZGlzY29ubmVjdGVkJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKF9pc0Z1bmN0aW9uKHVuc3Vic2NyaWJlUHJvcHMpKSB7XG4gICAgICAgICAgICAgICAgdW5zdWJzY3JpYmVDYWxsYmFjayA9IHVuc3Vic2NyaWJlUHJvcHM7XG4gICAgICAgICAgICAgICAgdW5zdWJzY3JpYmVQcm9wcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBsb2NhbCBsaXN0ZW5lciBiZWZvcmUgc2VuZGluZyB0aGUgbWVzc2FnZVxuICAgICAgICAgICAgLy8gVGhpcyBlbnN1cmVzIHRoYXQgaWYgdGhlIHNlcnZlciBmYWlscywgdGhpcyBjbGllbnQgZG9lcyBub3QgZ2V0IG5vdGlmaWNhdGlvbnNcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIoc3Vic2NyaXB0aW9uKTtcblxuICAgICAgICAgICAgdmFyIGNoYW5uZWwgPSBzdWJzY3JpcHRpb24uY2hhbm5lbDtcbiAgICAgICAgICAgIC8vIE9ubHkgc2VuZCB0aGUgbWVzc2FnZSB0byB0aGUgc2VydmVyIGlmIHRoaXMgY2xpZW50IHVuc3Vic2NyaWJlcyB0aGUgbGFzdCBzdWJzY3JpcHRpb25cbiAgICAgICAgICAgIGlmICghX2hhc1N1YnNjcmlwdGlvbnMoY2hhbm5lbCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgYmF5ZXV4TWVzc2FnZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IF9uZXh0TWVzc2FnZUlkKCksXG4gICAgICAgICAgICAgICAgICAgIGNoYW5uZWw6ICcvbWV0YS91bnN1YnNjcmliZScsXG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbjogY2hhbm5lbFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy8gRG8gbm90IGFsbG93IHRoZSB1c2VyIHRvIG92ZXJyaWRlIGltcG9ydGFudCBmaWVsZHMuXG4gICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSB0aGlzLl9taXhpbihmYWxzZSwge30sIHVuc3Vic2NyaWJlUHJvcHMsIGJheWV1eE1lc3NhZ2UpO1xuXG4gICAgICAgICAgICAgICAgLy8gU2F2ZSB0aGUgY2FsbGJhY2suXG4gICAgICAgICAgICAgICAgX2NvbWV0ZC5fcHV0Q2FsbGJhY2sobWVzc2FnZS5pZCwgdW5zdWJzY3JpYmVDYWxsYmFjayk7XG5cbiAgICAgICAgICAgICAgICBfcXVldWVTZW5kKG1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucmVzdWJzY3JpYmUgPSBmdW5jdGlvbihzdWJzY3JpcHRpb24sIHN1YnNjcmliZVByb3BzKSB7XG4gICAgICAgICAgICBfcmVtb3ZlU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbik7XG4gICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3Vic2NyaWJlKHN1YnNjcmlwdGlvbi5jaGFubmVsLCBzdWJzY3JpcHRpb24uc2NvcGUsIHN1YnNjcmlwdGlvbi5jYWxsYmFjaywgc3Vic2NyaWJlUHJvcHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVtb3ZlcyBhbGwgc3Vic2NyaXB0aW9ucyBhZGRlZCB2aWEge0BsaW5rICNzdWJzY3JpYmUoY2hhbm5lbCwgc2NvcGUsIGNhbGxiYWNrLCBzdWJzY3JpYmVQcm9wcyl9LFxuICAgICAgICAgKiBidXQgZG9lcyBub3QgcmVtb3ZlIHRoZSBsaXN0ZW5lcnMgYWRkZWQgdmlhIHtAbGluayBhZGRMaXN0ZW5lcihjaGFubmVsLCBzY29wZSwgY2FsbGJhY2spfS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2xlYXJTdWJzY3JpcHRpb25zID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBfY2xlYXJTdWJzY3JpcHRpb25zKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFB1Ymxpc2hlcyBhIG1lc3NhZ2Ugb24gdGhlIGdpdmVuIGNoYW5uZWwsIGNvbnRhaW5pbmcgdGhlIGdpdmVuIGNvbnRlbnQuXG4gICAgICAgICAqIEBwYXJhbSBjaGFubmVsIHRoZSBjaGFubmVsIHRvIHB1Ymxpc2ggdGhlIG1lc3NhZ2UgdG9cbiAgICAgICAgICogQHBhcmFtIGNvbnRlbnQgdGhlIGNvbnRlbnQgb2YgdGhlIG1lc3NhZ2VcbiAgICAgICAgICogQHBhcmFtIHB1Ymxpc2hQcm9wcyBhbiBvYmplY3QgdG8gYmUgbWVyZ2VkIHdpdGggdGhlIHB1Ymxpc2ggbWVzc2FnZVxuICAgICAgICAgKiBAcGFyYW0gcHVibGlzaENhbGxiYWNrIGEgZnVuY3Rpb24gdG8gYmUgaW52b2tlZCB3aGVuIHRoZSBwdWJsaXNoIGlzIGFja25vd2xlZGdlZCBieSB0aGUgc2VydmVyXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnB1Ymxpc2ggPSBmdW5jdGlvbihjaGFubmVsLCBjb250ZW50LCBwdWJsaXNoUHJvcHMsIHB1Ymxpc2hDYWxsYmFjaykge1xuICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAxKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgJ0lsbGVnYWwgYXJndW1lbnRzIG51bWJlcjogcmVxdWlyZWQgMSwgZ290ICcgKyBhcmd1bWVudHMubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFfaXNTdHJpbmcoY2hhbm5lbCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAnSWxsZWdhbCBhcmd1bWVudCB0eXBlOiBjaGFubmVsIG11c3QgYmUgYSBzdHJpbmcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKC9eXFwvbWV0YVxcLy8udGVzdChjaGFubmVsKSkge1xuICAgICAgICAgICAgICAgIHRocm93ICdJbGxlZ2FsIGFyZ3VtZW50OiBjYW5ub3QgcHVibGlzaCB0byBtZXRhIGNoYW5uZWxzJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChfaXNEaXNjb25uZWN0ZWQoKSkge1xuICAgICAgICAgICAgICAgIHRocm93ICdJbGxlZ2FsIHN0YXRlOiBkaXNjb25uZWN0ZWQnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoX2lzRnVuY3Rpb24oY29udGVudCkpIHtcbiAgICAgICAgICAgICAgICBwdWJsaXNoQ2FsbGJhY2sgPSBjb250ZW50O1xuICAgICAgICAgICAgICAgIGNvbnRlbnQgPSB7fTtcbiAgICAgICAgICAgICAgICBwdWJsaXNoUHJvcHMgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKF9pc0Z1bmN0aW9uKHB1Ymxpc2hQcm9wcykpIHtcbiAgICAgICAgICAgICAgICBwdWJsaXNoQ2FsbGJhY2sgPSBwdWJsaXNoUHJvcHM7XG4gICAgICAgICAgICAgICAgcHVibGlzaFByb3BzID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgYmF5ZXV4TWVzc2FnZSA9IHtcbiAgICAgICAgICAgICAgICBpZDogX25leHRNZXNzYWdlSWQoKSxcbiAgICAgICAgICAgICAgICBjaGFubmVsOiBjaGFubmVsLFxuICAgICAgICAgICAgICAgIGRhdGE6IGNvbnRlbnRcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBEbyBub3QgYWxsb3cgdGhlIHVzZXIgdG8gb3ZlcnJpZGUgaW1wb3J0YW50IGZpZWxkcy5cbiAgICAgICAgICAgIHZhciBtZXNzYWdlID0gdGhpcy5fbWl4aW4oZmFsc2UsIHt9LCBwdWJsaXNoUHJvcHMsIGJheWV1eE1lc3NhZ2UpO1xuXG4gICAgICAgICAgICAvLyBTYXZlIHRoZSBjYWxsYmFjay5cbiAgICAgICAgICAgIF9jb21ldGQuX3B1dENhbGxiYWNrKG1lc3NhZ2UuaWQsIHB1Ymxpc2hDYWxsYmFjayk7XG5cbiAgICAgICAgICAgIF9xdWV1ZVNlbmQobWVzc2FnZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFB1Ymxpc2hlcyBhIG1lc3NhZ2Ugd2l0aCBiaW5hcnkgZGF0YSBvbiB0aGUgZ2l2ZW4gY2hhbm5lbC5cbiAgICAgICAgICogVGhlIGJpbmFyeSBkYXRhIGNodW5rIG1heSBiZSBhbiBBcnJheUJ1ZmZlciwgYSBEYXRhVmlldywgYSBUeXBlZEFycmF5XG4gICAgICAgICAqIChzdWNoIGFzIFVpbnQ4QXJyYXkpIG9yIGEgcGxhaW4gaW50ZWdlciBhcnJheS5cbiAgICAgICAgICogVGhlIG1ldGEgZGF0YSBvYmplY3QgbWF5IGNvbnRhaW4gYWRkaXRpb25hbCBhcHBsaWNhdGlvbiBkYXRhIHN1Y2ggYXNcbiAgICAgICAgICogYSBmaWxlIG5hbWUsIGEgbWltZSB0eXBlLCBldGMuXG4gICAgICAgICAqIEBwYXJhbSBjaGFubmVsIHRoZSBjaGFubmVsIHRvIHB1Ymxpc2ggdGhlIG1lc3NhZ2UgdG9cbiAgICAgICAgICogQHBhcmFtIGRhdGEgdGhlIGJpbmFyeSBkYXRhIHRvIHB1Ymxpc2hcbiAgICAgICAgICogQHBhcmFtIGxhc3Qgd2hldGhlciB0aGUgYmluYXJ5IGRhdGEgY2h1bmsgaXMgdGhlIGxhc3RcbiAgICAgICAgICogQHBhcmFtIG1ldGEgYW4gb2JqZWN0IGNvbnRhaW5pbmcgbWV0YSBkYXRhIGFzc29jaWF0ZWQgdG8gdGhlIGJpbmFyeSBjaHVua1xuICAgICAgICAgKiBAcGFyYW0gY2FsbGJhY2sgYSBmdW5jdGlvbiB0byBiZSBpbnZva2VkIHdoZW4gdGhlIHB1Ymxpc2ggaXMgYWNrbm93bGVkZ2VkIGJ5IHRoZSBzZXJ2ZXJcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucHVibGlzaEJpbmFyeSA9IGZ1bmN0aW9uKGNoYW5uZWwsIGRhdGEsIGxhc3QsIG1ldGEsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBpZiAoX2lzRnVuY3Rpb24oZGF0YSkpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayA9IGRhdGE7XG4gICAgICAgICAgICAgICAgZGF0YSA9IG5ldyBBcnJheUJ1ZmZlcigwKTtcbiAgICAgICAgICAgICAgICBsYXN0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBtZXRhID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChfaXNGdW5jdGlvbihsYXN0KSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gbGFzdDtcbiAgICAgICAgICAgICAgICBsYXN0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBtZXRhID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChfaXNGdW5jdGlvbihtZXRhKSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gbWV0YTtcbiAgICAgICAgICAgICAgICBtZXRhID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSB7XG4gICAgICAgICAgICAgICAgbWV0YTogbWV0YSxcbiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgICAgICAgIGxhc3Q6IGxhc3RcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgZXh0ID0ge1xuICAgICAgICAgICAgICAgIGV4dDoge1xuICAgICAgICAgICAgICAgICAgICBiaW5hcnk6IHt9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucHVibGlzaChjaGFubmVsLCBjb250ZW50LCBleHQsIGNhbGxiYWNrKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnJlbW90ZUNhbGwgPSBmdW5jdGlvbih0YXJnZXQsIGNvbnRlbnQsIHRpbWVvdXQsIGNhbGxQcm9wcywgY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMSkge1xuICAgICAgICAgICAgICAgIHRocm93ICdJbGxlZ2FsIGFyZ3VtZW50cyBudW1iZXI6IHJlcXVpcmVkIDEsIGdvdCAnICsgYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghX2lzU3RyaW5nKHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAnSWxsZWdhbCBhcmd1bWVudCB0eXBlOiB0YXJnZXQgbXVzdCBiZSBhIHN0cmluZyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoX2lzRGlzY29ubmVjdGVkKCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAnSWxsZWdhbCBzdGF0ZTogZGlzY29ubmVjdGVkJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKF9pc0Z1bmN0aW9uKGNvbnRlbnQpKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBjb250ZW50O1xuICAgICAgICAgICAgICAgIGNvbnRlbnQgPSB7fTtcbiAgICAgICAgICAgICAgICB0aW1lb3V0ID0gX2NvbmZpZy5tYXhOZXR3b3JrRGVsYXk7XG4gICAgICAgICAgICAgICAgY2FsbFByb3BzID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChfaXNGdW5jdGlvbih0aW1lb3V0KSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gdGltZW91dDtcbiAgICAgICAgICAgICAgICB0aW1lb3V0ID0gX2NvbmZpZy5tYXhOZXR3b3JrRGVsYXk7XG4gICAgICAgICAgICAgICAgY2FsbFByb3BzID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChfaXNGdW5jdGlvbihjYWxsUHJvcHMpKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBjYWxsUHJvcHM7XG4gICAgICAgICAgICAgICAgY2FsbFByb3BzID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRpbWVvdXQgIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgJ0lsbGVnYWwgYXJndW1lbnQgdHlwZTogdGltZW91dCBtdXN0IGJlIGEgbnVtYmVyJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCF0YXJnZXQubWF0Y2goL15cXC8vKSkge1xuICAgICAgICAgICAgICAgIHRhcmdldCA9ICcvJyArIHRhcmdldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjaGFubmVsID0gJy9zZXJ2aWNlJyArIHRhcmdldDtcblxuICAgICAgICAgICAgdmFyIGJheWV1eE1lc3NhZ2UgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IF9uZXh0TWVzc2FnZUlkKCksXG4gICAgICAgICAgICAgICAgY2hhbm5lbDogY2hhbm5lbCxcbiAgICAgICAgICAgICAgICBkYXRhOiBjb250ZW50XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSB0aGlzLl9taXhpbihmYWxzZSwge30sIGNhbGxQcm9wcywgYmF5ZXV4TWVzc2FnZSk7XG5cbiAgICAgICAgICAgIHZhciBjb250ZXh0ID0ge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFja1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICh0aW1lb3V0ID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnRleHQudGltZW91dCA9IF9jb21ldGQuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgX2NvbWV0ZC5fZGVidWcoJ1RpbWluZyBvdXQgcmVtb3RlIGNhbGwnLCBtZXNzYWdlLCAnYWZ0ZXInLCB0aW1lb3V0LCAnbXMnKTtcbiAgICAgICAgICAgICAgICAgICAgX2ZhaWxNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBtZXNzYWdlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6ICc0MDY6OnRpbWVvdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc2Z1bDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBmYWlsdXJlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb246ICdSZW1vdGUgQ2FsbCBUaW1lb3V0J1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LCB0aW1lb3V0KTtcbiAgICAgICAgICAgICAgICBfY29tZXRkLl9kZWJ1ZygnU2NoZWR1bGVkIHJlbW90ZSBjYWxsIHRpbWVvdXQnLCBtZXNzYWdlLCAnaW4nLCB0aW1lb3V0LCAnbXMnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF9yZW1vdGVDYWxsc1ttZXNzYWdlLmlkXSA9IGNvbnRleHQ7XG5cbiAgICAgICAgICAgIF9xdWV1ZVNlbmQobWVzc2FnZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5yZW1vdGVDYWxsQmluYXJ5ID0gZnVuY3Rpb24odGFyZ2V0LCBkYXRhLCBsYXN0LCBtZXRhLCB0aW1lb3V0LCBjYWxsYmFjaykge1xuICAgICAgICAgICAgaWYgKF9pc0Z1bmN0aW9uKGRhdGEpKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBkYXRhO1xuICAgICAgICAgICAgICAgIGRhdGEgPSBuZXcgQXJyYXlCdWZmZXIoMCk7XG4gICAgICAgICAgICAgICAgbGFzdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgbWV0YSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB0aW1lb3V0ID0gX2NvbmZpZy5tYXhOZXR3b3JrRGVsYXk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKF9pc0Z1bmN0aW9uKGxhc3QpKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBsYXN0O1xuICAgICAgICAgICAgICAgIGxhc3QgPSB0cnVlO1xuICAgICAgICAgICAgICAgIG1ldGEgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgdGltZW91dCA9IF9jb25maWcubWF4TmV0d29ya0RlbGF5O1xuICAgICAgICAgICAgfSBlbHNlIGlmIChfaXNGdW5jdGlvbihtZXRhKSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gbWV0YTtcbiAgICAgICAgICAgICAgICBtZXRhID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBfY29uZmlnLm1heE5ldHdvcmtEZWxheTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoX2lzRnVuY3Rpb24odGltZW91dCkpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayA9IHRpbWVvdXQ7XG4gICAgICAgICAgICAgICAgdGltZW91dCA9IF9jb25maWcubWF4TmV0d29ya0RlbGF5O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgY29udGVudCA9IHtcbiAgICAgICAgICAgICAgICBtZXRhOiBtZXRhLFxuICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICAgICAgbGFzdDogbGFzdFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBleHQgPSB7XG4gICAgICAgICAgICAgICAgZXh0OiB7XG4gICAgICAgICAgICAgICAgICAgIGJpbmFyeToge31cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLnJlbW90ZUNhbGwodGFyZ2V0LCBjb250ZW50LCB0aW1lb3V0LCBleHQsIGNhbGxiYWNrKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHN0YXR1cyBvZiB0aGUgYmF5ZXV4IGNvbW11bmljYXRpb24gd2l0aCB0aGUgQmF5ZXV4IHNlcnZlci5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZ2V0U3RhdHVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N0YXR1cztcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB3aGV0aGVyIHRoaXMgaW5zdGFuY2UgaGFzIGJlZW4gZGlzY29ubmVjdGVkLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pc0Rpc2Nvbm5lY3RlZCA9IF9pc0Rpc2Nvbm5lY3RlZDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyB0aGUgYmFja29mZiBwZXJpb2QgdXNlZCB0byBpbmNyZWFzZSB0aGUgYmFja29mZiB0aW1lIHdoZW4gcmV0cnlpbmcgYW4gdW5zdWNjZXNzZnVsIG9yIGZhaWxlZCBtZXNzYWdlLlxuICAgICAgICAgKiBEZWZhdWx0IHZhbHVlIGlzIDEgc2Vjb25kLCB3aGljaCBtZWFucyBpZiB0aGVyZSBpcyBhIHBlcnNpc3RlbnQgZmFpbHVyZSB0aGUgcmV0cmllcyB3aWxsIGhhcHBlblxuICAgICAgICAgKiBhZnRlciAxIHNlY29uZCwgdGhlbiBhZnRlciAyIHNlY29uZHMsIHRoZW4gYWZ0ZXIgMyBzZWNvbmRzLCBldGMuIFNvIGZvciBleGFtcGxlIHdpdGggMTUgc2Vjb25kcyBvZlxuICAgICAgICAgKiBlbGFwc2VkIHRpbWUsIHRoZXJlIHdpbGwgYmUgNSByZXRyaWVzIChhdCAxLCAzLCA2LCAxMCBhbmQgMTUgc2Vjb25kcyBlbGFwc2VkKS5cbiAgICAgICAgICogQHBhcmFtIHBlcmlvZCB0aGUgYmFja29mZiBwZXJpb2QgdG8gc2V0XG4gICAgICAgICAqIEBzZWUgI2dldEJhY2tvZmZJbmNyZW1lbnQoKVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zZXRCYWNrb2ZmSW5jcmVtZW50ID0gZnVuY3Rpb24ocGVyaW9kKSB7XG4gICAgICAgICAgICBfY29uZmlnLmJhY2tvZmZJbmNyZW1lbnQgPSBwZXJpb2Q7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdGhlIGJhY2tvZmYgcGVyaW9kIHVzZWQgdG8gaW5jcmVhc2UgdGhlIGJhY2tvZmYgdGltZSB3aGVuIHJldHJ5aW5nIGFuIHVuc3VjY2Vzc2Z1bCBvciBmYWlsZWQgbWVzc2FnZS5cbiAgICAgICAgICogQHNlZSAjc2V0QmFja29mZkluY3JlbWVudChwZXJpb2QpXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdldEJhY2tvZmZJbmNyZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBfY29uZmlnLmJhY2tvZmZJbmNyZW1lbnQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdGhlIGJhY2tvZmYgcGVyaW9kIHRvIHdhaXQgYmVmb3JlIHJldHJ5aW5nIGFuIHVuc3VjY2Vzc2Z1bCBvciBmYWlsZWQgbWVzc2FnZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZ2V0QmFja29mZlBlcmlvZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9iYWNrb2ZmO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbmNyZWFzZXMgdGhlIGJhY2tvZmYgcGVyaW9kIHVwIHRvIHRoZSBtYXhpbXVtIHZhbHVlIGNvbmZpZ3VyZWQuXG4gICAgICAgICAqIEByZXR1cm5zIHRoZSBiYWNrb2ZmIHBlcmlvZCBhZnRlciBpbmNyZW1lbnRcbiAgICAgICAgICogQHNlZSBnZXRCYWNrb2ZmSW5jcmVtZW50XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmluY3JlYXNlQmFja29mZlBlcmlvZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9pbmNyZWFzZUJhY2tvZmYoKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVzZXRzIHRoZSBiYWNrb2ZmIHBlcmlvZCB0byB6ZXJvLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZXNldEJhY2tvZmZQZXJpb2QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIF9yZXNldEJhY2tvZmYoKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyB0aGUgbG9nIGxldmVsIGZvciBjb25zb2xlIGxvZ2dpbmcuXG4gICAgICAgICAqIFZhbGlkIHZhbHVlcyBhcmUgdGhlIHN0cmluZ3MgJ2Vycm9yJywgJ3dhcm4nLCAnaW5mbycgYW5kICdkZWJ1ZycsIGZyb21cbiAgICAgICAgICogbGVzcyB2ZXJib3NlIHRvIG1vcmUgdmVyYm9zZS5cbiAgICAgICAgICogQHBhcmFtIGxldmVsIHRoZSBsb2cgbGV2ZWwgc3RyaW5nXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNldExvZ0xldmVsID0gZnVuY3Rpb24obGV2ZWwpIHtcbiAgICAgICAgICAgIF9jb25maWcubG9nTGV2ZWwgPSBsZXZlbDtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVnaXN0ZXJzIGFuIGV4dGVuc2lvbiB3aG9zZSBjYWxsYmFja3MgYXJlIGNhbGxlZCBmb3IgZXZlcnkgaW5jb21pbmcgbWVzc2FnZVxuICAgICAgICAgKiAodGhhdCBjb21lcyBmcm9tIHRoZSBzZXJ2ZXIgdG8gdGhpcyBjbGllbnQgaW1wbGVtZW50YXRpb24pIGFuZCBmb3IgZXZlcnlcbiAgICAgICAgICogb3V0Z29pbmcgbWVzc2FnZSAodGhhdCBvcmlnaW5hdGVzIGZyb20gdGhpcyBjbGllbnQgaW1wbGVtZW50YXRpb24gZm9yIHRoZVxuICAgICAgICAgKiBzZXJ2ZXIpLlxuICAgICAgICAgKiBUaGUgZm9ybWF0IG9mIHRoZSBleHRlbnNpb24gb2JqZWN0IGlzIHRoZSBmb2xsb3dpbmc6XG4gICAgICAgICAqIDxwcmU+XG4gICAgICAgICAqIHtcbiAgICAgICAgICogICAgIGluY29taW5nOiBmdW5jdGlvbihtZXNzYWdlKSB7IC4uLiB9LFxuICAgICAgICAgKiAgICAgb3V0Z29pbmc6IGZ1bmN0aW9uKG1lc3NhZ2UpIHsgLi4uIH1cbiAgICAgICAgICogfVxuICAgICAgICAgKiA8L3ByZT5cbiAgICAgICAgICogQm90aCBwcm9wZXJ0aWVzIGFyZSBvcHRpb25hbCwgYnV0IGlmIHRoZXkgYXJlIHByZXNlbnQgdGhleSB3aWxsIGJlIGNhbGxlZFxuICAgICAgICAgKiByZXNwZWN0aXZlbHkgZm9yIGVhY2ggaW5jb21pbmcgbWVzc2FnZSBhbmQgZm9yIGVhY2ggb3V0Z29pbmcgbWVzc2FnZS5cbiAgICAgICAgICogQHBhcmFtIG5hbWUgdGhlIG5hbWUgb2YgdGhlIGV4dGVuc2lvblxuICAgICAgICAgKiBAcGFyYW0gZXh0ZW5zaW9uIHRoZSBleHRlbnNpb24gdG8gcmVnaXN0ZXJcbiAgICAgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBleHRlbnNpb24gd2FzIHJlZ2lzdGVyZWQsIGZhbHNlIG90aGVyd2lzZVxuICAgICAgICAgKiBAc2VlICN1bnJlZ2lzdGVyRXh0ZW5zaW9uKG5hbWUpXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlZ2lzdGVyRXh0ZW5zaW9uID0gZnVuY3Rpb24obmFtZSwgZXh0ZW5zaW9uKSB7XG4gICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAnSWxsZWdhbCBhcmd1bWVudHMgbnVtYmVyOiByZXF1aXJlZCAyLCBnb3QgJyArIGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIV9pc1N0cmluZyhuYW1lKSkge1xuICAgICAgICAgICAgICAgIHRocm93ICdJbGxlZ2FsIGFyZ3VtZW50IHR5cGU6IGV4dGVuc2lvbiBuYW1lIG11c3QgYmUgYSBzdHJpbmcnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgZXhpc3RpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX2V4dGVuc2lvbnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXhpc3RpbmdFeHRlbnNpb24gPSBfZXh0ZW5zaW9uc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdFeHRlbnNpb24ubmFtZSA9PT0gbmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBleGlzdGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZXhpc3RpbmcpIHtcbiAgICAgICAgICAgICAgICBfZXh0ZW5zaW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZXh0ZW5zaW9uOiBleHRlbnNpb25cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLl9kZWJ1ZygnUmVnaXN0ZXJlZCBleHRlbnNpb24nLCBuYW1lKTtcblxuICAgICAgICAgICAgICAgIC8vIENhbGxiYWNrIGZvciBleHRlbnNpb25zXG4gICAgICAgICAgICAgICAgaWYgKF9pc0Z1bmN0aW9uKGV4dGVuc2lvbi5yZWdpc3RlcmVkKSkge1xuICAgICAgICAgICAgICAgICAgICBleHRlbnNpb24ucmVnaXN0ZXJlZChuYW1lLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5faW5mbygnQ291bGQgbm90IHJlZ2lzdGVyIGV4dGVuc2lvbiB3aXRoIG5hbWUnLCBuYW1lLCAnc2luY2UgYW5vdGhlciBleHRlbnNpb24gd2l0aCB0aGUgc2FtZSBuYW1lIGFscmVhZHkgZXhpc3RzJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVbnJlZ2lzdGVyIGFuIGV4dGVuc2lvbiBwcmV2aW91c2x5IHJlZ2lzdGVyZWQgd2l0aFxuICAgICAgICAgKiB7QGxpbmsgI3JlZ2lzdGVyRXh0ZW5zaW9uKG5hbWUsIGV4dGVuc2lvbil9LlxuICAgICAgICAgKiBAcGFyYW0gbmFtZSB0aGUgbmFtZSBvZiB0aGUgZXh0ZW5zaW9uIHRvIHVucmVnaXN0ZXIuXG4gICAgICAgICAqIEByZXR1cm4gdHJ1ZSBpZiB0aGUgZXh0ZW5zaW9uIHdhcyB1bnJlZ2lzdGVyZWQsIGZhbHNlIG90aGVyd2lzZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy51bnJlZ2lzdGVyRXh0ZW5zaW9uID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgICAgICAgaWYgKCFfaXNTdHJpbmcobmFtZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAnSWxsZWdhbCBhcmd1bWVudCB0eXBlOiBleHRlbnNpb24gbmFtZSBtdXN0IGJlIGEgc3RyaW5nJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHVucmVnaXN0ZXJlZCA9IGZhbHNlO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfZXh0ZW5zaW9ucy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIHZhciBleHRlbnNpb24gPSBfZXh0ZW5zaW9uc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAoZXh0ZW5zaW9uLm5hbWUgPT09IG5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgX2V4dGVuc2lvbnMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICB1bnJlZ2lzdGVyZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9kZWJ1ZygnVW5yZWdpc3RlcmVkIGV4dGVuc2lvbicsIG5hbWUpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIENhbGxiYWNrIGZvciBleHRlbnNpb25zXG4gICAgICAgICAgICAgICAgICAgIHZhciBleHQgPSBleHRlbnNpb24uZXh0ZW5zaW9uO1xuICAgICAgICAgICAgICAgICAgICBpZiAoX2lzRnVuY3Rpb24oZXh0LnVucmVnaXN0ZXJlZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dC51bnJlZ2lzdGVyZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB1bnJlZ2lzdGVyZWQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpbmQgdGhlIGV4dGVuc2lvbiByZWdpc3RlcmVkIHdpdGggdGhlIGdpdmVuIG5hbWUuXG4gICAgICAgICAqIEBwYXJhbSBuYW1lIHRoZSBuYW1lIG9mIHRoZSBleHRlbnNpb24gdG8gZmluZFxuICAgICAgICAgKiBAcmV0dXJuIHRoZSBleHRlbnNpb24gZm91bmQgb3IgbnVsbCBpZiBubyBleHRlbnNpb24gd2l0aCB0aGUgZ2l2ZW4gbmFtZSBoYXMgYmVlbiByZWdpc3RlcmVkXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdldEV4dGVuc2lvbiA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX2V4dGVuc2lvbnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXh0ZW5zaW9uID0gX2V4dGVuc2lvbnNbaV07XG4gICAgICAgICAgICAgICAgaWYgKGV4dGVuc2lvbi5uYW1lID09PSBuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBleHRlbnNpb24uZXh0ZW5zaW9uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRoZSBuYW1lIGFzc2lnbmVkIHRvIHRoaXMgQ29tZXREIG9iamVjdCwgb3IgdGhlIHN0cmluZyAnZGVmYXVsdCdcbiAgICAgICAgICogaWYgbm8gbmFtZSBoYXMgYmVlbiBleHBsaWNpdGx5IHBhc3NlZCBhcyBwYXJhbWV0ZXIgdG8gdGhlIGNvbnN0cnVjdG9yLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5nZXROYW1lID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gX25hbWU7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdGhlIGNsaWVudElkIGFzc2lnbmVkIGJ5IHRoZSBCYXlldXggc2VydmVyIGR1cmluZyBoYW5kc2hha2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdldENsaWVudElkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gX2NsaWVudElkO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRoZSBVUkwgb2YgdGhlIEJheWV1eCBzZXJ2ZXIuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdldFVSTCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKF90cmFuc3BvcnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgdXJsID0gX3RyYW5zcG9ydC5nZXRVUkwoKTtcbiAgICAgICAgICAgICAgICBpZiAodXJsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1cmw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHVybCA9IF9jb25maWcudXJsc1tfdHJhbnNwb3J0LmdldFR5cGUoKV07XG4gICAgICAgICAgICAgICAgaWYgKHVybCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXJsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfY29uZmlnLnVybDtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmdldFRyYW5zcG9ydCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90cmFuc3BvcnQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5nZXRDb25maWd1cmF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbWl4aW4odHJ1ZSwge30sIF9jb25maWcpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZ2V0QWR2aWNlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbWl4aW4odHJ1ZSwge30sIF9hZHZpY2UpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuc2V0VGltZW91dCA9IGZ1bmN0aW9uKGZ1bmt0aW9uLCBkZWxheSkge1xuICAgICAgICAgICAgcmV0dXJuIF9zY2hlZHVsZXIuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBfY29tZXRkLl9kZWJ1ZygnSW52b2tpbmcgdGltZWQgZnVuY3Rpb24nLCBmdW5rdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmt0aW9uKCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoeCkge1xuICAgICAgICAgICAgICAgICAgICBfY29tZXRkLl9kZWJ1ZygnRXhjZXB0aW9uIGludm9raW5nIHRpbWVkIGZ1bmN0aW9uJywgZnVua3Rpb24sIHgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGRlbGF5KTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmNsZWFyVGltZW91dCA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgICAgICAgICBfc2NoZWR1bGVyLmNsZWFyVGltZW91dChpZCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSB0cmFuc3BvcnRzLlxuICAgICAgICBpZiAod2luZG93LldlYlNvY2tldCkge1xuICAgICAgICAgICAgdGhpcy5yZWdpc3RlclRyYW5zcG9ydCgnd2Vic29ja2V0JywgbmV3IFdlYlNvY2tldFRyYW5zcG9ydCgpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlZ2lzdGVyVHJhbnNwb3J0KCdsb25nLXBvbGxpbmcnLCBuZXcgTG9uZ1BvbGxpbmdUcmFuc3BvcnQoKSk7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJUcmFuc3BvcnQoJ2NhbGxiYWNrLXBvbGxpbmcnLCBuZXcgQ2FsbGJhY2tQb2xsaW5nVHJhbnNwb3J0KCkpO1xuICAgIH07XG5cbiAgICB2YXIgX3o4NUVuY29kZVRhYmxlID0gW1xuICAgICAgICAnMCcsICcxJywgJzInLCAnMycsICc0JywgJzUnLCAnNicsICc3JywgJzgnLCAnOScsXG4gICAgICAgICdhJywgJ2InLCAnYycsICdkJywgJ2UnLCAnZicsICdnJywgJ2gnLCAnaScsICdqJyxcbiAgICAgICAgJ2snLCAnbCcsICdtJywgJ24nLCAnbycsICdwJywgJ3EnLCAncicsICdzJywgJ3QnLFxuICAgICAgICAndScsICd2JywgJ3cnLCAneCcsICd5JywgJ3onLCAnQScsICdCJywgJ0MnLCAnRCcsXG4gICAgICAgICdFJywgJ0YnLCAnRycsICdIJywgJ0knLCAnSicsICdLJywgJ0wnLCAnTScsICdOJyxcbiAgICAgICAgJ08nLCAnUCcsICdRJywgJ1InLCAnUycsICdUJywgJ1UnLCAnVicsICdXJywgJ1gnLFxuICAgICAgICAnWScsICdaJywgJy4nLCAnLScsICc6JywgJysnLCAnPScsICdeJywgJyEnLCAnLycsXG4gICAgICAgICcqJywgJz8nLCAnJicsICc8JywgJz4nLCAnKCcsICcpJywgJ1snLCAnXScsICd7JyxcbiAgICAgICAgJ30nLCAnQCcsICclJywgJyQnLCAnIydcbiAgICBdO1xuICAgIHZhciBfejg1RGVjb2RlVGFibGUgPSBbXG4gICAgICAgIDB4MDAsIDB4NDQsIDB4MDAsIDB4NTQsIDB4NTMsIDB4NTIsIDB4NDgsIDB4MDAsXG4gICAgICAgIDB4NEIsIDB4NEMsIDB4NDYsIDB4NDEsIDB4MDAsIDB4M0YsIDB4M0UsIDB4NDUsXG4gICAgICAgIDB4MDAsIDB4MDEsIDB4MDIsIDB4MDMsIDB4MDQsIDB4MDUsIDB4MDYsIDB4MDcsXG4gICAgICAgIDB4MDgsIDB4MDksIDB4NDAsIDB4MDAsIDB4NDksIDB4NDIsIDB4NEEsIDB4NDcsXG4gICAgICAgIDB4NTEsIDB4MjQsIDB4MjUsIDB4MjYsIDB4MjcsIDB4MjgsIDB4MjksIDB4MkEsXG4gICAgICAgIDB4MkIsIDB4MkMsIDB4MkQsIDB4MkUsIDB4MkYsIDB4MzAsIDB4MzEsIDB4MzIsXG4gICAgICAgIDB4MzMsIDB4MzQsIDB4MzUsIDB4MzYsIDB4MzcsIDB4MzgsIDB4MzksIDB4M0EsXG4gICAgICAgIDB4M0IsIDB4M0MsIDB4M0QsIDB4NEQsIDB4MDAsIDB4NEUsIDB4NDMsIDB4MDAsXG4gICAgICAgIDB4MDAsIDB4MEEsIDB4MEIsIDB4MEMsIDB4MEQsIDB4MEUsIDB4MEYsIDB4MTAsXG4gICAgICAgIDB4MTEsIDB4MTIsIDB4MTMsIDB4MTQsIDB4MTUsIDB4MTYsIDB4MTcsIDB4MTgsXG4gICAgICAgIDB4MTksIDB4MUEsIDB4MUIsIDB4MUMsIDB4MUQsIDB4MUUsIDB4MUYsIDB4MjAsXG4gICAgICAgIDB4MjEsIDB4MjIsIDB4MjMsIDB4NEYsIDB4MDAsIDB4NTAsIDB4MDAsIDB4MDBcbiAgICBdO1xuICAgIHZhciBaODUgPSB7XG4gICAgICAgIGVuY29kZTogZnVuY3Rpb24oYnl0ZXMpIHtcbiAgICAgICAgICAgIHZhciBidWZmZXIgPSBudWxsO1xuICAgICAgICAgICAgaWYgKGJ5dGVzIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICAgICAgICBidWZmZXIgPSBieXRlcztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYnl0ZXMuYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICAgICAgICBidWZmZXIgPSBieXRlcy5idWZmZXI7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYnl0ZXMpKSB7XG4gICAgICAgICAgICAgICAgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoYnl0ZXMpLmJ1ZmZlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChidWZmZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRocm93ICdDYW5ub3QgWjg1IGVuY29kZSAnICsgYnl0ZXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBsZW5ndGggPSBidWZmZXIuYnl0ZUxlbmd0aDtcbiAgICAgICAgICAgIHZhciByZW1haW5kZXIgPSBsZW5ndGggJSA0O1xuICAgICAgICAgICAgdmFyIHBhZGRpbmcgPSA0IC0gKHJlbWFpbmRlciA9PT0gMCA/IDQgOiByZW1haW5kZXIpO1xuICAgICAgICAgICAgdmFyIHZpZXcgPSBuZXcgRGF0YVZpZXcoYnVmZmVyKTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSAnJztcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aCArIHBhZGRpbmc7ICsraSkge1xuICAgICAgICAgICAgICAgIHZhciBpc1BhZGRpbmcgPSBpID49IGxlbmd0aDtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlICogMjU2ICsgKGlzUGFkZGluZyA/IDAgOiB2aWV3LmdldFVpbnQ4KGkpKTtcbiAgICAgICAgICAgICAgICBpZiAoKGkgKyAxKSAlIDQgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRpdmlzb3IgPSA4NSAqIDg1ICogODUgKiA4NTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPiAwOyAtLWopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNQYWRkaW5nIHx8IGogPiBwYWRkaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvZGUgPSBNYXRoLmZsb29yKHZhbHVlIC8gZGl2aXNvcikgJSA4NTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gX3o4NUVuY29kZVRhYmxlW2NvZGVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGl2aXNvciAvPSA4NTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9LFxuICAgICAgICBkZWNvZGU6IGZ1bmN0aW9uKHN0cmluZykge1xuICAgICAgICAgICAgdmFyIHJlbWFpbmRlciA9IHN0cmluZy5sZW5ndGggJSA1O1xuICAgICAgICAgICAgdmFyIHBhZGRpbmcgPSA1IC0gKHJlbWFpbmRlciA9PT0gMCA/IDUgOiByZW1haW5kZXIpO1xuICAgICAgICAgICAgZm9yICh2YXIgcCA9IDA7IHAgPCBwYWRkaW5nOyArK3ApIHtcbiAgICAgICAgICAgICAgICBzdHJpbmcgKz0gX3o4NUVuY29kZVRhYmxlW196ODVFbmNvZGVUYWJsZS5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBsZW5ndGggPSBzdHJpbmcubGVuZ3RoO1xuXG4gICAgICAgICAgICB2YXIgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKChsZW5ndGggKiA0IC8gNSkgLSBwYWRkaW5nKTtcbiAgICAgICAgICAgIHZhciB2aWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlcik7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSAwO1xuICAgICAgICAgICAgdmFyIGNoYXJJZHggPSAwO1xuICAgICAgICAgICAgdmFyIGJ5dGVJZHggPSAwO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIHZhciBjb2RlID0gc3RyaW5nLmNoYXJDb2RlQXQoY2hhcklkeCsrKSAtIDMyO1xuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgKiA4NSArIF96ODVEZWNvZGVUYWJsZVtjb2RlXTtcbiAgICAgICAgICAgICAgICBpZiAoY2hhcklkeCAlIDUgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRpdmlzb3IgPSAyNTYgKiAyNTYgKiAyNTY7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChkaXZpc29yID49IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChieXRlSWR4IDwgdmlldy5ieXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5zZXRVaW50OChieXRlSWR4KyssIE1hdGguZmxvb3IodmFsdWUgLyBkaXZpc29yKSAlIDI1Nik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXZpc29yIC89IDI1NjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gYnVmZmVyO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIENvbWV0RDogQ29tZXRELFxuICAgICAgICBUcmFuc3BvcnQ6IFRyYW5zcG9ydCxcbiAgICAgICAgUmVxdWVzdFRyYW5zcG9ydDogUmVxdWVzdFRyYW5zcG9ydCxcbiAgICAgICAgTG9uZ1BvbGxpbmdUcmFuc3BvcnQ6IExvbmdQb2xsaW5nVHJhbnNwb3J0LFxuICAgICAgICBDYWxsYmFja1BvbGxpbmdUcmFuc3BvcnQ6IENhbGxiYWNrUG9sbGluZ1RyYW5zcG9ydCxcbiAgICAgICAgV2ViU29ja2V0VHJhbnNwb3J0OiBXZWJTb2NrZXRUcmFuc3BvcnQsXG4gICAgICAgIFV0aWxzOiBVdGlscyxcbiAgICAgICAgWjg1OiBaODVcbiAgICB9O1xufSkpO1xuIiwiLy8gQHRzLW5vY2hlY2tcblxuaW1wb3J0IHsgbG9nR2VuZXN5c0V2ZW50IH0gZnJvbSBcIi4vdXRpbGl0aWVzXCI7XG5pbXBvcnQgeyBnZXRQYXJlbnRJbmZvIH0gZnJvbSBcIi4vdXRpbGl0aWVzL2dldFBhcmVudEluZm9cIjtcbmltcG9ydCBnZXRDb29raWUgZnJvbSAnLi4vc2l0ZS11dGlsaXRpZXMvY29va2llLXN0b3JhZ2UvZ2V0JztcblxuXG4vKipcbiAqIGNvb2tpZUNoZWNrXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBcbiAqIEByZXR1cm5zIGJvb2xlYW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvb2tpZUNoZWNrKG5hbWUsIGtleSwgZ2V0VmFsdWUpIHtcbiAgY29uc3QgYmFjdG1Db29raWVzID0gbmV3IGJhY3RtLkNvb2tpZXMoKTtcbiAgY29uc3QgY29va2llRXhpc3RzID0gYmFjdG1Db29raWVzLmdldChuYW1lKTtcbiAgY29uc3QgY29va2llID0gY29va2llRXhpc3RzID8gSlNPTi5wYXJzZShjb29raWVFeGlzdHMpIDogJyc7XG4gIGlmIChnZXRWYWx1ZSkgcmV0dXJuIChjb29raWVba2V5XSk7XG4gIHJldHVybiAoY29va2llW2tleV0gPyB0cnVlIDogZmFsc2UpIC8vIGlmIGtleSBleGlzdHMsIHJldHVybiB0cnVlLlxufVxuXG4vKipcbiAqIGlzTW9iaWxlQ2hhdFxuICogQHJldHVybnMgYm9vbGVhblxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNNb2JpbGVDaGF0KCkge1xuICBjb25zdCB7IHBhcmVudERETywgcGFyZW50SHJlZiB9ID0gZ2V0UGFyZW50SW5mbygpO1xuICBcbiAgLy8gcmVhZCBxcyBmb3IgcGFyYW1ldGVyc1xuICBjb25zdCBxc1BhcmFtZXRlcnMgPSBbJ25hdGl2ZUNoYXQ9YXZhaWxhYmxlJywgJ25hdGl2ZUNoYXQ9YWN0aXZlJywgJ3dyYXA9TURBJ10gLy8gd3JhcD1NREEgaXMgbm90IGEgc29saWQgaW5kaWNhdG9yIG9mIEFDUyBmbG93XG4gIGNvbnN0IHFzQ2hlY2sgPSBwYXJlbnRIcmVmLmluY2x1ZGVzKHFzUGFyYW1ldGVycykgLy8gdGhpcyB3b24ndCB3b3JrLlxuICBcbiAgLy8gcmVhZCBkZG8gZm9yIHBhcmFtZXRlcnNcbiAgY29uc3QgZGRvQ2hlY2sgPSBwYXJlbnRERE8/LnBhZ2U/LmF0dHJpYnV0ZXM/LmNoYXQ/Lm1vYmlsZUluZGljYXRvciA9PSAnWScgPyB0cnVlIDogZmFsc2U7XG4gIFxuICAvLyBjaGVjayBvY2N0Q2hhdCBjb29raWVcbiAgY29uc3Qgb2NjdENoYXRDb29raWVDaGVjayA9IGNvb2tpZUNoZWNrKCdvY2N0Q2hhdCcsICduYXRpdmVDaGF0Jyk7XG4gIFxuICAvLyBjaGVjayBvY2N0Q2hhdF9MVFMgY29va2llXG4gIGNvbnN0IG9jY3RDaGF0X0xUU0Nvb2tpZUNoZWNrID0gY29va2llQ2hlY2soJ29jY3RDaGF0X0xUUycsICduYXRpdmVDaGF0Jyk7XG4gIFxuICBpZiAocXNDaGVjayB8fCBkZG9DaGVjayB8fCBvY2N0Q2hhdENvb2tpZUNoZWNrIHx8IG9jY3RDaGF0X0xUU0Nvb2tpZUNoZWNrKSB7XG4gICAgbG9nR2VuZXN5c0V2ZW50KDEsICdNb2JpbGUgQUNTIEZMT1cgJywgdHJ1ZSApXG4gICAgcmV0dXJuIHRydWVcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbmF0aXZlQW5kUmVmSUREZWZpbmVkICgpIHtcbmxldCBuYXRpdmVDaGF0Q29ycmVjdCA9IGZhbHNlO1xubGV0IHJlZklEQ29ycmVjdCA9IGZhbHNlO1xuY29uc3QgeyBwYXJlbnRIcmVmIH0gPSBnZXRQYXJlbnRJbmZvKCk7XG4gIFxuLy8gcmVhZCBxcyBmb3IgcGFyYW1ldGVyc1xuY29uc3QgcXNDaGVjayA9IChrZXkpID0+IHtcbiAgaWYgKCFwYXJlbnRIcmVmKSByZXR1cm47XG4gIGNvbnN0IHBhcmVudFVSTFBhcnRzID0gbmV3IFVSTChwYXJlbnRIcmVmKTtcbiAgLy8gcGFyZW50SHJlZi5pbmNsdWRlcyhxc1BhcmFtZXRlcnMpIC8vIGxvb3AgdGhyb3VnaCBpbmRpY2F0b3JzLlxuICBjb25zdCBjaGF0UVMgPSBwYXJlbnRVUkxQYXJ0cy5zZWFyY2hQYXJhbXMuZ2V0KGtleSk7XG4gIGlmICghY2hhdFFTKSByZXR1cm47XG4gIGlmIChrZXkgPT09ICduYXRpdmVDaGF0JyAmJiAoY2hhdFFTLmluY2x1ZGVzKCdhdmFpbGFibGUnKSB8fCBjaGF0UVMuaW5jbHVkZXMoJ2FjdGl2ZScpKSkgcmV0dXJuIG5hdGl2ZUNoYXRDb3JyZWN0ID0gdHJ1ZTtcbiAgaWYgKGtleSA9PT0gJ2NoYXRSZWZJRCcgJiYgKGNoYXRRUy5sZW5ndGggPiAxICYmIHR5cGVvZiBjaGF0UVMgPT09IFwic3RyaW5nXCIpKSByZXR1cm4gcmVmSURDb3JyZWN0ID0gdHJ1ZTsgLy8gd29ya2luZ1xuICByZXR1cm4gZmFsc2U7XG59O1xuXG5jb25zdCBlbnN1cmVDb29raWVWYWwgPSAoY29va2llTmFtZSwgdmFsdWVzKSA9PiB7XG4gIGNvbnN0IGNvb2tpZSA9IGdldENvb2tpZShjb29raWVOYW1lKTtcbiAgaWYgKCFjb29raWUpIHJldHVybiBmYWxzZTtcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWVzKSl7XG4gICAgdmFsdWVzLmZvckVhY2goKHZhbCkgPT4ge1xuICAgICAgLy8gZW5zdXJlIGNvb2tpZSBjb250YWlucyBleHBlY3RlZCB2YWx1ZXMsIGlmIHNvLCBzZXQgJ2NvcnJlY3QnIGZsYWdzIHRvIHRydWUuXG4gICAgICBpZiAoIWNvb2tpZSB8fCAhY29va2llW3ZhbF0pIHJldHVybjtcbiAgICAgICAgaWYgKHZhbCA9PT0gXCJuYXRpdmVDaGF0XCIgJiYgdHlwZW9mIGNvb2tpZVt2YWxdID09PSBcInN0cmluZ1wiICYmIGNvb2tpZVt2YWxdLmxlbmd0aCA+IDApIHJldHVybiBuYXRpdmVDaGF0Q29ycmVjdCA9IHRydWU7XG4gICAgICAgIGlmICh2YWwgPT09IFwiY2hhdFJlZklEXCIgJiYgdHlwZW9mIGNvb2tpZVt2YWxdID09PSBcInN0cmluZ1wiICYmIGNvb2tpZVt2YWxdLmxlbmd0aCA+IDApIHJldHVybiByZWZJRENvcnJlY3QgPSB0cnVlO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSlcbiAgfVxufVxuXG4vLyBjaGVjayBpZiBxdWVyeSBzdHJpbmdzIGFyZSBwb3B1bGF0ZWQgYW5kIGNvcnJlY3QuXG5xc0NoZWNrKCduYXRpdmVDaGF0Jyk7XG5xc0NoZWNrKCdjaGF0UmVmSUQnKTtcbi8vIGNoZWNrIGlmIGNvb2tpZXMgYXJlIHBvcHVsYXRlZCBhbmQgY29ycmVjdFxuLy8gZW5zdXJlQ29va2llVmFsKCdvY2N0Q2hhdF9MVFMnLCBbJ2NoYXRSZWZJRCcsICduYXRpdmVDaGF0J10pO1xuZW5zdXJlQ29va2llVmFsKCdvY2N0Q2hhdCcsIFsnY2hhdFJlZklEJywgJ25hdGl2ZUNoYXQnXSk7XG5cbi8vIGlmIGJvdGggYXJlIGRlZmluZWQgY29ycmVjdGx5LCByZXR1cm4gdHJ1ZVxuaWYgKG5hdGl2ZUNoYXRDb3JyZWN0ICYmIHJlZklEQ29ycmVjdCkgcmV0dXJuIHRydWU7XG4gIHJldHVybiBmYWxzZTtcbn0iLCJpbXBvcnQge0FDU19MT0dHRVJfVVJMfSBmcm9tIFwiLi4vLi4vc2l0ZS1wdWItc3ViL3NpdGUtZ2xvYmFsc1wiO1xuaW1wb3J0IHtsb2dHZW5lc3lzRXZlbnR9IGZyb20gXCIuLi91dGlsaXRpZXNcIjtcbmltcG9ydCB7Z2V0UGFyZW50SW5mb30gZnJvbSBcIi4vZ2V0UGFyZW50SW5mb1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtb2JpbGVBQ1NMb2dnZXJTZXJ2aWNlKGxhYmVsLCBlcnJvcikge1xuICBjb25zdCB7cGFyZW50SHJlZn0gPSBnZXRQYXJlbnRJbmZvKCk7XG4gIGNvbnNvbGUuaW5mbyhwYXJlbnRIcmVmKVxuICBpZiAocGFyZW50SHJlZi5pbmNsdWRlcygnc2VjdXJlJykpIHtcbiAgICBjb25zdCBwYXJlbnRVcmwgPSBuZXcgVVJMKHBhcmVudEhyZWYpO1xuXG4gICAgaWYgKCF3aW5kb3cuYmFjdG1fZW52U2VsZWN0b3IpIFxuICAgICAgcmV0dXJuO1xuICAgIFxuICAgIGxvZ0dlbmVzeXNFdmVudCgxLCAnQ2xpZW50IExvZ2dlciBmaXJlZCcsIGVycm9yKVxuICAgIGNvbnN0IGVycm9yUGF5bG9hZCA9IHtcbiAgICAgIFwicGF5bG9hZFwiOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBcImxvZ0xldmVsXCI6IFwiZGVidWdcIixcbiAgICAgICAgICBcImVudHJ5XCI6IGBsYWJlbDogJHtsYWJlbH0gfCBlcnJvcjogJHtlcnJvci5tZXNzYWdlfWBcbiAgICAgICAgfSxcbiAgICAgIF1cbiAgICB9XG5cbiAgICBjb25zdCBkb21haW4gPSBwYXJlbnRVcmwub3JpZ2luLnJlcGxhY2UoJ3NlY3VyZScsICdtc2VydmljZScpXG4gICAgY29uc3QgZXJyb3JVUkwgPSBgJHtkb21haW59JHtBQ1NfTE9HR0VSX1VSTH1gO1xuICAgIGZldGNoKGVycm9yVVJMLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICB9LFxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGVycm9yUGF5bG9hZCksXG4gICAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnXG4gICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICBjb25zb2xlLmluZm8ocmVzKTtcbiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkge1xuICAgICAgY29uc29sZS5pbmZvKGUpO1xuICAgIH0pO1xuICB9XG59XG4iLCIvLyBAdHMtbm9jaGVja1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UgKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovXG4vKiogQG1vZHVsZSBjb21ldGQvY2hhbm5lbCAqL1xuaW1wb3J0IGNvbWV0ZCBmcm9tICcuL3ZlbmRvcic7XG5pbXBvcnQge1xuICBDQU5DRUxfSEVBUlRCRUFULFxuICBDT01FVERfQ0hBTk5FTF9NRVNTQUdFUyxcbiAgQ09NRVREX0NIQU5ORUxfU1VCU0NSSVBUSU9OLFxuICBHRU5FUklDX0ZBSUxVUkUsXG4gIFBJWEVMX1RBR19VUkwsXG59IGZyb20gJy4uL3NpdGUtcHViLXN1Yi9zaXRlLWdsb2JhbHMnO1xuaW1wb3J0IHtcbiAgaW5jcmVhc2VFcnJvckNvdW50LFxuICBsb2dHZW5lc3lzRXZlbnQsXG59IGZyb20gJy4uL3NpdGUtdXRpbGl0aWVzL3V0aWxpdGllcyc7XG5pbXBvcnQgZ2V0Q29va2llIGZyb20gJy4uL3NpdGUtdXRpbGl0aWVzL2Nvb2tpZS1zdG9yYWdlL2dldCc7XG5pbXBvcnQge1xuICBzZW5kUG9zdE1lc3NhZ2UsXG59IGZyb20gJy4vcG9zdC1tZXNzYWdlcyc7XG5cbi8qKlxuICogUHVibGlzaCBjb21ldGQgY2hhbm5lbCBtZXNzYWdlc1xuICogQHBhcmFtIHtvYmplY3R9IHBheWxvYWQgLSBjb21ldGQgY2hhbm5lbCBtZXNzYWdlcyBwYXlsb2FkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwdWJsaXNoQ29tZXRkQ2hhbm5lbE1lc3NhZ2VzKHBheWxvYWQ6IG9iamVjdCkge1xuICBUZWFsaXVtUHViU3ViLnB1Ymxpc2goQ09NRVREX0NIQU5ORUxfTUVTU0FHRVMsIHBheWxvYWQpO1xuICBsb2dHZW5lc3lzRXZlbnQoMSwgJ0NvbWV0ZCBDaGFubmVsIE1lc3NhZ2UnLCBwYXlsb2FkKTtcbn1cblxuLyoqXG4gKiBQdWJsaXNoIGNvbWV0ZCBjaGFubmVsIHN1YnNjcmlwdGlvblxuICogQHBhcmFtIHtvYmplY3R9IHBheWxvYWQgLSBjb21ldGQgY2hhbm5lbCBzdWJzY3JpcHRpb24gcGF5bG9hZFxuICovXG5leHBvcnQgZnVuY3Rpb24gcHVibGlzaENvbWV0ZENoYW5uZWxTdWJzY3JpcHRpb24ocGF5bG9hZDogb2JqZWN0KSB7XG4gIFRlYWxpdW1QdWJTdWIucHVibGlzaChDT01FVERfQ0hBTk5FTF9TVUJTQ1JJUFRJT04sIHBheWxvYWQpO1xuICBsb2dHZW5lc3lzRXZlbnQoMSwgJ0NvbWV0ZCBDaGFubmVsIFN1YnNjcmlwdGlvbicsIHBheWxvYWQpO1xufVxuXG4vKipcbiAqIENvbWV0IEQgcmVxdWVzdCBjaGFubmVsKlxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZSAtIG5hbWUgb2YgZXZlbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0Q2hhbm5lbCAtIENoYW5uZWwgYmVpbmcgcmVxdWVzdGVkXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdENoYXREYXRhIC0gY29tZXRkIHJlcXVlc3QgY2hhbm5lbFxuICogQGV4YW1wbGVcbiBUZWFsaXVtUHViU3ViLnB1Ymxpc2goQ09NRVREX1JFUVVFU1RfQ0hBTk5FTCwge1xuICByZXF1ZXN0Q2hhbm5lbDogJy9zZXJ2aWNlL2NoYXRWMi9kaWdpdGFsLXBvYycsXG4gIHJlcXVlc3RDaGF0RGF0YToge1xuICAgICAgb3BlcmF0aW9uOiBcInJlcXVlc3RDaGF0XCIsXG4gICAgICBmaXJzdE5hbWU6IFwiSm9hblwiLFxuICAgICAgbGFzdE5hbWU6IFwiU21pdGhcIixcbiAgICAgIHN1YmplY3Q6IFwiU2F2aW5ncyBBY2NvdW50XCIsXG4gICAgICB1c2VyRGF0YToge1xuICAgICAgICAgIGtleTE6IFwidmFsdWUxXCIsXG4gICAgICAgICAga2V5MjogXCJ2YWx1ZTJcIlxuICAgICAgfSxcbiAgICAgIGF1dGg6IHtcbiAgICAgICAgICB1c2VybmFtZTogXCJ1c2VyMVwiLFxuICAgICAgICAgIHBhc3N3b3JkOiBcInBhc3MxXCJcbiAgICAgIH1cbiAgfVxufSk7XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21ldGRSZXF1ZXN0Q2hhbm5lbChldmVudE5hbWU6IHN0cmluZywgeyByZXF1ZXN0Q2hhbm5lbCwgcmVxdWVzdENoYXREYXRhfTogeyByZXF1ZXN0Q2hhbm5lbDogc3RyaW5nLCByZXF1ZXN0Q2hhdERhdGE6IHsgdXNlckRhdGE6IGFueSB9IH0pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZWZJRENvb2tpZSA9IGdldENvb2tpZSgnbW9ja1JlZklEJylcbiAgICBjb25zdCBjaGF0UmVmSUQgPSByZWZJRENvb2tpZT8ubW9ja1JlZklEO1xuICAgIGlmICggY2hhdFJlZklEICYmIHdpbmRvdy5iYWN0bV9lbnZTZWxlY3RvciA9PT0gJ25vdHByb2QnICkgcmVxdWVzdENoYXREYXRhLnVzZXJEYXRhLkNIQVRfUkVGX0lEID0gY2hhdFJlZklEO1xuICAgIGNvbnN0IGRhdGFUb1NlbmQgPSByZXF1ZXN0Q2hhdERhdGEudXNlckRhdGE7XG4gICAgaWYgKGRhdGFUb1NlbmQuTUxEX09BT19BQ0NPVU5UTlVNQkVSKSBkZWxldGUgZGF0YVRvU2VuZC5NTERfT0FPX0FDQ09VTlROVU1CRVI7XG4gICAgT2JqZWN0LmtleXMoZGF0YVRvU2VuZCkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGRhdGFUb1NlbmRba2V5XTtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnIHx8IHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgIGRlbGV0ZSBkYXRhVG9TZW5kW2tleV07XG4gICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpICYmIHZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBkZWxldGUgZGF0YVRvU2VuZFtrZXldO1xuICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgYWx0VmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICBkYXRhVG9TZW5kW2tleV0gPSBhbHRWYWx1ZTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xuICAgICAgICBjb25zdCBhbHRWYWx1ZSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgICAgICAgZGF0YVRvU2VuZFtrZXldID0gYWx0VmFsdWU7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycgJiYgdmFsdWUudG9TdHJpbmcoKSkge1xuICAgICAgICBjb25zdCBhbHRWYWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgIGRhdGFUb1NlbmRba2V5XSA9IGFsdFZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGF0YVRvU2VuZFtrZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICByZXF1ZXN0Q2hhdERhdGEudXNlckRhdGEgPSB7XG4gICAgICAuLi5kYXRhVG9TZW5kLFxuICAgIH07XG4gICAgY29tZXRkLnB1Ymxpc2gocmVxdWVzdENoYW5uZWwsIHJlcXVlc3RDaGF0RGF0YSk7XG4gICAgbG9nR2VuZXN5c0V2ZW50KDEsICdDb21ldGQgUmVxdWVzdCBDaGFubmVsJywgeyByZXF1ZXN0Q2hhbm5lbCwgcmVxdWVzdENoYXREYXRhIH0pO1xuXG4gICAgY29uc3QgaXNNb25pdG9yaW5nID0gd2luZG93LmJhY3RtLmRkby5nZXQoJ3BhZ2UuYXR0cmlidXRlcy5jaGF0Lm1vbml0b3JpbmcnKTtcbiAgICBpZihpc01vbml0b3JpbmcpIHNlbmRQb3N0TWVzc2FnZShDQU5DRUxfSEVBUlRCRUFUKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGxvZ0dlbmVzeXNFdmVudCgzLCAnQ29tZXRkIFJlcXVlc3QgQ2hhbm5lbCBFcnJvcicsIGUpO1xuICAgIGlmIChiYWN0bSAmJiBiYWN0bS5wbHVnaW5zICYmIGJhY3RtLnBsdWdpbnMucGl4ZWxUYWcpIGJhY3RtLnBsdWdpbnMucGl4ZWxUYWcuZmlyZVBpeGVsVGFnKGAke1BJWEVMX1RBR19VUkx9P2Vycm9yPSR7ZX1gKTtcbiAgICBUZWFsaXVtUHViU3ViLnB1Ymxpc2goR0VORVJJQ19GQUlMVVJFLCB7IGV2ZW50OiAnY29tZXRkUmVxdWVzdENoYW5uZWwnLCBlcnJvcjogZSB9KTtcbiAgICBpbmNyZWFzZUVycm9yQ291bnQoKTtcbiAgfVxufVxuXG4vKipcbiAqIENvbWV0IEQgc3Vic2NyaWJlIHRvIGNoYW5uZWxcbiAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWUgLSBuYW1lIG9mIGV2ZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdENoYW5uZWwgLSByZXF1ZXN0ZWQgY2hhbm5lbCByZWxhdGl2ZSB1cmxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbWV0ZFN1YnNjcmliZUNoYW5uZWwoZXZlbnROYW1lOiBzdHJpbmcsIHtcbiAgcmVxdWVzdENoYW5uZWwsXG59OiB7IHJlcXVlc3RDaGFubmVsOiBzdHJpbmcgfSkge1xuICB0cnkge1xuICAgIGNvbWV0ZC5zdWJzY3JpYmUocmVxdWVzdENoYW5uZWwsXG4gICAgICBwdWJsaXNoQ29tZXRkQ2hhbm5lbE1lc3NhZ2VzLFxuICAgICAgcHVibGlzaENvbWV0ZENoYW5uZWxTdWJzY3JpcHRpb24pO1xuXG4gICAgbG9nR2VuZXN5c0V2ZW50KDEsICdDb21ldGQgU3Vic2NyaWJlIENoYW5uZWwnLCB7IHJlcXVlc3RDaGFubmVsIH0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgbG9nR2VuZXN5c0V2ZW50KDMsICdDb21ldGQgU3Vic2NyaWJlIENoYW5uZWwgRXJyb3InLCBlKTtcbiAgICBpZiAoYmFjdG0gJiYgYmFjdG0ucGx1Z2lucyAmJiBiYWN0bS5wbHVnaW5zLnBpeGVsVGFnKSBiYWN0bS5wbHVnaW5zLnBpeGVsVGFnLmZpcmVQaXhlbFRhZyhgJHtQSVhFTF9UQUdfVVJMfT9lcnJvcj0ke2V9YCk7XG4gICAgVGVhbGl1bVB1YlN1Yi5wdWJsaXNoKEdFTkVSSUNfRkFJTFVSRSwgeyBldmVudDogJ2NvbWV0ZFN1YnNjcmliZUNoYW5uZWwnLCBlcnJvcjogZSB9KTtcbiAgICBpbmNyZWFzZUVycm9yQ291bnQoKTtcbiAgfVxufVxuXG4vKipcbiAgICogSGFuZGxlcyBpbmNvbWluZyBtZXNzYWdlIGV2ZW50IGZyb20gdXRhZy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlIC0gdGhlIG1lc3NhZ2VzIHN0cmluZyBmcm9tIHVzZXIgaW5wdXRcbiAgICogQHJldHVybnMge0Jvb2xlYW59IHRydWUgaWYgYWxsb3cgd2hpdGVsaXN0ZWQgdGFncywgZmFsc2Ugb3RoZXJ3aXNlXG4gICovXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZEhUTUx0YWcodmFsdWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBsZXQgY2hlY2tIVE1MYWxsb3dlZFRhZ3MgPSBmYWxzZTtcbiAgY29uc3QgYWxsb3dlZFRhZ3MgPSBbXG4gICAgJzxib2R5PicsXG4gICAgJzwvYm9keT4nLFxuICAgICc8dWw+JyxcbiAgICAnPC91bD4nLFxuICAgICc8b2w+JyxcbiAgICAnPC9vbD4nLFxuICAgICc8bGk+JyxcbiAgICAnPC9saT4nLFxuICAgICc8c3Bhbj4nLFxuICAgICc8L3NwYW4+JyxcbiAgICAnPGJyPicsXG4gICAgJzwvYnI+JyxcbiAgICAnPGI+JyxcbiAgICAnPC9iPicsXG4gICAgJzx1PicsXG4gICAgJzwvdT4nLFxuICAgICc8ZW0+JyxcbiAgICAnPC9lbT4nLFxuICAgICc8aT4nLFxuICAgICc8L2k+JyxcbiAgICAnPHN1cD4nLFxuICAgICc8L3N1cD4nLFxuICAgICc8c3Ryb25nPicsXG4gICAgJzwvc3Ryb25nPicsXG4gICAgJzxzbWFsbD4nLFxuICAgICc8L3NtYWxsPicsXG4gICAgJzxwPicsXG4gICAgJzwvcD4nLFxuICAgICc8YnI+JyxcbiAgICAnPC9icj4nLFxuICAgICc8aDE+JyxcbiAgICAnPC9oMT4nLFxuICAgICc8aDI+JyxcbiAgICAnPC9oMj4nLFxuICAgICc8aDM+JyxcbiAgICAnPC9oMz4nLFxuICAgICc8ZGl2PicsXG4gICAgJzwvZGl2PidcbiAgXTtcbiAgbGV0IGRvbUVsZSA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcodmFsdWUsIFwidGV4dC9odG1sXCIpO1xuICBsZXQgbGluayA9IGRvbUVsZS5xdWVyeVNlbGVjdG9yQWxsKCdhJyk7IC8vIGxvY2F0ZSB5b3VyIDxhPiB0YWdcbiAgaWYgKGxpbmsubGVuZ3RoID4gMCkge1xuICAgIGxpbmsuZm9yRWFjaChmdW5jdGlvbiAodGFnKSB7XG4gICAgICByZXR1cm4gdGFnLmhyZWYgIT0gXCJqYXZhc2NyaXB0OmZvbygpXCIgPyBjaGVja0hUTUxhbGxvd2VkVGFncyA9IGZhbHNlIDogY2hlY2tIVE1MYWxsb3dlZFRhZ3MgPSB0cnVlO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGxldCB0YWdzSW5BcnJheSA9IGRvbUVsZS5ib2R5Lm91dGVySFRNTC5tYXRjaCgvXFw8Lio/XFw+L2cpO1xuICAgIGxldCBqc29uQXJyYXk6IGFueVtdID0gW107XG4gICAganNvbkFycmF5ID0gdGFnc0luQXJyYXk/Lm1hcChpID0+IHtcbiAgICAgIHJldHVybiBhbGxvd2VkVGFncy5pbmNsdWRlcyhpKTtcbiAgICB9KSE7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0ganNvbkFycmF5Py5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGpzb25BcnJheVtpXSA9PSBmYWxzZSkge1xuICAgICAgICBjaGVja0hUTUxhbGxvd2VkVGFncyA9IHRydWU7XG4gICAgICAgIHJldHVybiBjaGVja0hUTUxhbGxvd2VkVGFncztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoZWNrSFRNTGFsbG93ZWRUYWdzID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBjaGVja0hUTUxhbGxvd2VkVGFncztcbn1cblxuLyoqXG4gKiBDb21ldCBEIHNlbmQgbWVzc2FnZVxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZSAtIG5hbWUgb2YgZXZlbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0Q2hhbm5lbCAtIHJlcXVlc3RlZCBjaGFubmVsIHJlbGF0aXZlIHVybFxuICogQHBhcmFtIHtzdHJpbmd9IGRhdGEgLSB1c2VyJ3Mgc2VuZCBtZXNzYWdlIGluZm9ybWF0aW9uXG4gKiBAZXhhbXBsZVxuIFRlYWxpdW1QdWJTdWIucHVibGlzaChDT01FVERfUkVRVUVTVF9TRU5EX01FU1NBR0UsIHtcbiAgcmVxdWVzdENoYW5uZWw6ICcvc2VydmljZS9jaGF0VjIvZGlnaXRhbC1wb2MnLFxuICBkYXRhOiB7XG4gICAgICBzZWN1cmVLZXk6IFwiKioqKioqKioqKipcIixcbiAgICAgIG9wZXJhdGlvbjogJ3NlbmRNZXNzYWdlJyxcbiAgICAgIG1lc3NhZ2U6ICdIZWxsbywgLi4uJ1xuICB9XG59KTtcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbWV0ZFNlbmRNZXNzYWdlKGV2ZW50TmFtZTogc3RyaW5nLCB7XG4gIHJlcXVlc3RDaGFubmVsLFxuICBkYXRhLFxufTogeyByZXF1ZXN0Q2hhbm5lbDogc3RyaW5nLCBkYXRhOiB7IG1lc3NhZ2U6IGFueSB9IH0pIHtcbiAgdHJ5IHtcbiAgICAvLyBmaWx0ZXIgZm9yIG1hbGljaW91cyBpbnB1dHNcbiAgICBjb25zdCB2YWx1ZSA9IGRhdGE/Lm1lc3NhZ2U7XG4gICAgY29uc3Qgc2NyaXB0RXhwID0gLyg8W0EtWmEtejAtOV9cXHNdKylbQS1aYS16MC05X1xcL10qKG9uXFxTKykoXFxzKyk/PShcXHMrKT9bXCInXT8vaWc7XG4gICAgY29uc3Qgc2NyaXB0VGFnID0gLzxbXj5dKnNjcmlwdHwoPzo8W14+XStcXHMpKG9uXFxTKykoXFxzKyk/PShcXHMrKT9bXCInXT8vaWc7XG4gICAgY29uc3Qgc2NyaXB0T3RoZXIgPSAvKDxbQS1aYS16MC05X1xcc1xcU10rKVtBLVphLXowLTlfXFwvXSoob25cXFMrKShcXHMrKT89KFxccyspP1tcIiddPy9pZztcbiAgICBjb25zdCBpRnJhbWVUYWcgPSAvPFtePl0qaWZyYW1lL2lnO1xuICAgIC8vIEFkZGluZyBjb25kaXRpb24gZm9yIGNyb3NzIHNpdGUgc2NyaXB0aW5nIGlzc3VlXG4gICAgY29uc3QgYWxsSHRtbFRhZ3MgPSAvPFxcLz9bYS16XVtcXHNcXFNdKj4vaS50ZXN0KHZhbHVlKVxuICAgIGlmIChhbGxIdG1sVGFncyAmJiBpc1ZhbGlkSFRNTHRhZyh2YWx1ZSkpIHJldHVyblxuXG4gICAgaWYgKHZhbHVlLm1hdGNoKHNjcmlwdEV4cCkgfHwgdmFsdWUubWF0Y2goc2NyaXB0VGFnKSB8fCB2YWx1ZS5tYXRjaChpRnJhbWVUYWcgfHwgdmFsdWUubWF0Y2goc2NyaXB0T3RoZXIpKSkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIElucHV0IFJlY2VpdmVkJyk7XG5cbiAgICBjb21ldGQucHVibGlzaChyZXF1ZXN0Q2hhbm5lbCwgZGF0YSk7XG4gICAgbG9nR2VuZXN5c0V2ZW50KDEsICdDb21ldGQgU2VuZCBNZXNzYWdlJywgeyByZXF1ZXN0Q2hhbm5lbCwgZGF0YSB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGxvZ0dlbmVzeXNFdmVudCgzLCAnQ29tZXRkIFNlbmQgTWVzc2FnZSBFcnJvcicsIGUpO1xuICAgIGlmIChiYWN0bSAmJiBiYWN0bS5wbHVnaW5zICYmIGJhY3RtLnBsdWdpbnMucGl4ZWxUYWcpIGJhY3RtLnBsdWdpbnMucGl4ZWxUYWcuZmlyZVBpeGVsVGFnKGAke1BJWEVMX1RBR19VUkx9P2Vycm9yPSR7ZX1gKTtcbiAgICBUZWFsaXVtUHViU3ViLnB1Ymxpc2goR0VORVJJQ19GQUlMVVJFLCB7IGV2ZW50OiAnY29tZXRkU2VuZE1lc3NhZ2UnLCBlcnJvcjogZSB9KTtcbiAgICBpbmNyZWFzZUVycm9yQ291bnQoKTtcbiAgfVxufVxuIiwiLy8gQHRzLW5vY2hlY2tcblxuLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZWYgKi9cbi8qIGVzbGludC1kaXNhYmxlIGNhbWVsY2FzZSAqL1xuLyoqIEBtb2R1bGUgd2ViLXNvY2tldC9kaXNjb25uZWN0ICovXG5pbXBvcnQgY29tZXRkIGZyb20gJy4vdmVuZG9yJztcbmltcG9ydCB7XG4gIEdFTkVSSUNfRkFJTFVSRSxcbiAgUElYRUxfVEFHX1VSTCxcbn0gZnJvbSAnLi4vc2l0ZS1wdWItc3ViL3NpdGUtZ2xvYmFscyc7XG5pbXBvcnQge1xuICBpbmNyZWFzZUVycm9yQ291bnQsXG4gIGxvZ0dlbmVzeXNFdmVudCxcbn0gZnJvbSAnLi4vc2l0ZS11dGlsaXRpZXMvdXRpbGl0aWVzJztcblxuLyoqXG4gKiBkaXNjb25uZWN0IGZyb20gY2hhdFxuICogQGV4YW1wbGVcbiBjb21ldGQuZGlzY29ubmVjdCgpO1xuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoZXZlbnROYW1lOiBzdHJpbmcpIHtcbiAgdHJ5IHtcbiAgICAvLyBUT0RPIGZvbGxvdyBjb21ldGQncyB0eXBlc1xuICAgIGNvbWV0ZC5kaXNjb25uZWN0KCgpID0+IHt9KTtcbiAgICBsb2dHZW5lc3lzRXZlbnQoMSwgJ0NvbWV0ZCBEaXNjb25uZWN0JywgZXZlbnROYW1lKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGxvZ0dlbmVzeXNFdmVudCgzLCAnQ29tZXRkIERpc2Nvbm5lY3QgRXJyb3InLCBlKTtcbiAgICBpZiAoYmFjdG0gJiYgYmFjdG0ucGx1Z2lucyAmJiBiYWN0bS5wbHVnaW5zLnBpeGVsVGFnKSBiYWN0bS5wbHVnaW5zLnBpeGVsVGFnLmZpcmVQaXhlbFRhZyhgJHtQSVhFTF9UQUdfVVJMfT9lcnJvcj0ke2V9YCk7XG4gICAgVGVhbGl1bVB1YlN1Yi5wdWJsaXNoKEdFTkVSSUNfRkFJTFVSRSwgeyBldmVudDogJ2NvbWV0ZERpc2Nvbm5ldCcsIGVycm9yOiBlIH0pO1xuICAgIGluY3JlYXNlRXJyb3JDb3VudCgpO1xuICB9XG59XG4iLCIvLyBAdHMtbm9jaGVja1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBtYXgtbGVuICovXG4vKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UgKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovXG4vKiBlc2xpbnQtZGlzYWJsZSBjb25zaXN0ZW50LXJldHVybiAqL1xuLyoqIEBtb2R1bGUgbWVzc2FnaW5nL2hhbmRsZXJzL2NoYW5uZWxNZXNzYWdlICovXG5pbXBvcnQgeyBDT01FVERfQ0hBTk5FTF9NRVNTQUdFUywgQ09NRVREX0ZBSUxVUkUsIFBJWEVMX1RBR19VUkwgfSBmcm9tICcuLi8uLi9zaXRlLXB1Yi1zdWIvc2l0ZS1nbG9iYWxzJztcbmltcG9ydCB7IHB1Ymxpc2hXaW5kb3csIGxvZ0dlbmVzeXNFdmVudCB9IGZyb20gJy4uLy4uL3NpdGUtdXRpbGl0aWVzL3V0aWxpdGllcyc7XG5pbXBvcnQgc2V0Q29va2llU3RvcmFnZSBmcm9tICcuLi8uLi9zaXRlLXV0aWxpdGllcy9jb29raWUtc3RvcmFnZS9zZXQnO1xuXG4vKipcbiAgICogSGFuZGxlcyBpbmNvbWluZyBtZXNzYWdlIGV2ZW50IGZyb20gdXRhZy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlIC0gdGhlIG1lc3NhZ2VzIHN0cmluZyBmcm9tIHVzZXIgaW5wdXRcbiAgICogQHJldHVybnMge0Jvb2xlYW59IHRydWUgaWYgYWxsb3cgd2hpdGVsaXN0ZWQgdGFncywgZmFsc2Ugb3RoZXJ3aXNlXG4gICovXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZEhUTUx0YWcodmFsdWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBsZXQgY2hlY2tIVE1MYWxsb3dlZFRhZ3MgPSBmYWxzZTtcbiAgY29uc3QgYWxsb3dlZFRhZ3MgPSBbXG4gICAgJzxib2R5PicsXG4gICAgJzwvYm9keT4nLFxuICAgICc8dWw+JyxcbiAgICAnPC91bD4nLFxuICAgICc8b2w+JyxcbiAgICAnPC9vbD4nLFxuICAgICc8bGk+JyxcbiAgICAnPC9saT4nLFxuICAgICc8c3Bhbj4nLFxuICAgICc8L3NwYW4+JyxcbiAgICAnPGJyPicsXG4gICAgJzwvYnI+JyxcbiAgICAnPGI+JyxcbiAgICAnPC9iPicsXG4gICAgJzx1PicsXG4gICAgJzwvdT4nLFxuICAgICc8ZW0+JyxcbiAgICAnPC9lbT4nLFxuICAgICc8aT4nLFxuICAgICc8L2k+JyxcbiAgICAnPHN1cD4nLFxuICAgICc8L3N1cD4nLFxuICAgICc8c3Ryb25nPicsXG4gICAgJzwvc3Ryb25nPicsXG4gICAgJzxzbWFsbD4nLFxuICAgICc8L3NtYWxsPicsXG4gICAgJzxwPicsXG4gICAgJzwvcD4nLFxuICAgICc8YnI+JyxcbiAgICAnPC9icj4nLFxuICAgICc8aDE+JyxcbiAgICAnPC9oMT4nLFxuICAgICc8aDI+JyxcbiAgICAnPC9oMj4nLFxuICAgICc8aDM+JyxcbiAgICAnPC9oMz4nLFxuICAgICc8ZGl2PicsXG4gICAgJzwvZGl2PidcbiAgXTtcbiAgbGV0IGRvbUVsZSA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcodmFsdWUsIFwidGV4dC9odG1sXCIpO1xuICBsZXQgbGluayA9IGRvbUVsZS5xdWVyeVNlbGVjdG9yQWxsKCdhJyk7IC8vIGxvY2F0ZSB5b3VyIDxhPiB0YWdcbiAgaWYgKGxpbmsubGVuZ3RoID4gMCkge1xuICAgIGxpbmsuZm9yRWFjaChmdW5jdGlvbiAodGFnKSB7XG4gICAgICByZXR1cm4gdGFnLmhyZWYgIT0gXCJqYXZhc2NyaXB0OmZvbygpXCIgPyBjaGVja0hUTUxhbGxvd2VkVGFncyA9IGZhbHNlIDogY2hlY2tIVE1MYWxsb3dlZFRhZ3MgPSB0cnVlO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGxldCB0YWdzSW5BcnJheSA9IGRvbUVsZS5ib2R5Lm91dGVySFRNTC5tYXRjaCgvXFw8Lio/XFw+L2cpO1xuICAgIGxldCBqc29uQXJyYXkgPSBbXTtcbiAgICBqc29uQXJyYXkgPSB0YWdzSW5BcnJheT8ubWFwKGkgPT4ge1xuICAgICAgcmV0dXJuIGFsbG93ZWRUYWdzLmluY2x1ZGVzKGkpO1xuICAgIH0pITtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBqc29uQXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChqc29uQXJyYXlbaV0gPT0gZmFsc2UpIHtcbiAgICAgICAgY2hlY2tIVE1MYWxsb3dlZFRhZ3MgPSB0cnVlO1xuICAgICAgICByZXR1cm4gY2hlY2tIVE1MYWxsb3dlZFRhZ3M7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjaGVja0hUTUxhbGxvd2VkVGFncyA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gY2hlY2tIVE1MYWxsb3dlZFRhZ3M7XG5cbn1cblxuXG4vKipcbiAqIFN1YnNjcmliZSBUZWFsaXVtIGFuZCBTcGFydGEgd2lkZ2V0IGxvYWRlciBldmVudHNcbiAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWUgLSBuYW1lIG9mIGV2ZW50XG4gKiBAcGFyYW0ge29iamVjdH0gcGF5bG9hZCAtIENvbWV0ZCBjaGFubmVsIG1lc3NhZ2UgcGF5bG9hZFxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGhhbmRsZUNoYW5uZWxNZXNzYWdlKGV2ZW50TmFtZTogc3RyaW5nLCBwYXlsb2FkOiB7IGRhdGE6IHsgc2VjdXJlS2V5OiBhbnksIG1lc3NhZ2VzOiBhbnkgfX0pOiBib29sZWFuIHwgdW5kZWZpbmVkIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHNlY3VyZUtleSwgbWVzc2FnZXMgfSA9IHBheWxvYWQuZGF0YTtcbiAgICBjb25zdCBzY3JpcHRFeHAgPSAvKDxbQS1aYS16MC05X1xcc10rKVtBLVphLXowLTlfXFwvXSoob25cXFMrKShcXHMrKT89KFxccyspP1tcIiddPy9pZztcbiAgICBjb25zdCBzY3JpcHRUYWcgPSAvPFtePl0qc2NyaXB0fCg/OjxbXj5dK1xccykob25cXFMrKShcXHMrKT89KFxccyspP1tcIiddPy9pZztcbiAgICBjb25zdCBzY3JpcHRPdGhlciA9IC8oPFtBLVphLXowLTlfXFxzXFxTXSspW0EtWmEtejAtOV9cXC9dKihvblxcUyspKFxccyspPz0oXFxzKyk/W1wiJ10/L2lnO1xuICAgIGNvbnN0IGlGcmFtZVRhZyA9IC88W14+XSppZnJhbWUvaWc7XG4gICAgaWYgKHNlY3VyZUtleSAmJiBtZXNzYWdlc1swXSkge1xuICAgICAgY29uc3QgeyBpbmRleCB9ID0gbWVzc2FnZXNbMF07XG4gICAgICBzZXRDb29raWVTdG9yYWdlKHsgc2VjdXJlS2V5LCBpbmRleCB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0Q29va2llU3RvcmFnZSh7IHNlY3VyZUtleSB9KTtcbiAgICB9IHBheWxvYWQuZGF0YS5tZXNzYWdlcy5mb3JFYWNoKChtZXNzYWdlOiB7IHRleHQ6IHN0cmluZyB9LCBpbmRleDogc3RyaW5nKSA9PiB7XG4gICAgICBpZiAoIW1lc3NhZ2UudGV4dCkgcmV0dXJuO1xuICAgICAgY29uc3QgdmFsdWUgPSBtZXNzYWdlLnRleHQ7XG4gICAgXG4gICAgICAvLyBBZGRpbmcgY29uZGl0aW9uIGZvciBjcm9zcyBzaXRlIHNjcmlwdGluZyBpc3N1ZVxuICAgICAgY29uc3QgYWxsSHRtbFRhZ3MgPSAvPFxcLz9bYS16XVtcXHNcXFNdKj4vaS50ZXN0KHZhbHVlKVxuICAgICAgaWYgKGFsbEh0bWxUYWdzICYmIGlzVmFsaWRIVE1MdGFnKHZhbHVlKSkge1xuICAgICAgICBwYXlsb2FkLmRhdGEubWVzc2FnZXNbaW5kZXhdLnRleHQgPSAnPHNjcmlwdCAvPic7XG4gICAgICB9XG5cbiAgICAgIC8vIHJldHVybmluZyA8c2NyaXB0IC8+IGZvciBmYWlsZWQgbWVzc2FnZXMgc2luY2UgaXQgd2lsbCBiZSBibG9ja2VkIGJ5IGNoYXQtc2l0ZSBjb2RlLiBDYW5ub3QgZGVsZXRlIHRoZSB3aG9sZSBvYmplY3QgYXMgaXQgY2F1c2VzIHByb2JsZW1zLlxuICAgICAgaWYgKHZhbHVlLm1hdGNoKHNjcmlwdEV4cCkgfHwgdmFsdWUubWF0Y2goc2NyaXB0VGFnKSB8fCB2YWx1ZS5tYXRjaChpRnJhbWVUYWcgfHwgdmFsdWUubWF0Y2goc2NyaXB0T3RoZXIpKSkge1xuICAgICAgICBwYXlsb2FkLmRhdGEubWVzc2FnZXNbaW5kZXhdLnRleHQgPSAnPHNjcmlwdCAvPic7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBwdWJsaXNoV2luZG93KENPTUVURF9DSEFOTkVMX01FU1NBR0VTLCBwYXlsb2FkKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBsb2dHZW5lc3lzRXZlbnQoMywgJ0NvbWV0ZCBIYW5kbGUgQ2hhbm5lbCBNZXNzYWdlIEVycm9yJywgZSk7XG4gICAgaWYgKGJhY3RtICYmIGJhY3RtLnBsdWdpbnMgJiYgYmFjdG0ucGx1Z2lucy5waXhlbFRhZykge1xuICAgICAgYmFjdG0ucGx1Z2lucy5waXhlbFRhZy5maXJlUGl4ZWxUYWcoYCR7UElYRUxfVEFHX1VSTH0/ZXJyb3I9JHtlfWApO1xuICAgIH1cblxuICAgIFRlYWxpdW1QdWJTdWIucHVibGlzaChDT01FVERfRkFJTFVSRSwge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVDaGFubmVsTWVzc2FnZScsXG4gICAgICBlcnJvcjogZSxcbiAgICB9KTtcbiAgfVxufVxuIiwiLy8gQHRzLW5vY2hlY2tcblxuLyogZXNsaW50LWRpc2FibGUgY2FtZWxjYXNlICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlZiAqL1xuLyoqIEBtb2R1bGUgbWVzc2FnaW5nL2hhbmRsZXJzL3JlcXVlc3QtY2hhbm5lbCAqL1xuXG5pbXBvcnQgeyBDT01FVERfUkVRVUVTVF9DSEFOTkVMIH0gZnJvbSAnLi4vLi4vc2l0ZS1wdWItc3ViL3NpdGUtZ2xvYmFscyc7XG5pbXBvcnQgeyBwdWJsaXNoVGVhbGl1bSB9IGZyb20gJy4uLy4uL3NpdGUtdXRpbGl0aWVzL3V0aWxpdGllcyc7XG5cbi8qKlxuICogUmVxdWVzdCBjaGF0IGNoYW5uZWxcbiAqIEBwYXJhbSB7b2JqZWN0fSBwYXlsb2FkIC0gQ29tZXRkIGNoYW5uZWwgcmVxdWVzdCBwYXlsb2FkXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaGFuZGxlUmVxdWVzdENoYW5uZWwocGF5bG9hZDogeyBkZXRhaWw6IHsgcmVxdWVzdENoYW5uZWw6IHN0cmluZywgcmVxdWVzdENoYXREYXRhOiBhbnkgfX0pOiBib29sZWFuIHtcbiAgY29uc3QgcmVxdWVzdENoYW5uZWxQYXlsb2FkID0geyByZXF1ZXN0Q2hhbm5lbDogcGF5bG9hZC5kZXRhaWwucmVxdWVzdENoYW5uZWwsXG4gICAgcmVxdWVzdENoYXREYXRhOiBwYXlsb2FkLmRldGFpbC5yZXF1ZXN0Q2hhdERhdGEgfTtcbiAgcHVibGlzaFRlYWxpdW0oQ09NRVREX1JFUVVFU1RfQ0hBTk5FTCwgcmVxdWVzdENoYW5uZWxQYXlsb2FkKTtcbiAgcmV0dXJuIGZhbHNlO1xufVxuIiwiLy8gQHRzLW5vY2hlY2tcblxuLyoqIEBtb2R1bGUgbWVzc2FnaW5nL2hhbmRsZXJzL3JlcXVlc3QtaGFuZHNoYWtlICovXG5cbmltcG9ydCB7IENPTUVURF9SRVFVRVNUX0hBTkRTSEFLRSB9IGZyb20gXCIuLi8uLi9zaXRlLXB1Yi1zdWIvc2l0ZS1nbG9iYWxzXCI7XG5pbXBvcnQge1xuICBnZXRDdXJyZW50RG9tYWluLFxuICBwdWJsaXNoVGVhbGl1bSxcbn0gZnJvbSBcIi4uLy4uL3NpdGUtdXRpbGl0aWVzL3V0aWxpdGllc1wiO1xuXG4vKipcbiAqIFJlcXVlc3QgY2hhdCBoYW5kc2hha2VcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBoYW5kbGVSZXF1ZXN0SGFuZHNoYWtlKCk6IGJvb2xlYW4ge1xuICBjb25zdCBjdXJyZW50VExEID0gZ2V0Q3VycmVudERvbWFpbigpO1xuICBjb25zdCBwYXlsb2FkID0ge1xuICAgIHdpZGdldDogc3BhUGFyYW1zPy5zaXRlUGFyYW1zPy5kb21haW5zPy5bY3VycmVudFRMRF0/LndpZGdldEFQSUVuZHBvaW50LFxuICAgIGdlbmVzeXM6IHNwYVBhcmFtcy5zaXRlUGFyYW1zLmRvbWFpbnNbY3VycmVudFRMRF0uZ2VuZXN5cyxcbiAgfTtcbiAgcHVibGlzaFRlYWxpdW0oQ09NRVREX1JFUVVFU1RfSEFORFNIQUtFLCBwYXlsb2FkKTtcbiAgcmV0dXJuIGZhbHNlO1xufVxuIiwiLy8gQHRzLW5vY2hlY2tcblxuLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZWYgKi9cbi8qIGVzbGludC1kaXNhYmxlIGNhbWVsY2FzZSAqL1xuLyoqIEBtb2R1bGUgd2ViLXNvY2tldC9oYW5kc2hha2UgKi9cbmltcG9ydCBjb21ldGQgZnJvbSAnLi92ZW5kb3InO1xuaW1wb3J0IHtcbiAgR0VORVJJQ19GQUlMVVJFLFxuICBQSVhFTF9UQUdfVVJMLFxufSBmcm9tICcuLi9zaXRlLXB1Yi1zdWIvc2l0ZS1nbG9iYWxzJztcbmltcG9ydCB7XG4gIGluY3JlYXNlRXJyb3JDb3VudCxcbiAgbG9nR2VuZXN5c0V2ZW50LFxufSBmcm9tICcuLi9zaXRlLXV0aWxpdGllcy91dGlsaXRpZXMnO1xuXG4vKipcbiAqIE1ha2UgaGFuZHNoYWtlIHcvIGNvbWV0ZCB3ZWJzb2NrZXRcbiAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWUgLSBuYW1lIG9mIGV2ZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gZ2VuZXN5cyAtIEVudmlyb25tZW50IHZhcmlhYmxlIGZyb20gU3BhcnRhLiBuZWVkcyB0byBiZSBMTEUgc3BlY2lmaWNcbiAqIEBleGFtcGxlXG4gY29tZXRkLmNvbmZpZ3VyZSh7IHVybDogYCR7Z2VuZXN5c31jb21ldGRgIH0pO1xuIGNvbWV0ZC5oYW5kc2hha2UoKTtcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKGV2ZW50TmFtZTogc3RyaW5nLCB7IGdlbmVzeXMgfTogeyBnZW5lc3lzOiBzdHJpbmcgfSkge1xuICBjb25zdCBjb25maWd1cmF0aW9uID0ge1xuICAgIHVybDogYCR7Z2VuZXN5c31jb21ldGRgLFxuICB9O1xuICBsb2dHZW5lc3lzRXZlbnQoMSwgJ0NvbWV0ZCBIYW5kc2hha2UnLCBjb25maWd1cmF0aW9uKTtcbiAgdHJ5IHtcbiAgICBjb21ldGQuY29uZmlndXJlKGNvbmZpZ3VyYXRpb24pO1xuICAgIC8vIFRPRE8gZm9sbG93IGNvbWV0ZCdzIHR5cGVzXG4gICAgY29tZXRkLmhhbmRzaGFrZSgoKSA9PiB7fSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBsb2dHZW5lc3lzRXZlbnQoMywgJ0NvbWV0ZCBIYW5kc2hha2UgRXJyb3InLCBlKTtcbiAgICBpZiAoYmFjdG0gJiYgYmFjdG0ucGx1Z2lucyAmJiBiYWN0bS5wbHVnaW5zLnBpeGVsVGFnKSBiYWN0bS5wbHVnaW5zLnBpeGVsVGFnLmZpcmVQaXhlbFRhZyhgJHtQSVhFTF9UQUdfVVJMfT9lcnJvcj0ke2V9YCk7XG4gICAgVGVhbGl1bVB1YlN1Yi5wdWJsaXNoKEdFTkVSSUNfRkFJTFVSRSwgeyBldmVudDogJ2NvbWV0ZEhhbmRzaGFrZScsIGVycm9yOiBlIH0pO1xuICAgIGluY3JlYXNlRXJyb3JDb3VudCgpO1xuICB9XG59XG4iLCIvLyBAdHMtbm9jaGVja1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UgKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovXG4vKiogQG1vZHVsZSBtZXNzYWdpbmcvbWV0YSAqL1xuaW1wb3J0IHtcbiAgQ09NRVREX01FVEFfSEFORFNIQUtFLFxuICBDT01FVERfTUVUQV9ESVNDT05ORUNULFxuICBDT01FVERfTUVUQV9DT05ORUNULFxuICBDT01FVERfTUVUQV9TVUJTQ1JJQkUsXG4gIENPTUVURF9NRVRBX1VOU1VCU0NSSUJFLFxuICBDT01FVERfTUVUQV9QVUJMSVNILFxuICBDT01FVERfTUVUQV9VTlNVQ0NFU1NGVUwsXG59IGZyb20gJy4uL3NpdGUtcHViLXN1Yi9zaXRlLWdsb2JhbHMnO1xuaW1wb3J0IGNvbWV0ZCBmcm9tICcuL3ZlbmRvcic7XG5cbmltcG9ydCB7IGxvZ0dlbmVzeXNFdmVudCB9IGZyb20gJy4uL3NpdGUtdXRpbGl0aWVzL3V0aWxpdGllcyc7XG5cbi8qKlxuICogUHVibGlzaCBjb21ldEQgbWV0YSBjaGFubmVsIGV2ZW50XG4gKiBAcGFyYW0ge29iamVjdH0gcGF5bG9hZCAtIGNvbWV0ZCByZXF1ZXN0IHJlc3BvbnNlIGRhdGFcbiAqIEBleGFtcGxlXG4gY29tZXRkLmFkZExpc3RlbmVyKCcvbWV0YS9oYW5kc2hha2UnLCAoKSA9PiB7fSkpO1xuIGNvbWV0ZC5hZGRMaXN0ZW5lcignL21ldGEvY29ubmVjdCcsICgpID0+IHt9KSk7XG4gY29tZXRkLmFkZExpc3RlbmVyKCcvbWV0YS9kaXNjb25uZWN0JywgKCkgPT4ge30pKTtcbiBjb21ldGQuYWRkTGlzdGVuZXIoJy9tZXRhL3N1YnNjcmliZScsICgpID0+IHt9KSk7XG4gY29tZXRkLmFkZExpc3RlbmVyKCcvbWV0YS91bnN1YnNjcmliZScsICgpID0+IHt9KSk7XG4gY29tZXRkLmFkZExpc3RlbmVyKCcvbWV0YS9wdWJsaXNoJywgKCkgPT4ge30pKTtcbiBjb21ldGQuYWRkTGlzdGVuZXIoJy9tZXRhL3Vuc3VjY2Vzc2Z1bCcsICgpID0+IHt9KSk7XG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb25zaXN0ZW50LXJldHVyblxuZXhwb3J0IGZ1bmN0aW9uIHB1Ymxpc2hFdmVudChwYXlsb2FkOiB7IHN1Y2Nlc3NmdWw6IGJvb2xlYW4sIGNoYW5uZWw6IHN0cmluZyB9KSB7XG4gIGlmIChwYXlsb2FkLnN1Y2Nlc3NmdWwpIHtcbiAgICBzd2l0Y2ggKHBheWxvYWQuY2hhbm5lbCkge1xuICAgICAgY2FzZSAnL21ldGEvaGFuZHNoYWtlJzpcbiAgICAgICAgVGVhbGl1bVB1YlN1Yi5wdWJsaXNoKENPTUVURF9NRVRBX0hBTkRTSEFLRSwgcGF5bG9hZCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnL21ldGEvY29ubmVjdCc6XG4gICAgICAgIFRlYWxpdW1QdWJTdWIucHVibGlzaChDT01FVERfTUVUQV9DT05ORUNULCBwYXlsb2FkKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICcvbWV0YS9kaXNjb25uZWN0JzpcbiAgICAgICAgVGVhbGl1bVB1YlN1Yi5wdWJsaXNoKENPTUVURF9NRVRBX0RJU0NPTk5FQ1QsIHBheWxvYWQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJy9tZXRhL3N1YnNjcmliZSc6XG4gICAgICAgIFRlYWxpdW1QdWJTdWIucHVibGlzaChDT01FVERfTUVUQV9TVUJTQ1JJQkUsIHBheWxvYWQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJy9tZXRhL3Vuc3Vic2NyaWJlJzpcbiAgICAgICAgVGVhbGl1bVB1YlN1Yi5wdWJsaXNoKENPTUVURF9NRVRBX1VOU1VCU0NSSUJFLCBwYXlsb2FkKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICcvbWV0YS9wdWJsaXNoJzpcbiAgICAgICAgVGVhbGl1bVB1YlN1Yi5wdWJsaXNoKENPTUVURF9NRVRBX1BVQkxJU0gsIHBheWxvYWQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJy9tZXRhL3Vuc3VjY2Vzc2Z1bCc6XG4gICAgICAgIFRlYWxpdW1QdWJTdWIucHVibGlzaChDT01FVERfTUVUQV9VTlNVQ0NFU1NGVUwsIHBheWxvYWQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBBZGQgY29tZXRkIGxpc3RlbmVyc1xuICogY29tZSBiYWNrIGluIG1ldGEgbGlzdGVuZXJzXG4gKiBAZXhhbXBsZVxuIGNvbWV0ZC5hZGRMaXN0ZW5lcignL21ldGEvKicsICgpID0+IHt9KSk7XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICgpIHtcbiAgY29tZXRkLmFkZExpc3RlbmVyKCcvbWV0YS8qJywgcHVibGlzaEV2ZW50KTtcbiAgbG9nR2VuZXN5c0V2ZW50KDEsICdDb21ldGQgTWV0YSBMaXN0ZW5lcnMnLCAnQWRkaW5nIGxpc3RlbmVycyBmb3IgaGFuZHNoYWtlLCBjb25uZWN0LCBkaXNjb25uZWN0LCBzdWJzY3JpYmUsIHVuc3Vic2NyaWJlLCBwdWJsaXNoLCBhbmQgdW5zdWNjZXNzZnVsJyk7XG4gIHJldHVybiBmYWxzZTtcbn1cbiIsIi8vIEB0cy1ub2NoZWNrXG5cbi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovXG4vKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UgKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXG4vKiBlc2xpbnQtZGlzYWJsZSBndWFyZC1mb3ItaW4gKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtc3ludGF4ICovXG4vKiogQG1vZHVsZSBtZXNzYWdpbmcvbm90aWZpY2F0aW9uICovXG5pbXBvcnQgY29tZXRkIGZyb20gJy4vdmVuZG9yJztcbmltcG9ydCB7XG4gIENPTUVURF9VUERBVEVfRkFJTFVSRSxcbiAgQ09NRVREX1VQREFURV9TVUNDRVNTLFxuICBQSVhFTF9UQUdfVVJMLFxufSBmcm9tICcuLi9zaXRlLXB1Yi1zdWIvc2l0ZS1nbG9iYWxzJztcbmltcG9ydCB7XG4gIGluY3JlYXNlRXJyb3JDb3VudCxcbiAgbG9nR2VuZXN5c0V2ZW50LFxufSBmcm9tICcuLi9zaXRlLXV0aWxpdGllcy91dGlsaXRpZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoZXZlbnROYW1lOiBzdHJpbmcsIGNvbWV0ZFVwZGF0ZU5pY2tuYW1lUGF5bG9hZDogeyByZXF1ZXN0Q2hhbm5lbDogc3RyaW5nLCBuaWNrbmFtZTogc3RyaW5nLCBzZWN1cmVLZXk6IHN0cmluZywgb3BlcmF0aW9uOiBzdHJpbmd9KSB7XG4gIHRyeSB7XG4gICAgY29uc3Qge1xuICAgICAgcmVxdWVzdENoYW5uZWwsXG4gICAgICBuaWNrbmFtZSxcbiAgICAgIHNlY3VyZUtleSxcbiAgICAgIG9wZXJhdGlvbixcbiAgICB9ID0gY29tZXRkVXBkYXRlTmlja25hbWVQYXlsb2FkO1xuICAgIGxvZ0dlbmVzeXNFdmVudCgxLCAnQ29tZXRkIFVwZGF0ZSBOaWNrbmFtZSBEYXRhJywgY29tZXRkVXBkYXRlTmlja25hbWVQYXlsb2FkKTtcbiAgICBjb21ldGQucHVibGlzaChyZXF1ZXN0Q2hhbm5lbCwge1xuICAgICAgbmlja25hbWUsXG4gICAgICBzZWN1cmVLZXksXG4gICAgICBvcGVyYXRpb24sXG4gICAgfSk7XG4gICAgVGVhbGl1bVB1YlN1Yi5wdWJsaXNoKENPTUVURF9VUERBVEVfU1VDQ0VTUywge30pO1xuICAgIGxvZ0dlbmVzeXNFdmVudCgxLCBDT01FVERfVVBEQVRFX1NVQ0NFU1MpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgbG9nR2VuZXN5c0V2ZW50KDMsICdDb21ldGQgVXBkYXRlIE5pY2tuYW1lIEVycm9yJywgZSk7XG4gICAgaWYgKGJhY3RtICYmIGJhY3RtLnBsdWdpbnMgJiYgYmFjdG0ucGx1Z2lucy5waXhlbFRhZykgYmFjdG0ucGx1Z2lucy5waXhlbFRhZy5maXJlUGl4ZWxUYWcoYCR7UElYRUxfVEFHX1VSTH0/ZXJyb3I9JHtlfWApO1xuICAgIFRlYWxpdW1QdWJTdWIucHVibGlzaChDT01FVERfVVBEQVRFX0ZBSUxVUkUsIGUpO1xuICAgIGluY3JlYXNlRXJyb3JDb3VudCgpO1xuICB9XG59XG4iLCIvLyBAdHMtbm9jaGVja1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UgKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovXG4vKiogQG1vZHVsZSBtZXNzYWdpbmcvbm90aWZpY2F0aW9uICovXG5pbXBvcnQgY29tZXRkIGZyb20gJy4vdmVuZG9yJztcblxuaW1wb3J0IHtcbiAgR0VORVJJQ19GQUlMVVJFLFxuICBQSVhFTF9UQUdfVVJMLFxufSBmcm9tICcuLi9zaXRlLXB1Yi1zdWIvc2l0ZS1nbG9iYWxzJztcbmltcG9ydCB7XG4gIGluY3JlYXNlRXJyb3JDb3VudCxcbiAgbG9nR2VuZXN5c0V2ZW50LFxufSBmcm9tICcuLi9zaXRlLXV0aWxpdGllcy91dGlsaXRpZXMnO1xuXG4vKipcbiAqIENvbWV0IEQgcmVxdWVzdCBub3RpZmljYXRpb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWUgLSBuYW1lIG9mIGV2ZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gY29tZXRkTm90aWZpY2F0aW9uUGF5bG9hZCAtIENoYW5uZWwgYmVpbmcgcmVxdWVzdGVkXG4gKiBAZXhhbXBsZVxuIHdpbmRvdy5zcGFydGEuY2hhdC53aWRnZXRMb2FkZXIucHViKCdDT01FVERfUkVRVUVTVF9OT1RJRklDQVRJT04nLCB7XG4gICAgcmVxdWVzdENoYW5uZWw6ICcvc2VydmljZS9jaGF0VjIvdGVzdGluZycsXG4gICAgdHJhbnNjcmlwdFBvc2l0aW9uOiAwLFxuICAgIHNlY3VyZUtleTonLi4uJyxcbiAgICBvcGVyYXRpb246ICdyZXF1ZXN0Tm90aWZpY2F0aW9ucydcbn0pO1xuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoZXZlbnROYW1lOiBzdHJpbmcsIGNvbWV0ZE5vdGlmaWNhdGlvblBheWxvYWQ6IHsgcmVxdWVzdENoYW5uZWw6IHN0cmluZyB9KSB7XG4gIHRyeSB7XG4gICAgY29tZXRkLnB1Ymxpc2goY29tZXRkTm90aWZpY2F0aW9uUGF5bG9hZC5yZXF1ZXN0Q2hhbm5lbCwgY29tZXRkTm90aWZpY2F0aW9uUGF5bG9hZCk7XG5cbiAgICBjb25zdCBhZ2VudExUUyA9IGJhY3RtLlN0b3JlKCdjaGF0JywgeyB0eXBlOiAnY29va2llJyB9KTtcbiAgICBjb25zdCBhZ2VudElEID0gYWdlbnRMVFMuZ2V0KCdzZWN1cmVBZ2VudElEJyk7XG4gICAgZGlnaXRhbERhdGEucGFnZS5hdHRyaWJ1dGVzLmNoYXQuYWdlbnRfaWQgPSBhZ2VudElEO1xuICAgIGxvZ0dlbmVzeXNFdmVudCgxLCAnQ29tZXRkIFJlcXVlc3QgTm90aWZpY2F0aW9ucycsIGNvbWV0ZE5vdGlmaWNhdGlvblBheWxvYWQpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgbG9nR2VuZXN5c0V2ZW50KDMsICdDb21ldGQgUmVxdWVzdCBOb3RpZmljYXRpb25zIEVycm9yJywgZSk7XG4gICAgaWYgKGJhY3RtICYmIGJhY3RtLnBsdWdpbnMgJiYgYmFjdG0ucGx1Z2lucy5waXhlbFRhZykgYmFjdG0ucGx1Z2lucy5waXhlbFRhZy5maXJlUGl4ZWxUYWcoYCR7UElYRUxfVEFHX1VSTH0/ZXJyb3I9JHtlfWApO1xuICAgIFRlYWxpdW1QdWJTdWIucHVibGlzaChHRU5FUklDX0ZBSUxVUkUsIHsgZXZlbnQ6ICdjb21ldGRSZXF1ZXN0Tm90aWZpY2F0aW9ucycsIGVycm9yOiBlIH0pO1xuICAgIGluY3JlYXNlRXJyb3JDb3VudCgpO1xuICB9XG59XG4iLCIvLyBAdHMtbm9jaGVja1xuXG4vKipcbiAqIFBvc3RNZXNzYWdlc1xuICogVGhlIGZvbGxvd2luZyBzY3JpcHQgcHJvdmlkZXMgdGhlIHBvc3QgbWVzc2FnZSBzY3JpcHRzIHRoYXQgcHJvdmlkZSBjb21tdW5pY2F0aW9uIGJhY2tcbiAqIGFuZCBmb3J0aCB3aXRoIHRoZSB3aWRnZXQuIEFsbCBvZiB0aGUgbWVzc2FnZXMgd2lsbCBiZSBrZXB0IGluIHRoaXMgZmlsZSBhbmQgbm90IHNldFxuICogYXMgYSBmdW5jdGlvbiBzbyB0aGUgY291bnRlcnMgd2lsbCBiZSByZW1lbWJlcmVkIGFuZCBzdG9yZWQuXG4gKlxuICovXG5cbmltcG9ydCB7XG4gIENBTkNFTF9XSURHRVRfU1VCUyxcbiAgQ0FOQ0VMX1NJVEVfU1VCUyxcbiAgQ09NRVREX1JFUVVFU1RfRElTQ09OTkVDVCxcbiAgQ0hFQ0tfQUhfVE9LRU4sXG4gIENIRUNLX0ZPUl9TQUxFLFxuICBHUkFCX0hFQVJUQkVBVF9EQVRBLFxuICBPR1dfVVJMLFxuICBHRU5FU1lTX1ZBTElEQVRFX0lQX0FERFJFU1MsXG4gIFNBTEVfSU5ESUNBVE9SUyxcbiAgU0VUX01PTklUT1JJTkdfU1RBVFVTLFxuICBTRU5EX1BST1hZX0RBVEEsXG4gIEdFTkVTWVNfUkVRVUVTVF9OQVRJVkVfQ0hBVCxcbiAgR0VORVNZU19TRVRfQUdFTlRfSUQsXG59IGZyb20gJy4uL3NpdGUtcHViLXN1Yi9zaXRlLWdsb2JhbHMnO1xuaW1wb3J0IHtcbiAgaXNFbXB0eU9iaixcbiAgZ2V0QWhUb2tlbixcbiAgZ2V0UGFyYW1zLFxuICBsb2dHZW5lc3lzRXZlbnQsXG4gIHB1Ymxpc2hUZWFsaXVtLFxufSBmcm9tICcuLi9zaXRlLXV0aWxpdGllcy91dGlsaXRpZXMnO1xuaW1wb3J0IHNhbGVFdmVudCBmcm9tICcuLi9zYWxlcy9zYWxlLWV2ZW50JztcbmltcG9ydCBnZXRDb29raWUgZnJvbSAnLi4vc2l0ZS11dGlsaXRpZXMvY29va2llLXN0b3JhZ2UvZ2V0JztcbmltcG9ydCByZXF1ZXN0UHJlQ29ubmVjdCBmcm9tICcuLi9zaXRlLWFwaS9oYW5kbGVycy9yZXF1ZXN0LXByZWNvbm5lY3QnO1xuaW1wb3J0IHsgc2V0T3JpZ2luLCBzZXRQYXJlbnRJbmZvIH0gZnJvbSAnLi4vc2l0ZS11dGlsaXRpZXMvdXRpbGl0aWVzL2dldFBhcmVudEluZm8nO1xuXG5sZXQgd2luID0gd2luZG93Lm9wZW5lcjtcbmxldCBjaGF0T3JpZ2luID0gJyc7XG5cbmlmICh3aW5kb3cgIT09IHdpbmRvdy50b3ApIHtcbiAgd2luID0gd2luZG93LnBhcmVudDtcbn1cblxuZnVuY3Rpb24gdGVybWluYXRlR2VuZXN5c0NoYXQoKSB7XG4gIGxvZ0dlbmVzeXNFdmVudCgxLCAnQ2FuY2VsaW5nIEFsbCBTaXRlIFN1YnNjcmlwdGlvbnMnLCAnRGlzY29ubmVjdGluZyBDb21ldGQgYW5kIGFsbCBzdWJzY3JpcHRpb25zJyk7XG4gIFRlYWxpdW1QdWJTdWIucHVibGlzaChDT01FVERfUkVRVUVTVF9ESVNDT05ORUNUKTtcbiAgVGVhbGl1bVB1YlN1Yi5jbGVhckFsbFN1YnNjcmlwdGlvbnMoKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odGhpczogYW55KSB7XG4gIC8vIHdpbmRvdy5zcGFQYXJhbXMgaXMgbmVlZGVkIHRvIHBhc3MgY2hhdCBjb25maWdzIGJhY2sgdG8gdGhlIHdpZGdldCwgZW5zdXJpbmcgdGhhdCBpcyBkZWZpbmVkIGJlZm9yZSBwdWJsaXNoaW5nIHV0YWdJbml0O1xuICBpZih3aW4gJiYgd2luZG93LnNwYVBhcmFtcykge1xuICAgIHdpbi5wb3N0TWVzc2FnZSh7IHV0YWdJbml0OiB0cnVlIH0sICcqJyk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgY2hlY2tGb3JTcGFQYXJhbXMgPSBzZXRJbnRlcnZhbChcbiAgICAgICgpID0+IHtcbiAgICAgICAgaWYgKCF3aW5kb3cuc3BhUGFyYW1zKSByZXR1cm47XG4gICAgICAgIGNsZWFySW50ZXJ2YWwoY2hlY2tGb3JTcGFQYXJhbXMpO1xuICAgICAgICByZXR1cm4gd2luZG93LnBvc3RNZXNzYWdlKHsgdXRhZ0luaXQ6IHRydWUgfSwgJyonKTsgXG4gICAgICB9LFxuICAgICAgMTAwXG4gICAgKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGNsZWFySW50ZXJ2YWwoY2hlY2tGb3JTcGFQYXJhbXMpO1xuICAgIH0sIDUwMDApXG4gIH1cbiAgZnVuY3Rpb24gaGFuZGxlUG9zdE1lc3NhZ2UoZXZlbnQ6IHsgZGF0YTogeyBkZG86IGFueTsgaHJlZjogc3RyaW5nOyB1dGFnSW5pdD86IGFueTsgdnRpbURhdGE/OiBhbnk7IHRpdGxlOiBzdHJpbmc7IH07IG9yaWdpbjogc3RyaW5nOyB9KSB7XG4gICAgaWYgKGV2ZW50LmRhdGEuZGRvICYmIGV2ZW50LmRhdGEuaHJlZikgc2V0UGFyZW50SW5mbyhldmVudC5kYXRhKTtcbiAgICBpZihldmVudC5kYXRhLnV0YWdJbml0KXtcbiAgICAgIGNoYXRPcmlnaW4gPSBldmVudC5kYXRhLnV0YWdJbml0LnBvc3RNZXNzYWdlT3JpZ2luO1xuICAgICAgaWYgKGV2ZW50LmRhdGEudXRhZ0luaXQuc2hvd0RlYnVnQ29uc29sZSkgd2luZG93LnNob3dDaGF0RGVidWdDb25zb2xlID0gdHJ1ZTtcbiAgICAgIGlmIChldmVudC5kYXRhLnV0YWdJbml0LnBvc3RNZXNzYWdlT3JpZ2luKSBzZXRPcmlnaW4oZXZlbnQuZGF0YS51dGFnSW5pdC5wb3N0TWVzc2FnZU9yaWdpbik7XG4gICAgICBzZW5kUG9zdE1lc3NhZ2UoQ0hFQ0tfRk9SX1NBTEUpXG4gICAgfVxuICAgIGlmKGV2ZW50LmRhdGEudnRpbURhdGEpe1xuICAgICAgY29uc3QgZGF0YSA9IGV2ZW50LmRhdGEudnRpbURhdGE7XG4gICAgICBzd2l0Y2goZGF0YS5tZXNzYWdlKSB7XG4gICAgICAgIGNhc2UgU0VORF9QUk9YWV9EQVRBOlxuICAgICAgICAgIHByb2Nlc3NQcm94eU1lc3NhZ2UoZGF0YSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgU0VUX01PTklUT1JJTkdfU1RBVFVTOlxuICAgICAgICAgIGJhY3RtLmRkby5zZXQoJ3BhZ2UuYXR0cmlidXRlcy5jaGF0Lm1vbml0b3JpbmcnLCBkYXRhLm1vbml0b3JpbmdTdGF0dXMpO1xuICAgICAgICAgIGxvZ0dlbmVzeXNFdmVudCgxLCAnTW9uaXRvcmluZyBTdGF0dXMgUG9zdCBNZXNzYWdlJywge3N0YXR1czogZGF0YS5tb25pdG9yaW5nU3RhdHVzfSlcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBHRU5FU1lTX1JFUVVFU1RfTkFUSVZFX0NIQVQ6XG4gICAgICAgICAgcHVibGlzaFRlYWxpdW0oR0VORVNZU19SRVFVRVNUX05BVElWRV9DSEFULCBldmVudC5kYXRhLnZ0aW1EYXRhLmRhdGFUb1NlbmQpO1xuICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBHRU5FU1lTX1NFVF9BR0VOVF9JRDpcbiAgICAgICAgICBwdWJsaXNoVGVhbGl1bShHRU5FU1lTX1NFVF9BR0VOVF9JRCwgZXZlbnQuZGF0YS52dGltRGF0YS5kYXRhVG9TZW5kKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9OyBcbiAgICB9XG4gICAgaWYodHlwZW9mIGV2ZW50LmRhdGEgPT09ICdzdHJpbmcnKXtcbiAgICAgIGlmKGV2ZW50Lm9yaWdpbiAhPT0gY2hhdE9yaWdpbil7XG4gICAgICAgIGxvZ0dlbmVzeXNFdmVudCgyLCAnUG9zdCBNZXNzYWdlIEJhZCBPcmlnaW4nLCB7b3JpZ2luOiBldmVudC5vcmlnaW59KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc3dpdGNoKGV2ZW50LmRhdGEpIHtcbiAgICAgICAgY2FzZSBDQU5DRUxfU0lURV9TVUJTOlxuICAgICAgICAgIHRlcm1pbmF0ZUdlbmVzeXNDaGF0KCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgQ0hFQ0tfQUhfVE9LRU46XG4gICAgICAgICAgY29uc3QgZmluZEFoVG9rZW4gPSBnZXRBaFRva2VuKCk7XG4gICAgICAgICAgaWYoIWlzRW1wdHlPYmooZmluZEFoVG9rZW4pKXtcbiAgICAgICAgICAgIHNlbmRQb3N0TWVzc2FnZShHUkFCX0hFQVJUQkVBVF9EQVRBKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBUZWFsaXVtUHViU3ViLnB1Ymxpc2goR0VORVNZU19WQUxJREFURV9JUF9BRERSRVNTLCB7XG4gICAgICAgICAgICAgIG9nd1VybDogT0dXX1VSTCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuXG4gIGZ1bmN0aW9uIHByb2Nlc3NQcm94eU1lc3NhZ2UoZGF0YTogeyBnZW5lc3lzRGF0YTogeyBbeDogc3RyaW5nXTogYW55OyB9OyBrZXk6IHN0cmluZzsgbmV3VmFsdWU6IGFueTsgfSkge1xuICAgIGlmKCFkYXRhLmdlbmVzeXNEYXRhW2RhdGEua2V5XSkgZGF0YS5nZW5lc3lzRGF0YVtkYXRhLmtleV0gPSBkYXRhLm5ld1ZhbHVlO1xuICAgIGlmKGRhdGEua2V5ID09PSAnc2l0ZV9pZCcpe1xuICAgICAgY29uc3QgcHJlQ29ubmVjdFBhcmFtczogeyBfcGFnZV9pZD86IHN0cmluZ30gPSBnZXRQYXJhbXMoKTtcbiAgICAgIGNvbnN0IG9jY3RDaGF0ID0gZ2V0Q29va2llKCk7XG4gICAgICBpZighb2NjdENoYXQuc2VjdXJlS2V5KXtcbiAgICAgICAgcHJlQ29ubmVjdFBhcmFtcy5fcGFnZV9pZCA9IGRhdGEubmV3VmFsdWU7XG4gICAgICAgIGJhY3RtLmRkby5zZXQoJ3BhZ2UuYXR0cmlidXRlcy5jaGF0LnNpdGVfaWQnLCBkYXRhLm5ld1ZhbHVlKVxuICAgICAgICBiYWN0bS5kZG8uc2V0KCdwYWdlLmF0dHJpYnV0ZXMuY2hhdC5hbHRlcmVkX3NpdGVfaWQnLCB0cnVlKTtcbiAgICAgICAgcmVxdWVzdFByZUNvbm5lY3Qoe2RldGFpbDogcHJlQ29ubmVjdFBhcmFtc30pXG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAoU0FMRV9JTkRJQ0FUT1JTLmluZGV4T2YoZGF0YS5rZXkpID4gLTEpe1xuICAgICAgc2FsZUV2ZW50KGRhdGEuZ2VuZXN5c0RhdGEsIGRhdGEua2V5KTtcbiAgICB9O1xuICB9XG4gIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBoYW5kbGVQb3N0TWVzc2FnZS5iaW5kKHdpbmRvdyksIGZhbHNlKTtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBoYW5kbGVQb3N0TWVzc2FnZS5iaW5kKHdpbmRvdyksIGZhbHNlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNlbmRQb3N0TWVzc2FnZShkYXRhOiBzdHJpbmcpIHtcbiAgdHJ5e1xuICAgIHdpbi5wb3N0TWVzc2FnZShkYXRhLCBjaGF0T3JpZ2luKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgbG9nR2VuZXN5c0V2ZW50KDMsICdQb3N0IE1lc3NhZ2UgRXJyb3InLCBlcnIpO1xuICB9XG4gIFxufVxuXG5leHBvcnQgZnVuY3Rpb24gcG9zdFRvQ2FuY2VsU3Vic09uV2lkZ2V0KCkge1xuICB0ZXJtaW5hdGVHZW5lc3lzQ2hhdCgpO1xuICBzZW5kUG9zdE1lc3NhZ2UoQ0FOQ0VMX1dJREdFVF9TVUJTKTtcbn1cbiIsIi8vIEB0cy1ub2NoZWNrXG5cbi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovXG4vKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UgKi9cbi8qKiBAbW9kdWxlIG1lc3NhZ2luZy90eXBpbmcgKi9cbmltcG9ydCBjb21ldGQgZnJvbSAnLi92ZW5kb3InO1xuXG5pbXBvcnQge1xuICBHRU5FUklDX0ZBSUxVUkUsXG4gIFBJWEVMX1RBR19VUkwsXG59IGZyb20gJy4uL3NpdGUtcHViLXN1Yi9zaXRlLWdsb2JhbHMnO1xuaW1wb3J0IHtcbiAgaW5jcmVhc2VFcnJvckNvdW50LFxuICBsb2dHZW5lc3lzRXZlbnQsXG59IGZyb20gJy4uL3NpdGUtdXRpbGl0aWVzL3V0aWxpdGllcyc7XG5cbi8qKlxuICogQ29tZXQgRCB0eXBpbmdcbiAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWUgLSBuYW1lIG9mIGV2ZW50IHB1Ymxpc2hpbmdcbiAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0Q2hhbm5lbCAtIGNoYXQgcmVxdWVzdCBjaGFubmVsXG4gKiBAcGFyYW0ge3N0cmluZ30gcGF5bG9hZCAtIGNvbWV0ZCByZXF1ZXN0IHBheWxvYWRcbiAqIEBleGFtcGxlXG5UZWFsaXVtUHViU3ViLnB1Ymxpc2goJ0NPTUVURF9OT1RJRllfU1RBUlRfVFlQSU5HJywge1xuICAgIHJlcXVlc3RDaGFubmVsOiAnL3NlcnZpY2UvY2hhdFYyL2RpZ2l0YWwtcG9jJyxcbiAgICBkYXRhOiB7XG4gICAgICAgIHNlY3VyZUtleTogXCIqKioqKioqKioqKlwiLFxuICAgICAgICBvcGVyYXRpb246ICdzdGFydFR5cGluZycsXG4gICAgICAgIG1lc3NhZ2U6ICdVc2VyIGlzIFR5cGluZydcbiAgICB9XG59KTtcblxuVGVhbGl1bVB1YlN1Yi5wdWJsaXNoKCdDT01FVERfTk9USUZZX1JFQURfUkVDRUlQVCcsIHtcbiAgICByZXF1ZXN0Q2hhbm5lbDogJy9zZXJ2aWNlL2NoYXRWMi9kaWdpdGFsLXBvYycsXG4gICAgZGF0YToge1xuICAgICAgICBzZWN1cmVLZXk6IFwiKioqKioqKioqKipcIixcbiAgICAgICAgb3BlcmF0aW9uOiAncmVhZFJlY2VpcHQnLFxuICAgICAgICB0cmFuc2NyaXB0UG9zaXRpb246IDFcbiAgICB9XG59KTtcblxuVGVhbGl1bVB1YlN1Yi5wdWJsaXNoKENPTUVURF9SRVFVRVNUX1NFTkRfTUVTU0FHRSwge1xuICAgIHJlcXVlc3RDaGFubmVsOiAnL3NlcnZpY2UvY2hhdFYyL2RpZ2l0YWwtcG9jJyxcbiAgICBkYXRhOiB7XG4gICAgICAgIHNlY3VyZUtleTogXCIqKioqKioqKioqKlwiLFxuICAgICAgICBvcGVyYXRpb246ICdzZW5kTWVzc2FnZScsXG4gICAgICAgIG1lc3NhZ2U6ICdIZWxsbywgLi4uJ1xuICAgIH1cbn0pO1xuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoZXZlbnROYW1lOiBzdHJpbmcsIHsgcmVxdWVzdENoYW5uZWwsIHBheWxvYWQgfTogeyByZXF1ZXN0Q2hhbm5lbDogc3RyaW5nLCBwYXlsb2FkOiBvYmplY3QgfSkge1xuICB0cnkge1xuICAgIGNvbWV0ZC5wdWJsaXNoKHJlcXVlc3RDaGFubmVsLCBwYXlsb2FkKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGxvZ0dlbmVzeXNFdmVudCgzLCAnQ29tZXRkIFR5cGluZyBFcnJvcicsIGUpO1xuICAgIGlmIChiYWN0bSAmJiBiYWN0bS5wbHVnaW5zICYmIGJhY3RtLnBsdWdpbnMucGl4ZWxUYWcpIGJhY3RtLnBsdWdpbnMucGl4ZWxUYWcuZmlyZVBpeGVsVGFnKGAke1BJWEVMX1RBR19VUkx9P2Vycm9yPSR7ZX1gKTtcbiAgICBUZWFsaXVtUHViU3ViLnB1Ymxpc2goR0VORVJJQ19GQUlMVVJFLCB7IGV2ZW50OiAnY29tZXRkVHlwaW5nTm90aWZpY2F0aW9uJywgZXJyb3I6IGUgfSk7XG4gICAgaW5jcmVhc2VFcnJvckNvdW50KCk7XG4gIH1cbn1cbiIsIi8vIEB0cy1ub2NoZWNrXG5cbi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovXG4vKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UgKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXG4vKiBlc2xpbnQtZGlzYWJsZSBndWFyZC1mb3ItaW4gKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtc3ludGF4ICovXG4vKiogQG1vZHVsZSBtZXNzYWdpbmcvbm90aWZpY2F0aW9uICovXG5pbXBvcnQgY29tZXRkIGZyb20gJy4vdmVuZG9yJztcbmltcG9ydCB7XG4gIENPTUVURF9VUERBVEVfRkFJTFVSRSxcbiAgQ09NRVREX1VQREFURV9TVUNDRVNTLFxuICBQSVhFTF9UQUdfVVJMLFxufSBmcm9tICcuLi9zaXRlLXB1Yi1zdWIvc2l0ZS1nbG9iYWxzJztcbmltcG9ydCB7XG4gIGluY3JlYXNlRXJyb3JDb3VudCxcbiAgbG9nR2VuZXN5c0V2ZW50LFxufSBmcm9tICcuLi9zaXRlLXV0aWxpdGllcy91dGlsaXRpZXMnO1xuXG4vKipcbiAqIENvbWV0IEQgcmVxdWVzdCBub3RpZmljYXRpb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWUgLSBuYW1lIG9mIGV2ZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gY29tZXRkVXBkYXRlUGF5bG9hZCAtIENoYW5uZWwgaW5mbywgQ3VzdG9tZXIgSW5mbywgRGF0YSBiZWluZyBzZW50XG4gKiBAZXhhbXBsZVxuIHdpbmRvdy5zcGFydGEuY2hhdC53aWRnZXRMb2FkZXIucHViKCdDT01FVERfUkVRVUVTVF9OT1RJRklDQVRJT04nLCB7XG4gICAgcmVxdWVzdENoYW5uZWw6ICcvc2VydmljZS9jaGF0VjIvY3VzdG9tZXItc3VwcG9ydCcsXG4gICAgdXNlckRhdGE6IHsga2V5MTogdmFsdWUxLCBrZXkyOiB2YWx1ZTIsIGV0Yy4uLn1cbiAgICBzZWN1cmVLZXk6Jy4uLicsXG4gICAgb3BlcmF0aW9uOiAndXBkYXRlRGF0YSdcbn0pO1xuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoZXZlbnROYW1lOiBzdHJpbmcsIGNvbWV0ZFVwZGF0ZVBheWxvYWQ6IHsgdXNlckRhdGE6IGFueSwgcmVxdWVzdENoYW5uZWw6IHN0cmluZ30pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkYXRhVG9TZW5kID0gY29tZXRkVXBkYXRlUGF5bG9hZC51c2VyRGF0YTtcbiAgICBpZiAoZGF0YVRvU2VuZC5NTERfT0FPX0FDQ09VTlROVU1CRVIpIGRlbGV0ZSBkYXRhVG9TZW5kLk1MRF9PQU9fQUNDT1VOVE5VTUJFUjtcbiAgICBPYmplY3Qua2V5cyhkYXRhVG9TZW5kKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gZGF0YVRvU2VuZFtrZXldO1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgfHwgdmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgZGVsZXRlIGRhdGFUb1NlbmRba2V5XTtcbiAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGRlbGV0ZSBkYXRhVG9TZW5kW2tleV07XG4gICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpICYmIHZhbHVlLmxlbmd0aCkge1xuICAgICAgICBjb25zdCBhbHRWYWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgIGRhdGFUb1NlbmRba2V5XSA9IGFsdFZhbHVlO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGNvbnN0IGFsdFZhbHVlID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgICAgICBkYXRhVG9TZW5kW2tleV0gPSBhbHRWYWx1ZTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJyAmJiB2YWx1ZS50b1N0cmluZygpKSB7XG4gICAgICAgIGNvbnN0IGFsdFZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgZGF0YVRvU2VuZFtrZXldID0gYWx0VmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkYXRhVG9TZW5kW2tleV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgIGNvbWV0ZFVwZGF0ZVBheWxvYWQudXNlckRhdGEgPSB7XG4gICAgICAuLi5kYXRhVG9TZW5kLFxuICAgIH07XG4gICAgbG9nR2VuZXN5c0V2ZW50KDEsICdDb21ldGQgVXBkYXRlIERhdGEnLCBjb21ldGRVcGRhdGVQYXlsb2FkKTtcbiAgICBjb21ldGQucHVibGlzaChjb21ldGRVcGRhdGVQYXlsb2FkLnJlcXVlc3RDaGFubmVsLCBjb21ldGRVcGRhdGVQYXlsb2FkKTtcbiAgICBUZWFsaXVtUHViU3ViLnB1Ymxpc2goQ09NRVREX1VQREFURV9TVUNDRVNTLCB7fSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBsb2dHZW5lc3lzRXZlbnQoMywgJ0NvbWV0ZCBVcGRhdGUgRGF0YSBFcnJvcicsIGUpO1xuICAgIGlmIChiYWN0bSAmJiBiYWN0bS5wbHVnaW5zICYmIGJhY3RtLnBsdWdpbnMucGl4ZWxUYWcpIGJhY3RtLnBsdWdpbnMucGl4ZWxUYWcuZmlyZVBpeGVsVGFnKGAke1BJWEVMX1RBR19VUkx9P2Vycm9yPSR7ZX1gKTtcbiAgICBUZWFsaXVtUHViU3ViLnB1Ymxpc2goQ09NRVREX1VQREFURV9GQUlMVVJFLCBlKTtcbiAgICBpbmNyZWFzZUVycm9yQ291bnQoKTtcbiAgfVxufVxuIiwiLy8gQHRzLW5vY2hlY2tcblxuLyoqIEBtb2R1bGUgbWVzc2FnaW5nL2NvbWV0ZCAqL1xuaW1wb3J0IGxpYiBmcm9tICdjb21ldGQnO1xuXG4vKipcbiAqIEludGVncmF0ZSBjb21ldGRcbiAqL1xuZXhwb3J0IGRlZmF1bHQgbmV3IGxpYi5Db21ldEQoKTtcbiIsIi8vIEB0cy1ub2NoZWNrXG5cbi8qIGVzbGludC1kaXNhYmxlIGd1YXJkLWZvci1pbiAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cbi8qIGVzbGludC1kaXNhYmxlIGNhbWVsY2FzZSAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZWYgKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtc3ludGF4ICovXG4vKiogQG1vZHVsZSBzYWxlcy9ub3RpZmljYXRpb24gKi9cbmltcG9ydCB7XG4gIFBJWEVMX1RBR19VUkwsXG4gIENPTUVURF9TQUxFU19PQ0NVUlJFRF9GQUlMVVJFLFxuICBDT01FVERfU0FMRVNfT0NDVVJSRURfU1VDQ0VTUyxcbiAgR0VORVNZU19VUERBVEVfQ0hBVF9EQVRBX0VORFBPSU5ULFxuICBDT09LSUVfTFRTLFxufSBmcm9tICcuLi9zaXRlLXB1Yi1zdWIvc2l0ZS1nbG9iYWxzJztcbmltcG9ydCB7XG4gIGdldEN1cnJlbnREb21haW4sXG4gIGluY3JlYXNlRXJyb3JDb3VudCxcbiAgaXNTYWxlUHJlc2VudCxcbiAgbG9nR2VuZXN5c0V2ZW50LFxufSBmcm9tICcuLi9zaXRlLXV0aWxpdGllcy91dGlsaXRpZXMnO1xuXG5pbXBvcnQgZ2V0Q29va2llIGZyb20gJy4uL3NpdGUtdXRpbGl0aWVzL2Nvb2tpZS1zdG9yYWdlL2dldCc7XG5pbXBvcnQgc2V0Q29va2llU3RvcmFnZSBmcm9tICcuLi9zaXRlLXV0aWxpdGllcy9jb29raWUtc3RvcmFnZS9zZXQnO1xuXG4vKipcbiAqIEVycm9yIFNhbGUgRXZlbnRcbiAqIEBwYXJhbSB7b2JqZWN0fSByZXNwb25zZSAtIEVycm9yIHJlc3BvbnNlXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVycm9yU2FsZUV2ZW50KHJlc3BvbnNlOiBvYmplY3QgfCB1bmtub3duKTogYm9vbGVhbiB7XG4gIFRlYWxpdW1QdWJTdWIucHVibGlzaChDT01FVERfU0FMRVNfT0NDVVJSRURfRkFJTFVSRSwgcmVzcG9uc2UpO1xuICBpZiAoYmFjdG0gJiYgYmFjdG0ucGx1Z2lucyAmJiBiYWN0bS5wbHVnaW5zLnBpeGVsVGFnKSBiYWN0bS5wbHVnaW5zLnBpeGVsVGFnLmZpcmVQaXhlbFRhZyhgJHtQSVhFTF9UQUdfVVJMfT9lcnJvcj0ke3Jlc3BvbnNlfWApO1xuICBsb2dHZW5lc3lzRXZlbnQoMywgJ0NvbWV0ZCBTYWxlcyBPY2N1cnJlZCBGYWlsdXJlJywgcmVzcG9uc2UpO1xuICBpbmNyZWFzZUVycm9yQ291bnQoKTtcbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIFN1Y2Nlc3MgU2FsZSBFdmVudFxuICogQHBhcmFtIHtvYmplY3R9IHJlc3BvbnNlIC0gU3VjY2VzcyBSZXNwb25zZVxuICogQGV4YW1wbGVcbi8vIHN1Y2Nlc3MgcmVzcG9uc2VcblxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdWNjZXNzU2FsZUV2ZW50KHJlc3BvbnNlOiBvYmplY3QpOiBib29sZWFuIHtcbiAgVGVhbGl1bVB1YlN1Yi5wdWJsaXNoKENPTUVURF9TQUxFU19PQ0NVUlJFRF9TVUNDRVNTLCByZXNwb25zZSk7XG4gIGxvZ0dlbmVzeXNFdmVudCgxLCAnQ29tZXRkIFNhbGVzIE9jY3VycmVkIFN1Y2Nlc3MnLCByZXNwb25zZSk7XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBTYWxlIE9jY3VycmVkIEV2ZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnROYW1lIC0gbmFtZSBvZiBldmVudFxuICogQHBhcmFtIHtzdHJpbmd9IGNvbWV0ZFNhbGVzT2NjdXJyZWRQYXlsb2FkIC0gQ2hhbm5lbCBpbmZvLCBJbnRlcmFjdGlvbiBJRCwgRGF0YSBiZWluZyBzZW50XG4gKiBAZXhhbXBsZVxuIFRlYWxpdW1QdWJTdWIucHVibGlzaCgnQ09NRVREX1JFUVVFU1RfU0FMRV9PQ0NVUlJFRCcsIHtcbiAgICByZXF1ZXN0Q2hhbm5lbDogJy9zZXJ2aWNlL2NoYXRWMi9jdXN0b21lci1zdXBwb3J0JyxcbiAgICB1c2VyRGF0YTogeyBrZXkxOiB2YWx1ZTEsIGtleTI6IHZhbHVlMiwgZXRjLi4ufSxcbiAgICBpbnRlcmFjdGlvbl9pZDogSUQsXG59KTtcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKGRhdGE6IGFueSwga2V5OiBzdHJpbmcpIHtcbiAgdHJ5IHtcbiAgICBpZiAodHlwZW9mIGJhY3RtID09PSAndW5kZWZpbmVkJykgdGhyb3cgbmV3IEVycm9yKCdCYWN0bSBOb3QgRGVmaW5lZCwgU2FsZSBDYW5ub3QgUHJvY2VzcycpO1xuICAgIGNvbnN0IGdlbmVzeXNEYXRhID0geyAuLi5kYXRhIH07XG4gICAgY29uc3QgaW5xQ2xpZW50T3JkZXJOdW0gPSBnZW5lc3lzRGF0YS5pbnFDbGllbnRPcmRlck51bSB8fCBkYXRhW2tleV07XG4gICAgaWYgKCFpbnFDbGllbnRPcmRlck51bSkgcmV0dXJuO1xuXG4gICAgY29uc3QgY29va2llSW5mbyA9IGdldENvb2tpZShDT09LSUVfTFRTLk5BTUUpO1xuICAgIGNvbnN0IGFnZW50X2lkID0gY29va2llSW5mby5zZWN1cmVBZ2VudElEO1xuICAgIGNvbnN0IGludGVyYWN0aW9uX2lkID0gY29va2llSW5mby5peF9pZDtcbiAgICBsZXQgcHJldmlvdXNPcmRlck51bXMgPSBjb29raWVJbmZvLmlucUNsaWVudE9yZGVyTnVtIHx8IG51bGw7XG4gICAgaWYgKHByZXZpb3VzT3JkZXJOdW1zKSBwcmV2aW91c09yZGVyTnVtcyA9IHByZXZpb3VzT3JkZXJOdW1zLnRvU3RyaW5nKCk7XG4gICAgY29uc3Qgb3JkZXJOdW1BcnJheSA9IHByZXZpb3VzT3JkZXJOdW1zICYmIHByZXZpb3VzT3JkZXJOdW1zLnNwbGl0KCcsJykgfHwgbnVsbDtcblxuICAgIGlmKGlucUNsaWVudE9yZGVyTnVtICYmIGFnZW50X2lkKSB7XG4gICAgICBpZihvcmRlck51bUFycmF5ICYmIG9yZGVyTnVtQXJyYXkuaW5kZXhPZihpbnFDbGllbnRPcmRlck51bS50b1N0cmluZygpKSA+IC0xKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocHJldmlvdXNPcmRlck51bXMpIHtcbiAgICAgIGNvbnN0IG5ld09yZGVyTnVtID0gYCR7cHJldmlvdXNPcmRlck51bXN9LCR7aW5xQ2xpZW50T3JkZXJOdW19YDtcbiAgICAgIGdlbmVzeXNEYXRhLmlucUNsaWVudE9yZGVyTnVtID0gbmV3T3JkZXJOdW07XG4gICAgICBjb29raWVJbmZvLmlucUNsaWVudE9yZGVyTnVtID0gbmV3T3JkZXJOdW07XG4gICAgICBzZXRDb29raWVTdG9yYWdlKGNvb2tpZUluZm8sIENPT0tJRV9MVFMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBnZW5lc3lzRGF0YS5pbnFDbGllbnRPcmRlck51bSA9IGlucUNsaWVudE9yZGVyTnVtO1xuICAgICAgY29va2llSW5mby5pbnFDbGllbnRPcmRlck51bSA9IGlucUNsaWVudE9yZGVyTnVtO1xuICAgICAgc2V0Q29va2llU3RvcmFnZShjb29raWVJbmZvLCBDT09LSUVfTFRTKTtcbiAgICB9XG5cbiAgICBpZiAoYWdlbnRfaWQgJiYgaW50ZXJhY3Rpb25faWQpIHtcbiAgICAgIGNvbnN0IGRhdGFUb1NlbmQgPSB7IC4uLmdlbmVzeXNEYXRhLCBhZ2VudF9pZCB9O1xuICAgICAgaWYgKGRhdGFUb1NlbmQuTUxEX09BT19BQ0NPVU5UTlVNQkVSKSBkZWxldGUgZGF0YVRvU2VuZC5NTERfT0FPX0FDQ09VTlROVU1CRVI7XG4gICAgICBPYmplY3Qua2V5cyhkYXRhVG9TZW5kKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBkYXRhVG9TZW5kW2tleV07XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnIHx8IHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgZGVsZXRlIGRhdGFUb1NlbmRba2V5XTtcbiAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBkZWxldGUgZGF0YVRvU2VuZFtrZXldO1xuICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpICYmIHZhbHVlLmxlbmd0aCkge1xuICAgICAgICAgIGNvbnN0IGFsdFZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgICBkYXRhVG9TZW5kW2tleV0gPSBhbHRWYWx1ZTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgY29uc3QgYWx0VmFsdWUgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgICAgICAgZGF0YVRvU2VuZFtrZXldID0gYWx0VmFsdWU7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJyAmJiB2YWx1ZS50b1N0cmluZygpKSB7XG4gICAgICAgICAgY29uc3QgYWx0VmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICAgIGRhdGFUb1NlbmRba2V5XSA9IGFsdFZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRhdGFUb1NlbmRba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgbG9nR2VuZXN5c0V2ZW50KDEsICdDb21ldGQgU2FsZXMgT2NjdXJyZWQgRGF0YScsIGRhdGFUb1NlbmQpO1xuICAgICAgY29uc3QgY3VycmVudFRMRCA9IGdldEN1cnJlbnREb21haW4oKTtcbiAgICAgIGNvbnN0IGRvbWFpbiA9IHNwYVBhcmFtcy5zaXRlUGFyYW1zLmRvbWFpbnNbY3VycmVudFRMRF0uZ2VuZXN5cztcbiAgICAgIGNvbnN0IGpzb25Vc2VyRGF0YSA9IEpTT04uc3RyaW5naWZ5KGRhdGFUb1NlbmQpO1xuXG4gICAgICBjb25zdCBnZW5lc3lzU2FsZUV2ZW50VVJMID0gYCR7ZG9tYWlufSR7R0VORVNZU19VUERBVEVfQ0hBVF9EQVRBX0VORFBPSU5UfWA7XG4gICAgICBjb25zdCBnZW5lc3lzU2FsZUV2ZW50UGFyYW1zID0gYF91c2VyZGF0YT0ke2pzb25Vc2VyRGF0YX0mX2ludGVyYWN0aW9uX2lkPSR7aW50ZXJhY3Rpb25faWR9YDtcblxuICAgICAgZmV0Y2goZ2VuZXN5c1NhbGVFdmVudFVSTCwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogZ2VuZXN5c1NhbGVFdmVudFBhcmFtcyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcbiAgICAgICAgfSxcbiAgICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJyxcbiAgICAgIH0pXG4gICAgICAgIC50aGVuKHJlc3AgPT4gcmVzcC5qc29uKCkpXG4gICAgICAgIC50aGVuKHN1Y2Nlc3NTYWxlRXZlbnQpXG4gICAgICAgIC5jYXRjaChlcnJvclNhbGVFdmVudCk7XG5cbiAgICAgIGlmICh3aW5kb3cuZGF0YUNvbGxlY3Rvcikge1xuICAgICAgICB3aW5kb3cuZGF0YUNvbGxlY3Rvci5wdXNoKHtcbiAgICAgICAgICBldmVudDogQ09NRVREX1NBTEVTX09DQ1VSUkVEX1NVQ0NFU1MsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgaW5xQ2xpZW50T3JkZXJOdW06IGRhdGFUb1NlbmQuaW5xQ2xpZW50T3JkZXJOdW0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgbG9nR2VuZXN5c0V2ZW50KDMsICdDb21ldGQgU2FsZXMgT2NjdXJyZWQgRXJyb3InLCBlKTtcbiAgICBlcnJvclNhbGVFdmVudChlKTtcbiAgfVxufVxuIiwiLyogZXNsaW50LWRpc2FibGUgZnVuYy1uYW1lcyAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZXJzY29yZS1kYW5nbGUgKi9cbi8qIGVzbGludC1kaXNhYmxlIHByZWZlci1jb25zdCAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZWYgKi9cbi8qIGVzbGludC1kaXNhYmxlIGNhbWVsY2FzZSAqL1xuLyoqIEBtb2R1bGUgc2l0ZS1hcGkvY29Ccm93c2UgKi9cbmltcG9ydCB7XG4gIEdFTkVTWVNfQ09CUk9XU0VfQ09ORklHVVJFRCxcbiAgUElYRUxfVEFHX1VSTCxcbiAgR0VORVJJQ19GQUlMVVJFLFxufSBmcm9tICcuLi9zaXRlLXB1Yi1zdWIvc2l0ZS1nbG9iYWxzJztcbmltcG9ydCB7XG4gIGluY3JlYXNlRXJyb3JDb3VudCxcbiAgbG9nR2VuZXN5c0V2ZW50LFxufSBmcm9tICcuLi9zaXRlLXV0aWxpdGllcy91dGlsaXRpZXMnO1xuXG4vKipcbiAqIENvIGJyb3dzZVxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZSAtIG5hbWUgb2YgZXZlbnRcbiAqIEBwYXJhbSB7b2JqZWN0fSBjb25maWd1cmF0aW9uXG4gKiBUT0RPIGh0dHA6Ly9sb2NhbGhvc3Q6NDAwMC9zcGFydGEtZGVtby9jaGF0LXdpZGdldC1kZW1vL3VuZGVmaW5lZGpzL2djYi5taW4uanMgdW5kZWZpbmVkIGlzIGVudkNvYnJvd3NlVVJMXG4gKiBUT0RPIENvYnJvd3NlIGNvbmZpZ3VyYXRpb24gaW5jb3JyZWN0XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChldmVudE5hbWU6IHN0cmluZywgY29uZmlndXJhdGlvbjogeyBlbnZDb2Jyb3dzZVVSTDogc3RyaW5nfSkge1xuICB0cnkge1xuICAgIGxvZ0dlbmVzeXNFdmVudCgxLCAnR2VuZXN5cyBDb2Jyb3dzZSBDb25maWd1cmF0aW9uJywgY29uZmlndXJhdGlvbik7XG4gICAgKGZ1bmN0aW9uIChkLCBzLCBpZCwgbykge1xuICAgICAgbGV0IGZzID0gZC5nZXRFbGVtZW50c0J5VGFnTmFtZShzKVswXTtcbiAgICAgIGxldCBlO1xuICAgICAgaWYgKGQuZ2V0RWxlbWVudEJ5SWQoaWQpKSByZXR1cm47XG4gICAgICBlID0gKGQuY3JlYXRlRWxlbWVudChzKSBhcyBIVE1MU2NyaXB0RWxlbWVudCk7IGUuaWQgPSBpZDsgZS5zcmMgPSBvLnNyYztcbiAgICAgIGUuc2V0QXR0cmlidXRlKCdkYXRhLWdjYi11cmwnLCBvLmNiVXJsKTtcbiAgICAgIGZzLnBhcmVudE5vZGU/Lmluc2VydEJlZm9yZShlLCBmcyk7XG4gICAgfShkb2N1bWVudCwgJ3NjcmlwdCcsICdnZW5lc3lzLWpzJywge1xuICAgICAgc3JjOiBgJHtjb25maWd1cmF0aW9uLmVudkNvYnJvd3NlVVJMfWpzL2djYi5taW4uanNgLFxuICAgICAgY2JVcmw6IGNvbmZpZ3VyYXRpb24uZW52Q29icm93c2VVUkwsXG4gICAgfSkpO1xuICAgIHdpbmRvdy5fZ2VuZXN5cyA9IGNvbmZpZ3VyYXRpb247XG4gICAgVGVhbGl1bVB1YlN1Yi5wdWJsaXNoKEdFTkVTWVNfQ09CUk9XU0VfQ09ORklHVVJFRCwgY29uZmlndXJhdGlvbik7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBsb2dHZW5lc3lzRXZlbnQoMywgJ0dlbmVzeXMgQ29icm93c2UgRXJyb3InLCBlKTtcbiAgICBpZiAoYmFjdG0gJiYgYmFjdG0ucGx1Z2lucyAmJiBiYWN0bS5wbHVnaW5zLnBpeGVsVGFnKSBiYWN0bS5wbHVnaW5zLnBpeGVsVGFnLmZpcmVQaXhlbFRhZyhgJHtQSVhFTF9UQUdfVVJMfT9lcnJvcj0ke2V9YCk7XG4gICAgVGVhbGl1bVB1YlN1Yi5wdWJsaXNoKEdFTkVSSUNfRkFJTFVSRSwgeyBldmVudDogJ3JlcXVlc3RDb0Jyb3dzZScsIGVycm9yOiBlIH0pO1xuICAgIGluY3JlYXNlRXJyb3JDb3VudCgpO1xuICB9XG59XG4iLCIvLyBAdHMtbm9jaGVja1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBwcmVmZXItb2JqZWN0LXNwcmVhZCAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZWYgKi9cbi8qKiBAbW9kdWxlIHNpdGUtYXBpL2hhbmRsZXJzL2NvbmZpZ3VyZS1jb2Jyb3dzZSAqL1xuaW1wb3J0IHtcbiAgZ2V0Q3VycmVudERvbWFpbixcbiAgcHVibGlzaFRlYWxpdW0sXG59IGZyb20gJy4uLy4uL3NpdGUtdXRpbGl0aWVzL3V0aWxpdGllcyc7XG5pbXBvcnQgeyBHRU5FU1lTX0NPQlJPV1NFX0NPTkZJR1VSQVRJT04gfSBmcm9tICcuLi8uLi9zaXRlLXB1Yi1zdWIvc2l0ZS1nbG9iYWxzJztcblxuLyoqXG4gKiBIYW5kbGUgY29icm93c2VcbiAqIEBwYXJhbSB7b2JqZWN0fSBwYXlsb2FkXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaGFuZGxlQ29uZmlndXJlQ29icm93c2UocGF5bG9hZDogeyBkZXRhaWw6IG9iamVjdDsgfSk6IGJvb2xlYW4ge1xuICBjb25zdCBjdXJyZW50VExEID0gZ2V0Q3VycmVudERvbWFpbigpO1xuICBwdWJsaXNoVGVhbGl1bShHRU5FU1lTX0NPQlJPV1NFX0NPTkZJR1VSQVRJT04sIHsgLi4ucGF5bG9hZC5kZXRhaWwsIGVudkNvYnJvd3NlVVJMOiBzcGFQYXJhbXM/LnNpdGVQYXJhbXM/LmRvbWFpbnM/LltjdXJyZW50VExEXT8uY29icm93c2UgfSk7XG4gIHJldHVybiBmYWxzZTtcbn1cbiIsIi8qIGVzbGludC1kaXNhYmxlIGNhbWVsY2FzZSAqL1xuLyoqIEBtb2R1bGUgZ2VuZXN5cy9oYW5kbGVycy9yZXF1ZXN0UHJlQ29ubmVjdCAqL1xuXG5pbXBvcnQge1xuICBnZXRDdXJyZW50RG9tYWluLFxuICBsb2dHZW5lc3lzRXZlbnQsXG4gIHdhaXRGb3JBSFRva2VuLFxufSBmcm9tICcuLi8uLi9zaXRlLXV0aWxpdGllcy91dGlsaXRpZXMnO1xuXG5pbXBvcnQgeyBnZXRQYXJlbnRJbmZvIH0gZnJvbSAnLi4vLi4vc2l0ZS11dGlsaXRpZXMvdXRpbGl0aWVzL2dldFBhcmVudEluZm8nO1xuXG5pbXBvcnQge1xuICBHRU5FU1lTX1JFUVVFU1RfUE9MTElORyxcbiAgR0VORVNZU19TVVNQRU5EX1BPTExJTkcsXG4gIEdFTkVSSUNfRkFJTFVSRSxcbiAgUElYRUxfVEFHX1VSTCxcbiAgR0VORVNZU19DSEFUX1NFUlZJQ0VfRU5EUE9JTlQsXG59IGZyb20gJy4uLy4uL3NpdGUtcHViLXN1Yi9zaXRlLWdsb2JhbHMnO1xuaW1wb3J0IHsgbmF0aXZlQW5kUmVmSUREZWZpbmVkIH0gZnJvbSAnLi4vLi4vc2l0ZS11dGlsaXRpZXMvaXNNb2JpbGVDaGF0JztcblxuLyoqXG4gKiBSZXF1ZXN0IGdlbmVzeXMgcHJlIGNvbm5lY3RcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGhhbmRsZVJlcXVlc3RQb2xsaW5nKHsgZGV0YWlsOiB7XG4gIF9sYW5ndWFnZV9jb2RlLFxuICBfY3VzdG9tZXJfbG9iLFxuICBfc2l0ZV9pZCxcbiAgX3VuaXQsXG4gIF9wcm9ncmFtdHJhaXQsXG4gIF9ydW5faWQsXG4gIF9yb3V0ZV9wYXJhbSxcbiAgX2FjY291bnRfdHlwZSxcbiAgX2NoYW5uZWwsXG4gIF9wYWdlX2lkLFxuICBuYXRpdmVDaGF0LFxuICBVQUlELFxufX06IHsgZGV0YWlsOiB7ICBfbGFuZ3VhZ2VfY29kZTogc3RyaW5nLCBfY3VzdG9tZXJfbG9iOiBzdHJpbmcsIF9zaXRlX2lkOiBzdHJpbmcsIF91bml0OiBzdHJpbmcsIF9wcm9ncmFtdHJhaXQ6IHN0cmluZywgX3J1bl9pZDogc3RyaW5nLCBfcm91dGVfcGFyYW06IHN0cmluZywgX2FjY291bnRfdHlwZTogc3RyaW5nLCBfY2hhbm5lbDogc3RyaW5nLCBfcGFnZV9pZDogc3RyaW5nLCBuYXRpdmVDaGF0OiBzdHJpbmcsIFVBSUQ6IHN0cmluZyB9IH1cbikge1xuICB0cnkge1xuICAgIHZhciB7IHBhcmVudEhyZWYgfTogeyBwYXJlbnRERE86IGFueSwgcGFyZW50SHJlZjogc3RyaW5nfSA9IGdldFBhcmVudEluZm8oKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBiYWN0bS5yZXBvcnRFcnJvcihlcnJvcik7XG4gIH1cblxuICBjb25zdCBoYW5kbGVMT0IgPSAobG9iOiBzdHJpbmcpID0+IHtcbiAgICBpZiAocGFyZW50SHJlZil7XG4gICAgICBpZiAocGFyZW50SHJlZi5pbmNsdWRlcygnL3NlY3VyZS1vZmZlcnMvY3VzdG9taXplZFNiT2ZmZXJzJykpIHJldHVybiBcInNib2JcIjtcbiAgICB9XG4gICAgcmV0dXJuIGxvYjtcbiAgfVxuICBcbiAgbGV0IHBhZ2VJZCA9IG51bGw7XG4gIGNvbnN0IGN1cnJlbnRUTEQgPSBnZXRDdXJyZW50RG9tYWluKCk7XG4gIC8vIDwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+XG4gIGNvbnN0IGNvbmZpZ3VyYXRpb24gPSB7XG4gICAgbGFuZ3VhZ2VDb2RlOiBfbGFuZ3VhZ2VfY29kZSxcbiAgICBwb2xsaW5nVXJsOiBHRU5FU1lTX0NIQVRfU0VSVklDRV9FTkRQT0lOVCxcbiAgICBkb21haW46IHNwYVBhcmFtcy5zaXRlUGFyYW1zLmRvbWFpbnNbY3VycmVudFRMRF0uZ2VuZXN5cyxcbiAgICBjdXN0b21lckxvYjogaGFuZGxlTE9CKF9jdXN0b21lcl9sb2IpIHx8ICcnLFxuICAgIHNpdGVJRDogX3NpdGVfaWQgfHwgJycsXG4gICAgdW5pdDogX3VuaXQgfHwgJycsXG4gICAgcHJvZ3JhbVRyYWl0OiBfcHJvZ3JhbXRyYWl0IHx8ICcnLFxuICAgIHJ1bklEOiBfcnVuX2lkIHx8ICcnLFxuICAgIHJvdXRlUGFyYW06IF9yb3V0ZV9wYXJhbSB8fCAnJyxcbiAgICBhY2NvdW50VHlwZTogX2FjY291bnRfdHlwZSB8fCAnJyxcbiAgICBjaGFubmVsOiBfY2hhbm5lbCB8fCBudWxsLFxuICAgIG1vYmlsZUluZGljYXRvcjogbmF0aXZlQW5kUmVmSUREZWZpbmVkKCkgPyAnWScgOiAnTicsXG4gICAgVUFJRCAvLyBuZXcgcGFyYW1ldGVyIHBlciBDb2xsYWJvcmF0b3JzXG4gIH07XG4gIC8vIDwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+XG4gIGxvZ0dlbmVzeXNFdmVudCgxLCAnR2VuZXN5cyBSZXF1ZXN0IFBvbGxpbmcgQ29uZmlnJywgY29uZmlndXJhdGlvbik7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBhbHRlcmVkU2l0ZUlEID0gYmFjdG0uZGRvLmdldCgncGFnZS5hdHRyaWJ1dGVzLmNoYXQuYWx0ZXJlZF9zaXRlX2lkJyk7XG4gICAgcGFnZUlkID0gYWx0ZXJlZFNpdGVJRCA/IGJhY3RtLmRkby5nZXQoJ3BhZ2UuYXR0cmlidXRlcy5jaGF0LnNpdGVfaWQnKSA6IF9wYWdlX2lkO1xuICAgIE9iamVjdC5hc3NpZ24oY29uZmlndXJhdGlvbiwge1xuICAgICAgcGFnZUlkLFxuICAgIH0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgbG9nR2VuZXN5c0V2ZW50KDMsICdHZW5lc3lzIFJlcXVlc3QgUG9sbGluZyBFcnJvcicsIGUpO1xuICAgIGlmIChiYWN0bSAmJiBiYWN0bS5wbHVnaW5zICYmIGJhY3RtLnBsdWdpbnMucGl4ZWxUYWcpIGJhY3RtLnBsdWdpbnMucGl4ZWxUYWcuZmlyZVBpeGVsVGFnKGAke1BJWEVMX1RBR19VUkx9P2Vycm9yPSR7ZX1gKTtcbiAgICBUZWFsaXVtUHViU3ViLnB1Ymxpc2goR0VORVJJQ19GQUlMVVJFLCB7IGV2ZW50OiAnaGFuZGxlUmVxdWVzdFBvbGxpbmcnLCBlcnJvcjogZSB9KTtcbiAgfVxuXG4gIGNvbnN0IHBvbGxpbmdUaW1lciA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICB3YWl0Rm9yQUhUb2tlbihHRU5FU1lTX1JFUVVFU1RfUE9MTElORywgY29uZmlndXJhdGlvbik7XG4gIH0sIDMwMDAwKTtcblxuICBmdW5jdGlvbiBjbGVhclBvbGxpbmdJbnRlcnZhbCgpIHtcbiAgICBsb2dHZW5lc3lzRXZlbnQoMSwgJ0dlbmVzeXMgU3VzcGVuZCBQb2xsaW5nJywgJ0NsZWFyaW5nIHBvbGxpbmcgdGltZXInKTtcbiAgICBjbGVhckludGVydmFsKHBvbGxpbmdUaW1lcik7XG4gICAgVGVhbGl1bVB1YlN1Yi51bnN1YnNjcmliZShHRU5FU1lTX1NVU1BFTkRfUE9MTElORyk7XG4gIH1cblxuICBUZWFsaXVtUHViU3ViLnN1YnNjcmliZShHRU5FU1lTX1NVU1BFTkRfUE9MTElORywgY2xlYXJQb2xsaW5nSW50ZXJ2YWwpO1xufSIsIi8qIGVzbGludC1kaXNhYmxlIGNhbWVsY2FzZSAqL1xuLyoqIEBtb2R1bGUgZ2VuZXN5cy9oYW5kbGVycy9yZXF1ZXN0UHJlQ29ubmVjdCAqL1xuaW1wb3J0IHtnZXRDdXJyZW50RG9tYWluLCBsb2dHZW5lc3lzRXZlbnQsIHB1Ymxpc2hUZWFsaXVtfSBmcm9tICcuLi8uLi9zaXRlLXV0aWxpdGllcy91dGlsaXRpZXMnO1xuXG5pbXBvcnQgeyBnZXRQYXJlbnRJbmZvIH0gZnJvbSAnLi4vLi4vc2l0ZS11dGlsaXRpZXMvdXRpbGl0aWVzL2dldFBhcmVudEluZm8nO1xuXG5pbXBvcnQgeyBuYXRpdmVBbmRSZWZJRERlZmluZWQgfSBmcm9tICcuLi8uLi9zaXRlLXV0aWxpdGllcy9pc01vYmlsZUNoYXQnO1xuXG5pbXBvcnQge1xuICBHRU5FU1lTX1JFUVVFU1RfUFJFX0NPTk5FQ1QsXG4gIEdFTkVSSUNfRkFJTFVSRSxcbiAgUElYRUxfVEFHX1VSTCxcbiAgR0VORVNZU19DSEFUX1NFUlZJQ0VfRU5EUE9JTlQsXG59IGZyb20gJy4uLy4uL3NpdGUtcHViLXN1Yi9zaXRlLWdsb2JhbHMnO1xuLyoqXG4gKiBSZXF1ZXN0IGdlbmVzeXMgcHJlIGNvbm5lY3RcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaGFuZGxlUmVxdWVzdFByZUNvbm5lY3Qoe1xuICBkZXRhaWw6IHtcbiAgICBfbGFuZ3VhZ2VfY29kZSxcbiAgICBfY3VzdG9tZXJfbG9iLFxuICAgIF9zaXRlX2lkLFxuICAgIF91bml0LFxuICAgIF9wcm9ncmFtdHJhaXQsXG4gICAgX3J1bl9pZCxcbiAgICBfcm91dGVfcGFyYW0sXG4gICAgX2FjY291bnRfdHlwZSxcbiAgICBfY2hhbm5lbCxcbiAgICBfcGFnZV9pZCxcbiAgICBjaGF0SUQsXG4gICAgbmF0aXZlQ2hhdCxcbiAgICBVQUlELFxuICB9LFxufTogeyBkZXRhaWw6IGFueSB9KSB7XG4gIHRyeSB7XG4gICAgdmFyIHsgcGFyZW50RERPLCBwYXJlbnRUaXRsZSwgcGFyZW50SHJlZiB9OiB7IHBhcmVudERETzogYW55LCBwYXJlbnRUaXRsZTogYW55LCBwYXJlbnRIcmVmOiBhbnkgfSA9IGdldFBhcmVudEluZm8oKTtcbiAgICB2YXIgY3VycmVudFdlYlBhZ2UgPSBwYXJlbnRUaXRsZSB8fCAnJztcbiAgICBjb25zdCBiYWN0bUNvb2tpZXMgPSBuZXcgYmFjdG0uQ29va2llcygpO1xuICAgIC8vIG1heSBub3QgYmUgbmVlZGVkIGFueW1vcmVcbiAgICB2YXIgZGRvTW9iaWxlSW5kaWNhdG9yID0gcGFyZW50RERPPy5wYWdlPy5hdHRyaWJ1dGVzPy5jaGF0Py5tb2JpbGVJbmRpY2F0b3I7XG4gICAgLy8gY2hhbmdlIHRvIExUUyBjb29raWVcbiAgICBjb25zdCBjb29raWVFeGlzdHMgPSBiYWN0bUNvb2tpZXMuZ2V0KCdvY2N0Q2hhdCcpO1xuICAgIGNvbnN0IG9jY3RDaGF0Q29va2llID0gY29va2llRXhpc3RzID8gSlNPTi5wYXJzZShjb29raWVFeGlzdHMpIDogJyc7XG4gICAgdmFyIGNoYXRJRENoZWNrZXIgPSBvY2N0Q2hhdENvb2tpZS5jaGF0UmVmSUQgPyBvY2N0Q2hhdENvb2tpZS5jaGF0UmVmSUQgOiAnJztcbiAgICB2YXIgbmF0aXZlQ2hhdENoZWNrZXIgPSBvY2N0Q2hhdENvb2tpZS5uYXRpdmVDaGF0ID8gb2NjdENoYXRDb29raWUubmF0aXZlQ2hhdCA6ICcnO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGJhY3RtLnJlcG9ydEVycm9yKGVycm9yKTtcbiAgfVxuICBjb25zdCBlbnN1cmVOYXRpdmVDaGF0ID0gbmF0aXZlQ2hhdCB8fCBuYXRpdmVDaGF0Q2hlY2tlcjtcbiAgbGV0IHBhZ2VJZCA9IG51bGw7XG4gIGNvbnN0IGN1cnJlbnRUTEQgPSBnZXRDdXJyZW50RG9tYWluKCk7XG4gIC8vIEFkZCBvYmplY3QgZGVzdHJ1Y3RpbmdcbiAgY29uc3QgbmF0aXZlQ2hhdENvbmZpZzogeyBjdXJyZW50V2ViUGFnZTogYW55LCBjaGF0SUQ6IHN0cmluZywgcGFnZUlkPzogc3RyaW5nfSA9IHtcbiAgICBjdXJyZW50V2ViUGFnZSxcbiAgICBjaGF0SUQ6IGNoYXRJRCB8fCBjaGF0SURDaGVja2VyLFxuICB9O1xuXG4gIGlmIChlbnN1cmVOYXRpdmVDaGF0KSB7XG4gICAgLy8gb25seSBsb2cgdGhpcyB3aGVuIG5lY2Vzc2FyeVxuICAgIGxvZ0dlbmVzeXNFdmVudCgxLCAnR2VuZXN5cyBSZXF1ZXN0IE5hdGl2ZSBDaGF0IENvbmZpZycsIG5hdGl2ZUNoYXRDb25maWcpO1xuICB9XG5cbiAgY29uc3QgaGFuZGxlTE9CID0gKGxvYjogc3RyaW5nKSA9PiB7XG4gICAgaWYgKHBhcmVudEhyZWYpe1xuICAgICAgaWYgKHBhcmVudEhyZWYuaW5jbHVkZXMoJy9zZWN1cmUtb2ZmZXJzL2N1c3RvbWl6ZWRTYk9mZmVycycpKSByZXR1cm4gXCJzYm9iXCI7XG4gICAgfVxuICAgIHJldHVybiBsb2I7XG4gIH1cblxuICAvLyA8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPlxuICBjb25zdCBjb25maWd1cmF0aW9uID0ge1xuICAgIGxhbmd1YWdlQ29kZTogX2xhbmd1YWdlX2NvZGUsXG4gICAgcGFnZUlkLFxuICAgIGN1c3RvbWVyTG9iOiBoYW5kbGVMT0IoX2N1c3RvbWVyX2xvYikgfHwgJycsXG4gICAgYWNjb3VudFR5cGU6IF9hY2NvdW50X3R5cGUgfHwgJycsXG4gICAgY2hhbm5lbDogX2NoYW5uZWwgfHwgbnVsbCxcbiAgICBwcmVDb25uZWN0VXJsOiBHRU5FU1lTX0NIQVRfU0VSVklDRV9FTkRQT0lOVCxcbiAgICBkb21haW46IHNwYVBhcmFtcy5zaXRlUGFyYW1zLmRvbWFpbnNbY3VycmVudFRMRF0uZ2VuZXN5cyxcbiAgICBzaXRlSUQ6IF9zaXRlX2lkIHx8ICcnLFxuICAgIHVuaXQ6IF91bml0IHx8ICcnLFxuICAgIHByb2dyYW1UcmFpdDogX3Byb2dyYW10cmFpdCB8fCAnJyxcbiAgICBydW5JRDogX3J1bl9pZCB8fCAnJyxcbiAgICByb3V0ZVBhcmFtOiBfcm91dGVfcGFyYW0gfHwgJycsXG4gICAgbW9iaWxlSW5kaWNhdG9yOiBuYXRpdmVBbmRSZWZJRERlZmluZWQoKSA/ICdZJyA6ICdOJyxcbiAgICBVQUlELFxuICB9O1xuICAvLyA8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPlxuICBsb2dHZW5lc3lzRXZlbnQoMSwgJ0dlbmVzeXMgUmVxdWVzdCBQcmVjb25uZWN0IENvbmZpZycsIGNvbmZpZ3VyYXRpb24pO1xuXG5cbiAgdHJ5IHtcbiAgICBwYWdlSWQgPSBfcGFnZV9pZDtcbiAgICBPYmplY3QuYXNzaWduKGNvbmZpZ3VyYXRpb24sIHsgcGFnZUlkIH0pO1xuICAgIG5hdGl2ZUNoYXRDb25maWcucGFnZUlkID0gcGFnZUlkO1xuICB9IGNhdGNoIChlKSB7XG4gICAgbG9nR2VuZXN5c0V2ZW50KDMsICdHZW5lc3lzIFJlcXVlc3QgUHJlY29ubmVjdCBFcnJvcicsIGUpO1xuICAgIGlmIChiYWN0bSAmJiBiYWN0bS5wbHVnaW5zICYmIGJhY3RtLnBsdWdpbnMucGl4ZWxUYWcpIHtcbiAgICAgIGJhY3RtLnBsdWdpbnMucGl4ZWxUYWcuZmlyZVBpeGVsVGFnKGAke1BJWEVMX1RBR19VUkx9P2Vycm9yPSR7ZX1gKTtcbiAgICB9XG4gICAgVGVhbGl1bVB1YlN1Yi5wdWJsaXNoKEdFTkVSSUNfRkFJTFVSRSwge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVSZXF1ZXN0UHJlQ29ubmVjdCcsXG4gICAgICBlcnJvcjogZSxcbiAgICB9KTtcbiAgfVxuICBcbiAgcHVibGlzaFRlYWxpdW0oR0VORVNZU19SRVFVRVNUX1BSRV9DT05ORUNULCBjb25maWd1cmF0aW9uKTtcbiAgcmV0dXJuIGZhbHNlO1xufSIsIi8qKiBAbW9kdWxlIHNpdGUtYXBpL2hhbmRsZXJzL3N1cnZleUdldFJlc3BvbnNlICovXG5cbmltcG9ydCB7XG4gIGdldEN1cnJlbnREb21haW4sXG4gIHdhaXRGb3JBSFRva2VuLFxufSBmcm9tIFwiLi4vLi4vc2l0ZS11dGlsaXRpZXMvdXRpbGl0aWVzXCI7XG5pbXBvcnQge1xuICBHRU5FU1lTX0NIQVRfU1VSVkVZX0VORFBPSU5ULFxuICBTVVJWRVlfR0VUX1JFU1BPTlNFLFxufSBmcm9tIFwiLi4vLi4vc2l0ZS1wdWItc3ViL3NpdGUtZ2xvYmFsc1wiO1xuXG4vKipcbiAqIEhhbmRsZSBzdXJ2ZXkgZ2V0IHJlc3BvbnNlXG4gKiBAcGFyYW0ge29iamVjdH0gcGF5bG9hZFxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHN1cnZleUdldFJlc3BvbnNlKFxuICBwYXlsb2FkOiB7IGRldGFpbDogYW55IH0sXG4gIGlzUHJlY2hhdDogYm9vbGVhbiA9IGZhbHNlXG4pIHtcbiAgY29uc3QgdGVtcE9iaiA9IHtcbiAgICBwYXlsb2FkOiBwYXlsb2FkLmRldGFpbCxcbiAgfTtcbiAgY29uc3QgY3VycmVudFRMRCA9IGdldEN1cnJlbnREb21haW4oKTtcbiAgY29uc3Qgc3VydmV5RGV0YWlscyA9IHtcbiAgICAuLi50ZW1wT2JqLFxuICAgIGVudlN1cnZleVVSTDpcbiAgICAgIHNwYVBhcmFtcz8uc2l0ZVBhcmFtcz8uZG9tYWlucz8uW2N1cnJlbnRUTERdPy5zdXJ2ZXkgfHxcbiAgICAgIHNwYVBhcmFtcz8uc2l0ZVBhcmFtcz8uZG9tYWlucz8uW2N1cnJlbnRUTERdPy5nZW5lc3lzLFxuICAgIGNoYXRTdXJ2ZXlFbmRwb2ludDogR0VORVNZU19DSEFUX1NVUlZFWV9FTkRQT0lOVCxcbiAgfTtcbiAgaWYgKGlzUHJlY2hhdCkgT2JqZWN0LmFzc2lnbihzdXJ2ZXlEZXRhaWxzLCB7IGlzUHJlY2hhdCB9KTtcbiAgd2FpdEZvckFIVG9rZW4oU1VSVkVZX0dFVF9SRVNQT05TRSwgc3VydmV5RGV0YWlscyk7XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuIiwiLyoqIEBtb2R1bGUgc2l0ZS1hcGkvbmF0aXZlQ2hhdFVwZGF0ZSAqL1xuaW1wb3J0IHsgR0VORVNZU19SRVFVRVNUX05BVElWRV9DSEFUX0ZBSUxVUkUsIEdFTkVTWVNfUkVRVUVTVF9OQVRJVkVfQ0hBVF9TVUNDRVNTLCBHRU5FU1lTX1VQREFURV9DSEFUX0RBVEFfRU5EUE9JTlQsIFBJWEVMX1RBR19VUkwgfSBmcm9tICcuLi9zaXRlLXB1Yi1zdWIvc2l0ZS1nbG9iYWxzJztcblxuaW1wb3J0IHsgZ2V0Q3VycmVudERvbWFpbiwgZ2V0R1NJRCwgaW5jcmVhc2VFcnJvckNvdW50LCBsb2dHZW5lc3lzRXZlbnQgfSBmcm9tICcuLi9zaXRlLXV0aWxpdGllcy91dGlsaXRpZXMnO1xuaW1wb3J0IG1vYmlsZUFDU0xvZ2dlclNlcnZpY2UgZnJvbSAnLi4vc2l0ZS11dGlsaXRpZXMvdXRpbGl0aWVzL2xvZ2dlcic7XG4vKipcbiAqIEVycm9yIG5hdGl2ZUNoYXRVcGRhdGUgRXZlbnRcbiAqIEBwYXJhbSB7b2JqZWN0fSByZXNwb25zZSAtIEVycm9yIHJlc3BvbnNlXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVycm9yVXBkYXRlRXZlbnQocmVzcG9uc2U6IG9iamVjdCB8IHVua25vd24pOiBib29sZWFuIHtcbiAgVGVhbGl1bVB1YlN1Yi5wdWJsaXNoKEdFTkVTWVNfUkVRVUVTVF9OQVRJVkVfQ0hBVF9GQUlMVVJFLCByZXNwb25zZSk7XG4gIGlmIChiYWN0bSAmJiBiYWN0bS5wbHVnaW5zICYmIGJhY3RtLnBsdWdpbnMucGl4ZWxUYWcpIHtcbiAgICBiYWN0bS5wbHVnaW5zLnBpeGVsVGFnLmZpcmVQaXhlbFRhZyhgJHtQSVhFTF9UQUdfVVJMfT9lcnJvcj0ke3Jlc3BvbnNlfWApO1xuICB9XG4gIGxvZ0dlbmVzeXNFdmVudCgzLCAnIE5hdGl2ZSBDaGF0IFJlcXVlc3QgRmFpbHVyZScsIHJlc3BvbnNlKTtcbiAgbW9iaWxlQUNTTG9nZ2VyU2VydmljZSgndXBkYXRlQ2hhdERhdGEnLCByZXNwb25zZSk7XG4gIGluY3JlYXNlRXJyb3JDb3VudCgpO1xuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogU3VjY2VzcyBuYXRpdmVDaGF0VXBkYXRlIEV2ZW50XG4gKiBAcGFyYW0ge29iamVjdH0gcmVzcG9uc2UgLSBTdWNjZXNzIHJlc3BvbnNlXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqXG4gKiBzdWNjZXNzIHJlc3BvbnNlXG4gKiB7XG4gKiAgIElkOiBcIjZIOThGTUdCN1Q3RVA5RTNWRjZRVkVERzNTMDAwMERGXCIsXG4gKiAgIFJlYXNvbjogXCJTVUNDRVNTRlVMTFkgVVBEQVRFRFwiXG4gKiAgfVxuICovXG5leHBvcnQgZnVuY3Rpb24gc3VjY2Vzc1VwZGF0ZUV2ZW50KHJlc3BvbnNlOiBvYmplY3QpOiBib29sZWFuIHtcbiAgLy8gVE9ETzogYWRkIGluIGEgdGhpbmcgdG8gdGhlIHJlc3BvbnNlIHRvIGtlZXAgdGhlIHNlc3Npb24gZ29pbmcgbm8gbWF0dGVyIHdoYXQuXG4gIC8vIEp1c3QgZm9yIHRlc3RpbmcgMTIgLyAxMyAvIDIwMjIgS2V2aW4gQ29ud2F5XG4gIFRlYWxpdW1QdWJTdWIucHVibGlzaChHRU5FU1lTX1JFUVVFU1RfTkFUSVZFX0NIQVRfU1VDQ0VTUywgLyogcmVzcG9uc2UgKi9cbiAgICByZXNwb25zZSk7XG4gIGxvZ0dlbmVzeXNFdmVudCgxLCAnR2VuZXN5cyBSZXF1ZXN0IE5hdGl2ZSBDaGF0IFN1Y2Nlc3MnLCAvKiByZXNwb25zZSAqL1xuICAgIHJlc3BvbnNlKTtcbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIE1ha2VzIG5hdGl2ZUNoYXQ9YWN0aXZlIHJlcXVlc3QgdG8gZ2VuZXN5c1xuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZSAtIG5hbWUgb2YgZXZlbnRcbiAqIEBwYXJhbSB7b2JqZWN0fSBjb25maWd1cmF0aW9uIC0gcGF5bG9hZFxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoZXZlbnQ6IHN0cmluZywge1xuICBDSEFUX0lELFxuICBjdXJyZW50V2ViUGFnZSxcbn06IHsgQ0hBVF9JRDogc3RyaW5nLCBjdXJyZW50V2ViUGFnZTogc3RyaW5nIH0pIHtcbiAgdHJ5IHtcbiAgICBpZiAodHlwZW9mIGJhY3RtID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdOYXRpdmUgQ2hhdCBSZXF1ZXN0IHVuYWJsZSB0byBwcm9jZXNzJyk7XG4gICAgfVxuXG4gICAgY29uc3QgZ2VuZXN5c0RhdGEgPSB7XG4gICAgICBDVVJSRU5UX1BBR0U6IGN1cnJlbnRXZWJQYWdlLFxuICAgIH07XG4gICAgbG9nR2VuZXN5c0V2ZW50KDEsICdHZW5lc3lzIE5hdGl2ZSBDaGF0IFBhZ2V2aWV3IFBhcmFtcycsIGdlbmVzeXNEYXRhKTtcblxuICAgIC8vIFRPRE86IHJlbW92ZSByZXF1aXJlbWVudCB0byBjaGVjayBmb3IgY2hhdF9pZCBrcGMuXG4gICAgaWYgKENIQVRfSUQpIHtcbiAgICAgIC8vIFdoaWxlIGNvbmZ1c2luZywgY3VycmVudGx5LCB0aGlzIGlzIGhvdyBpdHMgc2V0dXAuIENoYXQgSUQgYW5kIEludGVyYWN0aW9uIElEIGFyZSBub3QgdGhlIHNhbWUuXG4gICAgICBjb25zdCBpbnRlcmFjdGlvbklEID0gQ0hBVF9JRDtcbiAgICAgIGNvbnN0IGN1cnJlbnRUTEQgPSBnZXRDdXJyZW50RG9tYWluKCk7XG4gICAgICBjb25zdCBHU0lEID0gZ2V0R1NJRCgpO1xuICAgICAgY29uc3QgZG9tYWluID0gc3BhUGFyYW1zLnNpdGVQYXJhbXMuZG9tYWluc1tjdXJyZW50VExEXS5nZW5lc3lzO1xuICAgICAgY29uc3QganNvblVzZXJEYXRhID0gSlNPTi5zdHJpbmdpZnkoZ2VuZXN5c0RhdGEpO1xuICAgICAgY29uc3QgZ2VuZXN5c1ByZUNvbm5lY3RQYXJhbXMgPSB7XG4gICAgICAgIF9pbnRlcmFjdGlvbl9pZDogaW50ZXJhY3Rpb25JRCwgXG4gICAgICAgIF91c2VyZGF0YToganNvblVzZXJEYXRhLFxuICAgICAgICBfR1NJRDogR1NJRCxcbiAgICAgICAgX3VwZGF0ZUZvckFjdGl2ZUNoYXRPbmx5OiAnWScsXG4gICAgICB9O1xuXG4gICAgICBsb2dHZW5lc3lzRXZlbnQoMSwgJ0dlbmVzeXMgTmF0aXZlIENoYXQgUmVxdWVzdCBQYXJhbXMnLCBnZW5lc3lzUHJlQ29ubmVjdFBhcmFtcyk7XG4gICAgICBjb25zdCBnZW5lc3lzTmF0aXZlQ2hhdEVuZFBvaW50ID0gYCR7ZG9tYWlufSR7R0VORVNZU19VUERBVEVfQ0hBVF9EQVRBX0VORFBPSU5UfWA7XG4gICAgICBmZXRjaChnZW5lc3lzTmF0aXZlQ2hhdEVuZFBvaW50LCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShnZW5lc3lzUHJlQ29ubmVjdFBhcmFtcyksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnLFxuICAgICAgfSkudGhlbigocmVzcCkgPT4gcmVzcC5qc29uKCkpLnRoZW4oc3VjY2Vzc1VwZGF0ZUV2ZW50KS5jYXRjaChlcnJvclVwZGF0ZUV2ZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9nR2VuZXN5c0V2ZW50KDMsICdDaGF0IElkIHVuZGVmaW5lZCcsIENIQVRfSUQpO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGxvZ0dlbmVzeXNFdmVudCgzLCAnR2VuZXN5cyBOYXRpdmUgQ2hhdCBFcnJvciBvY2N1cnJlZCcsIGUpO1xuICAgIGVycm9yVXBkYXRlRXZlbnQoZSk7XG4gIH1cbn1cbiIsIi8qIGVzbGludC1kaXNhYmxlIGNhbWVsY2FzZSAqL1xuLyoqIEBtb2R1bGUgZ2VuZXN5cy9wb2xsaW5nICovXG5pbXBvcnQge1xuICBDQU5DRUxfSEVBUlRCRUFULFxuICBHRU5FU1lTX1JFUVVFU1RfUE9MTElOR19GQUlMVVJFLFxuICBHRU5FU1lTX1JFUVVFU1RfUE9MTElOR19TVUNDRVNTLFxuICBQSVhFTF9UQUdfVVJMLFxufSBmcm9tICcuLi9zaXRlLXB1Yi1zdWIvc2l0ZS1nbG9iYWxzJztcbmltcG9ydCB7XG4gIGdldEdTSUQsXG4gIGluY3JlYXNlRXJyb3JDb3VudCxcbiAgbG9nR2VuZXN5c0V2ZW50LFxufSBmcm9tICcuLi9zaXRlLXV0aWxpdGllcy91dGlsaXRpZXMnO1xuaW1wb3J0IHtcbiAgc2VuZFBvc3RNZXNzYWdlLFxufSBmcm9tICcuLi9tZXNzYWdpbmcvcG9zdC1tZXNzYWdlcyc7XG5cbi8qKlxuKiBFcnJvciBwb2xsaW5nXG4qIEBwYXJhbSB7b2JqZWN0fSByZXNwb25zZSAtIEVycm9yIHJlc3BvbnNlXG4qIEByZXR1cm5zIHtib29sZWFufVxuKi9cbmV4cG9ydCBmdW5jdGlvbiBlcnJvclBvbGxpbmcocmVzcG9uc2U6IG9iamVjdCB8IHVua25vd24gKTogYm9vbGVhbiB7XG4gIFRlYWxpdW1QdWJTdWIucHVibGlzaChHRU5FU1lTX1JFUVVFU1RfUE9MTElOR19GQUlMVVJFLCByZXNwb25zZSk7XG4gIGlmIChiYWN0bSAmJiBiYWN0bS5wbHVnaW5zICYmIGJhY3RtLnBsdWdpbnMucGl4ZWxUYWcpIGJhY3RtLnBsdWdpbnMucGl4ZWxUYWcuZmlyZVBpeGVsVGFnKGAke1BJWEVMX1RBR19VUkx9P2Vycm9yPSR7cmVzcG9uc2V9YCk7XG4gIGxvZ0dlbmVzeXNFdmVudCgzLCAnR2VuZXN5cyBSZXF1ZXN0IFBvbGxpbmcgRmFpbHVyZScsIHJlc3BvbnNlKTtcbiAgaW5jcmVhc2VFcnJvckNvdW50KCk7XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4qIFN1Y2Nlc3MgcG9sbGluZ1xuKiBAcGFyYW0ge29iamVjdH0gcmVzcG9uc2UgLSBwb2xsaW5nIHJlc3BvbnNlXG4qIEBleGFtcGxlXG4vLyBzdWNjZXNzIHJlc3BvbnNlXG57XG5cIkF2YWlsYWJpbGl0eVwiOiBcImZhbHNlXCIsXG5cIlJlYXNvblwiOiBcIk91dCBvZiBPZmZpY2UgSG91cnNcIixcblwiRVdUXCI6IDAsXG5cIkFnZW50QXZhaWxhYmxlXCI6IDMsXG5cIklkXCI6IFwiR0w3UjJLNERKUDZKTjdGRlRSSzVBMUI1Q0MwMDAwVEpcIixcblwiU3BsYXNoTWVzc2FnZVwiOiBcIkNoYXQgU3BsYXNoIE1lc3NhZ2VcIlxufVxuKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiovXG5leHBvcnQgZnVuY3Rpb24gc3VjY2Vzc1BvbGxpbmcocmVzcG9uc2U6IHsgQXZhaWxhYmlsaXR5OiBib29sZWFuIH0pOiBib29sZWFuIHtcbiAgVGVhbGl1bVB1YlN1Yi5wdWJsaXNoKEdFTkVTWVNfUkVRVUVTVF9QT0xMSU5HX1NVQ0NFU1MsIHJlc3BvbnNlKTtcbiAgbG9nR2VuZXN5c0V2ZW50KDEsICdHZW5lc3lzIFBvbGxpbmcgUmVzcG9uc2UnLCByZXNwb25zZSk7XG5cbiAgY29uc3QgeyBBdmFpbGFiaWxpdHkgfSA9IHJlc3BvbnNlO1xuICBjb25zdCBpc01vbml0b3JpbmcgPSB3aW5kb3cuZGlnaXRhbERhdGEucGFnZS5hdHRyaWJ1dGVzLmNoYXQubW9uaXRvcmluZztcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gIGNvbnN0IGlzSW5QYWdlID0gKHdpbmRvdy50b3AgPT09IHdpbmRvdy5zZWxmKTtcblxuICBpZiAoIUF2YWlsYWJpbGl0eSAmJiBpc01vbml0b3JpbmcpIHtcbiAgICBzZW5kUG9zdE1lc3NhZ2UoQ0FOQ0VMX0hFQVJUQkVBVCk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiogTWFraW5nIHBvbGxpbmcgcmVxdWVzdCB0byBnZW5lc3lzXG4qIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWUgLSBuYW1lIG9mIGV2ZW50XG4qIEBwYXJhbSB7b2JqZWN0fSBjb25maWd1cmF0aW9uXG4qL1xuLy8gPC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChldmVudE5hbWU6IHN0cmluZywgXG4gICAgY29uZmlndXJhdGlvbjogeyBkb21haW46IHN0cmluZywgbGFuZ3VhZ2VDb2RlOiBib29sZWFuLCBwYWdlSWQ6IHN0cmluZywgcG9sbGluZ1VybDogc3RyaW5nLCBcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXJMb2I6IHN0cmluZywgc2l0ZUlEOiBzdHJpbmcsIHVuaXQ6IGFueSwgcHJvZ3JhbVRyYWl0OiBhbnksIHJ1bklEOiBzdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgIHJvdXRlUGFyYW06IHN0cmluZywgYWNjb3VudFR5cGU6IHN0cmluZywgY2hhbm5lbDogYW55LCBtb2JpbGVJbmRpY2F0b3I6IHN0cmluZywgVUFJRDogc3RyaW5nIH1cbiAgKSB7XG4gIHRyeSB7XG4gICAgY29uc3Qge1xuICAgICAgY3VzdG9tZXJMb2IsXG4gICAgICBkb21haW4sXG4gICAgICBsYW5ndWFnZUNvZGUsXG4gICAgICBwYWdlSWQsXG4gICAgICBwb2xsaW5nVXJsLFxuICAgICAgc2l0ZUlELFxuICAgICAgdW5pdCxcbiAgICAgIHByb2dyYW1UcmFpdCxcbiAgICAgIHJ1bklELFxuICAgICAgcm91dGVQYXJhbSxcbiAgICAgIGFjY291bnRUeXBlLFxuICAgICAgY2hhbm5lbCwgLy8gb25seSB1c2VkIGluIE9MQlxuICAgICAgbW9iaWxlSW5kaWNhdG9yLFxuICAgICAgVUFJRCA9ICcnLFxuICAgIH0gPSBjb25maWd1cmF0aW9uO1xuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1jb25zdFxuICAgIGxldCBnZW5lc3lzUG9sbGluZ0VuZHBvaW50ID0gYCR7ZG9tYWlufSR7cG9sbGluZ1VybH1gO1xuICAgIGNvbnN0IEdTSUQgPSBnZXRHU0lEKCk7XG4gICAgLy8gYWRkIG5ldyBwYXJhbWV0ZXIgdG8gYWxsIDMgb2YgdGhlc2UgdXNlIGNhc2VzIGJlbG93LlxuICAgIGNvbnN0IHVhSUREZWZpbmVkID0gVUFJRC5sZW5ndGggPiAwID8gYCZfVUFJRD0ke1VBSUR9YCA6YGA7XG4gICAgbGV0IGdlbmVzeXNQb2xsaW5nUGFyYW1zID0gYF9sYW5ndWFnZV9jb2RlPSR7bGFuZ3VhZ2VDb2RlfSZfcGFnZV9pZD0ke3BhZ2VJZH0mX2N1c3RvbWVyX2xvYj0ke2N1c3RvbWVyTG9ifSZfYWNjb3VudF90eXBlPSR7YWNjb3VudFR5cGV9Jl9jaGFubmVsPSR7Y2hhbm5lbH0mX21vYmlsZV9pbmRpY2F0b3I9JHttb2JpbGVJbmRpY2F0b3J9Jl9HU0lEPSR7R1NJRH0ke3VhSUREZWZpbmVkfWA7XG4gICAgaWYgKHNpdGVJRCAhPT0gJycpIHtcbiAgICAgIGdlbmVzeXNQb2xsaW5nUGFyYW1zID0gYF9zaXRlX2lkPSR7c2l0ZUlEfSZfdW5pdD0ke3VuaXR9Jl9wcm9ncmFtdHJhaXQ9JHtwcm9ncmFtVHJhaXR9Jl9wYWdlbWFya2VyPSR7cnVuSUR9JHt1YUlERGVmaW5lZH1gO1xuICAgIH0gZWxzZSBpZiAocm91dGVQYXJhbSAhPT0gJycpIHtcbiAgICAgIGdlbmVzeXNQb2xsaW5nUGFyYW1zID0gYF9yb3V0ZV9wYXJhbT0ke3JvdXRlUGFyYW19Jl9sYW5ndWFnZV9jb2RlPSR7bGFuZ3VhZ2VDb2RlfSZfY3VzdG9tZXJfbG9iPSR7Y3VzdG9tZXJMb2J9JHt1YUlERGVmaW5lZH1gO1xuICAgIH1cbiAgICBsb2dHZW5lc3lzRXZlbnQoMSwgJ0dlbmVzeXMgUG9sbGluZyBBdmFpbGFiaWxpdHknLCBnZW5lc3lzUG9sbGluZ1BhcmFtcyk7XG4gICAgZmV0Y2goZ2VuZXN5c1BvbGxpbmdFbmRwb2ludCwge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBnZW5lc3lzUG9sbGluZ1BhcmFtcyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLFxuICAgICAgfSxcbiAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXNwKSA9PiByZXNwLmpzb24oKSlcbiAgICAgIC50aGVuKHN1Y2Nlc3NQb2xsaW5nKVxuICAgICAgLmNhdGNoKGVycm9yUG9sbGluZyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBsb2dHZW5lc3lzRXZlbnQoMywgJ0dlbmVzeXMgUG9sbGluZyBFcnJvcicsIGUpO1xuICAgIGVycm9yUG9sbGluZyhlKTtcbiAgfVxufSIsIi8qKiBAbW9kdWxlIGdlbmVzeXMvcHJlQ29ubmVjdCAqL1xuaW1wb3J0IHtcbiAgQ0FOQ0VMX0hFQVJUQkVBVCxcbiAgR0VORVNZU19SRVFVRVNUX1BSRV9DT05ORUNUX0ZBSUxVUkUsXG4gIEdFTkVTWVNfUkVRVUVTVF9QUkVfQ09OTkVDVF9TVUNDRVNTLFxuICBQSVhFTF9UQUdfVVJMLFxufSBmcm9tICcuLi9zaXRlLXB1Yi1zdWIvc2l0ZS1nbG9iYWxzJztcbmltcG9ydCB7IGdldEdTSUQsIGluY3JlYXNlRXJyb3JDb3VudCwgbG9nR2VuZXN5c0V2ZW50IH0gZnJvbSAnLi4vc2l0ZS11dGlsaXRpZXMvdXRpbGl0aWVzJztcbmltcG9ydCB7IHNlbmRQb3N0TWVzc2FnZSB9IGZyb20gJy4uL21lc3NhZ2luZy9wb3N0LW1lc3NhZ2VzJztcblxuLyoqXG4gKiBFcnJvciBjaGVjayBwcmUgY29ubmVjdCBlcnJvckNoZWNrUHJlQ29ubmVjdFxuICogQHBhcmFtIHtvYmplY3R9IHJlc3BvbnNlIC0gRXJyb3IgcmVzcG9uc2VcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXJyb3JDaGVja1ByZUNvbm5lY3QocmVzcG9uc2U6IG9iamVjdCB8IHVua25vd24pOiBib29sZWFuIHtcbiAgVGVhbGl1bVB1YlN1Yi5wdWJsaXNoKEdFTkVTWVNfUkVRVUVTVF9QUkVfQ09OTkVDVF9GQUlMVVJFLCByZXNwb25zZSk7XG4gIGlmIChiYWN0bSAmJiBiYWN0bS5wbHVnaW5zICYmIGJhY3RtLnBsdWdpbnMucGl4ZWxUYWcpIGJhY3RtLnBsdWdpbnMucGl4ZWxUYWcuZmlyZVBpeGVsVGFnKGAke1BJWEVMX1RBR19VUkx9P2Vycm9yPSR7cmVzcG9uc2V9YCk7XG4gIGxvZ0dlbmVzeXNFdmVudCgzLCAnR2VuZXN5cyBQcmVjb25uZWN0IEZhaWx1cmUnLCByZXNwb25zZSk7XG4gIGluY3JlYXNlRXJyb3JDb3VudCgpO1xuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogU3VjY2VzcyBjaGVjayBwcmUgY29ubmVjdFxuICogQHBhcmFtIHtvYmplY3R9IHJlc3BvbnNlIC0gcHJlIGNvbm5lY3QgcmVzcG9uc2VcbiAqIEBleGFtcGxlXG4vLyBzdWNjZXNzIHJlc3BvbnNlXG57XG4gIFwiQXZhaWxhYmlsaXR5XCI6IFwiZmFsc2VcIixcbiAgXCJSZWFzb25cIjogXCJPdXQgb2YgT2ZmaWNlIEhvdXJzXCIsXG4gIFwiRVdUXCI6IDAsXG4gIFwiQWdlbnRBdmFpbGFibGVcIjogMyxcbiAgXCJJZFwiOiBcIkdMN1IySzRESlA2Sk43RkZUUks1QTFCNUNDMDAwMFRKXCIsXG4gIFwiU3BsYXNoTWVzc2FnZVwiOiBcIkNoYXQgU3BsYXNoIE1lc3NhZ2VcIlxufVxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdWNjZXNzQ2hlY2tQcmVDb25uZWN0KHJlc3BvbnNlOiB7IElQOiBzdHJpbmcsIEF2YWlsYWJpbGl0eTogYm9vbGVhbiwgUkxEOiBzdHJpbmcgfSk6IGJvb2xlYW4ge1xuICBUZWFsaXVtUHViU3ViLnB1Ymxpc2goR0VORVNZU19SRVFVRVNUX1BSRV9DT05ORUNUX1NVQ0NFU1MsIHJlc3BvbnNlKTtcbiAgbG9nR2VuZXN5c0V2ZW50KDEsICdHZW5lc3lzIFByZWNvbm5lY3QgU3VjY2VzcycsIHJlc3BvbnNlKTtcblxuICAvLyB0aGlzIHNldHMgYmFjdG1fbHRzIGNvb2tpZSB3aXRoIGEgY2hhdFNlcnZpY2Ugb2JqZWN0IGFuZCBSTEQgcHJvcGVydHlcbiAgY29uc3QgY2hhdFNlcnZpY2UgPSBiYWN0bS5TdG9yZSgnY2hhdFNlcnZpY2UnLCB7IHR5cGU6ICdjb29raWUnIH0pO1xuICBjaGF0U2VydmljZS5zZXQoJ1JMRCcsIHJlc3BvbnNlPy5STEQpO1xuICBjaGF0U2VydmljZS5zYXZlKCk7XG5cbiAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLklQICYmIGJhY3RtICYmIGJhY3RtLmRkbykge1xuICAgIGJhY3RtLmRkby5zZXQoJ3BhZ2UuYXR0cmlidXRlcy5jaGF0LklQX0FERFJFU1MnLCByZXNwb25zZS5JUCk7XG4gIH1cblxuICBjb25zdCB7IEF2YWlsYWJpbGl0eSB9ID0gcmVzcG9uc2U7XG4gIGNvbnN0IGlzTW9uaXRvcmluZyA9IHdpbmRvdy5kaWdpdGFsRGF0YS5wYWdlLmF0dHJpYnV0ZXMuY2hhdC5tb25pdG9yaW5nO1xuICBpZiAoIUF2YWlsYWJpbGl0eSAmJiBpc01vbml0b3JpbmcpIHtcbiAgICBzZW5kUG9zdE1lc3NhZ2UoQ0FOQ0VMX0hFQVJUQkVBVCk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIE1ha2luZyBwcmUgY29ubmVjdHMgcmVxdWVzdCB0byBnZW5lc3lzXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnROYW1lIC0gbmFtZSBvZiBldmVudFxuICogQHBhcmFtIHtvYmplY3R9IGNvbmZpZ3VyYXRpb25cbiAqL1xuLy8gPC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChldmVudE5hbWU6IHN0cmluZywgXG4gICAgY29uZmlndXJhdGlvbjogeyBkb21haW46IHN0cmluZywgbGFuZ3VhZ2VDb2RlOiBib29sZWFuLCBwYWdlSWQ6IHN0cmluZywgcHJlQ29ubmVjdFVybDogc3RyaW5nLCBcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXJMb2I6IHN0cmluZywgc2l0ZUlEOiBzdHJpbmcsIHVuaXQ6IGFueSwgcHJvZ3JhbVRyYWl0OiBhbnksIHJ1bklEOiBzdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgIHJvdXRlUGFyYW06IHN0cmluZywgYWNjb3VudFR5cGU6IHN0cmluZywgY2hhbm5lbDogYW55LCBtb2JpbGVJbmRpY2F0b3I6IHN0cmluZywgVUFJRDogc3RyaW5nfVxuICApIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7XG4gICAgICBkb21haW4sXG4gICAgICBsYW5ndWFnZUNvZGUsXG4gICAgICBwYWdlSWQsXG4gICAgICBwcmVDb25uZWN0VXJsLFxuICAgICAgY3VzdG9tZXJMb2IsXG4gICAgICBzaXRlSUQsXG4gICAgICB1bml0LFxuICAgICAgcHJvZ3JhbVRyYWl0LFxuICAgICAgcnVuSUQsXG4gICAgICByb3V0ZVBhcmFtLFxuICAgICAgYWNjb3VudFR5cGUsXG4gICAgICBjaGFubmVsLCAvLyBvbmx5IHVzZWQgaW4gT0xCXG4gICAgICBtb2JpbGVJbmRpY2F0b3IsXG4gICAgICBVQUlEID0gJycsIFxuICAgIH0gPSBjb25maWd1cmF0aW9uO1xuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1jb25zdFxuICAgIGxldCBnZW5lc3lzUHJlQ29ubmVjdEVuZHBvaW50ID0gYCR7ZG9tYWlufSR7cHJlQ29ubmVjdFVybH1gO1xuICAgIGNvbnN0IEdTSUQgPSBnZXRHU0lEKCk7XG4gICAgLy8gYWRkIG5ldyBwYXJhbWV0ZXIgdG8gYWxsIDMgb2YgdGhlc2UgdXNlIGNhc2VzIGJlbG93LlxuICAgIGNvbnN0IHVhSUREZWZpbmVkID0gVUFJRC5sZW5ndGggPiAwID8gYCZfVUFJRD0ke1VBSUR9YCA6IGBgO1xuICAgIGxldCBnZW5lc3lzUHJlQ29ubmVjdFBhcmFtcyA9IGBfbGFuZ3VhZ2VfY29kZT0ke2xhbmd1YWdlQ29kZX0mX3BhZ2VfaWQ9JHtwYWdlSWR9Jl9jdXN0b21lcl9sb2I9JHtjdXN0b21lckxvYn0mX2FjY291bnRfdHlwZT0ke2FjY291bnRUeXBlfSZfY2hhbm5lbD0ke2NoYW5uZWx9Jl9tb2JpbGVfaW5kaWNhdG9yPSR7bW9iaWxlSW5kaWNhdG9yfSZfR1NJRD0ke0dTSUR9JHt1YUlERGVmaW5lZH1gO1xuICAgIGlmIChzaXRlSUQgIT09ICcnKSB7XG4gICAgICBnZW5lc3lzUHJlQ29ubmVjdFBhcmFtcyA9IGBfc2l0ZV9pZD0ke3NpdGVJRH0mX3VuaXQ9JHt1bml0fSZfcHJvZ3JhbXRyYWl0PSR7cHJvZ3JhbVRyYWl0fSZfcGFnZW1hcmtlcj0ke3J1bklEfSR7dWFJRERlZmluZWR9YDtcbiAgICB9IGVsc2UgaWYgKHJvdXRlUGFyYW0gIT09ICcnKSB7XG4gICAgICBnZW5lc3lzUHJlQ29ubmVjdFBhcmFtcyA9IGBfcm91dGVfcGFyYW09JHtyb3V0ZVBhcmFtfSZfbGFuZ3VhZ2VfY29kZT0ke2xhbmd1YWdlQ29kZX0mX2N1c3RvbWVyX2xvYj0ke2N1c3RvbWVyTG9ifSR7dWFJRERlZmluZWR9YDtcbiAgICB9XG4gICAgbG9nR2VuZXN5c0V2ZW50KDEsICdHZW5lc3lzIFByZWNvbm5lY3QgUGFyYW1zJywgZ2VuZXN5c1ByZUNvbm5lY3RQYXJhbXMpO1xuICAgIGZldGNoKGdlbmVzeXNQcmVDb25uZWN0RW5kcG9pbnQsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogZ2VuZXN5c1ByZUNvbm5lY3RQYXJhbXMsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcbiAgICAgIH0sXG4gICAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzcCkgPT4gcmVzcC5qc29uKCkpXG4gICAgICAudGhlbihzdWNjZXNzQ2hlY2tQcmVDb25uZWN0KVxuICAgICAgLmNhdGNoKGVycm9yQ2hlY2tQcmVDb25uZWN0KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dHZW5lc3lzRXZlbnQoMywgJ0dlbmVzeXMgUHJlY29ubmVjdCBFcnJvcicsIGVycm9yKTtcbiAgICBlcnJvckNoZWNrUHJlQ29ubmVjdChlcnJvcik7XG4gIH1cbn0iLCJpbXBvcnQge0dFTkVTWVNfUkVRVUVTVF9UQ19VUERBVEVfRkFJTFVSRSwgR0VORVNZU19SRVFVRVNUX1RDX1VQREFURV9TVUNDRVNTLCBHRU5FU1lTX1VQREFURV9DSEFUX0RBVEFfRU5EUE9JTlQsIFBJWEVMX1RBR19VUkx9IGZyb20gXCIuLi9zaXRlLXB1Yi1zdWIvc2l0ZS1nbG9iYWxzXCI7XG5pbXBvcnQge2dldEN1cnJlbnREb21haW4sIGdldEdTSUQsIGluY3JlYXNlRXJyb3JDb3VudCwgbG9nR2VuZXN5c0V2ZW50fSBmcm9tIFwiLi4vc2l0ZS11dGlsaXRpZXMvdXRpbGl0aWVzXCI7XG5cblxuLyoqXG4gKiBFcnJvciB0Yy11cGRhdGUgRXZlbnRcbiAqIEBwYXJhbSB7b2JqZWN0fSByZXNwb25zZSAtIEVycm9yIHJlc3BvbnNlXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVycm9yVENVcGRhdGVFdmVudChyZXNwb25zZTogb2JqZWN0IHwgdW5rbm93bik6IGJvb2xlYW4ge1xuICBUZWFsaXVtUHViU3ViLnB1Ymxpc2goR0VORVNZU19SRVFVRVNUX1RDX1VQREFURV9GQUlMVVJFLCByZXNwb25zZSlcbiAgaWYgKGJhY3RtICYmIGJhY3RtLnBsdWdpbnMgJiYgYmFjdG0ucGx1Z2lucy5waXhlbFRhZykge1xuICAgIGJhY3RtLnBsdWdpbnMucGl4ZWxUYWcuZmlyZVBpeGVsVGFnKGAke1BJWEVMX1RBR19VUkx9P2Vycm9yPSR7cmVzcG9uc2V9YCk7XG4gIH1cbiAgbG9nR2VuZXN5c0V2ZW50KDMsICdUQy1VcGRhdGUgUmVxdWVzdCBGYWlsdXJlJywgcmVzcG9uc2UpO1xuICBpbmNyZWFzZUVycm9yQ291bnQoKTtcbiAgcmV0dXJuIGZhbHNlO1xuXG59XG5cbi8qKlxuICogU3VjY2VzcyB0Yy11cGRhdGUgRXZlbnRcbiAqIEBwYXJhbSB7b2JqZWN0fSByZXNwb25zZSAtIFN1Y2Nlc3MgUmVzcG9uc2VcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICogXG4gKiBzdWNjZXNzIHJlc3BvbnNlXG4gKiB7XG4gKiAgXCJSZWFzb25cIjogXCJTdWNjZXNzZnVsbHkgVXBkYXRlZFwiLFxuICogIFwiSWRcIjogXCJUQktLTzUzSkpIMjZQMjI3QTlLQ0I4Qk5IRzAwMFVDQVwiLFxuICogIFwiSXNDaGF0QWN0aXZlXCI6IFwiTlwiXG4gKiAgICB9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdWNjZXNzVENVcGRhdGVFdmVudChyZXNwb25zZTogb2JqZWN0KTogYm9vbGVhbiB7XG4gIFRlYWxpdW1QdWJTdWIucHVibGlzaChHRU5FU1lTX1JFUVVFU1RfVENfVVBEQVRFX1NVQ0NFU1MsIHJlc3BvbnNlKTtcbiAgbG9nR2VuZXN5c0V2ZW50KDEsICdHRU5FU1lTIFJFUVVFU1QgVEMgVVBEQVRFIFNVQ0NFU1MnLCByZXNwb25zZSk7XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBNYWtlcyB0ZXJtcyBhbmQgY29uZGl0aW9ucyB1cGRhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWUgLSBuYW1lIG9mIGV2ZW50XG4gKiBAcGFyYW0ge29iamVjdH0gcGF5bG9hZCAtIG5hbWUgb2YgZXZlbnRcbiAqIHBheWxvYWQgZXhhbXBsZVxuICogXCJ7XFxcIk9GRkVSX01HTVRcXFwiOlt7XFxcImN1cnJlbnRVcmxcXFwiOlxcXCJodHRwczovL3d3dy5iYW5rb2ZhbWVyaWNhLmNvbS9jcmVkaXQtY2FyZHMvcHJvZHVjdHMvY2FzaC1iYWNrLWNyZWRpdC1jYXJkLz9jYW1wYWlnbj00MDYzNzc4fkVLfmVuX1VTXFxcIixcXFwicmVmZXJyZXJcXFwiOlxcXCJodHRwczovL3d3dy5iYW5rb2ZhbWVyaWNhLmNvbS9jcmVkaXQtY2FyZHMvXFxcIixcXFwicHJvZHVjdE5hbWVcXFwiOlxcXCJCYW5rIG9mIEFtZXJpY2EgQ3VzdG9taXplZCBDYXNoIFJld2FyZHMgQ3JlZGl0IENhcmRcXFwiLFxcXCJ0Y0xpbmtcXFwiOlxcXCJodHRwczovL3d3dy5iYW5rb2ZhbWVyaWNhLmNvbS9jcmVkaXQtY2FyZHMvdGVybXMtYW5kLWNvbmRpdGlvbnMvP2NhbXBhaWduaWQ9NDA2Mzc3OCZwcm9kdWN0b2ZmZXJjb2RlPUVLJmxvY2FsZT1lbl9VU1xcXCIsXFxcInRpbWVTdGFtcFxcXCI6XFxcIjE6Mzc6MzEgUE1cXFwiLFxcXCJwYWdlVHlwZVxcXCI6XFxcInJlc2VhcmNoXFxcIn0se1xcXCJjdXJyZW50VXJsXFxcIjpcXFwiaHR0cHM6Ly93d3cuYmFua29mYW1lcmljYS5jb20vY3JlZGl0LWNhcmRzL3Byb2R1Y3RzL3VubGltaXRlZC1jYXNoLWJhY2stc3R1ZGVudC1jcmVkaXQtY2FyZC9cXFwiLFxcXCJyZWZlcnJlclxcXCI6XFxcImh0dHBzOi8vd3d3LmJhbmtvZmFtZXJpY2EuY29tL2NyZWRpdC1jYXJkcy9zdHVkZW50LWNyZWRpdC1jYXJkcy9cXFwiLFxcXCJwcm9kdWN0TmFtZVxcXCI6XFxcIkJhbmsgb2YgQW1lcmljYSBVbmxpbWl0ZWQgQ2FzaCBSZXdhcmRzIENyZWRpdCBDYXJkIGZvciBTdHVkZW50c1xcXCIsXFxcInRjTGlua1xcXCI6XFxcImh0dHBzOi8vd3d3LmJhbmtvZmFtZXJpY2EuY29tL2NyZWRpdC1jYXJkcy90ZXJtcy1hbmQtY29uZGl0aW9ucy8/Y2FtcGFpZ25pZD00MDYzOTIyJnByb2R1Y3RvZmZlcmNvZGU9UzcmbG9jYWxlPWVuX1VTXFxcIixcXFwidGltZVN0YW1wXFxcIjpcXFwiMTo0ODowOCBQTVxcXCIsXFxcInBhZ2VUeXBlXFxcIjpcXFwicmVzZWFyY2hcXFwifV19XCJcblxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoZXZlbnQ6IHN0cmluZywge1xuICBjaGF0SUQsXG4gIE9GRkVSX01HTVRcbn06IHsgY2hhdElEOiBzdHJpbmcsIE9GRkVSX01HTVQ6IGFueVtdfSkge1xuICB0cnkge1xuICAgIGlmICh0eXBlb2YgYmFjdG0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0dFTkVTWVMgUkVRVUVTVCBUQyBVUERBVEUgUkVRVUVTVCB1bmFibGUgdG8gcHJvY2VzcycpXG4gICAgfVxuICAgIGNvbnN0IGdlbmVzeXNEYXRhID0ge1xuICAgICAgT0ZGRVJfTUdNVFxuICAgIH07XG4gICAgaWYgKGNoYXRJRCAmJiBPRkZFUl9NR01UKSB7XG4gICAgICBjb25zdCBpbnRlcmFjdGlvbklEID0gY2hhdElEO1xuICAgICAgY29uc3QgY3VycmVudFRMRCA9IGdldEN1cnJlbnREb21haW4oKTtcbiAgICAgIGNvbnN0IEdTSUQgPSBnZXRHU0lEKCk7XG4gICAgICBjb25zdCBkb21haW4gPSBzcGFQYXJhbXMuc2l0ZVBhcmFtcy5kb21haW5zW2N1cnJlbnRUTERdLmdlbmVzeXM7XG4gICAgICBjb25zdCBqc29uVXNlckRhdGEgPSBKU09OLnN0cmluZ2lmeShnZW5lc3lzRGF0YSlcbiAgICAgIGNvbnN0IGdlbmVzeXNUQ1VwZGF0ZVBhcmFtcyA9IHtcbiAgICAgICAgX2ludGVyYWN0aW9uX2lkOiBpbnRlcmFjdGlvbklELFxuICAgICAgICBfdXNlcmRhdGE6IGpzb25Vc2VyRGF0YSxcbiAgICAgICAgX0dTSUQ6IEdTSUQsXG4gICAgICAgIF91cGRhdGVGb3JBY3RpdmVDaGF0T25seTogJ1knXG4gICAgICB9O1xuXG4gICAgICBsb2dHZW5lc3lzRXZlbnQoMSwgJ0dFTkVTWVMgVEVSTVMgQU5EIENPTkRJVElPTlMgVVBEQVRFIFBBUkFNUycsIGdlbmVzeXNUQ1VwZGF0ZVBhcmFtcylcbiAgICAgIGNvbnN0IGdlbmVzeXNOYXRpdmVDaGF0RW5kcG9pbnQgPSBgJHtkb21haW59JHtHRU5FU1lTX1VQREFURV9DSEFUX0RBVEFfRU5EUE9JTlR9YDtcbiAgICAgIGZldGNoKGdlbmVzeXNOYXRpdmVDaGF0RW5kcG9pbnQsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGdlbmVzeXNUQ1VwZGF0ZVBhcmFtcyksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIH0sXG4gICAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZSdcbiAgICAgIH0pLnRoZW4oKHJlc3ApID0+IHJlc3AuanNvbigpKS50aGVuKHN1Y2Nlc3NUQ1VwZGF0ZUV2ZW50KS5jYXRjaChlcnJvclRDVXBkYXRlRXZlbnQpXG4gICAgfSBlbHNlIHtcbiAgICAgIGxvZ0dlbmVzeXNFdmVudCgzLCAnQ2hhdCBJRCB1bmRlZmluZWQnLCBjaGF0SUQpXG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgZXJyb3JUQ1VwZGF0ZUV2ZW50KGUpXG4gIH1cblxufVxuIiwiLyogZXNsaW50LWRpc2FibGUgY2FtZWxjYXNlICovXG5pbXBvcnQge1xuICBQSVhFTF9UQUdfVVJMLFxuICBHRU5FU1lTX1NFTkRfU1VSVkVZX1NVQ0NFU1MsXG4gIEdFTkVTWVNfU0VORF9TVVJWRVlfRkFJTFVSRSxcbiAgQ09PS0lFX0xUUyxcbiAgR0VORVNZU19VUERBVEVfQ0hBVF9EQVRBX0VORFBPSU5ULFxufSBmcm9tICcuLi9zaXRlLXB1Yi1zdWIvc2l0ZS1nbG9iYWxzJztcbmltcG9ydCB7XG4gIGdldEN1cnJlbnREb21haW4sXG4gIGluY3JlYXNlRXJyb3JDb3VudCxcbiAgbG9nR2VuZXN5c0V2ZW50LFxufSBmcm9tICcuLi9zaXRlLXV0aWxpdGllcy91dGlsaXRpZXMnO1xuXG5pbXBvcnQgZ2V0Q29va2llIGZyb20gJy4uL3NpdGUtdXRpbGl0aWVzL2Nvb2tpZS1zdG9yYWdlL2dldCc7XG5cbi8qKlxuICogRXJyb3IgU2VuZCBTdXJ2ZXlcbiAqIEBwYXJhbSB7b2JqZWN0fSByZXNwb25zZSAtIEVycm9yIHJlc3BvbnNlXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVycm9yU2VuZFN1cnZleShyZXNwb25zZTogb2JqZWN0IHwgdW5rbm93bik6IGJvb2xlYW4ge1xuICBUZWFsaXVtUHViU3ViLnB1Ymxpc2goR0VORVNZU19TRU5EX1NVUlZFWV9GQUlMVVJFLCByZXNwb25zZSk7XG4gIGlmIChiYWN0bSAmJiBiYWN0bS5wbHVnaW5zICYmIGJhY3RtLnBsdWdpbnMucGl4ZWxUYWcpIGJhY3RtLnBsdWdpbnMucGl4ZWxUYWcuZmlyZVBpeGVsVGFnKGAke1BJWEVMX1RBR19VUkx9P2Vycm9yPSR7cmVzcG9uc2V9YCk7XG4gIGxvZ0dlbmVzeXNFdmVudCgzLCAnR2VuZXN5cyBTZW5kIFN1cnZleSBGYWlsdXJlJywgcmVzcG9uc2UpO1xuICBpbmNyZWFzZUVycm9yQ291bnQoKTtcbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIFN1Y2Nlc3MgU2VuZCBTdXJ2ZXlcbiAqIEBwYXJhbSB7b2JqZWN0fSByZXNwb25zZSAtIFN1Y2Nlc3MgcmVzcG9uc2VcbiAqIEBleGFtcGxlXG4vLyBzdWNjZXNzIHJlc3BvbnNlXG5cbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gc3VjY2Vzc1NlbmRTdXJ2ZXkocmVzcG9uc2U6IG9iamVjdCk6IGJvb2xlYW4ge1xuICBUZWFsaXVtUHViU3ViLnB1Ymxpc2goR0VORVNZU19TRU5EX1NVUlZFWV9TVUNDRVNTLCByZXNwb25zZSk7XG4gIGxvZ0dlbmVzeXNFdmVudCgxLCAnR2VuZXN5cyBTZW5kIFN1cnZleSBTdWNjZXNzJywgcmVzcG9uc2UpO1xuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogR2VuZXN5cyBTZW5kIFN1cnZleSBSZXF1ZXN0XG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnROYW1lIC0gbmFtZSBvZiBldmVudFxuICogQHBhcmFtIHtzdHJpbmd9IGdlbmVzeXNTZW5kU3VydmV5UGF5bG9hZCAtIFVzZXIgaW5mb3JtYXRpb25cbiAqIEBleGFtcGxlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChldmVudE5hbWU6IHN0cmluZywgZ2VuZXN5c1NlbmRTdXJ2ZXlQYXlsb2FkOiBvYmplY3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkYXRhVG9TZW5kOiB7IF91c2VyZGF0YT86IHN0cmluZ30gPSB7fTtcbiAgICBkYXRhVG9TZW5kLl91c2VyZGF0YSA9IEpTT04uc3RyaW5naWZ5KGdlbmVzeXNTZW5kU3VydmV5UGF5bG9hZCk7XG5cbiAgICAvLyBjb25zdCBhZ2VudExUUyA9IGJhY3RtLlN0b3JlKCdjaGF0JywgeyB0eXBlOiAnY29va2llJyB9KTtcbiAgICBjb25zdCBhZ2VudExUUyA9IGdldENvb2tpZShDT09LSUVfTFRTLk5BTUUpO1xuICAgIGNvbnN0IGludGVyYWN0aW9uX2lkID0gYWdlbnRMVFMuaXhfaWQ7XG5cbiAgICBsb2dHZW5lc3lzRXZlbnQoMSwgJ0NvbWV0ZCBTZW5kIFN1cnZleSBEYXRhJywgZGF0YVRvU2VuZCk7XG4gICAgY29uc3QgY3VycmVudFRMRCA9IGdldEN1cnJlbnREb21haW4oKTtcbiAgICBjb25zdCBkb21haW4gPSBzcGFQYXJhbXMuc2l0ZVBhcmFtcy5kb21haW5zW2N1cnJlbnRUTERdLmdlbmVzeXM7XG4gICAgY29uc3Qgc2VuZFN1cnZleUVuZHBvaW50ID0gR0VORVNZU19VUERBVEVfQ0hBVF9EQVRBX0VORFBPSU5UO1xuICAgIGNvbnN0IGdlbmVzeXNTZW5kU3VydmV5VVJMID0gYCR7ZG9tYWlufSR7c2VuZFN1cnZleUVuZHBvaW50fWA7XG4gICAgY29uc3QgZ2VuZXN5c1N1cnZleVBhcmFtcyA9IGBfdXNlcmRhdGE9JHtkYXRhVG9TZW5kLl91c2VyZGF0YX0mX2ludGVyYWN0aW9uX2lkPSR7aW50ZXJhY3Rpb25faWR9YDtcbiAgICBmZXRjaChnZW5lc3lzU2VuZFN1cnZleVVSTCwge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBnZW5lc3lzU3VydmV5UGFyYW1zLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXG4gICAgICB9LFxuICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJyxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlc3ApID0+IHJlc3AuanNvbigpKVxuICAgICAgLnRoZW4oc3VjY2Vzc1NlbmRTdXJ2ZXkpXG4gICAgICAuY2F0Y2goZXJyb3JTZW5kU3VydmV5KTtcblxuICAgIFRlYWxpdW1QdWJTdWIucHVibGlzaChHRU5FU1lTX1NFTkRfU1VSVkVZX1NVQ0NFU1MsIHt9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChiYWN0bSAmJiBiYWN0bS5wbHVnaW5zICYmIGJhY3RtLnBsdWdpbnMucGl4ZWxUYWcpIGJhY3RtLnBsdWdpbnMucGl4ZWxUYWcuZmlyZVBpeGVsVGFnKGAke1BJWEVMX1RBR19VUkx9P2Vycm9yPSR7ZX1gKTtcbiAgICBlcnJvclNlbmRTdXJ2ZXkoZSk7XG4gIH1cbn1cbiIsIi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovXG4vKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UgKi9cbi8qKiBAbW9kdWxlIGdlbmVzeXMvYWdlbnRJbmNlbnRpdmUgKi9cbmltcG9ydCB7XG4gIFBJWEVMX1RBR19VUkwsXG4gIEdFTkVSSUNfRkFJTFVSRSxcbiAgQ09PS0lFX0xUUyxcbn0gZnJvbSAnLi4vc2l0ZS1wdWItc3ViL3NpdGUtZ2xvYmFscyc7XG5pbXBvcnQge1xuICBpbmNyZWFzZUVycm9yQ291bnQsXG4gIGxvZ0dlbmVzeXNFdmVudCxcbn0gZnJvbSAnLi4vc2l0ZS11dGlsaXRpZXMvdXRpbGl0aWVzJztcblxuaW1wb3J0IHNldENvb2tpZSBmcm9tICcuLi9zaXRlLXV0aWxpdGllcy9jb29raWUtc3RvcmFnZS9zZXQnO1xuaW1wb3J0IHJtQ29va2llIGZyb20gJy4uL3NpdGUtdXRpbGl0aWVzL2Nvb2tpZS1zdG9yYWdlL3JlbW92ZSc7XG5cbmNvbnN0IHNldFF1YWxpZmllZExlYWQgPSAoYWdlbnRJRDogc3RyaW5nLCBpbnRlcmFjdGlvbklEOiBzdHJpbmcpID0+IHtcbiAgbG9nR2VuZXN5c0V2ZW50KDEsICdRdWFsaWZpZWQgTGVhZDogU2V0IEFnZW50IElEJywgeyBhZ2VudElEIH0pO1xuICB0cnkge1xuICAgIHJtQ29va2llKENPT0tJRV9MVFMuTkFNRSk7IC8vIHJlbW92aW5nIGNvb2tpZSBqdXN0IGluIGNhc2VcbiAgICBzZXRDb29raWUoeyAvLyBzZXR0aW5nIExUUyBjb29raWVcbiAgICAgIHNlY3VyZUFnZW50SUQ6IGFnZW50SUQsXG4gICAgICBpeF9pZDogaW50ZXJhY3Rpb25JRCxcbiAgICAgIGlucUNsaWVudE9yZGVyTnVtOiAnJyxcbiAgICAgIGV4cGlyYXRpb246IG5ldyBEYXRlKERhdGUubm93KCkgKyAoQ09PS0lFX0xUUy5FWFBJUkFUSU9OICogNjAgKiAxMDAwKSksXG4gICAgfSwgQ09PS0lFX0xUUyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBsb2dHZW5lc3lzRXZlbnQoMywgJ1NldCBBZ2VudCBJRCBFcnJvcicsIGUpO1xuICAgIGlmIChiYWN0bSAmJiBiYWN0bS5wbHVnaW5zICYmIGJhY3RtLnBsdWdpbnMucGl4ZWxUYWcpIGJhY3RtLnBsdWdpbnMucGl4ZWxUYWcuZmlyZVBpeGVsVGFnKGAke1BJWEVMX1RBR19VUkx9P2Vycm9yPSR7ZX1gKTtcbiAgICBUZWFsaXVtUHViU3ViLnB1Ymxpc2goR0VORVJJQ19GQUlMVVJFLCB7IGV2ZW50OiAnZ2VuZXN5c1NldEFnZW50SUQnLCBlcnJvcjogZSB9KTtcbiAgICBpbmNyZWFzZUVycm9yQ291bnQoKTtcbiAgfVxufVxuLyoqXG4gKiBHZW5lc3lzIFF1YWxpZmllZCBMZWFkXG4gKiBAcGFyYW0ge3N0cmluZ30gYWdlbnRJRCAtIGVuY3J5cHRlZCBOQktJRCBmb3IgdGhlIGFnZW50XG4gKiBAZGVzY3JpcHRpb24gLSBHZW5lc3lzIHNlbmRzIGFuIGVuY3J5cHRlZCBOQktJRCBvbmNlIHRoZSBjaGF0IGhhcyBtYWRlIGEgcXVhbGlmaWVkIGxlYWQuXG4gKiBUaGlzIGZ1bmN0aW9uIHN0b3JlcyB0aGUgZW5jcnlwdGVkIElEIGFzIGEgY29va2llIHNvIGl0IGNhbiBiZSBjb2xsZWN0ZWQgYnkgQUJQQSBvbmNlIGEgc2FsZVxuICogaGFzIG9jY3VycmVkXG4gKlxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZW5lc3lzU2V0QWdlbnRJRChldmVudE5hbWU6IHN0cmluZywgYWdlbnREZXRhaWxzOiB7IGFnZW50SUQ6IHsgVUlEOiBzdHJpbmcsIElYTklEOiBzdHJpbmd9LCBVSUQ6IHN0cmluZywgSVhOSUQ6IHN0cmluZ30pIHtcbiAgY29uc3QgeyBhZ2VudElEIH0gPSBhZ2VudERldGFpbHM7XG4gIC8vIGluIGFjcyB3b3JrZmxvdyBpdCB3aWxsIGNvbWUgYXMgdWlkIG5vdCBhZ2VudElEICh0aGF0cyBiYXUpXG4gIGlmICggIWFnZW50SUQgKSB7XG4gICAgc2V0UXVhbGlmaWVkTGVhZChhZ2VudERldGFpbHMuVUlELCBhZ2VudERldGFpbHMuSVhOSUQpXG4gIH0gZWxzZSB7XG4gICAgc2V0UXVhbGlmaWVkTGVhZChhZ2VudElELlVJRCwgYWdlbnRJRC5JWE5JRClcbiAgfVxufVxuIiwiLyogZXNsaW50LWRpc2FibGUgY2FtZWxjYXNlICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlZiAqL1xuLyoqIEBtb2R1bGUgc2l0ZS1hcGkvc3VydmV5ICovXG5pbXBvcnQge1xuICBQUkVDSEFUX1NVUlZFWV9HRVRfUkVTUE9OU0VfU1VDQ0VTUyxcbiAgUFJFQ0hBVF9TVVJWRVlfR0VUX1JFU1BPTlNFX0ZBSUxVUkUsXG4gIFNVUlZFWV9HRVRfUkVTUE9OU0VfU1VDQ0VTUyxcbiAgU1VSVkVZX0dFVF9SRVNQT05TRV9GQUlMVVJFLFxuICBQSVhFTF9UQUdfVVJMLFxufSBmcm9tICcuLi9zaXRlLXB1Yi1zdWIvc2l0ZS1nbG9iYWxzJztcbmltcG9ydCB7XG4gIGluY3JlYXNlRXJyb3JDb3VudCxcbiAgbG9nR2VuZXN5c0V2ZW50LFxufSBmcm9tICcuLi9zaXRlLXV0aWxpdGllcy91dGlsaXRpZXMnO1xuXG4vKipcbiAqIFN1cnZleSBHZXQgUmVzcG9uc2UgLSBTdWNjZXNzXG4gKiBAZGVzYyBVcG9uIHN1Y2Nlc3MsIGZ1bmN0aW9uIGRlbGl2ZXJzIGEgUHViL1N1YiBldmVudCB0byBzZW5kIHN1cnZleSBpbmZvcm1hdGlvbiBiYWNrIHRvIFVJXG4gKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxuICovXG5leHBvcnQgZnVuY3Rpb24gc3VjY2Vzc1N1cnZleUdldFJlc3BvbnNlKHN1cnZleVJlc3BvbnNlOiBvYmplY3QsIGlzUHJlY2hhdDogYm9vbGVhbik6IGJvb2xlYW4ge1xuICBjb25zdCBldmVudE5hbWUgPSBpc1ByZWNoYXQgPyBQUkVDSEFUX1NVUlZFWV9HRVRfUkVTUE9OU0VfU1VDQ0VTUyA6IFNVUlZFWV9HRVRfUkVTUE9OU0VfU1VDQ0VTUztcbiAgVGVhbGl1bVB1YlN1Yi5wdWJsaXNoKGV2ZW50TmFtZSwgc3VydmV5UmVzcG9uc2UpO1xuICBsb2dHZW5lc3lzRXZlbnQoMSwgJ0dlbmVzeXMgU3VydmV5IFJlc3BvbnNlIFN1Y2Nlc3MnLCBzdXJ2ZXlSZXNwb25zZSk7XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBTdXJ2ZXkgR2V0IFJlc3BvbnNlIC0gRmFpbHVyZVxuICogQGRlc2MgVXBvbiBmYWlsdXJlLCBmdW5jdGlvbiBkZWxpdmVycyBhIFB1Yi9TdWIgZXZlbnQgdG8gc2VuZCBlcnJvciBpbmZvcm1hdGlvbiBiYWNrIHRvIFVJXG4gKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZmFpbHVyZVN1cnZleUdldFJlc3BvbnNlKHN1cnZleVJlc3BvbnNlOiBvYmplY3QgfCB1bmtub3duLCBpc1ByZWNoYXQ/OiBib29sZWFuKTogYm9vbGVhbiB7XG4gIGNvbnN0IGV2ZW50TmFtZSA9IGlzUHJlY2hhdCA/IFBSRUNIQVRfU1VSVkVZX0dFVF9SRVNQT05TRV9GQUlMVVJFIDogU1VSVkVZX0dFVF9SRVNQT05TRV9GQUlMVVJFO1xuICBUZWFsaXVtUHViU3ViLnB1Ymxpc2goZXZlbnROYW1lLCBzdXJ2ZXlSZXNwb25zZSk7XG4gIGlmIChiYWN0bSAmJiBiYWN0bS5wbHVnaW5zICYmIGJhY3RtLnBsdWdpbnMucGl4ZWxUYWcpIGJhY3RtLnBsdWdpbnMucGl4ZWxUYWcuZmlyZVBpeGVsVGFnKGAke1BJWEVMX1RBR19VUkx9P2Vycm9yPSR7c3VydmV5UmVzcG9uc2V9YCk7XG4gIGxvZ0dlbmVzeXNFdmVudCgzLCAnU3VydmV5IFJlc3BvbnNlIEZhaWx1cmUnLCB7IGV2ZW50TmFtZSwgc3VydmV5UmVzcG9uc2UgfSk7XG4gIGluY3JlYXNlRXJyb3JDb3VudCgpO1xuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogU3VydmV5IEdldCBSZXNwb25zZVxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZVxuICogQHBhcmFtIHtvYmplY3R9IGNvbmZpZ3VyYXRpb25cbiAqIEBkZXNjIFRoZSBmb2xsb3dpbmcgbWV0aG9kIHdpbGwgZ3JhYiB0aGUgc3VydmV5IGluZm9ybWF0aW9uIHNlbnQgZnJvbVxuICogVUkgYW5kIGRlbGl2ZXIgdGhlIHJlc3BvbnNlIGZvcm0gYmFjayB0byB0aGUgVUlcbiAqIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChldmVudE5hbWU6IHN0cmluZywgY29uZmlndXJhdGlvbjogeyBwYXlsb2FkOiBvYmplY3QsIGVudlN1cnZleVVSTDogc3RyaW5nLCBjaGF0U3VydmV5RW5kcG9pbnQ6IHN0cmluZywgaXNQcmVjaGF0OiBib29sZWFufSkge1xuICB0cnkge1xuICAgIGNvbnN0IHtcbiAgICAgIHBheWxvYWQsXG4gICAgICBlbnZTdXJ2ZXlVUkwsXG4gICAgICBjaGF0U3VydmV5RW5kcG9pbnQsXG4gICAgICBpc1ByZWNoYXQsXG4gICAgfSA9IGNvbmZpZ3VyYXRpb247XG4gICAgY29uc3QgZ2VuZXN5c1N1cnZleURldGFpbHMgPSBKU09OLnN0cmluZ2lmeShwYXlsb2FkKTtcbiAgICBjb25zdCBnZW5lc3lzU3VydmV5RW5kcG9pbnQgPSBgJHtlbnZTdXJ2ZXlVUkx9JHtjaGF0U3VydmV5RW5kcG9pbnR9YDtcbiAgICBsb2dHZW5lc3lzRXZlbnQoMSwgJ0dlbmVzeXMgU3VydmV5IENvbmZpZ3VyYXRpb24nLCBjb25maWd1cmF0aW9uKTtcbiAgICBmZXRjaChnZW5lc3lzU3VydmV5RW5kcG9pbnQsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogZ2VuZXN5c1N1cnZleURldGFpbHMsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJyxcbiAgICB9KVxuICAgICAgLnRoZW4ocmVzcCA9PiByZXNwLmpzb24oKSlcbiAgICAgIC50aGVuKHJlc3AgPT4gc3VjY2Vzc1N1cnZleUdldFJlc3BvbnNlKHJlc3AsIGlzUHJlY2hhdCkpXG4gICAgICAuY2F0Y2gocmVzcCA9PiBmYWlsdXJlU3VydmV5R2V0UmVzcG9uc2UocmVzcCwgaXNQcmVjaGF0KSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgZmFpbHVyZVN1cnZleUdldFJlc3BvbnNlKGVycm9yKTtcbiAgfVxufVxuIiwiLyogZXNsaW50LWRpc2FibGUgY2FtZWxjYXNlICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlZiAqL1xuLyoqIEBtb2R1bGUgYXBpLXJlcXVlc3RzL3ZhbGlkYXRlSXBBZGRyZXNzICovXG5pbXBvcnQgeyBzZW5kUG9zdE1lc3NhZ2UgfSBmcm9tIFwiLi4vbWVzc2FnaW5nL3Bvc3QtbWVzc2FnZXNcIjtcbmltcG9ydCB7XG4gIEdFTkVTWVNfVkFMSURBVEVfSVBfQUREUkVTU19GQUlMVVJFLFxuICBHRU5FU1lTX1ZBTElEQVRFX0lQX0FERFJFU1NfU1VDQ0VTUyxcbiAgQ09PS0lFLFxuICBQSVhFTF9UQUdfVVJMLFxuICBNQVhfQVRURU1QVFMsXG4gIENBTkNFTF9XSURHRVRfU1VCUyxcbiAgTUxfU0lURV9JRFMsXG4gIEFIX0NPT0tJRV9TRVQsXG59IGZyb20gXCIuLi9zaXRlLXB1Yi1zdWIvc2l0ZS1nbG9iYWxzXCI7XG5pbXBvcnQgeyBpc01vYmlsZUNoYXQgfSBmcm9tIFwiLi4vc2l0ZS11dGlsaXRpZXMvaXNNb2JpbGVDaGF0XCI7XG5pbXBvcnQge1xuICBnZXRDdXJyZW50RG9tYWluLFxuICBpbmNyZWFzZUVycm9yQ291bnQsXG4gIGxvZ0dlbmVzeXNFdmVudCxcbiAgcHVibGlzaFRlYWxpdW0sXG59IGZyb20gXCIuLi9zaXRlLXV0aWxpdGllcy91dGlsaXRpZXNcIjtcbmltcG9ydCBtb2JpbGVBQ1NMb2dnZXJTZXJ2aWNlIGZyb20gXCIuLi9zaXRlLXV0aWxpdGllcy91dGlsaXRpZXMvbG9nZ2VyXCI7XG5cbmZ1bmN0aW9uIHNldEFoQ29va2llKHZhbHVlOiBzdHJpbmcpIHtcbiAgY29uc3QgaXNMb2NhbCA9IHdpbmRvdy5zcGFydGEuZW52ID09PSBcImxvY2FsXCI7XG4gIGNvbnN0IGV4cGlyeSA9IGA7IGV4cGlyZXM9JHtuZXcgRGF0ZShcbiAgICBEYXRlLm5vdygpICsgMzAgKiA2MCAqIDEwMDBcbiAgKS50b1VUQ1N0cmluZygpfWA7XG4gIGNvbnN0IGRvbWFpbiA9IGlzTG9jYWwgPyBcIlwiIDogYDsgZG9tYWluPSR7Z2V0Q3VycmVudERvbWFpbigpfWA7XG4gIGNvbnN0IHNlY3VyZSA9IENPT0tJRS5TRUNVUkUgJiYgIWlzTG9jYWwgPyBcIjsgc2VjdXJlXCIgOiBcIlwiO1xuICBjb25zdCBzYW1lU2l0ZSA9IENPT0tJRS5TRUNVUkUgJiYgIWlzTG9jYWwgPyBcIjsgc2FtZVNpdGU9bm9uZVwiIDogXCJcIjtcbiAgY29uc3QgY29va2llID0gYGFoX3Rva2VuPSR7dmFsdWV9JHtleHBpcnl9OyBwYXRoPSR7Q09PS0lFLlBBVEh9JHtkb21haW59JHtzZWN1cmV9JHtzYW1lU2l0ZX1gO1xuXG4gIHdpbmRvdy5kb2N1bWVudC5jb29raWUgPSBjb29raWU7XG4gIHNlbmRQb3N0TWVzc2FnZShBSF9DT09LSUVfU0VUKTtcbn1cblxuLyoqXG4gKiBFcnJvciBlcnJvclZhbGlkYXRlSVBBZGRyZXNzXG4gKiBAcGFyYW0ge29iamVjdH0gcmVzcG9uc2UgLSBFcnJvciByZXNwb25zZVxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlcnJvclZhbGlkYXRlSVBBZGRyZXNzKHJlc3BvbnNlOiBvYmplY3QgfCB1bmtub3duKTogYm9vbGVhbiB7XG4gIGNvbnN0IGFjc0Zsb3cgPSBpc01vYmlsZUNoYXQoKTtcbiAgVGVhbGl1bVB1YlN1Yi5wdWJsaXNoKEdFTkVTWVNfVkFMSURBVEVfSVBfQUREUkVTU19GQUlMVVJFLCByZXNwb25zZSk7XG4gIGlmIChiYWN0bSAmJiBiYWN0bS5wbHVnaW5zICYmIGJhY3RtLnBsdWdpbnMucGl4ZWxUYWcpXG4gICAgYmFjdG0ucGx1Z2lucy5waXhlbFRhZy5maXJlUGl4ZWxUYWcoYCR7UElYRUxfVEFHX1VSTH0/ZXJyb3I9JHtyZXNwb25zZX1gKTtcbiAgbG9nR2VuZXN5c0V2ZW50KDMsIFwiR2VuZXN5cyBWYWxpZGF0ZSBJUCBBZGRyZXNzIEZhaWx1cmVcIiwgcmVzcG9uc2UpO1xuICBpZiAoYWNzRmxvdykge1xuICAgIG1vYmlsZUFDU0xvZ2dlclNlcnZpY2UoXCJ2YWxpZGF0ZUlwQWRkcmVzc1wiLCByZXNwb25zZSk7XG4gIH1cbiAgaW5jcmVhc2VFcnJvckNvdW50KCk7XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBTdWNjZXNzIGNhbGxpbmcgdmFsaWRhdGVJcEFkZHJlc3MgZW5kcG9pbnRcbiAqIFdpbGwgbWF5YmUgaGF2ZSB0byBkbyBzb21lIG1hbmlwdWxhdGlvbiBpZiBqd3QgdG9rZW4gY29tZXMgdmlhIHBheWxvYWRcbiAqIEBwYXJhbSB7b2JqZWN0fSByZXNwb25zZSAtIHByZSBjb25uZWN0IHJlc3BvbnNlXG4gKiBAZXhhbXBsZVxuLy8gc3VjY2VzcyByZXNwb25zZVxue1xuICAgIHN0YXR1czogXCJTVUNDRVNTXCIsXG4gICAgYWhfdG9rZW46IFwic29tZUpXVFRva2VuVmFsdWVcIlxufVxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdWNjZXNzVmFsaWRhdGVJUEFkZHJlc3Moe1xuICByZXNwb25zZSxcbiAgbmV4dEZ1bmMsXG59OiB7XG4gIHJlc3BvbnNlOiB7IGNfbG9jOiBzdHJpbmc7IGFoX3Rva2VuOiBzdHJpbmcgfTtcbiAgbmV4dEZ1bmM6IHsgZXZlbnROYW1lOiBzdHJpbmc7IHBheWxvYWQ6IG9iamVjdCB9O1xufSk6IGJvb2xlYW4ge1xuICBjb25zdCBzZWdtZW50cyA9IHJlc3BvbnNlLmNfbG9jID8gcmVzcG9uc2UuY19sb2Muc3BsaXQoXCI6XCIpIDogdHJ1ZTtcbiAgY29uc3QgY2hhdF9sb2MgPVxuICAgIHNlZ21lbnRzICYmIHNlZ21lbnRzWzFdID8gc2VnbWVudHNbMV0udG9Mb3dlckNhc2UoKSA9PT0gXCJ1c1wiIDogdHJ1ZTtcbiAgaWYgKFxuICAgIGJhY3RtICYmXG4gICAgYmFjdG0uZGRvICYmXG4gICAgTUxfU0lURV9JRFMuaW5jbHVkZXMoYmFjdG0uZGRvLmdldChcInBhZ2UuYXR0cmlidXRlcy5jaGF0LlNJVEVfSURcIikpICYmXG4gICAgY2hhdF9sb2MgPT09IGZhbHNlXG4gICkge1xuICAgIFRlYWxpdW1QdWJTdWIucHVibGlzaChDQU5DRUxfV0lER0VUX1NVQlMpO1xuICB9IGVsc2Uge1xuICAgIFRlYWxpdW1QdWJTdWIucHVibGlzaChHRU5FU1lTX1ZBTElEQVRFX0lQX0FERFJFU1NfU1VDQ0VTUywgcmVzcG9uc2UpO1xuXG4gICAgbG9nR2VuZXN5c0V2ZW50KDEsIFwiR2VuZXN5cyBWYWxpZGF0ZSBJUCBBZGRyZXNzIFN1Y2Nlc3NcIiwgcmVzcG9uc2UpO1xuXG4gICAgLy8gU2V0IHRoZSBhaF90b2tlbiBjb29raWVcbiAgICBzZXRBaENvb2tpZShyZXNwb25zZS5haF90b2tlbik7XG4gICAgaWYgKG5leHRGdW5jKSBwdWJsaXNoVGVhbGl1bShuZXh0RnVuYy5ldmVudE5hbWUsIG5leHRGdW5jLnBheWxvYWQpO1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIE1ha2luZyBwcmUgY29ubmVjdHMgcmVxdWVzdCB0byBnZW5lc3lzXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnROYW1lIC0gbmFtZSBvZiBldmVudFxuICogQHBhcmFtIHtvYmplY3R9IGNvbmZpZ3VyYXRpb25cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKFxuICBldmVudE5hbWU6IHN0cmluZyxcbiAgY29uZmlndXJhdGlvbjogeyBvZ3dVcmw6IHN0cmluZyB9LFxuICBuZXh0RnVuYzogeyBldmVudE5hbWU6IHN0cmluZzsgcGF5bG9hZDogb2JqZWN0IH1cbikge1xuICB0cnkge1xuICAgIGNvbnN0IHsgb2d3VXJsIH0gPSBjb25maWd1cmF0aW9uO1xuICAgIGNvbnN0IGN1cnJlbnRUTEQgPSBnZXRDdXJyZW50RG9tYWluKCk7XG4gICAgY29uc3QgZG9tYWluID0gc3BhUGFyYW1zLnNpdGVQYXJhbXMuZG9tYWluc1tjdXJyZW50VExEXS5vZ3dFbmRwb2ludDtcbiAgICAvLyBpZiAod2luZG93LmJhY3RtX2VudlNlbGVjdG9yICE9PSBcInByb2RcIikge1xuICAgIC8vICAgY29uc29sZS5sb2coXG4gICAgLy8gICAgIFwiUmVjZWl2ZWQgdmFsaWRhdGVJUEFkZHJlc3MgRW5kcG9pbnQgZnJvbSBjaGF0IHNpdGUgY29uZmlnOiBcIixcbiAgICAvLyAgICAgZG9tYWluXG4gICAgLy8gICApO1xuICAgIC8vIH1cbiAgICBjb25zdCBnZW5lc3lzT0dXVXJsID0gYCR7ZG9tYWlufSR7b2d3VXJsfWA7XG4gICAgY29uc3Qgb2d3UGF5bG9hZCA9IHtcbiAgICAgIHVzZUNhc2U6IFwiZGVmYXVsdFwiLFxuICAgICAgcHJvY2Vzc1J1bGVzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiBcIkF1dGhlbnRpY2F0aW9uQ29udGV4dFwiLFxuICAgICAgICAgIHZhbHVlOiBcIkxvY2F0aW9uTG9va1VwXCIsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH07XG5cbiAgICBjb25zdCBmZXRjaF93aXRoX3JldHJ5OiBhbnkgPSAodXJsOiBzdHJpbmcsIG9wdGlvbnM6IG9iamVjdCwgbjogbnVtYmVyKSA9PlxuICAgICAgZmV0Y2godXJsLCBvcHRpb25zKS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgaWYgKG4gPiAxKSB7XG4gICAgICAgICAgbG9nR2VuZXN5c0V2ZW50KFxuICAgICAgICAgICAgMyxcbiAgICAgICAgICAgIFwiR2VuZXN5cyBWYWxpZGF0ZSBJUCBBZGRyZXNzIEZldGNoIEZhaWxlZFwiLFxuICAgICAgICAgICAgXCJDbGVhcmluZyBDb29raWUgJiBUcnlpbmcgQWdhaW5cIlxuICAgICAgICAgICk7XG4gICAgICAgICAgc2V0QWhDb29raWUoXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG4gPT09IDEpIHRocm93IGVycm9yO1xuICAgICAgICByZXR1cm4gZmV0Y2hfd2l0aF9yZXRyeSh1cmwsIG9wdGlvbnMsIG4gLSAxKTtcbiAgICAgIH0pO1xuICAgIGxvZ0dlbmVzeXNFdmVudCgxLCBcIkdlbmVzeXMgVmFsaWRhdGUgSVAgQWRkcmVzcyBDb25maWd1cmF0aW9uXCIsIHtcbiAgICAgIC4uLmNvbmZpZ3VyYXRpb24sXG4gICAgICBkb21haW4sXG4gICAgfSk7XG5cbiAgICBmZXRjaF93aXRoX3JldHJ5KFxuICAgICAgZ2VuZXN5c09HV1VybCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkob2d3UGF5bG9hZCksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgfSxcbiAgICAgICAgY3JlZGVudGlhbHM6IFwiaW5jbHVkZVwiLFxuICAgICAgfSxcbiAgICAgIE1BWF9BVFRFTVBUU1xuICAgIClcbiAgICAgIC50aGVuKChyZXNwOiB7IGpzb246ICgpID0+IGFueSB9KSA9PiByZXNwLmpzb24oKSlcbiAgICAgIC50aGVuKChyZXNwOiBhbnkpID0+XG4gICAgICAgIHN1Y2Nlc3NWYWxpZGF0ZUlQQWRkcmVzcyh7IHJlc3BvbnNlOiByZXNwLCBuZXh0RnVuYyB9KVxuICAgICAgKVxuICAgICAgLmNhdGNoKChlcnJvcjogdW5rbm93bikgPT4ge1xuICAgICAgICBlcnJvclZhbGlkYXRlSVBBZGRyZXNzKGVycm9yKTtcbiAgICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGVycm9yVmFsaWRhdGVJUEFkZHJlc3MoZXJyb3IpO1xuICB9XG59XG4iLCIvKiogQG1vZHVsZSBkb2N1bWVudC9hZGRQdWJTdWIgKi9cbmltcG9ydCBwdWJTdWIgZnJvbSAnLi9wdWItc3ViJztcbmltcG9ydCB7IGxvZ0dlbmVzeXNFdmVudCB9IGZyb20gJy4uL3NpdGUtdXRpbGl0aWVzL3V0aWxpdGllcyc7XG5cbi8qKlxuICogSW4gQm9ybmVvIHdlIG5lZWQgdG8gYWRkIHRoZSBwdWIgc2NyaXB0IGZpcnN0XG4gKiBXaWxsIGFwcGVuZCBuZXdseSBjcmVhdGVkIGRpdiB0byBkb2N1bWVudFxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICgpOiBib29sZWFuIHtcbiAgcHViU3ViKCk7XG4gIGxvZ0dlbmVzeXNFdmVudCgxLCAnUHViU3ViJywgJ2FkZGluZyBUZWFsaXVtUHViU3ViJyk7XG4gIHJldHVybiBmYWxzZTtcbn1cbiIsIi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovXG4vKiogQG1vZHVsZSBwdWItc3ViL2V2ZW50cyAqL1xuaW1wb3J0IHtcbiAgQ09NRVREX05PVElGWV9TVE9QX1RZUElORyxcbiAgQ09NRVREX05PVElGWV9SRUFEX1JFQ0VJUFQsXG4gIENPTUVURF9OT1RJRllfU1RBUlRfVFlQSU5HLFxuICBDT01FVERfUkVRVUVTVF9VUERBVEUsXG4gIENPTUVURF9SRVFVRVNUX0NIQU5ORUwsXG4gIENPTUVURF9SRVFVRVNUX0hBTkRTSEFLRSxcbiAgQ09NRVREX1JFUVVFU1RfRElTQ09OTkVDVCxcbiAgQ09NRVREX1JFUVVFU1RfU0VORF9NRVNTQUdFLFxuICBHRU5FU1lTX1JFUVVFU1RfTklDS05BTUVfVVBEQVRFLFxuICBDT01FVERfUkVRVUVTVF9OT1RJRklDQVRJT04sXG4gIENPTUVURF9SRVFVRVNUX0NIQU5ORUxfU1VCU0NSSVBUSU9OLFxuICBDT01FVERfUkVRVUVTVF9TQUxFX09DQ1VSUkVELFxuICBHRU5FU1lTX1JFUVVFU1RfUE9MTElORyxcbiAgR0VORVNZU19SRVFVRVNUX1BSRV9DT05ORUNULFxuICBHRU5FU1lTX1NFTkRfU1VSVkVZLFxuICBHRU5FU1lTX0NPQlJPV1NFX0NPTkZJR1VSQVRJT04sXG4gIEdFTkVTWVNfU0VUX0FHRU5UX0lELFxuICBHRU5FU1lTX1ZBTElEQVRFX0lQX0FERFJFU1MsXG4gIENBTkNFTF9XSURHRVRfU1VCUyxcbiAgU1VSVkVZX0dFVF9SRVNQT05TRSxcbiAgR0VORVNZU19SRVFVRVNUX05BVElWRV9DSEFULFxuICBHRU5FU1lTX1JFUVVFU1RfVENfVVBEQVRFLFxuICBQUkVfQ0hBVF9TVVJWRVksXG59IGZyb20gJy4vc2l0ZS1nbG9iYWxzJztcblxuaW1wb3J0IGNvbWV0ZFVwZGF0ZSBmcm9tICcuLi9tZXNzYWdpbmcvdXBkYXRlJztcbmltcG9ydCBjb21ldGRUeXBpbmcgZnJvbSAnLi4vbWVzc2FnaW5nL3R5cGluZyc7XG5pbXBvcnQgY29tZXRkSGFuZHNoYWtlIGZyb20gJy4uL21lc3NhZ2luZy9oYW5kc2hha2UnO1xuaW1wb3J0IGNvbWV0ZERpc2Nvbm5lY3QgZnJvbSAnLi4vbWVzc2FnaW5nL2Rpc2Nvbm5lY3QnO1xuaW1wb3J0IGNvbWV0ZE5pY2tuYW1lVXBkYXRlIGZyb20gJy4uL21lc3NhZ2luZy9uaWNrbmFtZS11cGRhdGUnO1xuaW1wb3J0IGNvbWV0ZE5vdGlmaWNhdGlvbnMgZnJvbSAnLi4vbWVzc2FnaW5nL25vdGlmaWNhdGlvbic7XG5pbXBvcnQgY29tZXRkU2FsZU9jY3VycmVkIGZyb20gJy4uL3NhbGVzL3NhbGUtZXZlbnQnO1xuaW1wb3J0IHtjb21ldGRTZW5kTWVzc2FnZSwgY29tZXRkUmVxdWVzdENoYW5uZWwsIGNvbWV0ZFN1YnNjcmliZUNoYW5uZWx9IGZyb20gJy4uL21lc3NhZ2luZy9jaGFubmVsJztcbmltcG9ydCBnZW5lc3lzU2V0QWdlbnRJRCBmcm9tICcuLi9zaXRlLWFwaS9zZXQtYWdlbnQtaWQnO1xuaW1wb3J0IGdlbmVzeXNTZW5kU3VydmV5IGZyb20gJy4uL3NpdGUtYXBpL3NlbmQtc3VydmV5JztcbmltcG9ydCBnZW5lc3lzU3VydmV5IGZyb20gJy4uL3NpdGUtYXBpL3N1cnZleSc7XG5pbXBvcnQgZ2VuZXN5c0NvYnJvd3NlIGZyb20gJy4uL3NpdGUtYXBpL2NvLWJyb3dzZSc7XG5pbXBvcnQgZ2VuZXN5c1ByZUNvbm5lY3QgZnJvbSAnLi4vc2l0ZS1hcGkvcHJlLWNvbm5lY3QnO1xuaW1wb3J0IGdlbmVzeXNQb2xsaW5nIGZyb20gJy4uL3NpdGUtYXBpL3BvbGxpbmcnO1xuaW1wb3J0IGdlbmVzeXNWYWxpZGF0ZSBmcm9tICcuLi9zaXRlLWFwaS92YWxpZGF0ZS1pcC1hZGRyZXNzJztcbmltcG9ydCBuYXRpdmVDaGF0VXBkYXRlIGZyb20gJy4uL3NpdGUtYXBpL25hdGl2ZS1jaGF0LXVwZGF0ZSc7XG5pbXBvcnQge3Bvc3RUb0NhbmNlbFN1YnNPbldpZGdldCwgc2VuZFBvc3RNZXNzYWdlfSBmcm9tICcuLi9tZXNzYWdpbmcvcG9zdC1tZXNzYWdlcyc7XG5pbXBvcnQge2xvZ0dlbmVzeXNFdmVudH0gZnJvbSAnLi4vc2l0ZS11dGlsaXRpZXMvdXRpbGl0aWVzJztcblxuLyoqXG4gKiBJbml0aWFsaXppbmcgc3Vic2NyaXB0aW9uc1xuICogQGRlc2MgSW5pdGlhbGl6ZSBzdWJzY3JpcHRpb25zLiBUaGVzZSBzdWJzY3JpcHRpb25zIHdpbGwgd2FpdCBvbiBwdWJsaXNoZXMgZnJvbSB0aGUgd2lkZ2V0XG4gKiBAZXhhbXBsZVxuIFRlYWxpdW1QdWJTdWIuc3Vic2NyaWJlKENPTUVURF9SRVFVRVNUX0hBTkRTSEFLRSwgY29tZXRkSGFuZHNoYWtlKTtcbiBUZWFsaXVtUHViU3ViLnN1YnNjcmliZShDT01FVERfUkVRVUVTVF9ESVNDT05ORUNULCBjb21ldGREaXNjb25uZWN0KTtcblxuIFRlYWxpdW1QdWJTdWIuc3Vic2NyaWJlKENPTUVURF9OT1RJRllfU1RPUF9UWVBJTkcsIGNvbWV0ZFR5cGluZyk7XG4gVGVhbGl1bVB1YlN1Yi5zdWJzY3JpYmUoQ09NRVREX05PVElGWV9TVEFSVF9UWVBJTkcsIGNvbWV0ZFR5cGluZyk7XG4gVGVhbGl1bVB1YlN1Yi5zdWJzY3JpYmUoQ09NRVREX05PVElGWV9SRUFEX1JFQ0VJUFQsIGNvbWV0ZFR5cGluZyk7XG5cbiBUZWFsaXVtUHViU3ViLnN1YnNjcmliZShDT01FVERfUkVRVUVTVF9DSEFOTkVMLCBjb21ldGRSZXF1ZXN0Q2hhbm5lbCk7XG4gVGVhbGl1bVB1YlN1Yi5zdWJzY3JpYmUoQ09NRVREX1JFUVVFU1RfU0VORF9NRVNTQUdFLCBjb21ldGRTZW5kTWVzc2FnZSk7XG4gVGVhbGl1bVB1YlN1Yi5zdWJzY3JpYmUoQ09NRVREX1JFUVVFU1RfQ0hBTk5FTF9TVUJTQ1JJUFRJT04sIGNvbWV0ZFN1YnNjcmliZUNoYW5uZWwpO1xuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICgpIHtcblxuICBUZWFsaXVtUHViU3ViLnN1YnNjcmliZShHRU5FU1lTX1JFUVVFU1RfTkFUSVZFX0NIQVQsICh0aXRsZTogc3RyaW5nLCBkYXRhOiB7IENIQVRfSUQ6IHN0cmluZywgY3VycmVudFdlYlBhZ2U6IHN0cmluZyB9KSA9PiB7IFxuICAgIG5hdGl2ZUNoYXRVcGRhdGUodGl0bGUsIGRhdGEpIFxuICB9KTtcbiAgVGVhbGl1bVB1YlN1Yi5zdWJzY3JpYmUoQ09NRVREX1JFUVVFU1RfVVBEQVRFLCBjb21ldGRVcGRhdGUpO1xuICBUZWFsaXVtUHViU3ViLnN1YnNjcmliZShHRU5FU1lTX1JFUVVFU1RfTklDS05BTUVfVVBEQVRFLCBjb21ldGROaWNrbmFtZVVwZGF0ZSk7XG4gIFRlYWxpdW1QdWJTdWIuc3Vic2NyaWJlKENPTUVURF9OT1RJRllfU1RPUF9UWVBJTkcsIGNvbWV0ZFR5cGluZyk7XG4gIFRlYWxpdW1QdWJTdWIuc3Vic2NyaWJlKENPTUVURF9OT1RJRllfU1RBUlRfVFlQSU5HLCBjb21ldGRUeXBpbmcpO1xuICBUZWFsaXVtUHViU3ViLnN1YnNjcmliZShDT01FVERfTk9USUZZX1JFQURfUkVDRUlQVCwgY29tZXRkVHlwaW5nKTtcbiAgVGVhbGl1bVB1YlN1Yi5zdWJzY3JpYmUoQ09NRVREX1JFUVVFU1RfSEFORFNIQUtFLCBjb21ldGRIYW5kc2hha2UpO1xuICBUZWFsaXVtUHViU3ViLnN1YnNjcmliZShDT01FVERfUkVRVUVTVF9ESVNDT05ORUNULCBjb21ldGREaXNjb25uZWN0KTtcbiAgVGVhbGl1bVB1YlN1Yi5zdWJzY3JpYmUoQ09NRVREX1JFUVVFU1RfQ0hBTk5FTCwgY29tZXRkUmVxdWVzdENoYW5uZWwpO1xuICBUZWFsaXVtUHViU3ViLnN1YnNjcmliZShDT01FVERfUkVRVUVTVF9TRU5EX01FU1NBR0UsIGNvbWV0ZFNlbmRNZXNzYWdlKTtcbiAgVGVhbGl1bVB1YlN1Yi5zdWJzY3JpYmUoQ09NRVREX1JFUVVFU1RfTk9USUZJQ0FUSU9OLCBjb21ldGROb3RpZmljYXRpb25zKTtcbiAgVGVhbGl1bVB1YlN1Yi5zdWJzY3JpYmUoQ09NRVREX1JFUVVFU1RfQ0hBTk5FTF9TVUJTQ1JJUFRJT04sIGNvbWV0ZFN1YnNjcmliZUNoYW5uZWwpO1xuICBUZWFsaXVtUHViU3ViLnN1YnNjcmliZShDT01FVERfUkVRVUVTVF9TQUxFX09DQ1VSUkVELCBjb21ldGRTYWxlT2NjdXJyZWQpO1xuICBUZWFsaXVtUHViU3ViLnN1YnNjcmliZShHRU5FU1lTX1JFUVVFU1RfUE9MTElORywgZ2VuZXN5c1BvbGxpbmcpO1xuICBUZWFsaXVtUHViU3ViLnN1YnNjcmliZShHRU5FU1lTX1NFVF9BR0VOVF9JRCwgZ2VuZXN5c1NldEFnZW50SUQpO1xuICBUZWFsaXVtUHViU3ViLnN1YnNjcmliZShTVVJWRVlfR0VUX1JFU1BPTlNFLCBnZW5lc3lzU3VydmV5KTtcbiAgVGVhbGl1bVB1YlN1Yi5zdWJzY3JpYmUoR0VORVNZU19DT0JST1dTRV9DT05GSUdVUkFUSU9OLCBnZW5lc3lzQ29icm93c2UpO1xuICBUZWFsaXVtUHViU3ViLnN1YnNjcmliZShHRU5FU1lTX1JFUVVFU1RfUFJFX0NPTk5FQ1QsIGdlbmVzeXNQcmVDb25uZWN0KTtcbiAgVGVhbGl1bVB1YlN1Yi5zdWJzY3JpYmUoR0VORVNZU19TRU5EX1NVUlZFWSwgZ2VuZXN5c1NlbmRTdXJ2ZXkpO1xuICBUZWFsaXVtUHViU3ViLnN1YnNjcmliZShHRU5FU1lTX1ZBTElEQVRFX0lQX0FERFJFU1MsIGdlbmVzeXNWYWxpZGF0ZSk7XG4gIFRlYWxpdW1QdWJTdWIuc3Vic2NyaWJlKENBTkNFTF9XSURHRVRfU1VCUywgcG9zdFRvQ2FuY2VsU3Vic09uV2lkZ2V0KTtcbiAgVGVhbGl1bVB1YlN1Yi5zdWJzY3JpYmUoUFJFX0NIQVRfU1VSVkVZLCAodGl0bGU6IHN0cmluZywgZGF0YTphbnkgKSA9PiBzZW5kUG9zdE1lc3NhZ2UoZGF0YSkpO1xuICBsb2dHZW5lc3lzRXZlbnQoMSwgJ1RlYWxpdW1QdWJTdWIgU3Vic2NyaWJpbmcnLCAnU3Vic2NyaWJpbmcgQWxsIFRlYWxpdW0gRXZlbnRzJyk7XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuIiwiLyogZXNsaW50LWRpc2FibGUgKi9cblxuXG4vKipcbiAqIENvcHlyaWdodCAoYykgMjAxMCwyMDExLDIwMTIsMjAxMywyMDE0IE1vcmdhbiBSb2RlcmljayBodHRwOi8vcm9kZXJpY2suZGtcbiAqIExpY2Vuc2U6IE1JVCAtIGh0dHA6Ly9tcmducmRyY2subWl0LWxpY2Vuc2Uub3JnXG4gKlxuICogaHR0cHM6Ly9naXRodWIuY29tL21yb2Rlcmljay9QdWJTdWJKU1xuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgUHViU3ViOiBhbnkgPSB7fTtcblxuICAgIHZhciBtZXNzYWdlcyA9IHt9LFxuICAgICAgICBsYXN0VWlkID0gLTE7XG5cbiAgICBmdW5jdGlvbiBoYXNLZXlzKG9iajogeyBoYXNPd25Qcm9wZXJ0eTogKGFyZzA6IHN0cmluZykgPT4gYW55OyB9KXtcbiAgICAgICAgdmFyIGtleTtcblxuICAgICAgICBmb3IgKGtleSBpbiBvYmope1xuICAgICAgICAgICAgaWYgKCBvYmouaGFzT3duUHJvcGVydHkoa2V5KSApe1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCB0aHJvd3MgdGhlIHBhc3NlZCBleGNlcHRpb24sIGZvciB1c2UgYXMgYXJndW1lbnQgZm9yIHNldFRpbWVvdXRcbiAgICAgKiBAYWxpYXMgdGhyb3dFeGNlcHRpb25cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcGFyYW0geyBPYmplY3QgfSBleCBBbiBFcnJvciBvYmplY3RcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0aHJvd0V4Y2VwdGlvbiggZXg6IHVua25vd24gKXtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHJlVGhyb3dFeGNlcHRpb24oKXtcbiAgICAgICAgICAgIHRocm93IGV4O1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhbGxTdWJzY3JpYmVyV2l0aERlbGF5ZWRFeGNlcHRpb25zKCBzdWJzY3JpYmVyOiAoYXJnMDogYW55LCBhcmcxOiBhbnkpID0+IHZvaWQsIG1lc3NhZ2U6IGFueSwgZGF0YTogYW55ICl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyKCBtZXNzYWdlLCBkYXRhICk7XG4gICAgICAgIH0gY2F0Y2goIGV4ICl7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCB0aHJvd0V4Y2VwdGlvbiggZXggKSwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYWxsU3Vic2NyaWJlcldpdGhJbW1lZGlhdGVFeGNlcHRpb25zKCBzdWJzY3JpYmVyOiAoYXJnMDogYW55LCBhcmcxOiBhbnkpID0+IHZvaWQsIG1lc3NhZ2U6IGFueSwgZGF0YTogYW55ICl7XG4gICAgICAgIHN1YnNjcmliZXIoIG1lc3NhZ2UsIGRhdGEgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWxpdmVyTWVzc2FnZSggb3JpZ2luYWxNZXNzYWdlOiB7IHRvU3RyaW5nOiAoKSA9PiBhbnk7IH0sIG1hdGNoZWRNZXNzYWdlOiBQcm9wZXJ0eUtleSwgZGF0YTogYW55LCBpbW1lZGlhdGVFeGNlcHRpb25zOiBhbnkgKXtcbiAgICAgICAgdmFyIHN1YnNjcmliZXJzID0gbWVzc2FnZXNbbWF0Y2hlZE1lc3NhZ2VdLFxuICAgICAgICAgICAgY2FsbFN1YnNjcmliZXIgPSBpbW1lZGlhdGVFeGNlcHRpb25zID8gY2FsbFN1YnNjcmliZXJXaXRoSW1tZWRpYXRlRXhjZXB0aW9ucyA6IGNhbGxTdWJzY3JpYmVyV2l0aERlbGF5ZWRFeGNlcHRpb25zLFxuICAgICAgICAgICAgcztcblxuICAgICAgICBpZiAoICFtZXNzYWdlcy5oYXNPd25Qcm9wZXJ0eSggbWF0Y2hlZE1lc3NhZ2UgKSApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAocyBpbiBzdWJzY3JpYmVycyl7XG4gICAgICAgICAgICBpZiAoIHN1YnNjcmliZXJzLmhhc093blByb3BlcnR5KHMpKXtcbiAgICAgICAgICAgICAgICBjYWxsU3Vic2NyaWJlciggc3Vic2NyaWJlcnNbc10sIG9yaWdpbmFsTWVzc2FnZSwgZGF0YSApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlRGVsaXZlcnlGdW5jdGlvbiggbWVzc2FnZTogUHJvcGVydHlLZXksIGRhdGE6IGFueSwgaW1tZWRpYXRlRXhjZXB0aW9uczogYW55ICl7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBkZWxpdmVyTmFtZXNwYWNlZCgpe1xuICAgICAgICAgICAgdmFyIHRvcGljID0gU3RyaW5nKCBtZXNzYWdlICksXG4gICAgICAgICAgICAgICAgcG9zaXRpb24gPSB0b3BpYy5sYXN0SW5kZXhPZiggJy4nICk7XG5cbiAgICAgICAgICAgIC8vIGRlbGl2ZXIgdGhlIG1lc3NhZ2UgYXMgaXQgaXMgbm93XG4gICAgICAgICAgICBkZWxpdmVyTWVzc2FnZShtZXNzYWdlLCBtZXNzYWdlLCBkYXRhLCBpbW1lZGlhdGVFeGNlcHRpb25zKTtcblxuICAgICAgICAgICAgLy8gdHJpbSB0aGUgaGllcmFyY2h5IGFuZCBkZWxpdmVyIG1lc3NhZ2UgdG8gZWFjaCBsZXZlbFxuICAgICAgICAgICAgd2hpbGUoIHBvc2l0aW9uICE9PSAtMSApe1xuICAgICAgICAgICAgICAgIHRvcGljID0gdG9waWMuc3Vic3RyKCAwLCBwb3NpdGlvbiApO1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gdG9waWMubGFzdEluZGV4T2YoJy4nKTtcbiAgICAgICAgICAgICAgICBkZWxpdmVyTWVzc2FnZSggbWVzc2FnZSwgdG9waWMsIGRhdGEsIGltbWVkaWF0ZUV4Y2VwdGlvbnMgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtZXNzYWdlSGFzU3Vic2NyaWJlcnMoIG1lc3NhZ2U6IGFueSApe1xuICAgICAgICB2YXIgdG9waWMgPSBTdHJpbmcoIG1lc3NhZ2UgKSxcbiAgICAgICAgICAgIGZvdW5kID0gbWVzc2FnZXMuaGFzT3duUHJvcGVydHkoIHRvcGljICkgJiYgaGFzS2V5cyhtZXNzYWdlc1t0b3BpY10pLFxuICAgICAgICAgICAgcG9zaXRpb24gPSB0b3BpYy5sYXN0SW5kZXhPZiggJy4nICk7XG5cbiAgICAgICAgd2hpbGUgKCAhZm91bmQgJiYgcG9zaXRpb24gIT09IC0xICl7XG4gICAgICAgICAgICB0b3BpYyA9IHRvcGljLnN1YnN0ciggMCwgcG9zaXRpb24gKTtcbiAgICAgICAgICAgIHBvc2l0aW9uID0gdG9waWMubGFzdEluZGV4T2YoICcuJyApO1xuICAgICAgICAgICAgZm91bmQgPSBtZXNzYWdlcy5oYXNPd25Qcm9wZXJ0eSggdG9waWMgKSAmJiBoYXNLZXlzKG1lc3NhZ2VzW3RvcGljXSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZm91bmQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcHVibGlzaCggbWVzc2FnZTogUHJvcGVydHlLZXksIGRhdGE6IGFueSwgc3luYzogYW55LCBpbW1lZGlhdGVFeGNlcHRpb25zOiBhbnkgKXtcbiAgICAgICAgbWVzc2FnZSA9ICh0eXBlb2YgbWVzc2FnZSA9PT0gJ3N5bWJvbCcpID8gbWVzc2FnZS50b1N0cmluZygpIDogbWVzc2FnZTtcblxuICAgICAgICB2YXIgZGVsaXZlciA9IGNyZWF0ZURlbGl2ZXJ5RnVuY3Rpb24oIG1lc3NhZ2UsIGRhdGEsIGltbWVkaWF0ZUV4Y2VwdGlvbnMgKSxcbiAgICAgICAgICAgIGhhc1N1YnNjcmliZXJzID0gbWVzc2FnZUhhc1N1YnNjcmliZXJzKCBtZXNzYWdlICk7XG5cbiAgICAgICAgaWYgKCAhaGFzU3Vic2NyaWJlcnMgKXtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICggc3luYyA9PT0gdHJ1ZSApe1xuICAgICAgICAgICAgZGVsaXZlcigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0VGltZW91dCggZGVsaXZlciwgMCApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFB1Ymxpc2hlcyB0aGUgbWVzc2FnZSwgcGFzc2luZyB0aGUgZGF0YSB0byBpdCdzIHN1YnNjcmliZXJzXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQGFsaWFzIHB1Ymxpc2hcbiAgICAgKiBAcGFyYW0geyBTdHJpbmcgfSBtZXNzYWdlIFRoZSBtZXNzYWdlIHRvIHB1Ymxpc2hcbiAgICAgKiBAcGFyYW0ge30gZGF0YSBUaGUgZGF0YSB0byBwYXNzIHRvIHN1YnNjcmliZXJzXG4gICAgICogQHJldHVybiB7IEJvb2xlYW4gfVxuICAgICAqL1xuICAgIFB1YlN1Yi5wdWJsaXNoID0gZnVuY3Rpb24oIG1lc3NhZ2U6IFByb3BlcnR5S2V5LCBkYXRhOiBhbnkgKXtcbiAgICAgICAgcmV0dXJuIHB1Ymxpc2goIG1lc3NhZ2UsIGRhdGEsIGZhbHNlLCBQdWJTdWIuaW1tZWRpYXRlRXhjZXB0aW9ucyApO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBQdWJsaXNoZXMgdGhlIHRoZSBtZXNzYWdlIHN5bmNocm9ub3VzbHksIHBhc3NpbmcgdGhlIGRhdGEgdG8gaXQncyBzdWJzY3JpYmVyc1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBhbGlhcyBwdWJsaXNoU3luY1xuICAgICAqIEBwYXJhbSB7IFN0cmluZyB9IG1lc3NhZ2UgVGhlIG1lc3NhZ2UgdG8gcHVibGlzaFxuICAgICAqIEBwYXJhbSB7fSBkYXRhIFRoZSBkYXRhIHRvIHBhc3MgdG8gc3Vic2NyaWJlcnNcbiAgICAgKiBAcmV0dXJuIHsgQm9vbGVhbiB9XG4gICAgICovXG4gICAgUHViU3ViLnB1Ymxpc2hTeW5jID0gZnVuY3Rpb24oIG1lc3NhZ2U6IFByb3BlcnR5S2V5LCBkYXRhOiBhbnkgKXtcbiAgICAgICAgcmV0dXJuIHB1Ymxpc2goIG1lc3NhZ2UsIGRhdGEsIHRydWUsIFB1YlN1Yi5pbW1lZGlhdGVFeGNlcHRpb25zICk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFN1YnNjcmliZXMgdGhlIHBhc3NlZCBmdW5jdGlvbiB0byB0aGUgcGFzc2VkIG1lc3NhZ2UuIEV2ZXJ5IHJldHVybmVkIHRva2VuIGlzIHVuaXF1ZSBhbmQgc2hvdWxkIGJlIHN0b3JlZCBpZiB5b3UgbmVlZCB0byB1bnN1YnNjcmliZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBhbGlhcyBzdWJzY3JpYmVcbiAgICAgKiBAcGFyYW0geyBTdHJpbmcgfSBtZXNzYWdlIFRoZSBtZXNzYWdlIHRvIHN1YnNjcmliZSB0b1xuICAgICAqIEBwYXJhbSB7IEZ1bmN0aW9uIH0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gY2FsbCB3aGVuIGEgbmV3IG1lc3NhZ2UgaXMgcHVibGlzaGVkXG4gICAgICogQHJldHVybiB7IFN0cmluZyB9XG4gICAgICovXG4gICAgUHViU3ViLnN1YnNjcmliZSA9IGZ1bmN0aW9uKCBtZXNzYWdlOiBQcm9wZXJ0eUtleSwgZnVuYzogYW55ICl7XG4gICAgICAgIGlmICggdHlwZW9mIGZ1bmMgIT09ICdmdW5jdGlvbicpe1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgbWVzc2FnZSA9ICh0eXBlb2YgbWVzc2FnZSA9PT0gJ3N5bWJvbCcpID8gbWVzc2FnZS50b1N0cmluZygpIDogbWVzc2FnZTtcblxuICAgICAgICAvLyBtZXNzYWdlIGlzIG5vdCByZWdpc3RlcmVkIHlldFxuICAgICAgICBpZiAoICFtZXNzYWdlcy5oYXNPd25Qcm9wZXJ0eSggbWVzc2FnZSApICl7XG4gICAgICAgICAgICBtZXNzYWdlc1ttZXNzYWdlXSA9IHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZm9yY2luZyB0b2tlbiBhcyBTdHJpbmcsIHRvIGFsbG93IGZvciBmdXR1cmUgZXhwYW5zaW9ucyB3aXRob3V0IGJyZWFraW5nIHVzYWdlXG4gICAgICAgIC8vIGFuZCBhbGxvdyBmb3IgZWFzeSB1c2UgYXMga2V5IG5hbWVzIGZvciB0aGUgJ21lc3NhZ2VzJyBvYmplY3RcbiAgICAgICAgdmFyIHRva2VuID0gJ3VpZF8nICsgU3RyaW5nKCsrbGFzdFVpZCk7XG4gICAgICAgIG1lc3NhZ2VzW21lc3NhZ2VdW3Rva2VuXSA9IGZ1bmM7XG5cbiAgICAgICAgLy8gcmV0dXJuIHRva2VuIGZvciB1bnN1YnNjcmliaW5nXG4gICAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU3Vic2NyaWJlcyB0aGUgcGFzc2VkIGZ1bmN0aW9uIHRvIHRoZSBwYXNzZWQgbWVzc2FnZSBvbmNlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQGFsaWFzIHN1YnNjcmliZU9uY2VcbiAgICAgKiBAcGFyYW0geyBTdHJpbmcgfSBtZXNzYWdlIFRoZSBtZXNzYWdlIHRvIHN1YnNjcmliZSB0b1xuICAgICAqIEBwYXJhbSB7IEZ1bmN0aW9uIH0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gY2FsbCB3aGVuIGEgbmV3IG1lc3NhZ2UgaXMgcHVibGlzaGVkXG4gICAgICogQHJldHVybiB7IFB1YlN1YiB9XG4gICAgICovXG4gICAgUHViU3ViLnN1YnNjcmliZU9uY2UgPSBmdW5jdGlvbiggbWVzc2FnZTogYW55LCBmdW5jOiB7IGFwcGx5OiAoYXJnMDogYW55LCBhcmcxOiBJQXJndW1lbnRzKSA9PiB2b2lkOyB9ICl7XG4gICAgICAgIHZhciB0b2tlbiA9IFB1YlN1Yi5zdWJzY3JpYmUoIG1lc3NhZ2UsIGZ1bmN0aW9uICh0aGlzOiBhbnkpIHtcbiAgICAgICAgICAgIC8vIGJlZm9yZSBmdW5jIGFwcGx5LCB1bnN1YnNjcmliZSBtZXNzYWdlXG4gICAgICAgICAgICBQdWJTdWIudW5zdWJzY3JpYmUoIHRva2VuICk7XG4gICAgICAgICAgICBmdW5jLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBQdWJTdWI7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENsZWFycyBhbGwgc3Vic2NyaXB0aW9uc1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAYWxpYXMgY2xlYXJBbGxTdWJzY3JpcHRpb25zXG4gICAgICovXG4gICAgUHViU3ViLmNsZWFyQWxsU3Vic2NyaXB0aW9ucyA9IGZ1bmN0aW9uIGNsZWFyQWxsU3Vic2NyaXB0aW9ucygpe1xuICAgICAgICBtZXNzYWdlcyA9IHt9O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDbGVhciBzdWJzY3JpcHRpb25zIGJ5IHRoZSB0b3BpY1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAYWxpYXMgY2xlYXJBbGxTdWJzY3JpcHRpb25zXG4gICAgICovXG4gICAgUHViU3ViLmNsZWFyU3Vic2NyaXB0aW9ucyA9IGZ1bmN0aW9uIGNsZWFyU3Vic2NyaXB0aW9ucyh0b3BpYzogc3RyaW5nKXtcbiAgICAgICAgdmFyIG07XG4gICAgICAgIGZvciAobSBpbiBtZXNzYWdlcyl7XG4gICAgICAgICAgICBpZiAobWVzc2FnZXMuaGFzT3duUHJvcGVydHkobSkgJiYgbS5pbmRleE9mKHRvcGljKSA9PT0gMCl7XG4gICAgICAgICAgICAgICAgZGVsZXRlIG1lc3NhZ2VzW21dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgc3Vic2NyaXB0aW9uc1xuICAgICAqXG4gICAgICogLSBXaGVuIHBhc3NlZCBhIHRva2VuLCByZW1vdmVzIGEgc3BlY2lmaWMgc3Vic2NyaXB0aW9uLlxuICAgICAqXG4gICAgICogLSBXaGVuIHBhc3NlZCBhIGZ1bmN0aW9uLCByZW1vdmVzIGFsbCBzdWJzY3JpcHRpb25zIGZvciB0aGF0IGZ1bmN0aW9uXG4gICAgICpcbiAgICAgKiAtIFdoZW4gcGFzc2VkIGEgdG9waWMsIHJlbW92ZXMgYWxsIHN1YnNjcmlwdGlvbnMgZm9yIHRoYXQgdG9waWMgKGhpZXJhcmNoeSlcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQGFsaWFzIHN1YnNjcmliZU9uY2VcbiAgICAgKiBAcGFyYW0geyBTdHJpbmcgfCBGdW5jdGlvbiB9IHZhbHVlIEEgdG9rZW4sIGZ1bmN0aW9uIG9yIHRvcGljIHRvIHVuc3Vic2NyaWJlIGZyb21cbiAgICAgKiBAZXhhbXBsZSAvLyBVbnN1YnNjcmliaW5nIHdpdGggYSB0b2tlblxuICAgICAqIHZhciB0b2tlbiA9IFB1YlN1Yi5zdWJzY3JpYmUoJ215dG9waWMnLCBteUZ1bmMpO1xuICAgICAqIFB1YlN1Yi51bnN1YnNjcmliZSh0b2tlbik7XG4gICAgICogQGV4YW1wbGUgLy8gVW5zdWJzY3JpYmluZyB3aXRoIGEgZnVuY3Rpb25cbiAgICAgKiBQdWJTdWIudW5zdWJzY3JpYmUobXlGdW5jKTtcbiAgICAgKiBAZXhhbXBsZSAvLyBVbnN1YnNjcmliaW5nIGZyb20gYSB0b3BpY1xuICAgICAqIFB1YlN1Yi51bnN1YnNjcmliZSgnbXl0b3BpYycpO1xuICAgICAqL1xuICAgIFB1YlN1Yi51bnN1YnNjcmliZSA9IGZ1bmN0aW9uKHZhbHVlOiBhbnkpe1xuICAgICAgICB2YXIgZGVzY2VuZGFudFRvcGljRXhpc3RzID0gZnVuY3Rpb24odG9waWM6IHN0cmluZykge1xuICAgICAgICAgICAgICAgIHZhciBtO1xuICAgICAgICAgICAgICAgIGZvciAoIG0gaW4gbWVzc2FnZXMgKXtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBtZXNzYWdlcy5oYXNPd25Qcm9wZXJ0eShtKSAmJiBtLmluZGV4T2YodG9waWMpID09PSAwICl7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhIGRlc2NlbmRhbnQgb2YgdGhlIHRvcGljIGV4aXN0czpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzVG9waWMgICAgPSB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmICggbWVzc2FnZXMuaGFzT3duUHJvcGVydHkodmFsdWUpIHx8IGRlc2NlbmRhbnRUb3BpY0V4aXN0cyh2YWx1ZSkgKSxcbiAgICAgICAgICAgIGlzVG9rZW4gICAgPSAhaXNUb3BpYyAmJiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnLFxuICAgICAgICAgICAgaXNGdW5jdGlvbiA9IHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJyxcbiAgICAgICAgICAgIHJlc3VsdCA9IGZhbHNlLFxuICAgICAgICAgICAgbSwgbWVzc2FnZSwgdDtcblxuICAgICAgICBpZiAoaXNUb3BpYyl7XG4gICAgICAgICAgICBQdWJTdWIuY2xlYXJTdWJzY3JpcHRpb25zKHZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoIG0gaW4gbWVzc2FnZXMgKXtcbiAgICAgICAgICAgIGlmICggbWVzc2FnZXMuaGFzT3duUHJvcGVydHkoIG0gKSApe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlc1ttXTtcblxuICAgICAgICAgICAgICAgIGlmICggaXNUb2tlbiAmJiBtZXNzYWdlW3ZhbHVlXSApe1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgbWVzc2FnZVt2YWx1ZV07XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAvLyB0b2tlbnMgYXJlIHVuaXF1ZSwgc28gd2UgY2FuIGp1c3Qgc3RvcCBoZXJlXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoIHQgaW4gbWVzc2FnZSApe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaGFzT3duUHJvcGVydHkodCkgJiYgbWVzc2FnZVt0XSA9PT0gdmFsdWUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBtZXNzYWdlW3RdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG5cbiAgICB3aW5kb3cuVGVhbGl1bVB1YlN1YiA9IFB1YlN1Yjtcbn0iLCIvKiogQG1vZHVsZSBiYXNlL2NvbnN0YW50cyAqL1xuXG4vKipcbiAqIGNvbWV0ZCBtZXRhIGNvbnN0YW50c1xuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IENPTUVURF9NRVRBX0NPTk5FQ1QgPSAnQ09NRVREX01FVEFfQ09OTkVDVCc7XG5leHBvcnQgY29uc3QgQ09NRVREX01FVEFfUFVCTElTSCA9ICdDT01FVERfTUVUQV9QVUJMSVNIJztcbmV4cG9ydCBjb25zdCBDT01FVERfTUVUQV9TVUJTQ1JJQkUgPSAnQ09NRVREX01FVEFfU1VCU0NSSUJFJztcbmV4cG9ydCBjb25zdCBDT01FVERfTUVUQV9IQU5EU0hBS0UgPSAnQ09NRVREX01FVEFfSEFORFNIQUtFJztcbmV4cG9ydCBjb25zdCBDT01FVERfTUVUQV9ESVNDT05ORUNUID0gJ0NPTUVURF9NRVRBX0RJU0NPTk5FQ1QnO1xuZXhwb3J0IGNvbnN0IENPTUVURF9NRVRBX1VOU1VCU0NSSUJFID0gJ0NPTUVURF9NRVRBX1VOU1VCU0NSSUJFJztcbmV4cG9ydCBjb25zdCBDT01FVERfTUVUQV9VTlNVQ0NFU1NGVUwgPSAnQ09NRVREX01FVEFfVU5TVUNDRVNTRlVMJztcblxuLyoqXG4gKiBnZW5lc3lzIG5hdGl2ZSBjaGF0IGV2ZW50XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgY29uc3QgR0VORVNZU19SRVFVRVNUX05BVElWRV9DSEFUID0gJ0dFTkVTWVNfUkVRVUVTVF9OQVRJVkVfQ0hBVCc7XG5leHBvcnQgY29uc3QgR0VORVNZU19SRVFVRVNUX05BVElWRV9DSEFUX1NVQ0NFU1MgPSAnR0VORVNZU19SRVFVRVNUX05BVElWRV9DSEFUX1NVQ0NFU1MnO1xuZXhwb3J0IGNvbnN0IEdFTkVTWVNfUkVRVUVTVF9OQVRJVkVfQ0hBVF9GQUlMVVJFID0gJ0dFTkVTWVNfUkVRVUVTVF9OQVRJVkVfQ0hBVF9GQUlMVVJFJztcblxuLyoqXG4gKiBnZW5lc3lzIHJlcXVlc3QgdGVybXMgYW5kIGNvbmRpdGlvbnMgdXBkYXRlIGV2ZW50XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgY29uc3QgR0VORVNZU19SRVFVRVNUX1RDX1VQREFURSA9ICdHRU5FU1lTX1JFUVVFU1RfVENfVVBEQVRFJztcbmV4cG9ydCBjb25zdCBHRU5FU1lTX1JFUVVFU1RfVENfVVBEQVRFX1NVQ0NFU1MgPSAnR0VORVNZU19SRVFVRVNUX1RDX1VQREFURV9TVUNDRVNTJztcbmV4cG9ydCBjb25zdCBHRU5FU1lTX1JFUVVFU1RfVENfVVBEQVRFX0ZBSUxVUkUgPSAnR0VORVNZU19SRVFVRVNUX1RDX1VQREFURV9GQUlMVVJFJztcblxuLyoqXG4gKiBjb21ldGQgcmVxdWVzdCBjb25zdGFudHNcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBDT01FVERfUkVRVUVTVF9VUERBVEUgPSAnQ09NRVREX1JFUVVFU1RfVVBEQVRFJztcbmV4cG9ydCBjb25zdCBDT01FVERfUkVRVUVTVF9DSEFOTkVMID0gJ0NPTUVURF9SRVFVRVNUX0NIQU5ORUwnO1xuZXhwb3J0IGNvbnN0IENPTUVURF9SRVFVRVNUX0hBTkRTSEFLRSA9ICdDT01FVERfUkVRVUVTVF9IQU5EU0hBS0UnO1xuZXhwb3J0IGNvbnN0IENPTUVURF9SRVFVRVNUX0RJU0NPTk5FQ1QgPSAnQ09NRVREX1JFUVVFU1RfRElTQ09OTkVDVCc7XG5leHBvcnQgY29uc3QgQ09NRVREX1JFUVVFU1RfU0VORF9NRVNTQUdFID0gJ0NPTUVURF9SRVFVRVNUX1NFTkRfTUVTU0FHRSc7XG5leHBvcnQgY29uc3QgQ09NRVREX1JFUVVFU1RfTk9USUZJQ0FUSU9OID0gJ0NPTUVURF9SRVFVRVNUX05PVElGSUNBVElPTic7XG5leHBvcnQgY29uc3QgQ09NRVREX1JFUVVFU1RfU0FMRV9PQ0NVUlJFRCA9ICdDT01FVERfUkVRVUVTVF9TQUxFX09DQ1VSUkVEJztcbmV4cG9ydCBjb25zdCBDT01FVERfRkFJTFVSRSA9ICdDT01FVERfRkFJTFVSRSc7XG5cbi8qKlxuICogZ2VuZXN5cyByZXF1ZXN0IGNvbnN0YW50c1xuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IEdFTkVTWVNfUkVRVUVTVF9QUkVfQ09OTkVDVCA9ICdHRU5FU1lTX1JFUVVFU1RfUFJFX0NPTk5FQ1QnO1xuZXhwb3J0IGNvbnN0IEdFTkVTWVNfUkVRVUVTVF9QT0xMSU5HID0gJ0dFTkVTWVNfUkVRVUVTVF9QT0xMSU5HJztcbmV4cG9ydCBjb25zdCBHRU5FU1lTX1NVU1BFTkRfUE9MTElORyA9ICdHRU5FU1lTX1NVU1BFTkRfUE9MTElORyc7XG5leHBvcnQgY29uc3QgR0VORVNZU19SRVFVRVNUX05JQ0tOQU1FX1VQREFURSA9ICdHRU5FU1lTX1JFUVVFU1RfTklDS05BTUVfVVBEQVRFJztcblxuLyoqXG4gKiBnZW5lc3lzIHNlbmQgc3VydmV5IGNvbnN0YW50c1xuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IEdFTkVTWVNfU0VORF9TVVJWRVkgPSAnR0VORVNZU19TRU5EX1NVUlZFWSc7XG5leHBvcnQgY29uc3QgR0VORVNZU19TRU5EX1NVUlZFWV9TVUNDRVNTID0gJ0dFTkVTWVNfU0VORF9TVVJWRVlfU1VDQ0VTUyc7XG5leHBvcnQgY29uc3QgR0VORVNZU19TRU5EX1NVUlZFWV9GQUlMVVJFID0gJ0dFTkVTWVNfU0VORF9TVVJWRVlfRkFJTFVSRSc7XG5cbi8qKlxuICogR2VuZXN5cyBTZXQgQWdlbnQgSURcbiAqIEB0eXBlIHtzdHJpbmd9XG4qL1xuZXhwb3J0IGNvbnN0IEdFTkVTWVNfU0VUX0FHRU5UX0lEID0gJ0dFTkVTWVNfU0VUX0FHRU5UX0lEJztcblxuLyoqXG4gKiBnZW5lc3lzIHZhbGlkYXRlIElQIGFkZHJlc3NcbiAqIEB0eXBlIHtzdHJpbmd9XG4qL1xuZXhwb3J0IGNvbnN0IEdFTkVTWVNfVkFMSURBVEVfSVBfQUREUkVTUyA9ICdHRU5FU1lTX1ZBTElEQVRFX0lQX0FERFJFU1MnO1xuXG4vKipcbiAqIENvbWV0ZCBub3RpZmljYXRpb25zIGNvbnN0YW50c1xuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IENPTUVURF9OT1RJRllfU1RPUF9UWVBJTkcgPSAnQ09NRVREX05PVElGWV9TVE9QX1RZUElORyc7XG5leHBvcnQgY29uc3QgQ09NRVREX05PVElGWV9SRUFEX1JFQ0VJUFQgPSAnQ09NRVREX05PVElGWV9SRUFEX1JFQ0VJUFQnO1xuZXhwb3J0IGNvbnN0IENPTUVURF9OT1RJRllfU1RBUlRfVFlQSU5HID0gJ0NPTUVURF9OT1RJRllfU1RBUlRfVFlQSU5HJztcbmV4cG9ydCBjb25zdCBDT01FVERfUkVRVUVTVF9DSEFUID0gJ0NPTUVURF9SRVFVRVNUX0NIQVQnO1xuXG4vKipcbiAqIENvbWV0ZCBzdWJzY3JpcHRpb25zIGNvbnN0YW50c1xuICogQHR5cGUge3N0cmluZ31cbiovXG5leHBvcnQgY29uc3QgQ09NRVREX0NIQU5ORUxfTUVTU0FHRVMgPSAnQ09NRVREX0NIQU5ORUxfTUVTU0FHRVMnO1xuZXhwb3J0IGNvbnN0IENPTUVURF9DSEFOTkVMX1NVQlNDUklQVElPTiA9ICdDT01FVERfQ0hBTk5FTF9TVUJTQ1JJUFRJT04nO1xuZXhwb3J0IGNvbnN0IENPTUVURF9SRVFVRVNUX0NIQU5ORUxfU1VCU0NSSVBUSU9OID0gJ0NPTUVURF9SRVFVRVNUX0NIQU5ORUxfU1VCU0NSSVBUSU9OJztcblxuLyoqXG4gKiBNb25pdG9yaW5nSlMgY29uc3RhbnRzXG4gKiBAdHlwZSB7c3RyaW5nfVxuKi9cbmV4cG9ydCBjb25zdCBNT05JVE9SSU5HSlNfUkVRVUVTVCA9ICdNT05JVE9SSU5HSlNfUkVRVUVTVCc7XG5leHBvcnQgY29uc3QgTU9OSVRPUklOR0pTX0hFQVJUQkVBVCA9ICdNT05JVE9SSU5HSlNfSEVBUlRCRUFUJztcblxuLyoqXG4gKiBHZW5lc3lzIGNvbmZpZ3VyYXRpb25zICYgcmVxdWVzdCBjb25zdGFudHNcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBHRU5FU1lTX0NPQlJPV1NFX0NPTkZJR1VSRUQgPSAnR0VORVNZU19DT0JST1dTRV9DT05GSUdVUkVEJztcbmV4cG9ydCBjb25zdCBHRU5FU1lTX0NPQlJPV1NFX0NPTkZJR1VSQVRJT04gPSAnR0VORVNZU19DT0JST1dTRV9DT05GSUdVUkFUSU9OJztcblxuLyoqXG4gKiBHV0Ugc2VuZCBkaXNwb3NpdGlvbiByZXF1ZXN0LCBzdWNjZXNzLCAmIGZhaWx1cmUgY29uc3RhbnRzXG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgY29uc3QgR1dFX1NFTkRfRElTUE9TSVRJT05fQ09ERSA9ICdHV0VfU0VORF9ESVNQT1NJVElPTl9DT0RFJztcbmV4cG9ydCBjb25zdCBHV0VfU0VORF9ESVNQT1NJVElPTl9DT0RFX1NVQ0NFU1MgPSAnR1dFX1NFTkRfRElTUE9TSVRJT05fQ09ERV9TVUNDRVNTJztcbmV4cG9ydCBjb25zdCBHV0VfU0VORF9ESVNQT1NJVElPTl9DT0RFX0ZBSUxVUkUgPSAnR1dFX1NFTkRfRElTUE9TSVRJT05fQ09ERV9GQUlMVVJFJztcblxuLyoqXG4gKiBQb3N0IE1lc3NhZ2UgQ29uc3RhbnRzXG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgY29uc3QgQ0FOQ0VMX0hFQVJUQkVBVCA9ICdDQU5DRUxfSEVBUlRCRUFUJztcbmV4cG9ydCBjb25zdCBDQU5DRUxfV0lER0VUX1NVQlMgPSAnQ0FOQ0VMX1dJREdFVF9TVUJTJztcbmV4cG9ydCBjb25zdCBDQU5DRUxfU0lURV9TVUJTID0gJ0NBTkNFTF9TSVRFX1NVQlMnO1xuZXhwb3J0IGNvbnN0IENIRUNLX0FIX1RPS0VOID0gJ0NIRUNLX0FIX1RPS0VOJztcbmV4cG9ydCBjb25zdCBDSEVDS19GT1JfU0FMRSA9ICdDSEVDS19GT1JfU0FMRSc7XG5leHBvcnQgY29uc3QgR1JBQl9IRUFSVEJFQVRfREFUQSA9ICdHUkFCX0hFQVJUQkVBVF9EQVRBJztcbmV4cG9ydCBjb25zdCBTRVRfTU9OSVRPUklOR19TVEFUVVMgPSAnU0VUX01PTklUT1JJTkdfU1RBVFVTJztcbmV4cG9ydCBjb25zdCBTRU5EX1BST1hZX0RBVEEgPSAnU0VORF9QUk9YWV9EQVRBJztcbmV4cG9ydCBjb25zdCBNQVhfRVJSX1JFVFJJRVMgPSAzO1xuXG4vKipcbiAqIHJlc3BvbnNlIGZhaWx1cmVzIGNvbnN0YW50c1xuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IEdFTkVSSUNfRkFJTFVSRSA9ICdHRU5FUklDX0ZBSUxVUkUnO1xuZXhwb3J0IGNvbnN0IENPTUVURF9OT1RJRklDQVRJT05fRkFJTFVSRSA9ICdDT01FVERfTk9USUZJQ0FUSU9OX0ZBSUxVUkUnO1xuZXhwb3J0IGNvbnN0IENPTUVURF9TQUxFU19PQ0NVUlJFRF9GQUlMVVJFID0gJ0NPTUVURF9TQUxFU19PQ0NVUlJFRF9GQUlMVVJFJztcbmV4cG9ydCBjb25zdCBDT01FVERfVVBEQVRFX0ZBSUxVUkUgPSAnQ09NRVREX1VQREFURV9GQUlMVVJFJztcbmV4cG9ydCBjb25zdCBHRU5FU1lTX1JFUVVFU1RfUE9MTElOR19GQUlMVVJFID0gJ0dFTkVTWVNfUkVRVUVTVF9QT0xMSU5HX0ZBSUxVUkUnO1xuZXhwb3J0IGNvbnN0IEdFTkVTWVNfUkVRVUVTVF9QUkVfQ09OTkVDVF9GQUlMVVJFID0gJ0dFTkVTWVNfUkVRVUVTVF9QUkVfQ09OTkVDVF9GQUlMVVJFJztcbmV4cG9ydCBjb25zdCBHRU5FU1lTX1ZBTElEQVRFX0lQX0FERFJFU1NfRkFJTFVSRSA9ICdHRU5FU1lTX1ZBTElEQVRFX0lQX0FERFJFU1NfRkFJTFVSRSc7XG5leHBvcnQgY29uc3QgTU9OSVRPUklOR0pTX0hFQVJUQkVBVF9GQUlMVVJFID0gJ01PTklUT1JJTkdKU19IRUFSVEJFQVRfRkFJTFVSRSc7XG5leHBvcnQgY29uc3QgTU9OSVRPUklOR0pTX1JFU1BPTlNFX0ZBSUxVUkUgPSAnTU9OSVRPUklOR0pTX1JFU1BPTlNFX0ZBSUxVUkUnO1xuZXhwb3J0IGNvbnN0IFBSRUNIQVRfU1VSVkVZX0dFVF9SRVNQT05TRV9GQUlMVVJFID0gJ1BSRUNIQVRfU1VSVkVZX0dFVF9SRVNQT05TRV9GQUlMVVJFJztcbmV4cG9ydCBjb25zdCBTVVJWRVlfR0VUX1JFU1BPTlNFX0ZBSUxVUkUgPSAnU1VSVkVZX0dFVF9SRVNQT05TRV9GQUlMVVJFJztcblxuLyoqXG4gKiByZXNwb25zZSBzdWNjZXNzIGNvbnN0YW50c1xuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IENPTUVURF9OT1RJRklDQVRJT05fU1VDQ0VTUyA9ICdDT01FVERfTk9USUZJQ0FUSU9OX1NVQ0NFU1MnO1xuZXhwb3J0IGNvbnN0IENPTUVURF9TQUxFU19PQ0NVUlJFRF9TVUNDRVNTID0gJ0NPTUVURF9TQUxFU19PQ0NVUlJFRF9TVUNDRVNTJztcbmV4cG9ydCBjb25zdCBDT01FVERfVVBEQVRFX1NVQ0NFU1MgPSAnQ09NRVREX1VQREFURV9TVUNDRVNTJztcbmV4cG9ydCBjb25zdCBHRU5FU1lTX1JFUVVFU1RfUE9MTElOR19TVUNDRVNTID0gJ0dFTkVTWVNfUkVRVUVTVF9QT0xMSU5HX1NVQ0NFU1MnO1xuZXhwb3J0IGNvbnN0IEdFTkVTWVNfUkVRVUVTVF9QUkVfQ09OTkVDVF9TVUNDRVNTID0gJ0dFTkVTWVNfUkVRVUVTVF9QUkVfQ09OTkVDVF9TVUNDRVNTJztcbmV4cG9ydCBjb25zdCBHRU5FU1lTX1ZBTElEQVRFX0lQX0FERFJFU1NfU1VDQ0VTUyA9ICdHRU5FU1lTX1ZBTElEQVRFX0lQX0FERFJFU1NfU1VDQ0VTUyc7XG5leHBvcnQgY29uc3QgTU9OSVRPUklOR0pTX1JFU1BPTlNFID0gJ01PTklUT1JJTkdKU19SRVNQT05TRSc7XG5leHBvcnQgY29uc3QgTU9OSVRPUklOR19JRF9SRVNQT05TRSA9ICdNT05JVE9SSU5HX0lEX1JFU1BPTlNFJztcbmV4cG9ydCBjb25zdCBQUkVDSEFUX1NVUlZFWV9HRVRfUkVTUE9OU0UgPSAnUFJFQ0hBVF9TVVJWRVlfR0VUX1JFU1BPTlNFJztcbmV4cG9ydCBjb25zdCBQUkVDSEFUX1NVUlZFWV9HRVRfUkVTUE9OU0VfU1VDQ0VTUyA9ICdQUkVDSEFUX1NVUlZFWV9HRVRfUkVTUE9OU0VfU1VDQ0VTUyc7XG5leHBvcnQgY29uc3QgU1VSVkVZX0dFVF9SRVNQT05TRSA9ICdTVVJWRVlfR0VUX1JFU1BPTlNFJztcbmV4cG9ydCBjb25zdCBTVVJWRVlfR0VUX1JFU1BPTlNFX1NVQ0NFU1MgPSAnU1VSVkVZX0dFVF9SRVNQT05TRV9TVUNDRVNTJztcblxuLyoqXG4gKiBjaGF0ICYgd2lkZ2V0IGNvbnN0YW50c1xuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IEFIX0NPT0tJRV9TRVQgPSAnQUhfQ09PS0lFX1NFVCc7XG5leHBvcnQgY29uc3Qgc3BhcnRhTG9hZGVyTG9hZGVkID0gJ3NwYXJ0YUxvYWRlckxvYWRlZCc7XG5leHBvcnQgY29uc3QgZXJyb3JMb2FkaW5nV2lkZ2V0ID0gJ2Vycm9yTG9hZGluZ1dpZGdldCc7XG5leHBvcnQgY29uc3QgQ0hBVF9JTklUSUFMSVpBVElPTiA9ICdDSEFUX0lOSVRJQUxJWkFUSU9OJztcbmV4cG9ydCBjb25zdCBXSURHRVRfUkVRVUVTVF9DT05GSUdVUkFUSU9OID0gJ1dJREdFVF9SRVFVRVNUX0NPTkZJR1VSQVRJT04nO1xuZXhwb3J0IGNvbnN0IFNQQVJUQV9XSURHRVRfUkVBRFkgPSAnU1BBUlRBX1dJREdFVF9SRUFEWS5zcGFydGFXaWRnZXRVdGlsaXR5JztcbmV4cG9ydCBjb25zdCBXSURHRVRfUkVRVUVTVF9DT05GSUdVUkFUSU9OX0VSUk9SID0gJ1dJREdFVF9SRVFVRVNUX0NPTkZJR1VSQVRJT05fRVJST1InO1xuZXhwb3J0IGNvbnN0IFdJREdFVF9SRVFVRVNUX0NPTkZJR1VSQVRJT05fU1VDQ0VTU0ZVTCA9ICdXSURHRVRfUkVRVUVTVF9DT05GSUdVUkFUSU9OX1NVQ0NFU1NGVUwnO1xuZXhwb3J0IGNvbnN0IFBSRV9DSEFUX1NVUlZFWSA9ICdQUkVfQ0hBVF9TVVJWRVknO1xuXG4vKipcbiAqIE1MIFNpdGUgSURzXG4gKiBAdHlwZSB7YXJyYXl9XG4gKi9cbmV4cG9ydCBjb25zdCBNTF9TSVRFX0lEUyA9IFsnT1NFJywgJ01MRCcsICdNTERPQSddO1xuXG4vKipcbiAqIGNoYXQgY29va2llIGNvbnN0YW50c1xuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IENPT0tJRSA9IHtcbiAgTkFNRTogJ29jY3RDaGF0JyxcbiAgRVhQSVJBVElPTjogMTAsXG4gIERPTUFJTjogJy5iYW5rb2ZhbWVyaWNhLmNvbScsXG4gIFNFQ1VSRTogdHJ1ZSxcbiAgUEFUSDogJy8nLFxufTtcblxuLyoqXG4gKiBjaGF0IGx0cyBjb29raWUgY29uc3RhbnRzXG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgY29uc3QgQ09PS0lFX0xUUyA9IHtcbiAgTkFNRTogJ29jY3RDaGF0X2x0cycsXG4gIEVYUElSQVRJT046IDYwICogMjQgKiAzMCwgLy8gMzAgZGF5cyBmb3IgbHRzIGNvb2tpZVxuICBET01BSU46ICcuYmFua29mYW1lcmljYS5jb20nLFxuICBTRUNVUkU6IHRydWUsXG4gIFBBVEg6ICcvJyxcbn07XG5cbi8qKlxuICogR1NJRCBDb29raWVcbiAqL1xuZXhwb3J0IGNvbnN0IENPT0tJRV9HU0lEID0ge1xuICBOQU1FOiAnR1NJRCcsXG4gIERPTUFJTjogJy5iYW5rb2ZhbWVyaWNhLmNvbScsXG4gIFNFQ1VSRTogdHJ1ZSxcbiAgUEFUSDogJy8nLFxufTtcblxuLyoqXG4gKiBNYXhpbXVtIG51bWJlciBvZiBhdHRlbXB0cyBmb3IgdmFsaWRhdGVJcEFkZHJlc3MgY2FsbC5cbiAqL1xuZXhwb3J0IGNvbnN0IE1BWF9BVFRFTVBUUyA9IDI7XG5cbi8qKlxuICogVVJMU1xuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IFBJWEVMX1RBR19VUkwgPSAnaHR0cHM6Ly93d3cuYmFua29mYW1lcmljYS5jb20vcGEvZ2xvYmFsLWFzc2V0cy8xLjAvZ3JhcGhpYy9jbHIuZ2lmJztcbmV4cG9ydCBjb25zdCBPR1dfVVJMID0gJy9vZ2F0ZXdheS9wdWJsaWMvbG9naW4vcmVzdC9zYXMvdjEvdmFsaWRhdGVJcEFkZHJlc3MnO1xuXG4vKipcbiAqIEdlbmVzeXMgRW5kcG9pbnRzIGFuZCB0ZW1wb3JhcnkgRGV2IENoYXQgZG9tYWluLlxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IEdFTkVTWVNfVVBEQVRFX0NIQVRfREFUQV9FTkRQT0lOVCA9ICcxL3NlcnZpY2UvVXBkYXRlQ2hhdERhdGEnO1xuZXhwb3J0IGNvbnN0IEdFTkVTWVNfRkVUQ0hfU0VTU0lPTl9FTkRQT0lOVCA9ICcxL3NlcnZpY2UvR2V0UmVmSURJbmZvLyc7XG5leHBvcnQgY29uc3QgR0VORVNZU19DSEFUX1NFUlZJQ0VfRU5EUE9JTlQgPSAnMS9zZXJ2aWNlL0NoYXRTZXJ2aWNlLyc7IC8vIGFkZCBuZXcgZW5kcG9pbnQgaGVyZVxuZXhwb3J0IGNvbnN0IEdFTkVTWVNfQ0hBVF9TVVJWRVlfRU5EUE9JTlQgPSAnMS9zZXJ2aWNlL0NoYXRTdXJ2ZXkvJztcblxuLyoqXG4gKiBTYWxlIEluZGljYXRvcnMgQ29uc3RhbnRzIEFycmF5XG4gKiBAdHlwZSB7YXJyYXl9XG4gKi9cbmV4cG9ydCBjb25zdCBTQUxFX0lORElDQVRPUlMgPSBbXG4gICdpbnFDbGllbnRPcmRlck51bScsXG4gICdNTERfT0FPX0NPTkZJUk1BVElPTk5VTUJFUicsXG4gICdNTERfT0FPX0FDQ09VTlROVU1CRVInLFxuXTtcblxuLyoqXG4gKiBNb2JpbGUgQUNTIExvZ2dlciBTZXJ2aWNlXG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgY29uc3QgQUNTX0xPR0dFUl9VUkwgPSAnL21nYXRld2F5L3YxL2NsaWVudExvZ2dlci9sb2cnO1xuZXhwb3J0IGNvbnN0IEFDU19MT0dHRVJfUFVCTElDX1VSTCA9ICcvbWdhdGV3YXkvcHVibGljL3YxL2NsaWVudExvZ2dlci9sb2cnO1xuIiwiLy8gQHRzLW5vY2hlY2tcbi8qIGVzbGludC1kaXNhYmxlIG1heC1sZW4gKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovXG4vKiogQG1vZHVsZSBzaXRlLXB1Yi1zdWIvc3Vic2NyaXB0aW9ucyAqL1xuXG5pbXBvcnQge1xuICBTVVJWRVlfR0VUX1JFU1BPTlNFLFxuICBDT01FVERfQ0hBTk5FTF9NRVNTQUdFUyxcbiAgQ09NRVREX0NIQU5ORUxfU1VCU0NSSVBUSU9OLFxuICBHRU5FUklDX0ZBSUxVUkUsXG4gIENPTUVURF9NRVRBX0NPTk5FQ1QsXG4gIENPTUVURF9NRVRBX0RJU0NPTk5FQ1QsXG4gIENPTUVURF9NRVRBX0hBTkRTSEFLRSxcbiAgQ09NRVREX01FVEFfUFVCTElTSCxcbiAgQ09NRVREX01FVEFfU1VCU0NSSUJFLFxuICBDT01FVERfTUVUQV9VTlNVQlNDUklCRSxcbiAgQ09NRVREX01FVEFfVU5TVUNDRVNTRlVMLFxuICBDT01FVERfTk9USUZZX1JFQURfUkVDRUlQVCxcbiAgQ09NRVREX05PVElGWV9TVEFSVF9UWVBJTkcsXG4gIENPTUVURF9OT1RJRllfU1RPUF9UWVBJTkcsXG4gIENPTUVURF9VUERBVEVfU1VDQ0VTUyxcbiAgQ09NRVREX1VQREFURV9GQUlMVVJFLFxuICBDT01FVERfUkVRVUVTVF9DSEFOTkVMLFxuICBDT01FVERfUkVRVUVTVF9DSEFOTkVMX1NVQlNDUklQVElPTixcbiAgQ09NRVREX1JFUVVFU1RfRElTQ09OTkVDVCxcbiAgQ09NRVREX1JFUVVFU1RfSEFORFNIQUtFLFxuICBHRU5FU1lTX1JFUVVFU1RfTklDS05BTUVfVVBEQVRFLFxuICBDT01FVERfUkVRVUVTVF9OT1RJRklDQVRJT04sXG4gIENPTUVURF9SRVFVRVNUX1NFTkRfTUVTU0FHRSxcbiAgQ09NRVREX1JFUVVFU1RfVVBEQVRFLFxuICBDT01FVERfUkVRVUVTVF9TQUxFX09DQ1VSUkVELFxuICBHRU5FU1lTX0NPQlJPV1NFX0NPTkZJR1VSQVRJT04sXG4gIEdFTkVTWVNfUkVRVUVTVF9QUkVfQ09OTkVDVCxcbiAgR0VORVNZU19SRVFVRVNUX1BSRV9DT05ORUNUX0ZBSUxVUkUsXG4gIEdFTkVTWVNfUkVRVUVTVF9QUkVfQ09OTkVDVF9TVUNDRVNTLFxuICBHRU5FU1lTX1JFUVVFU1RfUE9MTElORyxcbiAgR0VORVNZU19SRVFVRVNUX1BPTExJTkdfRkFJTFVSRSxcbiAgR0VORVNZU19SRVFVRVNUX1BPTExJTkdfU1VDQ0VTUyxcbiAgR0VORVNZU19TRU5EX1NVUlZFWSxcbiAgR0VORVNZU19TRU5EX1NVUlZFWV9TVUNDRVNTLFxuICBHRU5FU1lTX1NFTkRfU1VSVkVZX0ZBSUxVUkUsXG4gIEdFTkVTWVNfU0VUX0FHRU5UX0lELFxuICBHRU5FU1lTX1NVU1BFTkRfUE9MTElORyxcbiAgR0VORVNZU19WQUxJREFURV9JUF9BRERSRVNTX1NVQ0NFU1MsXG4gIEdXRV9TRU5EX0RJU1BPU0lUSU9OX0NPREUsXG4gIFBSRUNIQVRfU1VSVkVZX0dFVF9SRVNQT05TRSxcbiAgUFJFQ0hBVF9TVVJWRVlfR0VUX1JFU1BPTlNFX1NVQ0NFU1MsXG4gIFBSRUNIQVRfU1VSVkVZX0dFVF9SRVNQT05TRV9GQUlMVVJFLFxuICBTVVJWRVlfR0VUX1JFU1BPTlNFX0ZBSUxVUkUsXG4gIFNVUlZFWV9HRVRfUkVTUE9OU0VfU1VDQ0VTUyxcbiAgR0VORVNZU19SRVFVRVNUX05BVElWRV9DSEFULFxuICBHRU5FU1lTX1JFUVVFU1RfTkFUSVZFX0NIQVRfU1VDQ0VTUyxcbiAgR0VORVNZU19SRVFVRVNUX05BVElWRV9DSEFUX0ZBSUxVUkUsXG4gIEdFTkVTWVNfUkVRVUVTVF9UQ19VUERBVEVfU1VDQ0VTUyxcbiAgR0VORVNZU19SRVFVRVNUX1RDX1VQREFURV9GQUlMVVJFLFxuICBHRU5FU1lTX1JFUVVFU1RfVENfVVBEQVRFXG59IGZyb20gJy4vc2l0ZS1nbG9iYWxzJztcblxuaW1wb3J0IHtwdWJsaXNoV2luZG93LCBwdWJsaXNoVGVhbGl1bX0gZnJvbSAnLi4vc2l0ZS11dGlsaXRpZXMvdXRpbGl0aWVzJztcblxuaW1wb3J0IHJlcXVlc3RDaGFubmVsIGZyb20gJy4uL21lc3NhZ2luZy9oYW5kbGVycy9yZXF1ZXN0LWNoYW5uZWwnO1xuaW1wb3J0IGNoYW5uZWxNZXNzYWdlIGZyb20gJy4uL21lc3NhZ2luZy9oYW5kbGVycy9jaGFubmVsLW1lc3NhZ2UnO1xuaW1wb3J0IHJlcXVlc3RIYW5kc2hha2UgZnJvbSAnLi4vbWVzc2FnaW5nL2hhbmRsZXJzL3JlcXVlc3QtaGFuZHNoYWtlJztcbmltcG9ydCBjb25maWd1cmVDb2Jyb3dzZSBmcm9tICcuLi9zaXRlLWFwaS9oYW5kbGVycy9jb25maWd1cmUtY29icm93c2UnO1xuaW1wb3J0IHN1cnZleUdldFJlc3BvbnNlIGZyb20gJy4uL3NpdGUtYXBpL2hhbmRsZXJzL3N1cnZleS1nZXQtcmVzcG9uc2UnO1xuaW1wb3J0IHJlcXVlc3RQb2xsaW5nIGZyb20gJy4uL3NpdGUtYXBpL2hhbmRsZXJzL3JlcXVlc3QtcG9sbGluZyc7XG5pbXBvcnQgcmVxdWVzdFByZUNvbm5lY3QgZnJvbSAnLi4vc2l0ZS1hcGkvaGFuZGxlcnMvcmVxdWVzdC1wcmVjb25uZWN0JztcbmltcG9ydCBuYXRpdmVDaGF0VXBkYXRlIGZyb20gJy4uL3NpdGUtYXBpL25hdGl2ZS1jaGF0LXVwZGF0ZSc7XG5pbXBvcnQgcmVxdWVzdFRDVXBkYXRlIGZyb20gJy4uL3NpdGUtYXBpL3JlcXVlc3QtdGMtdXBkYXRlJztcbmltcG9ydCBpc1Y2IGZyb20gJy4uL3NpdGUtdXRpbGl0aWVzL3V0aWxpdGllcy9pc1Y2JztcblxuLyoqXG4gKiBTdWJzY3JpYmUgVGVhbGl1bSBhbmQgU3BhcnRhIHdpZGdldCBsb2FkZXIgZXZlbnRzXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKCkge1xuICBUZWFsaXVtUHViU3ViLnN1YnNjcmliZShHRU5FUklDX0ZBSUxVUkUsIHB1Ymxpc2hXaW5kb3cpO1xuICBUZWFsaXVtUHViU3ViLnN1YnNjcmliZShDT01FVERfTUVUQV9DT05ORUNULCBwdWJsaXNoV2luZG93KTtcbiAgVGVhbGl1bVB1YlN1Yi5zdWJzY3JpYmUoQ09NRVREX01FVEFfUFVCTElTSCwgcHVibGlzaFdpbmRvdyk7XG4gIFRlYWxpdW1QdWJTdWIuc3Vic2NyaWJlKENPTUVURF9NRVRBX1NVQlNDUklCRSwgcHVibGlzaFdpbmRvdyk7XG4gIFRlYWxpdW1QdWJTdWIuc3Vic2NyaWJlKENPTUVURF9NRVRBX0hBTkRTSEFLRSwgcHVibGlzaFdpbmRvdyk7XG4gIFRlYWxpdW1QdWJTdWIuc3Vic2NyaWJlKENPTUVURF9NRVRBX0RJU0NPTk5FQ1QsIHB1Ymxpc2hXaW5kb3cpO1xuICBUZWFsaXVtUHViU3ViLnN1YnNjcmliZShDT01FVERfTUVUQV9VTlNVQlNDUklCRSwgcHVibGlzaFdpbmRvdyk7XG4gIFRlYWxpdW1QdWJTdWIuc3Vic2NyaWJlKENPTUVURF9NRVRBX1VOU1VDQ0VTU0ZVTCwgcHVibGlzaFdpbmRvdyk7XG4gIFRlYWxpdW1QdWJTdWIuc3Vic2NyaWJlKENPTUVURF9DSEFOTkVMX1NVQlNDUklQVElPTiwgcHVibGlzaFdpbmRvdyk7XG4gIFRlYWxpdW1QdWJTdWIuc3Vic2NyaWJlKEdFTkVTWVNfUkVRVUVTVF9OQVRJVkVfQ0hBVF9GQUlMVVJFLCBwdWJsaXNoV2luZG93KTtcbiAgVGVhbGl1bVB1YlN1Yi5zdWJzY3JpYmUoR0VORVNZU19SRVFVRVNUX05BVElWRV9DSEFUX1NVQ0NFU1MsIHB1Ymxpc2hXaW5kb3cpO1xuICAvLyBUZWFsaXVtUHViU3ViLnN1YnNjcmliZShHRU5FU1lTX1JFUVVFU1RfVENfVVBEQVRFX0ZBSUxVUkUsIHB1Ymxpc2hXaW5kb3cpO1xuICAvLyBUZWFsaXVtUHViU3ViLnN1YnNjcmliZShHRU5FU1lTX1JFUVVFU1RfVENfVVBEQVRFX1NVQ0NFU1MsIHB1Ymxpc2hXaW5kb3cpO1xuICBUZWFsaXVtUHViU3ViLnN1YnNjcmliZShHRU5FU1lTX1JFUVVFU1RfUFJFX0NPTk5FQ1RfRkFJTFVSRSwgcHVibGlzaFdpbmRvdyk7XG4gIFRlYWxpdW1QdWJTdWIuc3Vic2NyaWJlKEdFTkVTWVNfUkVRVUVTVF9QUkVfQ09OTkVDVF9TVUNDRVNTLCBwdWJsaXNoV2luZG93KTtcbiAgVGVhbGl1bVB1YlN1Yi5zdWJzY3JpYmUoU1VSVkVZX0dFVF9SRVNQT05TRV9TVUNDRVNTLCBwdWJsaXNoV2luZG93KTtcbiAgVGVhbGl1bVB1YlN1Yi5zdWJzY3JpYmUoU1VSVkVZX0dFVF9SRVNQT05TRV9GQUlMVVJFLCBwdWJsaXNoV2luZG93KTtcbiAgVGVhbGl1bVB1YlN1Yi5zdWJzY3JpYmUoUFJFQ0hBVF9TVVJWRVlfR0VUX1JFU1BPTlNFX1NVQ0NFU1MsIHB1Ymxpc2hXaW5kb3cpO1xuICBUZWFsaXVtUHViU3ViLnN1YnNjcmliZShQUkVDSEFUX1NVUlZFWV9HRVRfUkVTUE9OU0VfRkFJTFVSRSwgcHVibGlzaFdpbmRvdyk7XG4gIFRlYWxpdW1QdWJTdWIuc3Vic2NyaWJlKENPTUVURF9VUERBVEVfU1VDQ0VTUywgcHVibGlzaFdpbmRvdyk7XG4gIFRlYWxpdW1QdWJTdWIuc3Vic2NyaWJlKENPTUVURF9VUERBVEVfRkFJTFVSRSwgcHVibGlzaFdpbmRvdyk7XG4gIFRlYWxpdW1QdWJTdWIuc3Vic2NyaWJlKEdFTkVTWVNfUkVRVUVTVF9QT0xMSU5HX1NVQ0NFU1MsIHB1Ymxpc2hXaW5kb3cpO1xuICBUZWFsaXVtUHViU3ViLnN1YnNjcmliZShHRU5FU1lTX1JFUVVFU1RfUE9MTElOR19GQUlMVVJFLCBwdWJsaXNoV2luZG93KTtcbiAgVGVhbGl1bVB1YlN1Yi5zdWJzY3JpYmUoR0VORVNZU19WQUxJREFURV9JUF9BRERSRVNTX1NVQ0NFU1MsIHB1Ymxpc2hXaW5kb3cpO1xuICBUZWFsaXVtUHViU3ViLnN1YnNjcmliZShHRU5FU1lTX1NFTkRfU1VSVkVZX1NVQ0NFU1MsIHB1Ymxpc2hXaW5kb3cpO1xuICBUZWFsaXVtUHViU3ViLnN1YnNjcmliZShHRU5FU1lTX1NFTkRfU1VSVkVZX0ZBSUxVUkUsIHB1Ymxpc2hXaW5kb3cpO1xuICBUZWFsaXVtUHViU3ViLnN1YnNjcmliZShHRU5FU1lTX1JFUVVFU1RfTkFUSVZFX0NIQVRfRkFJTFVSRSwgcHVibGlzaFdpbmRvdylcbiAgVGVhbGl1bVB1YlN1Yi5zdWJzY3JpYmUoQ09NRVREX0NIQU5ORUxfTUVTU0FHRVMsIGNoYW5uZWxNZXNzYWdlKTtcblxuICBjb25zdCAkYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpO1xuXG4gICRib2R5Py5hZGRFdmVudExpc3RlbmVyKENPTUVURF9SRVFVRVNUX0NIQU5ORUwsIHJlcXVlc3RDaGFubmVsKTtcbiAgJGJvZHk/LmFkZEV2ZW50TGlzdGVuZXIoUFJFQ0hBVF9TVVJWRVlfR0VUX1JFU1BPTlNFLCAocGF5bG9hZDogeyBkZXRhaWw6IGFueX0pID0+IHN1cnZleUdldFJlc3BvbnNlKHBheWxvYWQsIHRydWUpKTtcbiAgJGJvZHk/LmFkZEV2ZW50TGlzdGVuZXIoU1VSVkVZX0dFVF9SRVNQT05TRSwgc3VydmV5R2V0UmVzcG9uc2UpO1xuICAkYm9keT8uYWRkRXZlbnRMaXN0ZW5lcihDT01FVERfUkVRVUVTVF9IQU5EU0hBS0UsIHJlcXVlc3RIYW5kc2hha2UpO1xuICAkYm9keT8uYWRkRXZlbnRMaXN0ZW5lcihHRU5FU1lTX0NPQlJPV1NFX0NPTkZJR1VSQVRJT04sIGNvbmZpZ3VyZUNvYnJvd3NlKTtcbiAgJGJvZHk/LmFkZEV2ZW50TGlzdGVuZXIoR0VORVNZU19SRVFVRVNUX05BVElWRV9DSEFULCBuYXRpdmVDaGF0VXBkYXRlKTtcbiAgJGJvZHk/LmFkZEV2ZW50TGlzdGVuZXIoR0VORVNZU19SRVFVRVNUX1RDX1VQREFURSwgcmVxdWVzdFRDVXBkYXRlKVxuICAkYm9keT8uYWRkRXZlbnRMaXN0ZW5lcihHRU5FU1lTX1JFUVVFU1RfUFJFX0NPTk5FQ1QsIHJlcXVlc3RQcmVDb25uZWN0KTtcbiAgJGJvZHk/LmFkZEV2ZW50TGlzdGVuZXIoR0VORVNZU19SRVFVRVNUX1BPTExJTkcsIHJlcXVlc3RQb2xsaW5nKTtcbiAgJGJvZHk/LmFkZEV2ZW50TGlzdGVuZXIoR0VORVNZU19SRVFVRVNUX05JQ0tOQU1FX1VQREFURSwgKHtkZXRhaWx9OiB7ZGV0YWlsOiBvYmplY3R9KSA9PiBwdWJsaXNoVGVhbGl1bShHRU5FU1lTX1JFUVVFU1RfTklDS05BTUVfVVBEQVRFLCBkZXRhaWwpKTtcbiAgJGJvZHk/LmFkZEV2ZW50TGlzdGVuZXIoR0VORVNZU19TRVRfQUdFTlRfSUQsICh7ZGV0YWlsfToge2RldGFpbDogb2JqZWN0fSkgPT4gcHVibGlzaFRlYWxpdW0oR0VORVNZU19TRVRfQUdFTlRfSUQsIGRldGFpbCkpO1xuICAkYm9keT8uYWRkRXZlbnRMaXN0ZW5lcihHRU5FU1lTX1NFTkRfU1VSVkVZLCAoe2RldGFpbH06IHtkZXRhaWw6IG9iamVjdH0pID0+IHB1Ymxpc2hUZWFsaXVtKEdFTkVTWVNfU0VORF9TVVJWRVksIGRldGFpbCkpO1xuICAkYm9keT8uYWRkRXZlbnRMaXN0ZW5lcihHRU5FU1lTX1NVU1BFTkRfUE9MTElORywgKCkgPT4gcHVibGlzaFRlYWxpdW0oR0VORVNZU19TVVNQRU5EX1BPTExJTkcsIHt9KSk7XG4gICRib2R5Py5hZGRFdmVudExpc3RlbmVyKENPTUVURF9SRVFVRVNUX0RJU0NPTk5FQ1QsICgpID0+IHB1Ymxpc2hUZWFsaXVtKENPTUVURF9SRVFVRVNUX0RJU0NPTk5FQ1QsIHt9KSk7XG4gICRib2R5Py5hZGRFdmVudExpc3RlbmVyKENPTUVURF9OT1RJRllfU1RPUF9UWVBJTkcsICh7ZGV0YWlsfToge2RldGFpbDogb2JqZWN0fSkgPT4gcHVibGlzaFRlYWxpdW0oQ09NRVREX05PVElGWV9TVE9QX1RZUElORywgZGV0YWlsKSk7XG4gICRib2R5Py5hZGRFdmVudExpc3RlbmVyKENPTUVURF9OT1RJRllfU1RBUlRfVFlQSU5HLCAoe2RldGFpbH06IHtkZXRhaWw6IG9iamVjdH0pID0+IHB1Ymxpc2hUZWFsaXVtKENPTUVURF9OT1RJRllfU1RBUlRfVFlQSU5HLCBkZXRhaWwpKTtcbiAgJGJvZHk/LmFkZEV2ZW50TGlzdGVuZXIoQ09NRVREX05PVElGWV9SRUFEX1JFQ0VJUFQsICh7ZGV0YWlsfToge2RldGFpbDogb2JqZWN0fSkgPT4gcHVibGlzaFRlYWxpdW0oQ09NRVREX05PVElGWV9SRUFEX1JFQ0VJUFQsIGRldGFpbCkpO1xuICAkYm9keT8uYWRkRXZlbnRMaXN0ZW5lcihDT01FVERfUkVRVUVTVF9DSEFOTkVMX1NVQlNDUklQVElPTiwgKHtkZXRhaWx9OiB7ZGV0YWlsOiBvYmplY3R9KSA9PiBwdWJsaXNoVGVhbGl1bShDT01FVERfUkVRVUVTVF9DSEFOTkVMX1NVQlNDUklQVElPTiwgZGV0YWlsKSk7XG4gICRib2R5Py5hZGRFdmVudExpc3RlbmVyKENPTUVURF9SRVFVRVNUX1NFTkRfTUVTU0FHRSwgKHtkZXRhaWx9OiB7ZGV0YWlsOiBvYmplY3R9KSA9PiBwdWJsaXNoVGVhbGl1bShDT01FVERfUkVRVUVTVF9TRU5EX01FU1NBR0UsIGRldGFpbCkpO1xuICAkYm9keT8uYWRkRXZlbnRMaXN0ZW5lcihDT01FVERfUkVRVUVTVF9OT1RJRklDQVRJT04sICh7ZGV0YWlsfToge2RldGFpbDogb2JqZWN0fSkgPT4gcHVibGlzaFRlYWxpdW0oQ09NRVREX1JFUVVFU1RfTk9USUZJQ0FUSU9OLCBkZXRhaWwpKTtcbiAgJGJvZHk/LmFkZEV2ZW50TGlzdGVuZXIoQ09NRVREX1JFUVVFU1RfU0FMRV9PQ0NVUlJFRCwgKHtkZXRhaWx9OiB7ZGV0YWlsOiBvYmplY3R9KSA9PiBwdWJsaXNoVGVhbGl1bShDT01FVERfUkVRVUVTVF9TQUxFX09DQ1VSUkVELCBkZXRhaWwpKTtcbiAgJGJvZHk/LmFkZEV2ZW50TGlzdGVuZXIoR1dFX1NFTkRfRElTUE9TSVRJT05fQ09ERSwgKHtkZXRhaWx9OiB7ZGV0YWlsOiBvYmplY3R9KSA9PiBwdWJsaXNoVGVhbGl1bShHV0VfU0VORF9ESVNQT1NJVElPTl9DT0RFLCBkZXRhaWwpKTtcbiAgJGJvZHk/LmFkZEV2ZW50TGlzdGVuZXIoQ09NRVREX1JFUVVFU1RfVVBEQVRFLCAoe2RldGFpbH06IHtkZXRhaWw6IG9iamVjdH0pID0+IHB1Ymxpc2hUZWFsaXVtKENPTUVURF9SRVFVRVNUX1VQREFURSwgZGV0YWlsKSk7XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuIiwiLyoqIEBtb2R1bGUgY29va2llLXN0b3JhZ2UvZ2V0ICovXG5pbXBvcnQgeyBDT09LSUUgfSBmcm9tICcuLi8uLi9zaXRlLXB1Yi1zdWIvc2l0ZS1nbG9iYWxzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0Q29va2llU3RvcmFnZShuYW1lOiBzdHJpbmcgfCBvYmplY3QgPSBDT09LSUUuTkFNRSkge1xuICBjb25zdCBsb29rdXAgPSBgJHtuYW1lfT1gO1xuICBjb25zdCBkZWNvZGVkQ29va2llID0gZGVjb2RlVVJJQ29tcG9uZW50KGRvY3VtZW50LmNvb2tpZSk7XG4gIGNvbnN0IGNvb2tpZUFyciA9IGRlY29kZWRDb29raWUuc3BsaXQoJzsnKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb29raWVBcnIubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBsZXQgY29va2llID0gY29va2llQXJyW2ldO1xuICAgIHdoaWxlIChjb29raWUuY2hhckF0KDApID09PSAnICcpIHtcbiAgICAgIGNvb2tpZSA9IGNvb2tpZS5zdWJzdHJpbmcoMSk7XG4gICAgfVxuICAgIGlmIChjb29raWUuaW5kZXhPZihsb29rdXApID09PSAwKSB7XG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShjb29raWUuc3Vic3RyaW5nKGxvb2t1cC5sZW5ndGgsIGNvb2tpZS5sZW5ndGgpKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHt9O1xufVxuIiwiLyoqIEBtb2R1bGUgY29va2llLXN0b3JhZ2UvcmVtb3ZlICovXG5pbXBvcnQgeyBDT09LSUUgfSBmcm9tICcuLi8uLi9zaXRlLXB1Yi1zdWIvc2l0ZS1nbG9iYWxzJztcbmltcG9ydCBnZXRDb29raWVTdG9yYWdlIGZyb20gJy4vZ2V0JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVtb3ZlQ29va2llKG5hbWU6IHN0cmluZyA9IENPT0tJRS5OQU1FKSB7XG4gIGlmIChnZXRDb29raWVTdG9yYWdlKG5hbWUpKSB7XG4gICAgY29uc3QgaXNMb2NhbCA9IHdpbmRvdy5zcGFydGEuZW52ID09PSAnbG9jYWwnO1xuICAgIGNvbnN0IGV4cGlyeSA9ICc7IGV4cGlyZXM9VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMSBHTVQnO1xuICAgIGNvbnN0IGRvbWFpbiA9IGlzTG9jYWwgPyAnJyA6IGA7IGRvbWFpbj0ke0NPT0tJRS5ET01BSU59YDtcbiAgICBjb25zdCBzZWN1cmUgPSAoQ09PS0lFLlNFQ1VSRSAmJiAhaXNMb2NhbCkgPyAnOyBzZWN1cmUnIDogJyc7XG4gICAgY29uc3QgY29va2llID0gYCR7bmFtZX09JHtleHBpcnl9OyBwYXRoPSR7Q09PS0lFLlBBVEh9JHtkb21haW59JHtzZWN1cmV9YDtcblxuICAgIHdpbmRvdy5kb2N1bWVudC5jb29raWUgPSBjb29raWU7XG4gIH1cbn1cbiIsIi8qKiBAbW9kdWxlIGNvb2tpZS1zdG9yYWdlL3NldCAqL1xuaW1wb3J0IHsgQ09PS0lFIH0gZnJvbSAnLi4vLi4vc2l0ZS1wdWItc3ViL3NpdGUtZ2xvYmFscyc7XG5pbXBvcnQgZ2V0Q29va2llU3RvcmFnZSBmcm9tICcuL2dldCc7XG5pbXBvcnQge1xuICBnZXRDdXJyZW50RG9tYWluLFxufSBmcm9tICcuLi91dGlsaXRpZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzZXRDb29raWVTdG9yYWdlKHBheWxvYWQ6IG9iamVjdCwgY29va2llOiB7IE5BTUU6IHN0cmluZywgRVhQSVJBVElPTjogbnVtYmVyLCBET01BSU46IHN0cmluZywgU0VDVVJFOiBib29sZWFuLCBQQVRIOiBzdHJpbmcgfSA9IENPT0tJRSkge1xuICBjb25zdCBzdHJpbmdpZmllZFZhbHVlID0gSlNPTi5zdHJpbmdpZnkoT2JqZWN0LmFzc2lnbihnZXRDb29raWVTdG9yYWdlKGNvb2tpZS5OQU1FKSwgcGF5bG9hZCkpO1xuICBjb25zdCBpc0xvY2FsID0gd2luZG93LnNwYXJ0YS5lbnYgPT09ICdsb2NhbCc7XG4gIGNvbnN0IGV4cGlyeSA9IGA7IGV4cGlyZXM9JHsobmV3IERhdGUoRGF0ZS5ub3coKSArIChjb29raWUuRVhQSVJBVElPTiAqIDYwICogMTAwMCkpKS50b1VUQ1N0cmluZygpfWA7XG4gIGNvbnN0IGRvbWFpbiA9IGlzTG9jYWwgPyAnJyA6IGA7IGRvbWFpbj0ke2dldEN1cnJlbnREb21haW4oKX1gO1xuICBjb25zdCBzZWN1cmUgPSAoY29va2llLlNFQ1VSRSAmJiAhaXNMb2NhbCkgPyAnOyBzZWN1cmUnIDogJyc7XG4gIGNvbnN0IHNhbWVTaXRlID0gKGNvb2tpZS5TRUNVUkUgJiYgIWlzTG9jYWwpID8gJzsgc2FtZVNpdGU9bm9uZScgOiAnJztcbiAgY29uc3QgY29va2llSW5mbyA9IGAke2Nvb2tpZS5OQU1FfT0ke3N0cmluZ2lmaWVkVmFsdWV9JHtleHBpcnl9OyBwYXRoPSR7Y29va2llLlBBVEh9JHtkb21haW59JHtzZWN1cmV9JHtzYW1lU2l0ZX1gO1xuXG4gIHdpbmRvdy5kb2N1bWVudC5jb29raWUgPSBjb29raWVJbmZvO1xufVxuIiwiLy8gQHRzLW5vY2hlY2tcblxuLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZWYgKi9cbi8qIGVzbGludC1kaXNhYmxlIG1heC1sZW4gKi9cbi8qKiBAbW9kdWxlIHV0aWxpdGllcy91dGlsaXRpZXMgKi9cbmltcG9ydCB7XG4gIE1BWF9FUlJfUkVUUklFUyxcbiAgQ0FOQ0VMX1dJREdFVF9TVUJTLFxuICBHRU5FU1lTX1ZBTElEQVRFX0lQX0FERFJFU1MsXG4gIE9HV19VUkwsXG4gIFNBTEVfSU5ESUNBVE9SUyxcbiAgQ09PS0lFX0dTSUQsXG59IGZyb20gXCIuLi9zaXRlLXB1Yi1zdWIvc2l0ZS1nbG9iYWxzXCI7XG5pbXBvcnQgZ2V0Q29va2llU3RvcmFnZSBmcm9tIFwiLi9jb29raWUtc3RvcmFnZS9nZXRcIjtcbmltcG9ydCBnZW5lc3lzVmFsaWRhdGUgZnJvbSBcIi4uL3NpdGUtYXBpL3ZhbGlkYXRlLWlwLWFkZHJlc3NcIjtcbmltcG9ydCBpc1Y2IGZyb20gXCIuL3V0aWxpdGllcy9pc1Y2XCI7XG5cbi8qKlxuICogV2UgaGF2ZSB0d28gZGlmZmVyZW50IGxhbmd1YWdlIHZlcnNpb25zIG9mIGNoYXQuIEEgU3BhbmlzaCB2ZXJzaW9uIGFuZCBhbiBFbmdsaXNoIHZlcnNpb24uIFdlIHdpbGwgbG9hZCB0aGUgY29ycmVzcG9uZGluZ1xuICogdmVyc2lvbiB0aGF0IHJlbGF0ZXMgdG8gbGFuZ3VhZ2UgdmFsdWUgb2YgdGhlIHBhZ2UuXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTcGFuaXNoKCkge1xuICByZXR1cm4gZ2VuZXN5c0RhdGEuTEFOR1VBR0UgPT09IFwiZXMtdXNcIiA/IFwiZXNcIiA6IFwiZW5cIjtcbn1cblxuLyoqXG4gKiBnZXRQYXJhbXNcbiAqIFJldHVybnMgYWxsIHF1ZXJ5IHN0cmluZyBwYXJhbXMgaW4gYW4gb2JqZWN0XG4gKiBAcmV0dXJucyB7b2JqZWN0fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGFyYW1zKCkge1xuICBjb25zdCBvYmogPSB7fTtcbiAgd2luZG93LmxvY2F0aW9uLnNlYXJjaFxuICAgIC5zdWJzdHIoMSlcbiAgICAuc3BsaXQoXCImXCIpXG4gICAgLmZvckVhY2goKHBhcmFtKSA9PiB7XG4gICAgICBjb25zdCBbbmFtZSwgdmFsdWVdID0gcGFyYW0uc3BsaXQoXCI9XCIpO1xuICAgICAgb2JqW25hbWVdID0gdmFsdWU7XG4gICAgfSk7XG4gIHJldHVybiBvYmo7XG59XG5cbi8qKlxuICogV2hlbiBsb2NhbGhvc3Qgc2V0IHRvIGxvY2FsaG9zdCwgaWYgbm90IHdlJ2xsIHVzZSBob3N0bmFtZS4gV2lsbCBmYWlsIGlmIGl0J3MgcmVsYXRpdmUsIHdpZGdldFxuICogYWNjZXB0cyBob3N0bmFtZVxuICogQHJldHVybnMge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTG9jYWwoKSB7XG4gIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKFwibG9jYWxob3N0XCIpID4gLTEpIHtcbiAgICByZXR1cm4gXCJodHRwOi8vbG9jYWxob3N0OjMwMDVcIjtcbiAgfVxuICByZXR1cm4gXCJodHRwczovL1wiICsgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lO1xufVxuXG4vKipcbiAqIGlzRW1wdHlPYmpcbiAqIEZ1bmN0aW9uIGRlc2lnbmVkIHRvIGNoZWNrIGlmIGFuIG9iamVjdCBpcyBlbXB0eSAocmV0dXJucyB0cnVlKSBvciBjb250YWlucyBrZXkvdmFsdWUgcGFpcnMgKHJldHVybnMgZmFsc2UpXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRW1wdHlPYmoob2JqOiBvYmplY3QpOiBib29sZWFuIHtcbiAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoa2V5KSkgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIGlzRW1wdHlBcnJcbiAqIEZ1bmN0aW9uIGRlc2lnbmVkIHRvIGNoZWNrIGlmIGFuIGFycmF5IGlzIGVtcHR5IChyZXR1cm5zIHRydWUpIG9yIGNvbnRhaW5zIGl0ZW1zIChyZXR1cm5zIGZhbHNlKVxuICogQHBhcmFtIHthcnJheX0gYXJyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRW1wdHlBcnIoYXJyOiBhbnlbXSk6IGJvb2xlYW4ge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheShhcnIpICYmIGFyci5sZW5ndGggPT09IDA7XG59XG5cbi8qKlxuICogaXNTYWxlUHJlc2VudFxuICogRnVuY3Rpb24gZGVzaWduZWQgdG8gY2hlY2sgdGhyb3VnaCB0aGUgZGlnaXRhbERhdGEgb2JqZWN0IGZvciB0aGUgcHJlc2VuY2Ugb2YgYWxsIHRoZSBwb3NzaWJsZSBzYWxlIGluZGljYXRvcnNcbiAqIEBwYXJhbSB7b2JqZWN0fSBkZG8gLSB0aGUgZGlnaXRhbERhdGEgb2JqZWN0IG9uIHRoZSB3aW5kb3dcbiAqIEByZXR1cm5zIHtzdHJpbmd9IC0gaWYgZGVmaW5lZFxuICogQHJldHVybnMge251bGx9IC0gaWYgdW5kZWZpbmVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1NhbGVQcmVzZW50KGRkbzogeyBbeDogc3RyaW5nXTogYW55IH0pOiBzdHJpbmcgfCBudWxsIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBTQUxFX0lORElDQVRPUlMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoXG4gICAgICBkZG9bU0FMRV9JTkRJQ0FUT1JTW2ldXSAmJlxuICAgICAgZGRvW1NBTEVfSU5ESUNBVE9SU1tpXV0gIT09IG51bGwgJiZcbiAgICAgIGRkb1tTQUxFX0lORElDQVRPUlNbaV1dICE9PSBcIlwiXG4gICAgKSB7XG4gICAgICByZXR1cm4gZGRvW1NBTEVfSU5ESUNBVE9SU1tpXV07XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIGluY3JlYXNlRXJyb3JDb3VudFxuICogRnVuY3Rpb24gZGVzaWduZWQgdG8gY291bnQgZXZlcnkgdGltZSB0aGF0IGFuIGVycm9yIG9jY3Vycy4gT25jZSAzIGVycm9ycyBvY2N1cixcbiAqIHB1Ymxpc2ggd2lsbCBvY2N1ciB0byBzaHV0ZG93biBjaGF0IG9uIHdpZGdldCBhbmQgc2l0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5jcmVhc2VFcnJvckNvdW50KCkge1xuICBpZiAoYmFjdG0gJiYgYmFjdG0uZGRvKSB7XG4gICAgbGV0IGVycm9yQ291bnQgPVxuICAgICAgYmFjdG0uZGRvLmdldChcInBhZ2UuYXR0cmlidXRlcy5jaGF0LmdlbmVzeXNfZXJyb3JfY291bnRcIikgfHwgMDtcbiAgICBlcnJvckNvdW50Kys7XG4gICAgYmFjdG0uZGRvLnNldChcInBhZ2UuYXR0cmlidXRlcy5jaGF0LmdlbmVzeXNfZXJyb3JfY291bnRcIiwgZXJyb3JDb3VudCk7XG4gICAgaWYgKGVycm9yQ291bnQgPT09IE1BWF9FUlJfUkVUUklFUylcbiAgICAgIFRlYWxpdW1QdWJTdWIucHVibGlzaChDQU5DRUxfV0lER0VUX1NVQlMpO1xuICB9XG59XG5cbi8qKlxuICogZ2V0QWhUb2tlblxuICogQ2hlY2tzIHRvIHNlZSBpZiB0aGUgQWhUb2tlbiBDb29raWUgaXMgc3RpbGwgcHJlc2VudFxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBPcHRpb25hbCBhcyBpdCBzaG91bGQgYWx3YXlzIGJlICdhaF90b2tlbidcbiAqIEByZXR1cm5zIHtvYmplY3R9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBaFRva2VuKG5hbWUgPSBcImFoX3Rva2VuXCIpIHtcbiAgY29uc3QgbG9va3VwID0gYCR7bmFtZX09YDtcbiAgY29uc3QgZGVjb2RlZENvb2tpZSA9IGRlY29kZVVSSUNvbXBvbmVudChkb2N1bWVudC5jb29raWUpO1xuICBjb25zdCBjb29raWVBcnIgPSBkZWNvZGVkQ29va2llLnNwbGl0KFwiO1wiKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb29raWVBcnIubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBsZXQgY29va2llID0gY29va2llQXJyW2ldO1xuICAgIHdoaWxlIChjb29raWUuY2hhckF0KDApID09PSBcIiBcIikge1xuICAgICAgY29va2llID0gY29va2llLnN1YnN0cmluZygxKTtcbiAgICB9XG4gICAgaWYgKGNvb2tpZS5pbmRleE9mKGxvb2t1cCkgPT09IDApIHtcbiAgICAgIHJldHVybiB7IGFoX3Rva2VuOiBjb29raWUuc3Vic3RyaW5nKGxvb2t1cC5sZW5ndGgsIGNvb2tpZS5sZW5ndGgpIH07XG4gICAgfVxuICB9XG4gIHJldHVybiB7fTtcbn1cblxuLyoqXG4gKiB3YWl0Rm9yQUhUb2tlblxuICogYXN5bmMgZnVuY3Rpb24gdGhhdCB3aWxsIGNvbmZpcm0gdGhlIEFIIHRva2VuIGFuZCBpZiBpdCBpcyBwcmVzZW50IHRoZW4gcHJvY2VlZDsgaWYgbm90LFxuICogYXdhaXQgdGhlIHZhbGlkYXRlSVBBZGRyZXNzIGZ1bmN0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnROYW1lXG4gKiBAcGFyYW0ge29iamVjdH0gcGF5bG9hZFxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3YWl0Rm9yQUhUb2tlbihldmVudE5hbWU6IHN0cmluZywgcGF5bG9hZDogb2JqZWN0KSB7XG4gIGNvbnN0IGlzQWhUb2tlbiA9IGdldEFoVG9rZW4oKTtcbiAgaWYgKGlzRW1wdHlPYmooaXNBaFRva2VuKSkge1xuICAgIGdlbmVzeXNWYWxpZGF0ZShcbiAgICAgIEdFTkVTWVNfVkFMSURBVEVfSVBfQUREUkVTUyxcbiAgICAgIHsgb2d3VXJsOiBPR1dfVVJMIH0sXG4gICAgICB7IGV2ZW50TmFtZSwgcGF5bG9hZCB9XG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICBwdWJsaXNoVGVhbGl1bShldmVudE5hbWUsIHBheWxvYWQpO1xuICB9XG59XG5cbi8qKlxuICogZ2V0SG9zdE5hbWVcbiAqIEV4dHJhY3RzIGhvc3RuYW1lIGZyb20gVVJMIFN0cmluZ1xuICogQHBhcmFtIHtzdHJpbmd9IHVybCB0byBleHRyYWN0IGhvc3RuYW1lXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBob3N0bmFtZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SG9zdE5hbWUodXJsOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgY29uc3QgbWF0Y2ggPSB1cmwubWF0Y2goLzpcXC9cXC8od3d3WzAtOV0/XFwuKT8oLlteLzpdKykvaSk7XG5cbiAgaWYgKFxuICAgIG1hdGNoICE9IG51bGwgJiZcbiAgICBtYXRjaC5sZW5ndGggPiAyICYmXG4gICAgdHlwZW9mIG1hdGNoWzJdID09PSBcInN0cmluZ1wiICYmXG4gICAgbWF0Y2hbMl0ubGVuZ3RoID4gMFxuICApIHtcbiAgICByZXR1cm4gbWF0Y2hbMl07XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBnZXREb21haW5cbiAqIEV4dHJhY3QgVExEIGZyb20gVVJMIHN0cmluZ1xuICogQHBhcmFtIHtzdHJpbmd9IHVybCB0byBleHRyYWN0IHRsZFxuICogQHJldHVybnMge3N0cmluZ30gdG9wIGxldmVsIGRvbWFpblxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RG9tYWluKHVybDogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgaG9zdE5hbWUgPSBnZXRIb3N0TmFtZSh1cmwpITtcbiAgbGV0IGRvbWFpbiA9IGhvc3ROYW1lO1xuICBpZiAoaG9zdE5hbWUgIT0gbnVsbCkge1xuICAgIGNvbnN0IHBhcnRzID0gaG9zdE5hbWUuc3BsaXQoXCIuXCIpLnJldmVyc2UoKTtcbiAgICBpZiAocGFydHMgIT0gbnVsbCAmJiBwYXJ0cy5sZW5ndGggPiAxKSB7XG4gICAgICBkb21haW4gPSBgJHtwYXJ0c1sxXX0uJHtwYXJ0c1swXX1gO1xuICAgIH1cbiAgfVxuXG4gIGlmIChkb2N1bWVudC5yZWZlcnJlci5pbmNsdWRlcyhcImZzc2l0MS5tbC5jb21cIil8fCB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUuaW5jbHVkZXMoJ2Zzc2l0MS5tbC5jb20nKSkgcmV0dXJuIFwiZnNzaXQxLm1sLmNvbVwiO1xuICBpZiAoZG9jdW1lbnQucmVmZXJyZXIuaW5jbHVkZXMoXCJmc3NpdDIubWwuY29tXCIpfHwgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lLmluY2x1ZGVzKCdmc3NpdDIubWwuY29tJykpIHJldHVybiBcImZzc2l0Mi5tbC5jb21cIjtcbiAgaWYgKGRvY3VtZW50LnJlZmVycmVyLmluY2x1ZGVzKFwiYmVuZWZpdHNzaXQxXCIpIHx8IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZS5pbmNsdWRlcygnYmVuZWZpdHNzaXQxJykpIHJldHVybiBcImJlbmVmaXRzc2l0MS5tbC5jb21cIjtcbiAgaWYgKGRvY3VtZW50LnJlZmVycmVyLmluY2x1ZGVzKFwiYmVuZWZpdHNzaXQyXCIpIHx8IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZS5pbmNsdWRlcygnYmVuZWZpdHNzaXQyJykpIHJldHVybiBcImJlbmVmaXRzc2l0Mi5tbC5jb21cIjtcblxuICByZXR1cm4gZG9tYWluO1xufVxuXG4vKipcbiAqIGdldEN1cnJlbnREb21haW5cbiAqIE9idGFpbnMgdGhlIGN1cnJlbnQgVExEIGRvbWFpbiBmcm9tIGN1cnJlbnQgd2luZG93LmxvY2F0aW9uLmhyZWZcbiAqIEByZXR1cm5zIHtzdHJpbmd9IEN1cnJlbnQgVExEXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDdXJyZW50RG9tYWluKCkge1xuICByZXR1cm4gZ2V0RG9tYWluKHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4pO1xufVxuXG4vKipcbiAqIFB1Ymxpc2ggdG8gd2luZG93XG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnROYW1lIC0gbmFtZSBvbiBldmVudFxuICogQHBhcmFtIHtvYmplY3R9IHBheWxvYWQgLSBFdmVudHMgcGF5bG9hZFxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwdWJsaXNoV2luZG93KGV2ZW50TmFtZTogc3RyaW5nLCBwYXlsb2FkOiBvYmplY3QpOiBib29sZWFuIHtcbiAgY29uc3QgZXZlbnRUb0JlUHVibGlzaGVkID0gbmV3IEN1c3RvbUV2ZW50KGV2ZW50TmFtZSwgeyBkZXRhaWw6IHBheWxvYWQgfSk7XG4gIGNvbnN0ICRib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImJvZHlcIik7XG4gICRib2R5LmRpc3BhdGNoRXZlbnQoZXZlbnRUb0JlUHVibGlzaGVkKTtcbn1cblxuLyoqXG4gKiBQdWJsaXNoIHRvIFRlYWxpdW1cbiAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWUgLSBuYW1lIG9uIGV2ZW50XG4gKiBAcGFyYW0ge29iamVjdH0gcGF5bG9hZCAtIEV2ZW50cyBwYXlsb2FkXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHB1Ymxpc2hUZWFsaXVtKGV2ZW50TmFtZTogc3RyaW5nLCBwYXlsb2FkOiBvYmplY3QpOiBib29sZWFuIHtcbiAgVGVhbGl1bVB1YlN1Yi5wdWJsaXNoKGV2ZW50TmFtZSwgcGF5bG9hZCk7XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBxdWVyeVN0cmluZ1BhcnNlXG4gKiBVc2VkIHRvIHBhcnNlIG91dCBxdWVyeSBzdHJpbmcgdmFsdWVzIHRvIHByb3ZpZGUgYSBtb2RpZmllZCBjaGF0IGV4cGVyaWVuY2UgaW4gTExFc1xuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBuYW1lIGZvciBxdWVyeSBzdHJpbmcgdG8gcGFyc2VcbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBxdWVyeVN0cmluZ1BhcnNlKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoYFs/Jl0ke25hbWV9KD0oW14mI10qKXwmfCN8JClgKTtcbiAgY29uc3QgcmVzdWx0cyA9IHJlZ2V4LmV4ZWModXJsKTtcbiAgaWYgKHJlc3VsdHMgJiYgcmVzdWx0c1syXSkgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChyZXN1bHRzWzJdKTtcbiAgcmV0dXJuIFwiXCI7XG59XG5cbi8qKlxuICogTG9nIEdlbmVzeXMgRXZlbnRcbiAqIEBwYXJhbSB7ZXZlbnROYW1lfSAtIE5hbWUgb2YgdGhlIGdlbmVzeXMgZXZlbnRcbiAqIEBwYXJhbSB7aW5mb30gLSAgT3RoZXIgaW5mb3JtYXRpb24gdGhhdCBuZWVkcyB0byBiZSBjb2xsZWN0ZWRcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5leHBvcnQgZnVuY3Rpb24gbG9nR2VuZXN5c0V2ZW50KFxuICBsZXZlbE51bTogbnVtYmVyLFxuICBldmVudE5hbWU6IHN0cmluZyxcbiAgZGF0YT86IG9iamVjdCB8IHVua25vd25cbikge1xuICBjb25zdCBkZG9FbnZQcm9kID1cbiAgICB3aW5kb3cuZGlnaXRhbERhdGEgJiZcbiAgICBkaWdpdGFsRGF0YS5lbnZpcm9ubWVudFZhcmlhYmxlcyAmJlxuICAgIGRpZ2l0YWxEYXRhLmVudmlyb25tZW50VmFyaWFibGVzLmVudi5pbmRleE9mKFwibm90cHJvZFwiKSA+IC0xXG4gICAgICA/IGZhbHNlXG4gICAgICA6IHRydWU7XG4gIGlmICh3aW5kb3cuYmFjdG1fZW52U2VsZWN0b3IgPT09IFwicHJvZFwiIHx8IGRkb0VudlByb2QpIHJldHVybjtcbiAgaWYgKCF3aW5kb3cuYmFjdG0pIHtcbiAgICB3aW5kb3cuYmFjdG0gPSB7fTtcbiAgICB3aW5kb3cuYmFjdG0uY2hhdF9kYXRhQ29sbGVjdG9yID0gW107XG4gIH1cblxuICBjb25zdCBsZXZlbE51bUV2ZW50cyA9IHtcbiAgICAxOiBcImluZm9cIixcbiAgICAyOiBcIndhcm5cIixcbiAgICAzOiBcImVycm9yXCIsXG4gIH07XG5cbiAgY29uc3QgbGV2ZWwgPSBsZXZlbE51bUV2ZW50c1tsZXZlbE51bV07XG5cbiAgY29uc3QgbmV3RXZlbnQgPSB7XG4gICAgZXZlbnROYW1lLFxuICAgIGRhdGEsXG4gIH07XG4gIGlmICh3aW5kb3cuc2hvd0NoYXREZWJ1Z0NvbnNvbGUpIHtcbiAgICBjb25zb2xlLmdyb3VwQ29sbGFwc2VkKGBCYWN0bSBHZW5lc3lzIENoYXQgLSAke2V2ZW50TmFtZX1gKTtcbiAgICBjb25zb2xlLmxvZyh7IGRhdGEsIGxldmVsIH0pO1xuICAgIGNvbnNvbGUuZ3JvdXBFbmQoKTtcbiAgfVxuXG4gIHdpbmRvdy5iYWN0bS5jaGF0X2RhdGFDb2xsZWN0b3IucHVzaCh7IGxldmVsLCBuZXdFdmVudCB9KTtcbn1cblxuLyoqXG4gKiBnZXRHU0lEXG4gKiBAcmV0dXJucyBudWxsIHx8IHN0cmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0R1NJRCgpIHtcbiAgY29uc3QgZ3NpZCA9IGdldENvb2tpZVN0b3JhZ2UoQ09PS0lFX0dTSUQpO1xuICBpZiAoaXNFbXB0eU9iaihnc2lkKSkge1xuICAgIHJldHVybiBcIlwiO1xuICB9XG4gIHJldHVybiBnc2lkO1xufVxuIiwibGV0IHBhcmVudERETyA9IHt9O1xubGV0IHBhcmVudE9yaWdpbiA9IFwiXCI7XG5sZXQgcGFyZW50SHJlZiA9IFwiXCI7XG5sZXQgcGFyZW50VGl0bGUgPSBcIlwiO1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0T3JpZ2luKHVybDogc3RyaW5nKXtcbiAgICBwYXJlbnRPcmlnaW4gPSB1cmw7XG4gICAgLy8gY29uc29sZS5sb2coJ2luc2lkZSBzZXRPcmlnaW4sIHBhcmVudCB1cmwgaXM6ICcsIHBhcmVudE9yaWdpbik7XG4gICAgZ2V0UXVlcnlTdHJpbmdzQW5kRERPKCk7XG59O1xuXG5mdW5jdGlvbiBnZXRRdWVyeVN0cmluZ3NBbmRERE8oKXtcbiAgICB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKFwiR0VUX1FTX0RET1wiLCBwYXJlbnRPcmlnaW4pXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0UGFyZW50SW5mbyAoZGF0YTogeyBocmVmOiBhbnk7IGRkbzogYW55OyB0aXRsZTogYW55OyB9KXtcbiAgICBjb25zdCB7IGhyZWYsIGRkbywgdGl0bGUgfSA9IGRhdGE7XG4gICAgcGFyZW50SHJlZiA9IGhyZWY7XG4gICAgcGFyZW50RERPID0gZGRvO1xuICAgIHBhcmVudFRpdGxlID0gdGl0bGU7XG4gICAgLy8gVGhlc2UgbmVlZCB0byBiZSByZW1vdmVkIGJlZm9yZSBTZXB0IHJlbGVhc2VcbiAgICAvLyBjb25zb2xlLmxvZygnaW5zaWRlIHNldFBhcmVudERETywgZGRvIGlzOiAnLCBwYXJlbnRERE8pO1xuICAgIC8vIGNvbnNvbGUubG9nKCdpbnNpZGUgc2V0UGFyZW50RERPLCBocmVmIGlzOiAnLCBwYXJlbnRIcmVmKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFBhcmVudEluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcGFyZW50RERPLFxuICAgICAgICBwYXJlbnRIcmVmLFxuICAgICAgICBwYXJlbnRUaXRsZSxcbiAgICB9XG59IiwiLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zICovXG52YXIgZyA9XG4gICh0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgJiYgZ2xvYmFsVGhpcykgfHxcbiAgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyAmJiBzZWxmKSB8fFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnICYmIGdsb2JhbCkgfHxcbiAge31cblxudmFyIHN1cHBvcnQgPSB7XG4gIHNlYXJjaFBhcmFtczogJ1VSTFNlYXJjaFBhcmFtcycgaW4gZyxcbiAgaXRlcmFibGU6ICdTeW1ib2wnIGluIGcgJiYgJ2l0ZXJhdG9yJyBpbiBTeW1ib2wsXG4gIGJsb2I6XG4gICAgJ0ZpbGVSZWFkZXInIGluIGcgJiZcbiAgICAnQmxvYicgaW4gZyAmJlxuICAgIChmdW5jdGlvbigpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIG5ldyBCbG9iKClcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfSkoKSxcbiAgZm9ybURhdGE6ICdGb3JtRGF0YScgaW4gZyxcbiAgYXJyYXlCdWZmZXI6ICdBcnJheUJ1ZmZlcicgaW4gZ1xufVxuXG5mdW5jdGlvbiBpc0RhdGFWaWV3KG9iaikge1xuICByZXR1cm4gb2JqICYmIERhdGFWaWV3LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKG9iailcbn1cblxuaWYgKHN1cHBvcnQuYXJyYXlCdWZmZXIpIHtcbiAgdmFyIHZpZXdDbGFzc2VzID0gW1xuICAgICdbb2JqZWN0IEludDhBcnJheV0nLFxuICAgICdbb2JqZWN0IFVpbnQ4QXJyYXldJyxcbiAgICAnW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0nLFxuICAgICdbb2JqZWN0IEludDE2QXJyYXldJyxcbiAgICAnW29iamVjdCBVaW50MTZBcnJheV0nLFxuICAgICdbb2JqZWN0IEludDMyQXJyYXldJyxcbiAgICAnW29iamVjdCBVaW50MzJBcnJheV0nLFxuICAgICdbb2JqZWN0IEZsb2F0MzJBcnJheV0nLFxuICAgICdbb2JqZWN0IEZsb2F0NjRBcnJheV0nXG4gIF1cblxuICB2YXIgaXNBcnJheUJ1ZmZlclZpZXcgPVxuICAgIEFycmF5QnVmZmVyLmlzVmlldyB8fFxuICAgIGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIG9iaiAmJiB2aWV3Q2xhc3Nlcy5pbmRleE9mKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopKSA+IC0xXG4gICAgfVxufVxuXG5mdW5jdGlvbiBub3JtYWxpemVOYW1lKG5hbWUpIHtcbiAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJykge1xuICAgIG5hbWUgPSBTdHJpbmcobmFtZSlcbiAgfVxuICBpZiAoL1teYS16MC05XFwtIyQlJicqKy5eX2B8fiFdL2kudGVzdChuYW1lKSB8fCBuYW1lID09PSAnJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgY2hhcmFjdGVyIGluIGhlYWRlciBmaWVsZCBuYW1lOiBcIicgKyBuYW1lICsgJ1wiJylcbiAgfVxuICByZXR1cm4gbmFtZS50b0xvd2VyQ2FzZSgpXG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZVZhbHVlKHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgdmFsdWUgPSBTdHJpbmcodmFsdWUpXG4gIH1cbiAgcmV0dXJuIHZhbHVlXG59XG5cbi8vIEJ1aWxkIGEgZGVzdHJ1Y3RpdmUgaXRlcmF0b3IgZm9yIHRoZSB2YWx1ZSBsaXN0XG5mdW5jdGlvbiBpdGVyYXRvckZvcihpdGVtcykge1xuICB2YXIgaXRlcmF0b3IgPSB7XG4gICAgbmV4dDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgdmFsdWUgPSBpdGVtcy5zaGlmdCgpXG4gICAgICByZXR1cm4ge2RvbmU6IHZhbHVlID09PSB1bmRlZmluZWQsIHZhbHVlOiB2YWx1ZX1cbiAgICB9XG4gIH1cblxuICBpZiAoc3VwcG9ydC5pdGVyYWJsZSkge1xuICAgIGl0ZXJhdG9yW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBpdGVyYXRvclxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBpdGVyYXRvclxufVxuXG5leHBvcnQgZnVuY3Rpb24gSGVhZGVycyhoZWFkZXJzKSB7XG4gIHRoaXMubWFwID0ge31cblxuICBpZiAoaGVhZGVycyBpbnN0YW5jZW9mIEhlYWRlcnMpIHtcbiAgICBoZWFkZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgIHRoaXMuYXBwZW5kKG5hbWUsIHZhbHVlKVxuICAgIH0sIHRoaXMpXG4gIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShoZWFkZXJzKSkge1xuICAgIGhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbihoZWFkZXIpIHtcbiAgICAgIGlmIChoZWFkZXIubGVuZ3RoICE9IDIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSGVhZGVycyBjb25zdHJ1Y3RvcjogZXhwZWN0ZWQgbmFtZS92YWx1ZSBwYWlyIHRvIGJlIGxlbmd0aCAyLCBmb3VuZCcgKyBoZWFkZXIubGVuZ3RoKVxuICAgICAgfVxuICAgICAgdGhpcy5hcHBlbmQoaGVhZGVyWzBdLCBoZWFkZXJbMV0pXG4gICAgfSwgdGhpcylcbiAgfSBlbHNlIGlmIChoZWFkZXJzKSB7XG4gICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoaGVhZGVycykuZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XG4gICAgICB0aGlzLmFwcGVuZChuYW1lLCBoZWFkZXJzW25hbWVdKVxuICAgIH0sIHRoaXMpXG4gIH1cbn1cblxuSGVhZGVycy5wcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgbmFtZSA9IG5vcm1hbGl6ZU5hbWUobmFtZSlcbiAgdmFsdWUgPSBub3JtYWxpemVWYWx1ZSh2YWx1ZSlcbiAgdmFyIG9sZFZhbHVlID0gdGhpcy5tYXBbbmFtZV1cbiAgdGhpcy5tYXBbbmFtZV0gPSBvbGRWYWx1ZSA/IG9sZFZhbHVlICsgJywgJyArIHZhbHVlIDogdmFsdWVcbn1cblxuSGVhZGVycy5wcm90b3R5cGVbJ2RlbGV0ZSddID0gZnVuY3Rpb24obmFtZSkge1xuICBkZWxldGUgdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV1cbn1cblxuSGVhZGVycy5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24obmFtZSkge1xuICBuYW1lID0gbm9ybWFsaXplTmFtZShuYW1lKVxuICByZXR1cm4gdGhpcy5oYXMobmFtZSkgPyB0aGlzLm1hcFtuYW1lXSA6IG51bGxcbn1cblxuSGVhZGVycy5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24obmFtZSkge1xuICByZXR1cm4gdGhpcy5tYXAuaGFzT3duUHJvcGVydHkobm9ybWFsaXplTmFtZShuYW1lKSlcbn1cblxuSGVhZGVycy5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV0gPSBub3JtYWxpemVWYWx1ZSh2YWx1ZSlcbn1cblxuSGVhZGVycy5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uKGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gIGZvciAodmFyIG5hbWUgaW4gdGhpcy5tYXApIHtcbiAgICBpZiAodGhpcy5tYXAuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgdGhpcy5tYXBbbmFtZV0sIG5hbWUsIHRoaXMpXG4gICAgfVxuICB9XG59XG5cbkhlYWRlcnMucHJvdG90eXBlLmtleXMgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGl0ZW1zID0gW11cbiAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG4gICAgaXRlbXMucHVzaChuYW1lKVxuICB9KVxuICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG59XG5cbkhlYWRlcnMucHJvdG90eXBlLnZhbHVlcyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgaXRlbXMgPSBbXVxuICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpdGVtcy5wdXNoKHZhbHVlKVxuICB9KVxuICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG59XG5cbkhlYWRlcnMucHJvdG90eXBlLmVudHJpZXMgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGl0ZW1zID0gW11cbiAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG4gICAgaXRlbXMucHVzaChbbmFtZSwgdmFsdWVdKVxuICB9KVxuICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG59XG5cbmlmIChzdXBwb3J0Lml0ZXJhYmxlKSB7XG4gIEhlYWRlcnMucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl0gPSBIZWFkZXJzLnByb3RvdHlwZS5lbnRyaWVzXG59XG5cbmZ1bmN0aW9uIGNvbnN1bWVkKGJvZHkpIHtcbiAgaWYgKGJvZHkuX25vQm9keSkgcmV0dXJuXG4gIGlmIChib2R5LmJvZHlVc2VkKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IoJ0FscmVhZHkgcmVhZCcpKVxuICB9XG4gIGJvZHkuYm9keVVzZWQgPSB0cnVlXG59XG5cbmZ1bmN0aW9uIGZpbGVSZWFkZXJSZWFkeShyZWFkZXIpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJlc29sdmUocmVhZGVyLnJlc3VsdClcbiAgICB9XG4gICAgcmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJlamVjdChyZWFkZXIuZXJyb3IpXG4gICAgfVxuICB9KVxufVxuXG5mdW5jdGlvbiByZWFkQmxvYkFzQXJyYXlCdWZmZXIoYmxvYikge1xuICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKVxuICB2YXIgcHJvbWlzZSA9IGZpbGVSZWFkZXJSZWFkeShyZWFkZXIpXG4gIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihibG9iKVxuICByZXR1cm4gcHJvbWlzZVxufVxuXG5mdW5jdGlvbiByZWFkQmxvYkFzVGV4dChibG9iKSB7XG4gIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpXG4gIHZhciBwcm9taXNlID0gZmlsZVJlYWRlclJlYWR5KHJlYWRlcilcbiAgdmFyIG1hdGNoID0gL2NoYXJzZXQ9KFtBLVphLXowLTlfLV0rKS8uZXhlYyhibG9iLnR5cGUpXG4gIHZhciBlbmNvZGluZyA9IG1hdGNoID8gbWF0Y2hbMV0gOiAndXRmLTgnXG4gIHJlYWRlci5yZWFkQXNUZXh0KGJsb2IsIGVuY29kaW5nKVxuICByZXR1cm4gcHJvbWlzZVxufVxuXG5mdW5jdGlvbiByZWFkQXJyYXlCdWZmZXJBc1RleHQoYnVmKSB7XG4gIHZhciB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoYnVmKVxuICB2YXIgY2hhcnMgPSBuZXcgQXJyYXkodmlldy5sZW5ndGgpXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB2aWV3Lmxlbmd0aDsgaSsrKSB7XG4gICAgY2hhcnNbaV0gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHZpZXdbaV0pXG4gIH1cbiAgcmV0dXJuIGNoYXJzLmpvaW4oJycpXG59XG5cbmZ1bmN0aW9uIGJ1ZmZlckNsb25lKGJ1Zikge1xuICBpZiAoYnVmLnNsaWNlKSB7XG4gICAgcmV0dXJuIGJ1Zi5zbGljZSgwKVxuICB9IGVsc2Uge1xuICAgIHZhciB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoYnVmLmJ5dGVMZW5ndGgpXG4gICAgdmlldy5zZXQobmV3IFVpbnQ4QXJyYXkoYnVmKSlcbiAgICByZXR1cm4gdmlldy5idWZmZXJcbiAgfVxufVxuXG5mdW5jdGlvbiBCb2R5KCkge1xuICB0aGlzLmJvZHlVc2VkID0gZmFsc2VcblxuICB0aGlzLl9pbml0Qm9keSA9IGZ1bmN0aW9uKGJvZHkpIHtcbiAgICAvKlxuICAgICAgZmV0Y2gtbW9jayB3cmFwcyB0aGUgUmVzcG9uc2Ugb2JqZWN0IGluIGFuIEVTNiBQcm94eSB0b1xuICAgICAgcHJvdmlkZSB1c2VmdWwgdGVzdCBoYXJuZXNzIGZlYXR1cmVzIHN1Y2ggYXMgZmx1c2guIEhvd2V2ZXIsIG9uXG4gICAgICBFUzUgYnJvd3NlcnMgd2l0aG91dCBmZXRjaCBvciBQcm94eSBzdXBwb3J0IHBvbGx5ZmlsbHMgbXVzdCBiZSB1c2VkO1xuICAgICAgdGhlIHByb3h5LXBvbGx5ZmlsbCBpcyB1bmFibGUgdG8gcHJveHkgYW4gYXR0cmlidXRlIHVubGVzcyBpdCBleGlzdHNcbiAgICAgIG9uIHRoZSBvYmplY3QgYmVmb3JlIHRoZSBQcm94eSBpcyBjcmVhdGVkLiBUaGlzIGNoYW5nZSBlbnN1cmVzXG4gICAgICBSZXNwb25zZS5ib2R5VXNlZCBleGlzdHMgb24gdGhlIGluc3RhbmNlLCB3aGlsZSBtYWludGFpbmluZyB0aGVcbiAgICAgIHNlbWFudGljIG9mIHNldHRpbmcgUmVxdWVzdC5ib2R5VXNlZCBpbiB0aGUgY29uc3RydWN0b3IgYmVmb3JlXG4gICAgICBfaW5pdEJvZHkgaXMgY2FsbGVkLlxuICAgICovXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtYXNzaWduXG4gICAgdGhpcy5ib2R5VXNlZCA9IHRoaXMuYm9keVVzZWRcbiAgICB0aGlzLl9ib2R5SW5pdCA9IGJvZHlcbiAgICBpZiAoIWJvZHkpIHtcbiAgICAgIHRoaXMuX25vQm9keSA9IHRydWU7XG4gICAgICB0aGlzLl9ib2R5VGV4dCA9ICcnXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMuX2JvZHlUZXh0ID0gYm9keVxuICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5ibG9iICYmIEJsb2IucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgIHRoaXMuX2JvZHlCbG9iID0gYm9keVxuICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5mb3JtRGF0YSAmJiBGb3JtRGF0YS5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuICAgICAgdGhpcy5fYm9keUZvcm1EYXRhID0gYm9keVxuICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5zZWFyY2hQYXJhbXMgJiYgVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICB0aGlzLl9ib2R5VGV4dCA9IGJvZHkudG9TdHJpbmcoKVxuICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5hcnJheUJ1ZmZlciAmJiBzdXBwb3J0LmJsb2IgJiYgaXNEYXRhVmlldyhib2R5KSkge1xuICAgICAgdGhpcy5fYm9keUFycmF5QnVmZmVyID0gYnVmZmVyQ2xvbmUoYm9keS5idWZmZXIpXG4gICAgICAvLyBJRSAxMC0xMSBjYW4ndCBoYW5kbGUgYSBEYXRhVmlldyBib2R5LlxuICAgICAgdGhpcy5fYm9keUluaXQgPSBuZXcgQmxvYihbdGhpcy5fYm9keUFycmF5QnVmZmVyXSlcbiAgICB9IGVsc2UgaWYgKHN1cHBvcnQuYXJyYXlCdWZmZXIgJiYgKEFycmF5QnVmZmVyLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpIHx8IGlzQXJyYXlCdWZmZXJWaWV3KGJvZHkpKSkge1xuICAgICAgdGhpcy5fYm9keUFycmF5QnVmZmVyID0gYnVmZmVyQ2xvbmUoYm9keSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYm9keVRleHQgPSBib2R5ID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGJvZHkpXG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKSkge1xuICAgICAgaWYgKHR5cGVvZiBib2R5ID09PSAnc3RyaW5nJykge1xuICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCAndGV4dC9wbGFpbjtjaGFyc2V0PVVURi04JylcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUJsb2IgJiYgdGhpcy5fYm9keUJsb2IudHlwZSkge1xuICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCB0aGlzLl9ib2R5QmxvYi50eXBlKVxuICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LnNlYXJjaFBhcmFtcyAmJiBVUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PVVURi04JylcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoc3VwcG9ydC5ibG9iKSB7XG4gICAgdGhpcy5ibG9iID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVqZWN0ZWQgPSBjb25zdW1lZCh0aGlzKVxuICAgICAgaWYgKHJlamVjdGVkKSB7XG4gICAgICAgIHJldHVybiByZWplY3RlZFxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fYm9keUJsb2IpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5QmxvYilcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUFycmF5QnVmZmVyKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEJsb2IoW3RoaXMuX2JvZHlBcnJheUJ1ZmZlcl0pKVxuICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5Rm9ybURhdGEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgcmVhZCBGb3JtRGF0YSBib2R5IGFzIGJsb2InKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQmxvYihbdGhpcy5fYm9keVRleHRdKSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB0aGlzLmFycmF5QnVmZmVyID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcikge1xuICAgICAgdmFyIGlzQ29uc3VtZWQgPSBjb25zdW1lZCh0aGlzKVxuICAgICAgaWYgKGlzQ29uc3VtZWQpIHtcbiAgICAgICAgcmV0dXJuIGlzQ29uc3VtZWRcbiAgICAgIH0gZWxzZSBpZiAoQXJyYXlCdWZmZXIuaXNWaWV3KHRoaXMuX2JvZHlBcnJheUJ1ZmZlcikpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShcbiAgICAgICAgICB0aGlzLl9ib2R5QXJyYXlCdWZmZXIuYnVmZmVyLnNsaWNlKFxuICAgICAgICAgICAgdGhpcy5fYm9keUFycmF5QnVmZmVyLmJ5dGVPZmZzZXQsXG4gICAgICAgICAgICB0aGlzLl9ib2R5QXJyYXlCdWZmZXIuYnl0ZU9mZnNldCArIHRoaXMuX2JvZHlBcnJheUJ1ZmZlci5ieXRlTGVuZ3RoXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcilcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHN1cHBvcnQuYmxvYikge1xuICAgICAgcmV0dXJuIHRoaXMuYmxvYigpLnRoZW4ocmVhZEJsb2JBc0FycmF5QnVmZmVyKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCByZWFkIGFzIEFycmF5QnVmZmVyJylcbiAgICB9XG4gIH1cblxuICB0aGlzLnRleHQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcmVqZWN0ZWQgPSBjb25zdW1lZCh0aGlzKVxuICAgIGlmIChyZWplY3RlZCkge1xuICAgICAgcmV0dXJuIHJlamVjdGVkXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2JvZHlCbG9iKSB7XG4gICAgICByZXR1cm4gcmVhZEJsb2JBc1RleHQodGhpcy5fYm9keUJsb2IpXG4gICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVhZEFycmF5QnVmZmVyQXNUZXh0KHRoaXMuX2JvZHlBcnJheUJ1ZmZlcikpXG4gICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5Rm9ybURhdGEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignY291bGQgbm90IHJlYWQgRm9ybURhdGEgYm9keSBhcyB0ZXh0JylcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5VGV4dClcbiAgICB9XG4gIH1cblxuICBpZiAoc3VwcG9ydC5mb3JtRGF0YSkge1xuICAgIHRoaXMuZm9ybURhdGEgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnRleHQoKS50aGVuKGRlY29kZSlcbiAgICB9XG4gIH1cblxuICB0aGlzLmpzb24gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50ZXh0KCkudGhlbihKU09OLnBhcnNlKVxuICB9XG5cbiAgcmV0dXJuIHRoaXNcbn1cblxuLy8gSFRUUCBtZXRob2RzIHdob3NlIGNhcGl0YWxpemF0aW9uIHNob3VsZCBiZSBub3JtYWxpemVkXG52YXIgbWV0aG9kcyA9IFsnQ09OTkVDVCcsICdERUxFVEUnLCAnR0VUJywgJ0hFQUQnLCAnT1BUSU9OUycsICdQQVRDSCcsICdQT1NUJywgJ1BVVCcsICdUUkFDRSddXG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZU1ldGhvZChtZXRob2QpIHtcbiAgdmFyIHVwY2FzZWQgPSBtZXRob2QudG9VcHBlckNhc2UoKVxuICByZXR1cm4gbWV0aG9kcy5pbmRleE9mKHVwY2FzZWQpID4gLTEgPyB1cGNhc2VkIDogbWV0aG9kXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBSZXF1ZXN0KGlucHV0LCBvcHRpb25zKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBSZXF1ZXN0KSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1BsZWFzZSB1c2UgdGhlIFwibmV3XCIgb3BlcmF0b3IsIHRoaXMgRE9NIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uJylcbiAgfVxuXG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9XG4gIHZhciBib2R5ID0gb3B0aW9ucy5ib2R5XG5cbiAgaWYgKGlucHV0IGluc3RhbmNlb2YgUmVxdWVzdCkge1xuICAgIGlmIChpbnB1dC5ib2R5VXNlZCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQWxyZWFkeSByZWFkJylcbiAgICB9XG4gICAgdGhpcy51cmwgPSBpbnB1dC51cmxcbiAgICB0aGlzLmNyZWRlbnRpYWxzID0gaW5wdXQuY3JlZGVudGlhbHNcbiAgICBpZiAoIW9wdGlvbnMuaGVhZGVycykge1xuICAgICAgdGhpcy5oZWFkZXJzID0gbmV3IEhlYWRlcnMoaW5wdXQuaGVhZGVycylcbiAgICB9XG4gICAgdGhpcy5tZXRob2QgPSBpbnB1dC5tZXRob2RcbiAgICB0aGlzLm1vZGUgPSBpbnB1dC5tb2RlXG4gICAgdGhpcy5zaWduYWwgPSBpbnB1dC5zaWduYWxcbiAgICBpZiAoIWJvZHkgJiYgaW5wdXQuX2JvZHlJbml0ICE9IG51bGwpIHtcbiAgICAgIGJvZHkgPSBpbnB1dC5fYm9keUluaXRcbiAgICAgIGlucHV0LmJvZHlVc2VkID0gdHJ1ZVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aGlzLnVybCA9IFN0cmluZyhpbnB1dClcbiAgfVxuXG4gIHRoaXMuY3JlZGVudGlhbHMgPSBvcHRpb25zLmNyZWRlbnRpYWxzIHx8IHRoaXMuY3JlZGVudGlhbHMgfHwgJ3NhbWUtb3JpZ2luJ1xuICBpZiAob3B0aW9ucy5oZWFkZXJzIHx8ICF0aGlzLmhlYWRlcnMpIHtcbiAgICB0aGlzLmhlYWRlcnMgPSBuZXcgSGVhZGVycyhvcHRpb25zLmhlYWRlcnMpXG4gIH1cbiAgdGhpcy5tZXRob2QgPSBub3JtYWxpemVNZXRob2Qob3B0aW9ucy5tZXRob2QgfHwgdGhpcy5tZXRob2QgfHwgJ0dFVCcpXG4gIHRoaXMubW9kZSA9IG9wdGlvbnMubW9kZSB8fCB0aGlzLm1vZGUgfHwgbnVsbFxuICB0aGlzLnNpZ25hbCA9IG9wdGlvbnMuc2lnbmFsIHx8IHRoaXMuc2lnbmFsIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCdBYm9ydENvbnRyb2xsZXInIGluIGcpIHtcbiAgICAgIHZhciBjdHJsID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgcmV0dXJuIGN0cmwuc2lnbmFsO1xuICAgIH1cbiAgfSgpKTtcbiAgdGhpcy5yZWZlcnJlciA9IG51bGxcblxuICBpZiAoKHRoaXMubWV0aG9kID09PSAnR0VUJyB8fCB0aGlzLm1ldGhvZCA9PT0gJ0hFQUQnKSAmJiBib2R5KSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQm9keSBub3QgYWxsb3dlZCBmb3IgR0VUIG9yIEhFQUQgcmVxdWVzdHMnKVxuICB9XG4gIHRoaXMuX2luaXRCb2R5KGJvZHkpXG5cbiAgaWYgKHRoaXMubWV0aG9kID09PSAnR0VUJyB8fCB0aGlzLm1ldGhvZCA9PT0gJ0hFQUQnKSB7XG4gICAgaWYgKG9wdGlvbnMuY2FjaGUgPT09ICduby1zdG9yZScgfHwgb3B0aW9ucy5jYWNoZSA9PT0gJ25vLWNhY2hlJykge1xuICAgICAgLy8gU2VhcmNoIGZvciBhICdfJyBwYXJhbWV0ZXIgaW4gdGhlIHF1ZXJ5IHN0cmluZ1xuICAgICAgdmFyIHJlUGFyYW1TZWFyY2ggPSAvKFs/Jl0pXz1bXiZdKi9cbiAgICAgIGlmIChyZVBhcmFtU2VhcmNoLnRlc3QodGhpcy51cmwpKSB7XG4gICAgICAgIC8vIElmIGl0IGFscmVhZHkgZXhpc3RzIHRoZW4gc2V0IHRoZSB2YWx1ZSB3aXRoIHRoZSBjdXJyZW50IHRpbWVcbiAgICAgICAgdGhpcy51cmwgPSB0aGlzLnVybC5yZXBsYWNlKHJlUGFyYW1TZWFyY2gsICckMV89JyArIG5ldyBEYXRlKCkuZ2V0VGltZSgpKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gT3RoZXJ3aXNlIGFkZCBhIG5ldyAnXycgcGFyYW1ldGVyIHRvIHRoZSBlbmQgd2l0aCB0aGUgY3VycmVudCB0aW1lXG4gICAgICAgIHZhciByZVF1ZXJ5U3RyaW5nID0gL1xcPy9cbiAgICAgICAgdGhpcy51cmwgKz0gKHJlUXVlcnlTdHJpbmcudGVzdCh0aGlzLnVybCkgPyAnJicgOiAnPycpICsgJ189JyArIG5ldyBEYXRlKCkuZ2V0VGltZSgpXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cblJlcXVlc3QucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgUmVxdWVzdCh0aGlzLCB7Ym9keTogdGhpcy5fYm9keUluaXR9KVxufVxuXG5mdW5jdGlvbiBkZWNvZGUoYm9keSkge1xuICB2YXIgZm9ybSA9IG5ldyBGb3JtRGF0YSgpXG4gIGJvZHlcbiAgICAudHJpbSgpXG4gICAgLnNwbGl0KCcmJylcbiAgICAuZm9yRWFjaChmdW5jdGlvbihieXRlcykge1xuICAgICAgaWYgKGJ5dGVzKSB7XG4gICAgICAgIHZhciBzcGxpdCA9IGJ5dGVzLnNwbGl0KCc9JylcbiAgICAgICAgdmFyIG5hbWUgPSBzcGxpdC5zaGlmdCgpLnJlcGxhY2UoL1xcKy9nLCAnICcpXG4gICAgICAgIHZhciB2YWx1ZSA9IHNwbGl0LmpvaW4oJz0nKS5yZXBsYWNlKC9cXCsvZywgJyAnKVxuICAgICAgICBmb3JtLmFwcGVuZChkZWNvZGVVUklDb21wb25lbnQobmFtZSksIGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpXG4gICAgICB9XG4gICAgfSlcbiAgcmV0dXJuIGZvcm1cbn1cblxuZnVuY3Rpb24gcGFyc2VIZWFkZXJzKHJhd0hlYWRlcnMpIHtcbiAgdmFyIGhlYWRlcnMgPSBuZXcgSGVhZGVycygpXG4gIC8vIFJlcGxhY2UgaW5zdGFuY2VzIG9mIFxcclxcbiBhbmQgXFxuIGZvbGxvd2VkIGJ5IGF0IGxlYXN0IG9uZSBzcGFjZSBvciBob3Jpem9udGFsIHRhYiB3aXRoIGEgc3BhY2VcbiAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzcyMzAjc2VjdGlvbi0zLjJcbiAgdmFyIHByZVByb2Nlc3NlZEhlYWRlcnMgPSByYXdIZWFkZXJzLnJlcGxhY2UoL1xccj9cXG5bXFx0IF0rL2csICcgJylcbiAgLy8gQXZvaWRpbmcgc3BsaXQgdmlhIHJlZ2V4IHRvIHdvcmsgYXJvdW5kIGEgY29tbW9uIElFMTEgYnVnIHdpdGggdGhlIGNvcmUtanMgMy42LjAgcmVnZXggcG9seWZpbGxcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2dpdGh1Yi9mZXRjaC9pc3N1ZXMvNzQ4XG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy83NTFcbiAgcHJlUHJvY2Vzc2VkSGVhZGVyc1xuICAgIC5zcGxpdCgnXFxyJylcbiAgICAubWFwKGZ1bmN0aW9uKGhlYWRlcikge1xuICAgICAgcmV0dXJuIGhlYWRlci5pbmRleE9mKCdcXG4nKSA9PT0gMCA/IGhlYWRlci5zdWJzdHIoMSwgaGVhZGVyLmxlbmd0aCkgOiBoZWFkZXJcbiAgICB9KVxuICAgIC5mb3JFYWNoKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgIHZhciBwYXJ0cyA9IGxpbmUuc3BsaXQoJzonKVxuICAgICAgdmFyIGtleSA9IHBhcnRzLnNoaWZ0KCkudHJpbSgpXG4gICAgICBpZiAoa2V5KSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IHBhcnRzLmpvaW4oJzonKS50cmltKClcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBoZWFkZXJzLmFwcGVuZChrZXksIHZhbHVlKVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUud2FybignUmVzcG9uc2UgJyArIGVycm9yLm1lc3NhZ2UpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICByZXR1cm4gaGVhZGVyc1xufVxuXG5Cb2R5LmNhbGwoUmVxdWVzdC5wcm90b3R5cGUpXG5cbmV4cG9ydCBmdW5jdGlvbiBSZXNwb25zZShib2R5SW5pdCwgb3B0aW9ucykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUmVzcG9uc2UpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUGxlYXNlIHVzZSB0aGUgXCJuZXdcIiBvcGVyYXRvciwgdGhpcyBET00gb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi4nKVxuICB9XG4gIGlmICghb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSB7fVxuICB9XG5cbiAgdGhpcy50eXBlID0gJ2RlZmF1bHQnXG4gIHRoaXMuc3RhdHVzID0gb3B0aW9ucy5zdGF0dXMgPT09IHVuZGVmaW5lZCA/IDIwMCA6IG9wdGlvbnMuc3RhdHVzXG4gIGlmICh0aGlzLnN0YXR1cyA8IDIwMCB8fCB0aGlzLnN0YXR1cyA+IDU5OSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiRmFpbGVkIHRvIGNvbnN0cnVjdCAnUmVzcG9uc2UnOiBUaGUgc3RhdHVzIHByb3ZpZGVkICgwKSBpcyBvdXRzaWRlIHRoZSByYW5nZSBbMjAwLCA1OTldLlwiKVxuICB9XG4gIHRoaXMub2sgPSB0aGlzLnN0YXR1cyA+PSAyMDAgJiYgdGhpcy5zdGF0dXMgPCAzMDBcbiAgdGhpcy5zdGF0dXNUZXh0ID0gb3B0aW9ucy5zdGF0dXNUZXh0ID09PSB1bmRlZmluZWQgPyAnJyA6ICcnICsgb3B0aW9ucy5zdGF0dXNUZXh0XG4gIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycylcbiAgdGhpcy51cmwgPSBvcHRpb25zLnVybCB8fCAnJ1xuICB0aGlzLl9pbml0Qm9keShib2R5SW5pdClcbn1cblxuQm9keS5jYWxsKFJlc3BvbnNlLnByb3RvdHlwZSlcblxuUmVzcG9uc2UucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgUmVzcG9uc2UodGhpcy5fYm9keUluaXQsIHtcbiAgICBzdGF0dXM6IHRoaXMuc3RhdHVzLFxuICAgIHN0YXR1c1RleHQ6IHRoaXMuc3RhdHVzVGV4dCxcbiAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh0aGlzLmhlYWRlcnMpLFxuICAgIHVybDogdGhpcy51cmxcbiAgfSlcbn1cblxuUmVzcG9uc2UuZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHJlc3BvbnNlID0gbmV3IFJlc3BvbnNlKG51bGwsIHtzdGF0dXM6IDIwMCwgc3RhdHVzVGV4dDogJyd9KVxuICByZXNwb25zZS5vayA9IGZhbHNlXG4gIHJlc3BvbnNlLnN0YXR1cyA9IDBcbiAgcmVzcG9uc2UudHlwZSA9ICdlcnJvcidcbiAgcmV0dXJuIHJlc3BvbnNlXG59XG5cbnZhciByZWRpcmVjdFN0YXR1c2VzID0gWzMwMSwgMzAyLCAzMDMsIDMwNywgMzA4XVxuXG5SZXNwb25zZS5yZWRpcmVjdCA9IGZ1bmN0aW9uKHVybCwgc3RhdHVzKSB7XG4gIGlmIChyZWRpcmVjdFN0YXR1c2VzLmluZGV4T2Yoc3RhdHVzKSA9PT0gLTEpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW52YWxpZCBzdGF0dXMgY29kZScpXG4gIH1cblxuICByZXR1cm4gbmV3IFJlc3BvbnNlKG51bGwsIHtzdGF0dXM6IHN0YXR1cywgaGVhZGVyczoge2xvY2F0aW9uOiB1cmx9fSlcbn1cblxuZXhwb3J0IHZhciBET01FeGNlcHRpb24gPSBnLkRPTUV4Y2VwdGlvblxudHJ5IHtcbiAgbmV3IERPTUV4Y2VwdGlvbigpXG59IGNhdGNoIChlcnIpIHtcbiAgRE9NRXhjZXB0aW9uID0gZnVuY3Rpb24obWVzc2FnZSwgbmFtZSkge1xuICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2VcbiAgICB0aGlzLm5hbWUgPSBuYW1lXG4gICAgdmFyIGVycm9yID0gRXJyb3IobWVzc2FnZSlcbiAgICB0aGlzLnN0YWNrID0gZXJyb3Iuc3RhY2tcbiAgfVxuICBET01FeGNlcHRpb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpXG4gIERPTUV4Y2VwdGlvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBET01FeGNlcHRpb25cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZldGNoKGlucHV0LCBpbml0KSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YXIgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KGlucHV0LCBpbml0KVxuXG4gICAgaWYgKHJlcXVlc3Quc2lnbmFsICYmIHJlcXVlc3Quc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgIHJldHVybiByZWplY3QobmV3IERPTUV4Y2VwdGlvbignQWJvcnRlZCcsICdBYm9ydEVycm9yJykpXG4gICAgfVxuXG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpXG5cbiAgICBmdW5jdGlvbiBhYm9ydFhocigpIHtcbiAgICAgIHhoci5hYm9ydCgpXG4gICAgfVxuXG4gICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgIHN0YXR1c1RleHQ6IHhoci5zdGF0dXNUZXh0LFxuICAgICAgICBoZWFkZXJzOiBwYXJzZUhlYWRlcnMoeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpIHx8ICcnKVxuICAgICAgfVxuICAgICAgLy8gVGhpcyBjaGVjayBpZiBzcGVjaWZpY2FsbHkgZm9yIHdoZW4gYSB1c2VyIGZldGNoZXMgYSBmaWxlIGxvY2FsbHkgZnJvbSB0aGUgZmlsZSBzeXN0ZW1cbiAgICAgIC8vIE9ubHkgaWYgdGhlIHN0YXR1cyBpcyBvdXQgb2YgYSBub3JtYWwgcmFuZ2VcbiAgICAgIGlmIChyZXF1ZXN0LnVybC5pbmRleE9mKCdmaWxlOi8vJykgPT09IDAgJiYgKHhoci5zdGF0dXMgPCAyMDAgfHwgeGhyLnN0YXR1cyA+IDU5OSkpIHtcbiAgICAgICAgb3B0aW9ucy5zdGF0dXMgPSAyMDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcHRpb25zLnN0YXR1cyA9IHhoci5zdGF0dXM7XG4gICAgICB9XG4gICAgICBvcHRpb25zLnVybCA9ICdyZXNwb25zZVVSTCcgaW4geGhyID8geGhyLnJlc3BvbnNlVVJMIDogb3B0aW9ucy5oZWFkZXJzLmdldCgnWC1SZXF1ZXN0LVVSTCcpXG4gICAgICB2YXIgYm9keSA9ICdyZXNwb25zZScgaW4geGhyID8geGhyLnJlc3BvbnNlIDogeGhyLnJlc3BvbnNlVGV4dFxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgcmVzb2x2ZShuZXcgUmVzcG9uc2UoYm9keSwgb3B0aW9ucykpXG4gICAgICB9LCAwKVxuICAgIH1cblxuICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICByZWplY3QobmV3IFR5cGVFcnJvcignTmV0d29yayByZXF1ZXN0IGZhaWxlZCcpKVxuICAgICAgfSwgMClcbiAgICB9XG5cbiAgICB4aHIub250aW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICByZWplY3QobmV3IFR5cGVFcnJvcignTmV0d29yayByZXF1ZXN0IHRpbWVkIG91dCcpKVxuICAgICAgfSwgMClcbiAgICB9XG5cbiAgICB4aHIub25hYm9ydCA9IGZ1bmN0aW9uKCkge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KG5ldyBET01FeGNlcHRpb24oJ0Fib3J0ZWQnLCAnQWJvcnRFcnJvcicpKVxuICAgICAgfSwgMClcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmaXhVcmwodXJsKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gdXJsID09PSAnJyAmJiBnLmxvY2F0aW9uLmhyZWYgPyBnLmxvY2F0aW9uLmhyZWYgOiB1cmxcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIHVybFxuICAgICAgfVxuICAgIH1cblxuICAgIHhoci5vcGVuKHJlcXVlc3QubWV0aG9kLCBmaXhVcmwocmVxdWVzdC51cmwpLCB0cnVlKVxuXG4gICAgaWYgKHJlcXVlc3QuY3JlZGVudGlhbHMgPT09ICdpbmNsdWRlJykge1xuICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IHRydWVcbiAgICB9IGVsc2UgaWYgKHJlcXVlc3QuY3JlZGVudGlhbHMgPT09ICdvbWl0Jykge1xuICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKCdyZXNwb25zZVR5cGUnIGluIHhocikge1xuICAgICAgaWYgKHN1cHBvcnQuYmxvYikge1xuICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2Jsb2InXG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBzdXBwb3J0LmFycmF5QnVmZmVyXG4gICAgICApIHtcbiAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdhcnJheWJ1ZmZlcidcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaW5pdCAmJiB0eXBlb2YgaW5pdC5oZWFkZXJzID09PSAnb2JqZWN0JyAmJiAhKGluaXQuaGVhZGVycyBpbnN0YW5jZW9mIEhlYWRlcnMgfHwgKGcuSGVhZGVycyAmJiBpbml0LmhlYWRlcnMgaW5zdGFuY2VvZiBnLkhlYWRlcnMpKSkge1xuICAgICAgdmFyIG5hbWVzID0gW107XG4gICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhpbml0LmhlYWRlcnMpLmZvckVhY2goZnVuY3Rpb24obmFtZSkge1xuICAgICAgICBuYW1lcy5wdXNoKG5vcm1hbGl6ZU5hbWUobmFtZSkpXG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKG5hbWUsIG5vcm1hbGl6ZVZhbHVlKGluaXQuaGVhZGVyc1tuYW1lXSkpXG4gICAgICB9KVxuICAgICAgcmVxdWVzdC5oZWFkZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgICAgaWYgKG5hbWVzLmluZGV4T2YobmFtZSkgPT09IC0xKSB7XG4gICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIobmFtZSwgdmFsdWUpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcXVlc3QuaGVhZGVycy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKG5hbWUsIHZhbHVlKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAocmVxdWVzdC5zaWduYWwpIHtcbiAgICAgIHJlcXVlc3Quc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgYWJvcnRYaHIpXG5cbiAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gRE9ORSAoc3VjY2VzcyBvciBmYWlsdXJlKVxuICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQpIHtcbiAgICAgICAgICByZXF1ZXN0LnNpZ25hbC5yZW1vdmVFdmVudExpc3RlbmVyKCdhYm9ydCcsIGFib3J0WGhyKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgeGhyLnNlbmQodHlwZW9mIHJlcXVlc3QuX2JvZHlJbml0ID09PSAndW5kZWZpbmVkJyA/IG51bGwgOiByZXF1ZXN0Ll9ib2R5SW5pdClcbiAgfSlcbn1cblxuZmV0Y2gucG9seWZpbGwgPSB0cnVlXG5cbmlmICghZy5mZXRjaCkge1xuICBnLmZldGNoID0gZmV0Y2hcbiAgZy5IZWFkZXJzID0gSGVhZGVyc1xuICBnLlJlcXVlc3QgPSBSZXF1ZXN0XG4gIGcuUmVzcG9uc2UgPSBSZXNwb25zZVxufVxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0ZnVuY3Rpb24oKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG5cdFx0ZnVuY3Rpb24oKSB7IHJldHVybiBtb2R1bGU7IH07XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBkZWZpbml0aW9uKSB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqLCBwcm9wKSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTsgfSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiLy8gQHRzLW5vY2hlY2tcblxuLyoqXG4gKiBAZmlsZSBCYWN0bS5nZW5lc3lzXG4gKi9cbmltcG9ydCBcIndoYXR3Zy1mZXRjaFwiO1xuaW1wb3J0IHBvc3RNZXNzYWdlcyBmcm9tIFwiLi9tZXNzYWdpbmcvcG9zdC1tZXNzYWdlc1wiO1xuaW1wb3J0IGFkZFB1YlN1YiBmcm9tIFwiLi9zaXRlLXB1Yi1zdWIvYWRkLXB1Yi1zdWJcIjtcbmltcG9ydCBzdWJzY3JpcHRpb25zIGZyb20gXCIuL3NpdGUtcHViLXN1Yi9zdWJzY3JpcHRpb25zXCI7XG5pbXBvcnQgZG9jdW1lbnRFdmVudHMgZnJvbSBcIi4vc2l0ZS1wdWItc3ViL2V2ZW50c1wiO1xuaW1wb3J0IGNvbWV0ZExpc3RlbmVycyBmcm9tIFwiLi9tZXNzYWdpbmcvbWV0YVwiO1xuaW1wb3J0IHtcbiAgQ09NRVREX1JFUVVFU1RfQ0hBVCxcbiAgR0VORVNZU19WQUxJREFURV9JUF9BRERSRVNTLFxuICBPR1dfVVJMLFxufSBmcm9tIFwiLi9zaXRlLXB1Yi1zdWIvc2l0ZS1nbG9iYWxzXCI7XG5pbXBvcnQgeyBwdWJsaXNoV2luZG93LCBxdWVyeVN0cmluZ1BhcnNlIH0gZnJvbSBcIi4vc2l0ZS11dGlsaXRpZXMvdXRpbGl0aWVzXCI7XG5pbXBvcnQgaXNWNiBmcm9tIFwiLi9zaXRlLXV0aWxpdGllcy91dGlsaXRpZXMvaXNWNlwiO1xuXG5jb25zdCBpbml0Q2hhdCA9ICgpID0+IHtcbiAgYWRkUHViU3ViKCk7XG4gIHBvc3RNZXNzYWdlcygpO1xuICBkb2N1bWVudEV2ZW50cygpO1xuICBzdWJzY3JpcHRpb25zKCk7XG4gIGNvbWV0ZExpc3RlbmVycygpO1xuICBiYWN0bS5vbihcImFmdGVyUGFnZXZpZXdcIiwgKGRhdGE6IGFueSkgPT4ge1xuICAgIHB1Ymxpc2hXaW5kb3coQ09NRVREX1JFUVVFU1RfQ0hBVCwgZGF0YSk7XG4gIH0pO1xuICBpZiAod2luZG93Py5zcGFydGE/LmNoYXQ/LnNpdGVNb2R1bGVMb2FkZWQpIHtcbiAgICBUZWFsaXVtUHViU3ViLnB1Ymxpc2goR0VORVNZU19WQUxJREFURV9JUF9BRERSRVNTLCB7IG9nd1VybDogT0dXX1VSTCB9KTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCAkYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpO1xuICAgICRib2R5Py5hZGRFdmVudExpc3RlbmVyKFwiZ3QtY2hhdC1zaXRlLW1vdWxkZS5sb2FkZWRcIiwgKCkgPT4ge1xuICAgICAgVGVhbGl1bVB1YlN1Yi5wdWJsaXNoKEdFTkVTWVNfVkFMSURBVEVfSVBfQUREUkVTUywgeyBvZ3dVcmw6IE9HV19VUkwgfSk7XG4gICAgfSk7XG4gIH1cbn07XG5cbmlmIChcbiAgd2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZihcIi9jaGF0L1wiKSA+IC0xIHx8XG4gIHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoXCIvZ3QtY2hhdC9cIikgPiAtMVxuKSB7XG4gIGluaXRDaGF0KCk7XG59XG4iXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwiX3R5cGVvZiIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsIm9yZyIsImNvbWV0ZCIsIlNjaGVkdWxlciIsIl9pZHMiLCJfdGFza3MiLCJyZWdpc3RlciIsImZ1bmt0aW9uIiwiaWQiLCJ1bnJlZ2lzdGVyIiwic2V0VGltZW91dCIsImRlbGF5Iiwid2luZG93IiwiY2xlYXJUaW1lb3V0IiwiV29ya2VyU2NoZWR1bGVyIiwic2VsZiIsIm9ubWVzc2FnZSIsImUiLCJjbWQiLCJkYXRhIiwidHlwZSIsInBvc3RNZXNzYWdlIiwiVXRpbHMiLCJpc1N0cmluZyIsInZhbHVlIiwidW5kZWZpbmVkIiwiU3RyaW5nIiwiaXNBcnJheSIsIkFycmF5IiwiaW5BcnJheSIsImVsZW1lbnQiLCJhcnJheSIsImkiLCJsZW5ndGgiLCJUcmFuc3BvcnRSZWdpc3RyeSIsIl90eXBlcyIsIl90cmFuc3BvcnRzIiwiZ2V0VHJhbnNwb3J0VHlwZXMiLCJzbGljZSIsImZpbmRUcmFuc3BvcnRUeXBlcyIsInZlcnNpb24iLCJjcm9zc0RvbWFpbiIsInVybCIsInJlc3VsdCIsImFjY2VwdCIsInB1c2giLCJuZWdvdGlhdGVUcmFuc3BvcnQiLCJ0eXBlcyIsImoiLCJ0cmFuc3BvcnQiLCJhZGQiLCJpbmRleCIsImV4aXN0aW5nIiwic3BsaWNlIiwiZmluZCIsInJlbW92ZSIsImNsZWFyIiwicmVzZXQiLCJpbml0IiwiVHJhbnNwb3J0IiwiX3R5cGUiLCJfY29tZXRkIiwiX3VybCIsInJlZ2lzdGVyZWQiLCJ1bnJlZ2lzdGVyZWQiLCJfZGVidWciLCJhcHBseSIsImFyZ3VtZW50cyIsIl9taXhpbiIsImdldENvbmZpZ3VyYXRpb24iLCJnZXRBZHZpY2UiLCJjb252ZXJ0VG9NZXNzYWdlcyIsInJlc3BvbnNlIiwiSlNPTiIsInBhcnNlIiwieCIsIk9iamVjdCIsImdldFR5cGUiLCJnZXRVUkwiLCJzZXRVUkwiLCJzZW5kIiwiZW52ZWxvcGUiLCJtZXRhQ29ubmVjdCIsImFib3J0IiwidG9TdHJpbmciLCJkZXJpdmUiLCJiYXNlT2JqZWN0IiwiRiIsInByb3RvdHlwZSIsIlJlcXVlc3RUcmFuc3BvcnQiLCJfc3VwZXIiLCJfc2VsZiIsIl9yZXF1ZXN0SWRzIiwiX21ldGFDb25uZWN0UmVxdWVzdCIsIl9yZXF1ZXN0cyIsIl9lbnZlbG9wZXMiLCJfY29hbGVzY2VFbnZlbG9wZXMiLCJlbnZlbG9wZUFuZFJlcXVlc3QiLCJuZXdFbnZlbG9wZSIsIm5ld1JlcXVlc3QiLCJzeW5jIiwic2hpZnQiLCJtZXNzYWdlcyIsImNvbmNhdCIsIl90cmFuc3BvcnRTZW5kIiwicmVxdWVzdCIsInRyYW5zcG9ydFNlbmQiLCJleHBpcmVkIiwibWF4RGVsYXkiLCJtYXhOZXR3b3JrRGVsYXkiLCJ0aW1lb3V0IiwiZXJyb3JNZXNzYWdlIiwiZmFpbHVyZSIsInJlYXNvbiIsInhociIsImh0dHBDb2RlIiwieGhyU3RhdHVzIiwiYWJvcnRYSFIiLCJjb21wbGV0ZSIsIm9uRmFpbHVyZSIsIl9xdWV1ZVNlbmQiLCJyZXF1ZXN0SWQiLCJtYXhDb25uZWN0aW9ucyIsImNhbGwiLCJfbWV0YUNvbm5lY3RDb21wbGV0ZSIsIl9jb21wbGV0ZSIsInN1Y2Nlc3MiLCJuZXh0RW52ZWxvcGUiLCJuZXh0UmVxdWVzdCIsImF1dG9CYXRjaCIsInRyYW5zcG9ydFN1Y2Nlc3MiLCJyZXNwb25zZXMiLCJvblN1Y2Nlc3MiLCJ0cmFuc3BvcnRGYWlsdXJlIiwiX21ldGFDb25uZWN0U2VuZCIsIm1ldGFDb25uZWN0UmVxdWVzdCIsInN0YXRlIiwicmVhZHlTdGF0ZSIsIlhNTEh0dHBSZXF1ZXN0IiwiVU5TRU5UIiwic3RhdHVzIiwiTG9uZ1BvbGxpbmdUcmFuc3BvcnQiLCJfc3VwcG9ydHNDcm9zc0RvbWFpbiIsIm5ld1hNTEh0dHBSZXF1ZXN0IiwiX2NvcHlDb250ZXh0IiwiY29udGV4dCIsInhoclNlbmQiLCJwYWNrZXQiLCJ3aXRoQ3JlZGVudGlhbHMiLCJvcGVuIiwiaGVhZGVycyIsImhlYWRlck5hbWUiLCJoYXNPd25Qcm9wZXJ0eSIsInNldFJlcXVlc3RIZWFkZXIiLCJvbmxvYWQiLCJyZXNwb25zZVRleHQiLCJvbkVycm9yIiwic3RhdHVzVGV4dCIsIm9uYWJvcnQiLCJvbmVycm9yIiwiYm9keSIsInNhbWVTdGFjayIsInJlcXVlc3RIZWFkZXJzIiwic3RyaW5naWZ5IiwicmVjZWl2ZWQiLCJleGNlcHRpb24iLCJDYWxsYmFja1BvbGxpbmdUcmFuc3BvcnQiLCJqc29ucCIsImpzb25wU2VuZCIsImhlYWQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwic2NyaXB0IiwiY3JlYXRlRWxlbWVudCIsImNhbGxiYWNrTmFtZSIsInJlbW92ZUNoaWxkIiwiaW5kZXhPZiIsImVuY29kZVVSSUNvbXBvbmVudCIsInNyYyIsImFzeW5jIiwiYXBwZW5kQ2hpbGQiLCJfZmFpbFRyYW5zcG9ydEZuIiwic3RhcnQiLCJsZW5ndGhzIiwianNvbiIsInVybExlbmd0aCIsImVuY29kZVVSSSIsIm1heExlbmd0aCIsIm1heFVSSUxlbmd0aCIsImVudmVsb3BlVG9TZW5kIiwiYmVnaW4iLCJlbmQiLCJqb2luIiwieHgiLCJXZWJTb2NrZXRUcmFuc3BvcnQiLCJfd2ViU29ja2V0U3VwcG9ydGVkIiwiX3dlYlNvY2tldENvbm5lY3RlZCIsIl9zdGlja3lSZWNvbm5lY3QiLCJfY29udGV4dCIsIl9jb25uZWN0aW5nIiwiX2Nvbm5lY3RlZCIsIl9zdWNjZXNzQ2FsbGJhY2siLCJfZm9yY2VDbG9zZSIsImV2ZW50Iiwid2ViU29ja2V0Q2xvc2UiLCJjb2RlIiwib25DbG9zZSIsIl9zYW1lQ29udGV4dCIsIl9zdG9yZUVudmVsb3BlIiwibWVzc2FnZUlkcyIsIm1lc3NhZ2UiLCJlbnZlbG9wZXMiLCJfd2Vic29ja2V0Q29ubmVjdCIsInJlcGxhY2UiLCJwcm90b2NvbCIsIndlYlNvY2tldCIsIldlYlNvY2tldCIsInN0aWNreVJlY29ubmVjdCIsImNvbm5lY3RUaW1lb3V0IiwiY29ubmVjdFRpbWVyIiwib25vcGVuIiwib25PcGVuIiwiX3dhcm4iLCJvbmNsb3NlIiwid3NNZXNzYWdlIiwib25NZXNzYWdlIiwiX3dlYlNvY2tldFNlbmQiLCJ0aW1lb3V0cyIsIl9ub3RpZnlTdWNjZXNzIiwiZm4iLCJfbm90aWZ5RmFpbHVyZSIsIl9zZW5kIiwia2V5IiwiY2xvc2UiLCJ0ZXN0IiwiY2hhbm5lbCIsInJlbW92ZWQiLCJpZHMiLCJzcGxpdCIsIndlYnNvY2tldENvZGUiLCJ3ZWJzb2NrZXRFbmFibGVkIiwiQ29tZXREIiwibmFtZSIsIl9zY2hlZHVsZXIiLCJfbmFtZSIsIl9jcm9zc0RvbWFpbiIsIl90cmFuc3BvcnQiLCJfc3RhdHVzIiwiX21lc3NhZ2VJZCIsIl9jbGllbnRJZCIsIl9iYXRjaCIsIl9tZXNzYWdlUXVldWUiLCJfaW50ZXJuYWxCYXRjaCIsIl9saXN0ZW5lcklkIiwiX2xpc3RlbmVycyIsIl9iYWNrb2ZmIiwiX3NjaGVkdWxlZFNlbmQiLCJfZXh0ZW5zaW9ucyIsIl9hZHZpY2UiLCJfaGFuZHNoYWtlUHJvcHMiLCJfaGFuZHNoYWtlQ2FsbGJhY2siLCJfY2FsbGJhY2tzIiwiX3JlbW90ZUNhbGxzIiwiX3JlZXN0YWJsaXNoIiwiX3VuY29ubmVjdFRpbWUiLCJfaGFuZHNoYWtlTWVzc2FnZXMiLCJfbWV0YUNvbm5lY3QiLCJfY29uZmlnIiwidXNlV29ya2VyU2NoZWR1bGVyIiwiYmFja29mZkluY3JlbWVudCIsIm1heEJhY2tvZmYiLCJsb2dMZXZlbCIsImFwcGVuZE1lc3NhZ2VUeXBlVG9VUkwiLCJ1cmxzIiwiYWR2aWNlIiwiaW50ZXJ2YWwiLCJyZWNvbm5lY3QiLCJtYXhJbnRlcnZhbCIsIl9maWVsZFZhbHVlIiwib2JqZWN0IiwiZGVlcCIsInRhcmdldCIsIm9iamVjdHMiLCJwcm9wTmFtZSIsInByb3AiLCJ0YXJnIiwic291cmNlIiwiX2lzU3RyaW5nIiwiX2lzRnVuY3Rpb24iLCJfemVyb1BhZCIsIk1hdGgiLCJwb3ciLCJfbG9nIiwibGV2ZWwiLCJhcmdzIiwiY29uc29sZSIsImxvZ2dlciIsIm5vdyIsIkRhdGUiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJnZXRTZWNvbmRzIiwiZ2V0TWlsbGlzZWNvbmRzIiwiX2luZm8iLCJfc3BsaXRVUkwiLCJSZWdFeHAiLCJleGVjIiwiX2lzQ3Jvc3NEb21haW4iLCJob3N0QW5kUG9ydCIsImxvY2F0aW9uIiwiaG9zdCIsIl9jb25maWd1cmUiLCJjb25maWd1cmF0aW9uIiwidXJsUGFydHMiLCJ1cmkiLCJhZnRlclVSSSIsInVyaVNlZ21lbnRzIiwibGFzdFNlZ21lbnRJbmRleCIsIm1hdGNoIiwiV29ya2VyIiwiQmxvYiIsIlVSTCIsInN1YnN0cmluZyIsImxhc3RJbmRleE9mIiwiYmxvYiIsImJsb2JVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJ3b3JrZXIiLCJfcmVtb3ZlTGlzdGVuZXIiLCJzdWJzY3JpcHRpb24iLCJzdWJzY3JpcHRpb25zIiwibGlzdGVuZXIiLCJfcmVtb3ZlU3Vic2NyaXB0aW9uIiwiX2NsZWFyU3Vic2NyaXB0aW9ucyIsIl9zZXRTdGF0dXMiLCJuZXdTdGF0dXMiLCJfaXNEaXNjb25uZWN0ZWQiLCJfbmV4dE1lc3NhZ2VJZCIsIl9hcHBseUV4dGVuc2lvbiIsInNjb3BlIiwiY2FsbGJhY2siLCJvdXRnb2luZyIsImhhbmRsZXIiLCJvbkV4dGVuc2lvbkV4Y2VwdGlvbiIsIl9hcHBseUluY29taW5nRXh0ZW5zaW9ucyIsImV4dGVuc2lvbiIsImluY29taW5nIiwiX2FwcGx5T3V0Z29pbmdFeHRlbnNpb25zIiwiX25vdGlmeSIsIm9uTGlzdGVuZXJFeGNlcHRpb24iLCJfbm90aWZ5TGlzdGVuZXJzIiwiY2hhbm5lbFBhcnRzIiwibGFzdCIsImNoYW5uZWxQYXJ0IiwiX2NhbmNlbERlbGF5ZWRTZW5kIiwiX2RlbGF5ZWRTZW5kIiwib3BlcmF0aW9uIiwidGltZSIsIl9oYW5kbGVNZXNzYWdlcyIsIl9oYW5kbGVGYWlsdXJlIiwiZXh0cmFQYXRoIiwibWVzc2FnZUlkIiwiY2xpZW50SWQiLCJyY3ZkTWVzc2FnZXMiLCJjb25kdWl0IiwiZ2V0VHJhbnNwb3J0IiwiY29ubmVjdGlvblR5cGUiLCJfcmVzZXRCYWNrb2ZmIiwiX2luY3JlYXNlQmFja29mZiIsIl9zdGFydEJhdGNoIiwiX2ZsdXNoQmF0Y2giLCJfZW5kQmF0Y2giLCJfY29ubmVjdCIsImJheWV1eE1lc3NhZ2UiLCJfZGVsYXllZENvbm5lY3QiLCJfdXBkYXRlQWR2aWNlIiwibmV3QWR2aWNlIiwiX2Rpc2Nvbm5lY3QiLCJfbm90aWZ5VHJhbnNwb3J0RXhjZXB0aW9uIiwib2xkVHJhbnNwb3J0IiwibmV3VHJhbnNwb3J0Iiwib25UcmFuc3BvcnRFeGNlcHRpb24iLCJfaGFuZHNoYWtlIiwiaGFuZHNoYWtlUHJvcHMiLCJoYW5kc2hha2VDYWxsYmFjayIsInRyYW5zcG9ydFR5cGVzIiwibWluaW11bVZlcnNpb24iLCJzdXBwb3J0ZWRDb25uZWN0aW9uVHlwZXMiLCJfcHV0Q2FsbGJhY2siLCJfZGVsYXllZEhhbmRzaGFrZSIsIl9ub3RpZnlDYWxsYmFjayIsIm9uQ2FsbGJhY2tFeGNlcHRpb24iLCJfZ2V0Q2FsbGJhY2siLCJfaGFuZGxlQ2FsbGJhY2siLCJfaGFuZGxlUmVtb3RlQ2FsbCIsIm9uVHJhbnNwb3J0RmFpbHVyZSIsImZhaWx1cmVJbmZvIiwiZmFpbHVyZUhhbmRsZXIiLCJ0cmFuc3BvcnRzIiwiZ2V0VHJhbnNwb3J0UmVnaXN0cnkiLCJhY3Rpb24iLCJnZXRCYWNrb2ZmUGVyaW9kIiwib2xkVHJhbnNwb3J0VHlwZSIsIm5ld1RyYW5zcG9ydFR5cGUiLCJpbmNyZWFzZUJhY2tvZmZQZXJpb2QiLCJnZXRUaW1lIiwiZXhwaXJhdGlvbiIsInVuY29ubmVjdGVkIiwicmVzZXRCYWNrb2ZmUGVyaW9kIiwiX2hhbmRsZVRyYW5zcG9ydEZhaWx1cmUiLCJfZmFpbEhhbmRzaGFrZSIsIl9oYW5kc2hha2VSZXNwb25zZSIsInN1Y2Nlc3NmdWwiLCJjYXVzZSIsInJlZXN0YWJsaXNoIiwiX2hhbmRzaGFrZUZhaWx1cmUiLCJfbWF0Y2hNZXRhQ29ubmVjdCIsImNvbm5lY3QiLCJfZmFpbENvbm5lY3QiLCJfY29ubmVjdFJlc3BvbnNlIiwiX2Nvbm5lY3RGYWlsdXJlIiwiX2ZhaWxEaXNjb25uZWN0IiwiX2Rpc2Nvbm5lY3RSZXNwb25zZSIsIl9kaXNjb25uZWN0RmFpbHVyZSIsIl9mYWlsU3Vic2NyaWJlIiwiX3N1YnNjcmliZVJlc3BvbnNlIiwiX3N1YnNjcmliZUZhaWx1cmUiLCJfZmFpbFVuc3Vic2NyaWJlIiwiX3Vuc3Vic2NyaWJlUmVzcG9uc2UiLCJfdW5zdWJzY3JpYmVGYWlsdXJlIiwiX2ZhaWxNZXNzYWdlIiwiX21lc3NhZ2VSZXNwb25zZSIsIl9tZXNzYWdlRmFpbHVyZSIsIl9yZWNlaXZlIiwicmVjZWl2ZSIsImZhaWx1cmVNZXNzYWdlIiwiX2hhc1N1YnNjcmlwdGlvbnMiLCJfcmVzb2x2ZVNjb3BlZENhbGxiYWNrIiwiZGVsZWdhdGUiLCJtZXRob2QiLCJfYWRkTGlzdGVuZXIiLCJpc0xpc3RlbmVyIiwicmVnaXN0ZXJUcmFuc3BvcnQiLCJ1bnJlZ2lzdGVyVHJhbnNwb3J0IiwidW5yZWdpc3RlclRyYW5zcG9ydHMiLCJmaW5kVHJhbnNwb3J0IiwiY29uZmlndXJlIiwiaGFuZHNoYWtlIiwiZGlzY29ubmVjdCIsImRpc2Nvbm5lY3RQcm9wcyIsImRpc2Nvbm5lY3RDYWxsYmFjayIsInN0YXJ0QmF0Y2giLCJlbmRCYXRjaCIsImJhdGNoIiwiYWRkTGlzdGVuZXIiLCJyZW1vdmVMaXN0ZW5lciIsImNsZWFyTGlzdGVuZXJzIiwic3Vic2NyaWJlIiwic3Vic2NyaWJlUHJvcHMiLCJzdWJzY3JpYmVDYWxsYmFjayIsInVuc3Vic2NyaWJlIiwidW5zdWJzY3JpYmVQcm9wcyIsInVuc3Vic2NyaWJlQ2FsbGJhY2siLCJyZXN1YnNjcmliZSIsImNsZWFyU3Vic2NyaXB0aW9ucyIsInB1Ymxpc2giLCJjb250ZW50IiwicHVibGlzaFByb3BzIiwicHVibGlzaENhbGxiYWNrIiwicHVibGlzaEJpbmFyeSIsIm1ldGEiLCJBcnJheUJ1ZmZlciIsImV4dCIsImJpbmFyeSIsInJlbW90ZUNhbGwiLCJjYWxsUHJvcHMiLCJlcnJvciIsInJlbW90ZUNhbGxCaW5hcnkiLCJnZXRTdGF0dXMiLCJpc0Rpc2Nvbm5lY3RlZCIsInNldEJhY2tvZmZJbmNyZW1lbnQiLCJwZXJpb2QiLCJnZXRCYWNrb2ZmSW5jcmVtZW50Iiwic2V0TG9nTGV2ZWwiLCJyZWdpc3RlckV4dGVuc2lvbiIsImV4aXN0aW5nRXh0ZW5zaW9uIiwidW5yZWdpc3RlckV4dGVuc2lvbiIsImdldEV4dGVuc2lvbiIsImdldE5hbWUiLCJnZXRDbGllbnRJZCIsIl96ODVFbmNvZGVUYWJsZSIsIl96ODVEZWNvZGVUYWJsZSIsIlo4NSIsImVuY29kZSIsImJ5dGVzIiwiYnVmZmVyIiwiVWludDhBcnJheSIsImJ5dGVMZW5ndGgiLCJyZW1haW5kZXIiLCJwYWRkaW5nIiwidmlldyIsIkRhdGFWaWV3IiwiaXNQYWRkaW5nIiwiZ2V0VWludDgiLCJkaXZpc29yIiwiZmxvb3IiLCJkZWNvZGUiLCJzdHJpbmciLCJwIiwiY2hhcklkeCIsImJ5dGVJZHgiLCJjaGFyQ29kZUF0Iiwic2V0VWludDgiLCJsb2dHZW5lc3lzRXZlbnQiLCJnZXRQYXJlbnRJbmZvIiwiZ2V0Q29va2llIiwiY29va2llQ2hlY2siLCJnZXRWYWx1ZSIsImJhY3RtQ29va2llcyIsImJhY3RtIiwiQ29va2llcyIsImNvb2tpZUV4aXN0cyIsImdldCIsImNvb2tpZSIsImlzTW9iaWxlQ2hhdCIsIl9wYXJlbnRERE8kcGFnZSIsIl9nZXRQYXJlbnRJbmZvIiwicGFyZW50RERPIiwicGFyZW50SHJlZiIsInFzUGFyYW1ldGVycyIsInFzQ2hlY2siLCJpbmNsdWRlcyIsImRkb0NoZWNrIiwicGFnZSIsImF0dHJpYnV0ZXMiLCJjaGF0IiwibW9iaWxlSW5kaWNhdG9yIiwib2NjdENoYXRDb29raWVDaGVjayIsIm9jY3RDaGF0X0xUU0Nvb2tpZUNoZWNrIiwibmF0aXZlQW5kUmVmSUREZWZpbmVkIiwibmF0aXZlQ2hhdENvcnJlY3QiLCJyZWZJRENvcnJlY3QiLCJfZ2V0UGFyZW50SW5mbzIiLCJwYXJlbnRVUkxQYXJ0cyIsImNoYXRRUyIsInNlYXJjaFBhcmFtcyIsImVuc3VyZUNvb2tpZVZhbCIsImNvb2tpZU5hbWUiLCJ2YWx1ZXMiLCJmb3JFYWNoIiwidmFsIiwiQUNTX0xPR0dFUl9VUkwiLCJtb2JpbGVBQ1NMb2dnZXJTZXJ2aWNlIiwibGFiZWwiLCJpbmZvIiwicGFyZW50VXJsIiwiYmFjdG1fZW52U2VsZWN0b3IiLCJlcnJvclBheWxvYWQiLCJkb21haW4iLCJvcmlnaW4iLCJlcnJvclVSTCIsImZldGNoIiwiQWNjZXB0IiwiY3JlZGVudGlhbHMiLCJ0aGVuIiwicmVzIl0sInNvdXJjZVJvb3QiOiIifQ==
} } catch(e){ utag.DB(e) }  }];


    u.send = function(a, b) {
      if (u.ev[a] || u.ev.all !== undefined) {
        //##UTENABLEDEBUG##utag.DB("send:##UTID##");

        var c, d, e, f, i;

        u.data = {
          /* Initialize default tag parameter values here */
          /* Examples: */
          /* "account_id" : "1234567" */
          /* "base_url" : "//insert.your.javascript.library.url.here.js" */
          /* A value mapped to "account_id" or "base_url" in TiQ will replace these default values. */
        };


        /* Start Tag-Scoped Extensions Code */
        /* Please Do Not Edit This Section */
        for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};
        /* End Tag-Scoped Extensions Code */


        /* Start Mapping Code */
        for (d in utag.loader.GV(u.map)) {
          if (b[d] !== undefined && b[d] !== "") {
            e = u.map[d].split(",");
            for (f = 0; f < e.length; f++) {
              u.data[e[f]] = b[d];
            }
          }
        }
        /* End Mapping Code */


        /* Start Tag Sending Code */

          // Insert your tag sending code here.

        /* End Tag Sending Code */


        /* Start Loader Callback Function */
        /* Un-comment the single-line JavaScript comments ("//") to use this Loader callback function. */

        //u.loader_cb = function () {
          //u.initialized = true;
          /* Start Loader Callback Tag Sending Code */

            // Insert your post-Loader tag sending code here.

          /* End Loader Callback Tag Sending Code */
        //};

        /* End Loader Callback Function */


        /* Start Loader Function Call */
        /* Un-comment the single-line JavaScript comments ("//") to use Loader. */

          //if (!u.initialized) {
            //u.loader({"type" : "iframe", "src" : u.data.base_url + c.join(u.data.qsp_delim), "cb" : u.loader_cb, "loc" : "body", "id" : 'utag_70' });
            //u.loader({"type" : "script", "src" : u.data.base_url, "cb" : u.loader_cb, "loc" : "script", "id" : 'utag_70' });
          //} else {
            //u.loader_cb();
          //}

          //u.loader({"type" : "img", "src" : u.data.base_url + c.join(u.data.qsp_delim) });

        /* End Loader Function Call */


        //##UTENABLEDEBUG##utag.DB("send:##UTID##:COMPLETE");
      }
    };
    utag.o[loader].loader.LOAD(id);
  })("70", "bofa.chat");
} catch (error) {
  utag.DB(error);
}
//end tealium universal tag

