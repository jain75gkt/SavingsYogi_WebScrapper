//utag.sync.js - 10/09/2025
const EXO=(function(){const EDGE_CONFIG_IDS={sit:"aafb88ee-2ee1-4230-8dfd-684111667104",qa:"daddec07-6488-4911-be4c-014694f3fdd0",staging:"b03103b8-ad97-4662-8ea8-1f7ce40abc0c",prod:"14f82f5f-3a7a-4f91-ad08-c3ab704b13b4",production:"14f82f5f-3a7a-4f91-ad08-c3ab704b13b4",default:"daddec07-6488-4911-be4c-014694f3fdd0"};const isEnabled=!0;const environment=window.utag_data?.environment?.toLowerCase()||'';const nonce=document.querySelector('script[nonce]')?.nonce||'';const isDev=!['production','prod','staging'].includes(environment);const isVec=document.referrer.includes("experience.adobe");const personalizationDecisions=()=>window?.applyResponse?.responseBody?.handle.filter(event=>event.type==='personalization:decisions').map(event=>event.payload)||[];const defineAlloy=()=>{if(typeof alloy!=="function"){!function(n,o){o.forEach(function(o){n[o]||((n.__alloyNS=n.__alloyNS||[]).push(o),n[o]=function(){var u=arguments;return new Promise(function(i,l){n[o].q.push([i,l,u])})},n[o].q=[])})}(window,["alloy"])}};const configWebsdk=()=>{const datastreamId=EDGE_CONFIG_IDS[environment]||EDGE_CONFIG_IDS.default;alloy("configure",{datastreamId,orgId:"1BAA15F354F731E60A4C98A4@AdobeOrg"}).catch(error=>console.error(`Alloy configuration error: ${error.message}`))}
const applyresponse=()=>{alloy("applyResponse",{renderDecisions:!0,responseHeaders:applyResponse.responseHeaders,responseBody:applyResponse.responseBody}).catch(error=>console.error(`Alloy applyResponse error: ${error.message}`))};window.addEventListener('load',function(){if(window.utag_data?.page_type==='NATIVE'){const exoRenderedEvent=new Event("exoRendered");document.dispatchEvent(exoRenderedEvent)}});const loadWebsdk=()=>{const tealiumPath=window.utag_data?.tealium_js_path;if(tealiumPath){const script=document.createElement('script');script.type='text/javascript';script.async=!0;script.src=tealiumPath.includes('public-site')?tealiumPath.replace("public-site/utag.js","alloy/alloy.js"):tealiumPath.replace("main/utag.js","alloy/alloy.js");script.setAttribute('nonce',nonce);document.head.appendChild(script)}};const loadPropertyToken=()=>{if(!isVec)return;const script=Object.assign(document.createElement("script"),{type:"text/javascript",async:!0,nonce:nonce,text:`function targetPageParams() {return { "at_property": "44f399a4-dff8-6708-f0a2-4828ee7f9a0d" };};`});document.head.appendChild(script)};const prehiding=()=>{if(document.location.href.includes("adobe_authoring_enabled")||!document.head)return;const style=Object.assign(document.createElement("style"),{id:"alloy-prehiding",innerText:"body { opacity: 0 !important }"});document.head.appendChild(style);setTimeout(()=>style.parentNode?.removeChild(style),3000)};const hasDecisions=()=>{const decisions=personalizationDecisions();return Array.isArray(decisions)&&decisions[0]?.length>0}
const init=()=>{if(!isVec){prehiding()}else{loadPropertyToken()}
defineAlloy();loadWebsdk();configWebsdk();applyresponse()};return{init:init,isEnabled:isEnabled,isVec:isVec,decisions:hasDecisions()}})();if((EXO.isEnabled&&EXO.decisions&&window.utag_data)||EXO.isVec){EXO.init()}