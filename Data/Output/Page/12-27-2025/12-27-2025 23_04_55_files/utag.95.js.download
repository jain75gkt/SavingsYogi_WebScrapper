//tealium universal tag - utag.95 ut4.0.202511210113, Copyright 2025 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){var u={};utag.o[loader].sender[id]=u;if(utag===undefined){utag={};}if(utag.ut===undefined){utag.ut={};}if(utag.ut.loader===undefined){u.loader=function(o){var a,b,c,l;a=document;if(o.type==="iframe"){b=a.createElement("iframe");b.setAttribute("height","1");b.setAttribute("width","1");b.setAttribute("style","display:none");b.setAttribute("src",o.src);}else if(o.type==="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";b.src=o.src;}if(o.id){b.id=o.id;}if(typeof o.cb==="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb();},false);}else{b.onreadystatechange=function(){if(this.readyState==="complete"||this.readyState==="loaded"){this.onreadystatechange=null;o.cb();}};}}l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l==="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}};}else{u.loader=utag.ut.loader;}
u.ev={'view':1};u.initialized=false;u.map={};u.extend=[function(a,b){try{if(1){(function(){const CHAT_LOCALHOST="http://localhost:3005";const IR_ENV={DEV:"dev4",CERT:"sit1a"};const MERRILL_DOMAINS=["merrilledgesit1.com","merrilledgesit2.com","fssit1.ml.com","fssit2.ml.com","benefitssit1.ml.com","benefitssit2.ml.com","ml.com","merrilledge.com",];const BOFA_DOMAINS=["dev1.","dev2.","dev3.","dev4.","devflex.","devps.","qa5.","qaps.","cert1.","cert2.","pt1.","pt2.","preview1.","preview2.","review1.","review2.","dev1-helix.","dev2-helix.","dev3-helix.","dev4-helix.","devflex1-helix.","pt1-helix.","pt2-helix.","pssit-helix.","preview1-helix.","preview2-helix.","review1-helix.","review2-helix.","sit1a-helix.","sit2a-helix.","sit3-helix.","sitbc-helix."];const PROMOTION_DOMAIN_MAPPINGS={dev4:"promotions-dev",sit1a:"promotions-stg"}
const DOMAIN_MAPPINGS={sit2:"https://www-sit2a-helix.ecnp.bankofamerica.com",sit1:"https://www-sit1a-helix.ecnp.bankofamerica.com",preview1:"https://www-sit2a-helix.ecnp.bankofamerica.com",preview2:"https://www-sit1a-helix.ecnp.bankofamerica.com",};const DomainFactory={createDomainResolver(){return{isBactmEnvSelectorInProduction:function(){return window.bactm_envSelector==="prod"},isPageSparta:function(){return window.location.host.includes("sparta.");},isPageMerrill:function(){return window.location.host.includes(".ml")||window.location.host.includes(".merrilledge")},isPageInternal:function(){const href=window.location.href;return href.includes("//ghrsiebel")||href.includes("//aconline")||href.includes("//askhr");},parseQueryParams:function(name){const url=window.location.href;const regex=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)");const results=regex.exec(url);return results&&results[2]?decodeURIComponent(results[2]):"";},getLocalhostDomain:function(){return CHAT_LOCALHOST;},getProductionDomain:function(){return"https://www.bankofamerica.com";},getMerrillDomain:function(hostname){const domain=MERRILL_DOMAINS.find(function(d){return hostname.includes(d);});return domain?"https://chatui."+domain:"https://chatui-"+IR_ENV.DEV+".ml.com";},getInternalDomain:function(hostname){const internalEnv=hostname.includes("-uat")||hostname.includes("qa.")?IR_ENV.CERT:IR_ENV.DEV;return"https://www-"+internalEnv+"-helix.ecnp.bankofamerica.com";},getSpartaDomain:function(){const spartaEnv=this.parseQueryParams("environment");return spartaEnv.startsWith("https")?spartaEnv:"https://www-"+IR_ENV.DEV+"-helix.ecnp.bankofamerica.com";},getBofaDomain:function(hostname){for(var key in DOMAIN_MAPPINGS){if(hostname.includes(key))return DOMAIN_MAPPINGS[key];}
const domain=BOFA_DOMAINS.find(function(d){return hostname.includes(d);});if(domain){return"https://www-"+domain+"ecnp.bankofamerica.com";}
const promotion_domain=Object.keys(PROMOTION_DOMAIN_MAPPINGS).find(function(d){return hostname.includes(PROMOTION_DOMAIN_MAPPINGS[d]);})
if(promotion_domain){return"https://www-"+promotion_domain+"-helix.ecnp.bankofamerica.com";}
return"https://www-"+IR_ENV.CERT+"-helix.ecnp.bankofamerica.com";},getChatWidgetDomain(){const hostname=window.location.hostname.toLowerCase();const bactmEnvSelectorInProduction=this.isBactmEnvSelectorInProduction();if(hostname.includes("localhost"))return this.getLocalhostDomain();if(bactmEnvSelectorInProduction)return this.getProductionDomain();if(this.isPageMerrill())return this.getMerrillDomain(hostname);if(this.isPageInternal())return this.getInternalDomain(hostname);if(this.isPageSparta())return this.getSpartaDomain();return this.getBofaDomain(hostname);}};}};const WidgetLoaderFactory={createWidgetLoader(){const widgetLoader={placeholder:"chat-placeholder",widget:{version:"1.0.0",loaderVersion:"6.0.9",name:"gt-chat-widget"},config:{id:"loader-script",widgetName:"chat",url:"/spa/widgets/loader/",dataset:{widgetName:"chat"}}};return{appendChatPlaceholder:function(){const $div=document.createElement("div");$div.id=widgetLoader.placeholder;document.body.appendChild($div);},fetchWidgetLoader:function(domainResolver){const config=widgetLoader.widget;const $script=document.createElement("script");$script.type="text/javascript";$script.id=widgetLoader.config.id;if(widgetLoader.config.dataset){$script.dataset.widgetName=widgetLoader.config.dataset.widgetName;}
const domain=domainResolver.getChatWidgetDomain();$script.src=domain+widgetLoader.config.url+config.loaderVersion+"/index.js";$script.onload=function(){window.sparta.chat={};window.sparta.chat.widgetLoader=window.sparta.widgetLoader[config.loaderVersion];this.fetchWidgetLoaderSuccessful();}.bind(this);$script.onerror=this.fetchWidgetLoaderError;document.body.appendChild($script);},fetchWidgetLoaderSuccessful:function(){const loaderVersion=widgetLoader.widget.loaderVersion;const v6Config=this.getV6WidgetConfig();v6Config.options.onError=function(){console.error("Global Tenants gt-chat-widget error loading widget");}
try{window.sparta.widgetLoader[loaderVersion].load(v6Config);}catch(e){console.error("Global Tenants gt-chat-widget error loading widget",e);}},fetchWidgetLoaderError:function(){console.error("Failed to load widget loader script.");},isSpanish:function(){const spanishIdentifiers=["es-us","es","spanish","espanol"];var language=window.digitalData&&window.digitalData.page&&window.digitalData.page.pageInfo&&Array.isArray(window.digitalData.page.pageInfo)&&window.digitalData.page.pageInfo.length>0?window.digitalData.page.pageInfo[0].language:"";if(language===""&&typeof window.fsdNavClientOptions!=="undefined"&&window.fsdNavClientOptions){language=window.fsdNavClientOptions.locale;}
if(language===""&&window.digitalData.page&&window.digitalData.page.attributes&&window.digitalData.page.attributes.chat){language=window.digitalData.page.attributes.chat.LANGUAGE;}
let spanishLang=false;if(typeof language==="string"&&spanishIdentifiers.indexOf(language.toLowerCase())>-1){spanishLang=true;}
return spanishLang?"es":"en";},getV6WidgetConfig:function(){const domainResolver=DomainFactory.createDomainResolver();const domain=domainResolver.getChatWidgetDomain();return{name:widgetLoader.widget.name,version:widgetLoader.widget.version,path:domain,spinner:false,language:this.isSpanish(),container:widgetLoader.placeholder,loaderVersion:widgetLoader.widget.loaderVersion,options:{data:{v6:true,domain:domain},withoutCredentials:true,},};}};}};(function(){const domainResolver=DomainFactory.createDomainResolver();const widgetLoader=WidgetLoaderFactory.createWidgetLoader();widgetLoader.appendChatPlaceholder();widgetLoader.fetchWidgetLoader(domainResolver);})();})();}}catch(e){utag.DB(e)}}];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){var c,d,e,f,i;u.data={};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){u.data[e[f]]=b[d];}}}
}};utag.o[loader].loader.LOAD(id);})("95","bofa.main");}catch(error){utag.DB(error);}
